{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Consul","url":"/consul"},{"title":"Documentation","url":"/consul/docs","isCurrentPage":false},{"title":"Architecture","url":"/consul/docs/architecture"},{"title":"Consul at Scale","url":"/consul/docs/architecture/scale","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Consul Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Consul","fullPath":"/consul","theme":"consul"},{"title":"Install","fullPath":"/consul/install"},{"title":"Tutorials","fullPath":"/consul/tutorials"},{"title":"Documentation","fullPath":"/consul/docs"},{"title":"API","fullPath":"/consul/api-docs"},{"title":"CLI","fullPath":"/consul/commands"}],"showFilterInput":false,"title":"Consul","visuallyHideTitle":true},{"backToLinkProps":{"text":"Consul Home","href":"/consul"},"levelButtonProps":{"levelUpButtonText":"Consul Home"},"menuItems":[{"title":"Documentation","fullPath":"/consul/docs","theme":"consul"},{"title":"What is Consul?","path":"intro","filePath":"../content/docs/intro/index.mdx","fullPath":"/consul/docs/intro","id":"sidebar-nav-item-0"},{"title":"Why Choose Consul?","routes":[{"title":"Overview","path":"consul-vs-other","filePath":"../content/docs/consul-vs-other/index.mdx","fullPath":"/consul/docs/consul-vs-other","id":"sidebar-nav-item-2"},{"title":"Service Meshes","path":"consul-vs-other/service-mesh-compare","filePath":"../content/docs/consul-vs-other/service-mesh-compare.mdx","fullPath":"/consul/docs/consul-vs-other/service-mesh-compare","id":"sidebar-nav-item-3"},{"title":"DNS Tools","path":"consul-vs-other/dns-tools-compare","filePath":"../content/docs/consul-vs-other/dns-tools-compare.mdx","fullPath":"/consul/docs/consul-vs-other/dns-tools-compare","id":"sidebar-nav-item-4"},{"title":"Configuration Management Tools","path":"consul-vs-other/config-management-compare","filePath":"../content/docs/consul-vs-other/config-management-compare.mdx","fullPath":"/consul/docs/consul-vs-other/config-management-compare","id":"sidebar-nav-item-5"},{"title":"API Gateways","path":"consul-vs-other/api-gateway-compare","filePath":"../content/docs/consul-vs-other/api-gateway-compare.mdx","fullPath":"/consul/docs/consul-vs-other/api-gateway-compare","id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-1"},{"title":"Core Concepts","routes":[{"title":"Service Discovery","path":"concepts/service-discovery","filePath":"../content/docs/concepts/service-discovery.mdx","fullPath":"/consul/docs/concepts/service-discovery","id":"sidebar-nav-item-8"},{"title":"Service Mesh","path":"concepts/service-mesh","filePath":"../content/docs/concepts/service-mesh.mdx","fullPath":"/consul/docs/concepts/service-mesh","id":"sidebar-nav-item-9"}],"id":"sidebar-nav-item-7"},{"title":"Get Started","routes":[{"title":"Install Consul","path":"install","filePath":"../content/docs/install/index.mdx","fullPath":"/consul/docs/install","id":"sidebar-nav-item-11"},{"title":"Learn HCP Consul","href":"https://developer.hashicorp.com/consul/tutorials/get-started-hcp","id":"sidebar-nav-item-12"},{"title":"Learn Consul on Kubernetes","href":"https://developer.hashicorp.com/consul/tutorials/get-started-kubernetes","id":"sidebar-nav-item-13"},{"title":"Learn Consul on VMs","href":"https://developer.hashicorp.com/consul/tutorials/get-started-vms","id":"sidebar-nav-item-14"},{"title":"Consul Agent","href":null,"fullPath":"/consul/docs/agent","id":"sidebar-nav-item-15","path":"/docs/agent"},{"title":"Glossary","path":"install/glossary","filePath":"../content/docs/install/glossary.mdx","fullPath":"/consul/docs/install/glossary","id":"sidebar-nav-item-16"},{"title":"Required Ports","path":"install/ports","filePath":"../content/docs/install/ports.mdx","fullPath":"/consul/docs/install/ports","id":"sidebar-nav-item-17"},{"title":"Bootstrapping a Datacenter","path":"install/bootstrapping","filePath":"../content/docs/install/bootstrapping.mdx","fullPath":"/consul/docs/install/bootstrapping","id":"sidebar-nav-item-18"},{"title":"Cloud Auto-join","path":"install/cloud-auto-join","filePath":"../content/docs/install/cloud-auto-join.mdx","fullPath":"/consul/docs/install/cloud-auto-join","id":"sidebar-nav-item-19"},{"title":"Server Performance","path":"install/performance","filePath":"../content/docs/install/performance.mdx","fullPath":"/consul/docs/install/performance","id":"sidebar-nav-item-20"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-21","path":"/docs/k8s"}],"id":"sidebar-nav-item-10"},{"title":"Architecture","routes":[{"title":"Overview","path":"architecture","filePath":"../content/docs/architecture/index.mdx","fullPath":"/consul/docs/architecture","id":"sidebar-nav-item-23"},{"title":"v1 Catalog","path":"architecture/catalog","filePath":"../content/docs/architecture/catalog.mdx","fullPath":"/consul/docs/architecture/catalog","id":"sidebar-nav-item-24"},{"title":"v2 architecture","routes":[{"title":"Overview","path":"architecture/v2","filePath":"../content/docs/architecture/v2/index.mdx","fullPath":"/consul/docs/architecture/v2","id":"sidebar-nav-item-26"},{"title":"Catalog","path":"architecture/v2/catalog","filePath":"../content/docs/architecture/v2/catalog.mdx","fullPath":"/consul/docs/architecture/v2/catalog","id":"sidebar-nav-item-27"},{"title":"Resource groups","path":"architecture/v2/groups","filePath":"../content/docs/architecture/v2/groups.mdx","fullPath":"/consul/docs/architecture/v2/groups","id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-25"},{"title":"Improving Consul Resilience","path":"architecture/improving-consul-resilience","filePath":"../content/docs/architecture/improving-consul-resilience.mdx","fullPath":"/consul/docs/architecture/improving-consul-resilience","id":"sidebar-nav-item-29"},{"title":"Anti-Entropy","path":"architecture/anti-entropy","filePath":"../content/docs/architecture/anti-entropy.mdx","fullPath":"/consul/docs/architecture/anti-entropy","id":"sidebar-nav-item-30"},{"title":"Consensus Protocol","path":"architecture/consensus","filePath":"../content/docs/architecture/consensus.mdx","fullPath":"/consul/docs/architecture/consensus","id":"sidebar-nav-item-31"},{"title":"Gossip Protocol","path":"architecture/gossip","filePath":"../content/docs/architecture/gossip.mdx","fullPath":"/consul/docs/architecture/gossip","id":"sidebar-nav-item-32"},{"title":"Jepsen Testing","path":"architecture/jepsen","filePath":"../content/docs/architecture/jepsen.mdx","fullPath":"/consul/docs/architecture/jepsen","id":"sidebar-nav-item-33"},{"title":"Network Coordinates","path":"architecture/coordinates","filePath":"../content/docs/architecture/coordinates.mdx","fullPath":"/consul/docs/architecture/coordinates","id":"sidebar-nav-item-34"},{"title":"Consul at Scale","path":"architecture/scale","filePath":"../content/docs/architecture/scale.mdx","fullPath":"/consul/docs/architecture/scale","id":"sidebar-nav-item-35"}],"id":"sidebar-nav-item-22"},{"divider":true,"id":"sidebar-nav-item-36"},{"title":"Release Notes","routes":[{"title":"Overview","path":"release-notes","filePath":"../content/docs/release-notes/index.mdx","fullPath":"/consul/docs/release-notes","id":"sidebar-nav-item-38"},{"title":"Consul","routes":[{"title":"v1.18.x","path":"release-notes/consul/v1_18_x","filePath":"../content/docs/release-notes/consul/v1_18_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_18_x","id":"sidebar-nav-item-40"},{"title":"v1.17.x","path":"release-notes/consul/v1_17_x","filePath":"../content/docs/release-notes/consul/v1_17_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_17_x","id":"sidebar-nav-item-41"},{"title":"v1.16.x","path":"release-notes/consul/v1_16_x","filePath":"../content/docs/release-notes/consul/v1_16_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_16_x","id":"sidebar-nav-item-42"},{"title":"v1.15.x","path":"release-notes/consul/v1_15_x","filePath":"../content/docs/release-notes/consul/v1_15_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_15_x","id":"sidebar-nav-item-43"},{"title":"v1.14.x","path":"release-notes/consul/v1_14_x","filePath":"../content/docs/release-notes/consul/v1_14_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_14_x","id":"sidebar-nav-item-44"},{"title":"v1.13.x","path":"release-notes/consul/v1_13_x","filePath":"../content/docs/release-notes/consul/v1_13_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_13_x","id":"sidebar-nav-item-45"},{"title":"v1.12.x","path":"release-notes/consul/v1_12_x","filePath":"../content/docs/release-notes/consul/v1_12_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_12_x","id":"sidebar-nav-item-46"},{"title":"v1.11.x","path":"release-notes/consul/v1_11_x","filePath":"../content/docs/release-notes/consul/v1_11_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_11_x","id":"sidebar-nav-item-47"},{"title":"v1.10.x","path":"release-notes/consul/v1_10_x","filePath":"../content/docs/release-notes/consul/v1_10_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_10_x","id":"sidebar-nav-item-48"},{"title":"v1.9.x","path":"release-notes/consul/v1_9_x","filePath":"../content/docs/release-notes/consul/v1_9_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_9_x","id":"sidebar-nav-item-49"}],"id":"sidebar-nav-item-39"},{"title":"Consul K8s","routes":[{"title":"v1.4.x","path":"release-notes/consul-k8s/v1_4_x","filePath":"../content/docs/release-notes/consul-k8s/v1_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_4_x","id":"sidebar-nav-item-51"},{"title":"v1.3.x","path":"release-notes/consul-k8s/v1_3_x","filePath":"../content/docs/release-notes/consul-k8s/v1_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_3_x","id":"sidebar-nav-item-52"},{"title":"v1.2.x","path":"release-notes/consul-k8s/v1_2_x","filePath":"../content/docs/release-notes/consul-k8s/v1_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_2_x","id":"sidebar-nav-item-53"},{"title":"v1.1.x","path":"release-notes/consul-k8s/v1_1_x","filePath":"../content/docs/release-notes/consul-k8s/v1_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_1_x","id":"sidebar-nav-item-54"},{"title":"v1.0.x","path":"release-notes/consul-k8s/v1_0_x","filePath":"../content/docs/release-notes/consul-k8s/v1_0_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_0_x","id":"sidebar-nav-item-55"},{"title":"v0.49.x","path":"release-notes/consul-k8s/v0_49_x","filePath":"../content/docs/release-notes/consul-k8s/v0_49_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_49_x","id":"sidebar-nav-item-56"},{"title":"v0.48.x","path":"release-notes/consul-k8s/v0_48_x","filePath":"../content/docs/release-notes/consul-k8s/v0_48_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_48_x","id":"sidebar-nav-item-57"},{"title":"v0.47.x","path":"release-notes/consul-k8s/v0_47_x","filePath":"../content/docs/release-notes/consul-k8s/v0_47_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_47_x","id":"sidebar-nav-item-58"}],"id":"sidebar-nav-item-50"},{"title":"API Gateway for Kubernetes","routes":[{"title":"v0.5.x","path":"release-notes/consul-api-gateway/v0_5_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_5_x","id":"sidebar-nav-item-60"},{"title":"v0.4.x","path":"release-notes/consul-api-gateway/v0_4_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_4_x","id":"sidebar-nav-item-61"},{"title":"v0.3.x","path":"release-notes/consul-api-gateway/v0_3_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_3_x","id":"sidebar-nav-item-62"},{"title":"v0.2.x","path":"release-notes/consul-api-gateway/v0_2_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_2_x","id":"sidebar-nav-item-63"},{"title":"v0.1.x","path":"release-notes/consul-api-gateway/v0_1_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_1_x","id":"sidebar-nav-item-64"}],"id":"sidebar-nav-item-59"},{"title":"Consul ECS","routes":[{"title":"v0.7.x","path":"release-notes/consul-ecs/v0_7_x","filePath":"../content/docs/release-notes/consul-ecs/v0_7_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_7_x","id":"sidebar-nav-item-66"},{"title":"v0.5.x","path":"release-notes/consul-ecs/v0_5_x","filePath":"../content/docs/release-notes/consul-ecs/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_5_x","id":"sidebar-nav-item-67"},{"title":"v0.4.x","path":"release-notes/consul-ecs/v0_4_x","filePath":"../content/docs/release-notes/consul-ecs/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_4_x","id":"sidebar-nav-item-68"},{"title":"v0.3.x","path":"release-notes/consul-ecs/v0_3_x","filePath":"../content/docs/release-notes/consul-ecs/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_3_x","id":"sidebar-nav-item-69"},{"title":"v0.2.x","path":"release-notes/consul-ecs/v0_2_x","filePath":"../content/docs/release-notes/consul-ecs/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_2_x","id":"sidebar-nav-item-70"}],"id":"sidebar-nav-item-65"},{"title":"Consul Terraform Sync","routes":[{"title":"v0.6.x","path":"release-notes/consul-terraform-sync/v0_6_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_6_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_6_x","id":"sidebar-nav-item-72"},{"title":"v0.5.x","path":"release-notes/consul-terraform-sync/v0_5_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_5_x","id":"sidebar-nav-item-73"}],"id":"sidebar-nav-item-71"}],"id":"sidebar-nav-item-37"},{"title":"Upgrade","routes":[{"title":"Overview","path":"upgrading","filePath":"../content/docs/upgrading/index.mdx","fullPath":"/consul/docs/upgrading","id":"sidebar-nav-item-75"},{"title":"Compatibility Promise","path":"upgrading/compatibility","filePath":"../content/docs/upgrading/compatibility.mdx","fullPath":"/consul/docs/upgrading/compatibility","id":"sidebar-nav-item-76"},{"title":"Specific Version Details","path":"upgrading/upgrade-specific","filePath":"../content/docs/upgrading/upgrade-specific.mdx","fullPath":"/consul/docs/upgrading/upgrade-specific","id":"sidebar-nav-item-77"},{"title":"Upgrade Instructions","routes":[{"title":"Overview","path":"upgrading/instructions","filePath":"../content/docs/upgrading/instructions/index.mdx","fullPath":"/consul/docs/upgrading/instructions","id":"sidebar-nav-item-79"},{"title":"General Process","path":"upgrading/instructions/general-process","filePath":"../content/docs/upgrading/instructions/general-process.mdx","fullPath":"/consul/docs/upgrading/instructions/general-process","id":"sidebar-nav-item-80"},{"title":"Upgrading to Latest 1.2.x","path":"upgrading/instructions/upgrade-to-1-2-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-2-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-2-x","id":"sidebar-nav-item-81"},{"title":"Upgrading to Latest 1.6.x","path":"upgrading/instructions/upgrade-to-1-6-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-6-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-6-x","id":"sidebar-nav-item-82"},{"title":"Upgrading to Latest 1.8.x","path":"upgrading/instructions/upgrade-to-1-8-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-8-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-8-x","id":"sidebar-nav-item-83"},{"title":"Upgrading to Latest 1.10.x","path":"upgrading/instructions/upgrade-to-1-10-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-10-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-10-x","id":"sidebar-nav-item-84"}],"id":"sidebar-nav-item-78"}],"id":"sidebar-nav-item-74"},{"divider":true,"id":"sidebar-nav-item-85"},{"title":"Services","routes":[{"title":"Overview","path":"services/services","filePath":"../content/docs/services/services.mdx","fullPath":"/consul/docs/services/services","id":"sidebar-nav-item-87"},{"title":"Usage","routes":[{"title":"Define services","path":"services/usage/define-services","filePath":"../content/docs/services/usage/define-services.mdx","fullPath":"/consul/docs/services/usage/define-services","id":"sidebar-nav-item-89"},{"title":"Define health checks","path":"services/usage/checks","filePath":"../content/docs/services/usage/checks.mdx","fullPath":"/consul/docs/services/usage/checks","id":"sidebar-nav-item-90"},{"title":"Register services and health checks","path":"services/usage/register-services-checks","filePath":"../content/docs/services/usage/register-services-checks.mdx","fullPath":"/consul/docs/services/usage/register-services-checks","id":"sidebar-nav-item-91"}],"id":"sidebar-nav-item-88"},{"title":"Discover services with DNS","routes":[{"title":"Overview","path":"services/discovery/dns-overview","filePath":"../content/docs/services/discovery/dns-overview.mdx","fullPath":"/consul/docs/services/discovery/dns-overview","id":"sidebar-nav-item-93"},{"title":"Configure DNS behavior","path":"services/discovery/dns-configuration","filePath":"../content/docs/services/discovery/dns-configuration.mdx","fullPath":"/consul/docs/services/discovery/dns-configuration","id":"sidebar-nav-item-94"},{"title":"Perform static DNS lookups","path":"services/discovery/dns-static-lookups","filePath":"../content/docs/services/discovery/dns-static-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-static-lookups","id":"sidebar-nav-item-95"},{"title":"Enable dynamic DNS lookups","path":"services/discovery/dns-dynamic-lookups","filePath":"../content/docs/services/discovery/dns-dynamic-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-dynamic-lookups","id":"sidebar-nav-item-96"}],"id":"sidebar-nav-item-92"},{"title":"Configuration","routes":[{"title":"Overview","path":"services/configuration/services-configuration-overview","filePath":"../content/docs/services/configuration/services-configuration-overview.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-overview","id":"sidebar-nav-item-98"},{"title":"Services","path":"services/configuration/services-configuration-reference","filePath":"../content/docs/services/configuration/services-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-reference","id":"sidebar-nav-item-99"},{"title":"Health checks","path":"services/configuration/checks-configuration-reference","filePath":"../content/docs/services/configuration/checks-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/checks-configuration-reference","id":"sidebar-nav-item-100"},{"title":"Service defaults","href":null,"fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-101","path":"connect/config-entries/service-defaults"}],"id":"sidebar-nav-item-97"}],"id":"sidebar-nav-item-86"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"connect","filePath":"../content/docs/connect/index.mdx","fullPath":"/consul/docs/connect","id":"sidebar-nav-item-103"},{"title":"How Service Mesh Works","path":"connect/connect-internals","filePath":"../content/docs/connect/connect-internals.mdx","fullPath":"/consul/docs/connect/connect-internals","id":"sidebar-nav-item-104"},{"title":"Configuration","path":"connect/configuration","filePath":"../content/docs/connect/configuration.mdx","fullPath":"/consul/docs/connect/configuration","id":"sidebar-nav-item-105"},{"title":"Configuration entries","routes":[{"title":"Overview","path":"connect/config-entries","filePath":"../content/docs/connect/config-entries/index.mdx","fullPath":"/consul/docs/connect/config-entries","id":"sidebar-nav-item-107"},{"title":"API gateway","path":"connect/config-entries/api-gateway","filePath":"../content/docs/connect/config-entries/api-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/api-gateway","id":"sidebar-nav-item-108"},{"title":"HTTP route","path":"connect/config-entries/http-route","filePath":"../content/docs/connect/config-entries/http-route.mdx","fullPath":"/consul/docs/connect/config-entries/http-route","id":"sidebar-nav-item-109"},{"title":"TCP route","path":"connect/config-entries/tcp-route","filePath":"../content/docs/connect/config-entries/tcp-route.mdx","fullPath":"/consul/docs/connect/config-entries/tcp-route","id":"sidebar-nav-item-110"},{"title":"Inline certificate","path":"connect/config-entries/inline-certificate","filePath":"../content/docs/connect/config-entries/inline-certificate.mdx","fullPath":"/consul/docs/connect/config-entries/inline-certificate","id":"sidebar-nav-item-111"},{"title":"Ingress gateway","path":"connect/config-entries/ingress-gateway","filePath":"../content/docs/connect/config-entries/ingress-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-112"},{"title":"JWT Provider","path":"connect/config-entries/jwt-provider","filePath":"../content/docs/connect/config-entries/jwt-provider.mdx","fullPath":"/consul/docs/connect/config-entries/jwt-provider","id":"sidebar-nav-item-113"},{"title":"Mesh","path":"connect/config-entries/mesh","filePath":"../content/docs/connect/config-entries/mesh.mdx","fullPath":"/consul/docs/connect/config-entries/mesh","id":"sidebar-nav-item-114"},{"title":"Exported services","path":"connect/config-entries/exported-services","filePath":"../content/docs/connect/config-entries/exported-services.mdx","fullPath":"/consul/docs/connect/config-entries/exported-services","id":"sidebar-nav-item-115"},{"title":"Proxy defaults","path":"connect/config-entries/proxy-defaults","filePath":"../content/docs/connect/config-entries/proxy-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-116"},{"title":"Sameness Group","path":"connect/config-entries/sameness-group","filePath":"../content/docs/connect/config-entries/sameness-group.mdx","fullPath":"/consul/docs/connect/config-entries/sameness-group","id":"sidebar-nav-item-117"},{"title":"Service Defaults","path":"connect/config-entries/service-defaults","filePath":"../content/docs/connect/config-entries/service-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-118"},{"title":"Service intentions","path":"connect/config-entries/service-intentions","filePath":"../content/docs/connect/config-entries/service-intentions.mdx","fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-119"},{"title":"Service resolver","path":"connect/config-entries/service-resolver","filePath":"../content/docs/connect/config-entries/service-resolver.mdx","fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-120"},{"title":"Service router","path":"connect/config-entries/service-router","filePath":"../content/docs/connect/config-entries/service-router.mdx","fullPath":"/consul/docs/connect/config-entries/service-router","id":"sidebar-nav-item-121"},{"title":"Service splitter","path":"connect/config-entries/service-splitter","filePath":"../content/docs/connect/config-entries/service-splitter.mdx","fullPath":"/consul/docs/connect/config-entries/service-splitter","id":"sidebar-nav-item-122"},{"title":"Terminating gateway","path":"connect/config-entries/terminating-gateway","filePath":"../content/docs/connect/config-entries/terminating-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/terminating-gateway","id":"sidebar-nav-item-123"},{"title":"Control plane request limit","path":"connect/config-entries/control-plane-request-limit","filePath":"../content/docs/connect/config-entries/control-plane-request-limit.mdx","fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-124"}],"id":"sidebar-nav-item-106"},{"title":"Proxies","routes":[{"title":"Overview","path":"connect/proxies","filePath":"../content/docs/connect/proxies/index.mdx","fullPath":"/consul/docs/connect/proxies","id":"sidebar-nav-item-126"},{"title":"Deploy service mesh proxies","path":"connect/proxies/deploy-service-mesh-proxies","filePath":"../content/docs/connect/proxies/deploy-service-mesh-proxies.mdx","fullPath":"/consul/docs/connect/proxies/deploy-service-mesh-proxies","id":"sidebar-nav-item-127"},{"title":"Deploy sidecar services","path":"connect/proxies/deploy-sidecar-services","filePath":"../content/docs/connect/proxies/deploy-sidecar-services.mdx","fullPath":"/consul/docs/connect/proxies/deploy-sidecar-services","id":"sidebar-nav-item-128"},{"title":"Envoy Extensions","routes":[{"title":"Overview","path":"connect/proxies/envoy-extensions","filePath":"../content/docs/connect/proxies/envoy-extensions/index.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions","id":"sidebar-nav-item-130"},{"title":"Usage","routes":[{"title":"Delegate authorization to Apigee","path":"connect/proxies/envoy-extensions/usage/apigee-ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz","id":"sidebar-nav-item-132"},{"title":"Delegate authorization to external services","path":"connect/proxies/envoy-extensions/usage/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/ext-authz","id":"sidebar-nav-item-133"},{"title":"Run Lua scripts in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lua","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lua.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lua","id":"sidebar-nav-item-134"},{"title":"Invoke Lambda functions in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lambda","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lambda.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lambda","id":"sidebar-nav-item-135"},{"title":"Send access logs to OpenTelemetry collector service","path":"connect/proxies/envoy-extensions/usage/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/otel-access-logging","id":"sidebar-nav-item-136"},{"title":"Configure Envoy proxy properties","path":"connect/proxies/envoy-extensions/usage/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/property-override","id":"sidebar-nav-item-137"},{"title":"Run WebAssembly plug-ins in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/wasm","id":"sidebar-nav-item-138"}],"id":"sidebar-nav-item-131"},{"title":"Configuration","routes":[{"title":"External authorization","path":"connect/proxies/envoy-extensions/configuration/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/ext-authz","id":"sidebar-nav-item-140"},{"title":"OpenTelemetry Access Logging","path":"connect/proxies/envoy-extensions/configuration/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging","id":"sidebar-nav-item-141"},{"title":"Property override","path":"connect/proxies/envoy-extensions/configuration/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/property-override","id":"sidebar-nav-item-142"},{"title":"WebAssembly","path":"connect/proxies/envoy-extensions/configuration/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/wasm","id":"sidebar-nav-item-143"}],"id":"sidebar-nav-item-139"}],"id":"sidebar-nav-item-129"},{"title":"Proxy integration","path":"connect/proxies/integrate","filePath":"../content/docs/connect/proxies/integrate.mdx","fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-144"},{"title":"Proxy defaults configuration reference","href":null,"fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-145","path":"/consul/docs/connect/config-entries/proxy-defaults"},{"title":"Envoy proxies reference","path":"connect/proxies/envoy","filePath":"../content/docs/connect/proxies/envoy.mdx","fullPath":"/consul/docs/connect/proxies/envoy","id":"sidebar-nav-item-146"},{"title":"Built-in proxy reference","path":"connect/proxies/built-in","filePath":"../content/docs/connect/proxies/built-in.mdx","fullPath":"/consul/docs/connect/proxies/built-in","id":"sidebar-nav-item-147"},{"title":"Service mesh proxy configuration reference","path":"connect/proxies/proxy-config-reference","filePath":"../content/docs/connect/proxies/proxy-config-reference.mdx","fullPath":"/consul/docs/connect/proxies/proxy-config-reference","id":"sidebar-nav-item-148"}],"id":"sidebar-nav-item-125"},{"title":"Service intentions","routes":[{"title":"Overview","path":"connect/intentions","filePath":"../content/docs/connect/intentions/index.mdx","fullPath":"/consul/docs/connect/intentions","id":"sidebar-nav-item-150"},{"title":"Create and manage service intentions","path":"connect/intentions/create-manage-intentions","filePath":"../content/docs/connect/intentions/create-manage-intentions.mdx","fullPath":"/consul/docs/connect/intentions/create-manage-intentions","id":"sidebar-nav-item-151"},{"title":"JWT authorization for intentions","path":"connect/intentions/jwt-authorization","filePath":"../content/docs/connect/intentions/jwt-authorization.mdx","fullPath":"/consul/docs/connect/intentions/jwt-authorization","id":"sidebar-nav-item-152"},{"title":"Service intentions legacy mode","path":"connect/intentions/legacy","filePath":"../content/docs/connect/intentions/legacy.mdx","fullPath":"/consul/docs/connect/intentions/legacy","id":"sidebar-nav-item-153"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-154","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-149"},{"title":"Observability","routes":[{"title":"Overview","path":"connect/observability","filePath":"../content/docs/connect/observability/index.mdx","fullPath":"/consul/docs/connect/observability","id":"sidebar-nav-item-156"},{"title":"Access Logs","path":"connect/observability/access-logs","filePath":"../content/docs/connect/observability/access-logs.mdx","fullPath":"/consul/docs/connect/observability/access-logs","id":"sidebar-nav-item-157"},{"title":"UI Visualization","path":"connect/observability/ui-visualization","filePath":"../content/docs/connect/observability/ui-visualization.mdx","fullPath":"/consul/docs/connect/observability/ui-visualization","id":"sidebar-nav-item-158"}],"id":"sidebar-nav-item-155"},{"title":"Manage traffic","routes":[{"title":"Overview","path":"connect/manage-traffic","filePath":"../content/docs/connect/manage-traffic/index.mdx","fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-160"},{"title":"Route traffic to local upstreams","path":"connect/manage-traffic/route-to-local-upstreams","filePath":"../content/docs/connect/manage-traffic/route-to-local-upstreams.mdx","fullPath":"/consul/docs/connect/manage-traffic/route-to-local-upstreams","id":"sidebar-nav-item-161"},{"title":"Limit request rates to services","path":"connect/manage-traffic/limit-request-rates","filePath":"../content/docs/connect/manage-traffic/limit-request-rates.mdx","fullPath":"/consul/docs/connect/manage-traffic/limit-request-rates","id":"sidebar-nav-item-162"},{"title":"Fault Injection","path":"connect/manage-traffic/fault-injection","filePath":"../content/docs/connect/manage-traffic/fault-injection.mdx","fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-163"},{"title":"Failover","routes":[{"title":"Overview","path":"connect/manage-traffic/failover","filePath":"../content/docs/connect/manage-traffic/failover/index.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover","id":"sidebar-nav-item-165"},{"title":"Configure failover services for Kubernetes","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-166","path":"/docs/k8s/l7-traffic/failover-tproxy"},{"title":"Automate geo-failover with prepared queries","href":null,"fullPath":"/consul/tutorials/developer-discovery/automate-geo-failover","id":"sidebar-nav-item-167","path":"/tutorials/developer-discovery/automate-geo-failover"},{"title":"Failover with sameness groups","path":"connect/manage-traffic/failover/sameness","filePath":"../content/docs/connect/manage-traffic/failover/sameness.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover/sameness","id":"sidebar-nav-item-168"},{"title":"Configuration","routes":[{"title":"Service resolver","href":null,"fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-170","path":"/consul/docs/connect/config-entries/service-resolver"},{"title":"Service intentions","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-171","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-169"}],"id":"sidebar-nav-item-164"},{"title":"Discovery chain reference","path":"connect/manage-traffic/discovery-chain","filePath":"../content/docs/connect/manage-traffic/discovery-chain.mdx","fullPath":"/consul/docs/connect/manage-traffic/discovery-chain","id":"sidebar-nav-item-172"}],"id":"sidebar-nav-item-159"},{"title":"Connectivity Tasks","path":"connect/connectivity-tasks","filePath":"../content/docs/connect/connectivity-tasks.mdx","fullPath":"/consul/docs/connect/connectivity-tasks","id":"sidebar-nav-item-173"},{"title":"Distributed Tracing","path":"connect/distributed-tracing","filePath":"../content/docs/connect/distributed-tracing.mdx","fullPath":"/consul/docs/connect/distributed-tracing","id":"sidebar-nav-item-174"},{"title":"Gateways","routes":[{"title":"Overview","path":"connect/gateways","filePath":"../content/docs/connect/gateways/index.mdx","fullPath":"/consul/docs/connect/gateways","id":"sidebar-nav-item-176"},{"title":"API Gateways","routes":[{"title":"Overview","path":"connect/gateways/api-gateway","filePath":"../content/docs/connect/gateways/api-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway","id":"sidebar-nav-item-178"},{"title":"Technical specifications for Kubernetes","path":"connect/gateways/api-gateway/tech-specs","filePath":"../content/docs/connect/gateways/api-gateway/tech-specs.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/tech-specs","id":"sidebar-nav-item-179"},{"title":"Install on Kubernetes","path":"connect/gateways/api-gateway/install-k8s","filePath":"../content/docs/connect/gateways/api-gateway/install-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/install-k8s","id":"sidebar-nav-item-180"},{"title":"Upgrade on Kubernetes","path":"connect/gateways/api-gateway/upgrades-k8s","filePath":"../content/docs/connect/gateways/api-gateway/upgrades-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/upgrades-k8s","id":"sidebar-nav-item-181"},{"title":"Deploy listeners","routes":[{"title":"Deploy listeners to VMs","path":"connect/gateways/api-gateway/deploy/listeners-vms","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-vms","id":"sidebar-nav-item-183"},{"title":"Deploy listeners to Kubernetes","path":"connect/gateways/api-gateway/deploy/listeners-k8s","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-k8s","id":"sidebar-nav-item-184"}],"id":"sidebar-nav-item-182"},{"title":"Define routes","routes":[{"title":"Define routes on VMs","path":"connect/gateways/api-gateway/define-routes/routes-vms","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-vms","id":"sidebar-nav-item-186"},{"title":"Define routes on Kubernetes","path":"connect/gateways/api-gateway/define-routes/routes-k8s","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-k8s","id":"sidebar-nav-item-187"},{"title":"Reroute traffic in Kubernetes","path":"connect/gateways/api-gateway/define-routes/reroute-http-requests","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests","id":"sidebar-nav-item-188"},{"title":"Route to peered services in Kubernetes","path":"connect/gateways/api-gateway/define-routes/route-to-peered-services","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services","id":"sidebar-nav-item-189"}],"id":"sidebar-nav-item-185"},{"title":"Secure traffic","routes":[{"title":"Encrypt traffic on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/encrypt-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms","id":"sidebar-nav-item-191"},{"title":"Verify incoming requests with JWTs on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","id":"sidebar-nav-item-192"},{"title":"Verify incoming requests with JWTs on Kubernetes","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","id":"sidebar-nav-item-193"}],"id":"sidebar-nav-item-190"},{"title":"Configuration","routes":[{"title":"Overview","path":"connect/gateways/api-gateway/configuration","filePath":"../content/docs/connect/gateways/api-gateway/configuration/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration","id":"sidebar-nav-item-195"},{"title":"Gateway","path":"connect/gateways/api-gateway/configuration/gateway","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gateway.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gateway","id":"sidebar-nav-item-196"},{"title":"GatewayClass","path":"connect/gateways/api-gateway/configuration/gatewayclass","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclass.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclass","id":"sidebar-nav-item-197"},{"title":"GatewayClassConfig","path":"connect/gateways/api-gateway/configuration/gatewayclassconfig","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig","id":"sidebar-nav-item-198"},{"title":"GatewayPolicy","path":"connect/gateways/api-gateway/configuration/gatewaypolicy","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewaypolicy.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewaypolicy","id":"sidebar-nav-item-199"},{"title":"RouteAuthFilter","path":"connect/gateways/api-gateway/configuration/routeauthfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeauthfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeauthfilter","id":"sidebar-nav-item-200"},{"title":"Routes","path":"connect/gateways/api-gateway/configuration/routes","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routes.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routes","id":"sidebar-nav-item-201"},{"title":"RouteRetryFilter","path":"connect/gateways/api-gateway/configuration/routeretryfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeretryfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeretryfilter","id":"sidebar-nav-item-202"},{"title":"RouteTimeoutFilter","path":"connect/gateways/api-gateway/configuration/routetimeoutfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter","id":"sidebar-nav-item-203"},{"title":"MeshService","path":"connect/gateways/api-gateway/configuration/meshservice","filePath":"../content/docs/connect/gateways/api-gateway/configuration/meshservice.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/meshservice","id":"sidebar-nav-item-204"}],"id":"sidebar-nav-item-194"},{"title":"Error Messages","path":"connect/gateways/api-gateway/errors","filePath":"../content/docs/connect/gateways/api-gateway/errors.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/errors","id":"sidebar-nav-item-205"}],"id":"sidebar-nav-item-177"},{"title":"Mesh Gateways","routes":[{"title":"Overview","path":"connect/gateways/mesh-gateway","filePath":"../content/docs/connect/gateways/mesh-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway","id":"sidebar-nav-item-207"},{"title":"Enabling WAN Federation Control Plane Traffic","path":"connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","id":"sidebar-nav-item-208"},{"title":"Enabling Service-to-service Traffic Across WAN Federated Datacenters","path":"connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","id":"sidebar-nav-item-209"},{"title":"Enabling Service-to-service Traffic Across Admin Partitions","path":"connect/gateways/mesh-gateway/service-to-service-traffic-partitions","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions","id":"sidebar-nav-item-210"},{"title":"Enabling Peering Control Plane Traffic","path":"connect/gateways/mesh-gateway/peering-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways","id":"sidebar-nav-item-211"}],"id":"sidebar-nav-item-206"},{"title":"Ingress Gateways","routes":[{"title":"Overview","path":"connect/gateways/ingress-gateway","filePath":"../content/docs/connect/gateways/ingress-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway","id":"sidebar-nav-item-213"},{"title":"Implement an ingress gateway","path":"connect/gateways/ingress-gateway/usage","filePath":"../content/docs/connect/gateways/ingress-gateway/usage.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/usage","id":"sidebar-nav-item-214"},{"title":"Serve TLS certificates from an external service","path":"connect/gateways/ingress-gateway/tls-external-service","filePath":"../content/docs/connect/gateways/ingress-gateway/tls-external-service.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/tls-external-service","id":"sidebar-nav-item-215"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-216","path":"/consul/docs/connect/config-entries/ingress-gateway"}],"id":"sidebar-nav-item-212"},{"title":"Terminating Gateways","path":"connect/gateways/terminating-gateway","filePath":"../content/docs/connect/gateways/terminating-gateway.mdx","fullPath":"/consul/docs/connect/gateways/terminating-gateway","id":"sidebar-nav-item-217"}],"id":"sidebar-nav-item-175"},{"title":"Cluster Peering","routes":[{"title":"Overview","path":"connect/cluster-peering","filePath":"../content/docs/connect/cluster-peering/index.mdx","fullPath":"/consul/docs/connect/cluster-peering","id":"sidebar-nav-item-219"},{"title":"Technical Specifications","path":"connect/cluster-peering/tech-specs","filePath":"../content/docs/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-220"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"connect/cluster-peering/usage/establish-cluster-peering","filePath":"../content/docs/connect/cluster-peering/usage/establish-cluster-peering.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/establish-cluster-peering","id":"sidebar-nav-item-222"},{"title":"Manage Cluster Peering Connections","path":"connect/cluster-peering/usage/manage-connections","filePath":"../content/docs/connect/cluster-peering/usage/manage-connections.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/manage-connections","id":"sidebar-nav-item-223"},{"title":"Manage L7 Traffic With Cluster Peering","path":"connect/cluster-peering/usage/peering-traffic-management","filePath":"../content/docs/connect/cluster-peering/usage/peering-traffic-management.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/peering-traffic-management","id":"sidebar-nav-item-224"},{"title":"Create Sameness Groups","path":"connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-225"}],"id":"sidebar-nav-item-221"}],"id":"sidebar-nav-item-218"},{"title":"Nomad","path":"connect/nomad","filePath":"../content/docs/connect/nomad.mdx","fullPath":"/consul/docs/connect/nomad","id":"sidebar-nav-item-226"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-227","path":"/docs/k8s/connect"},{"title":"Native App Integration","routes":[{"title":"Overview","path":"connect/native","filePath":"../content/docs/connect/native/index.mdx","fullPath":"/consul/docs/connect/native","id":"sidebar-nav-item-229"},{"title":"Go Integration","path":"connect/native/go","filePath":"../content/docs/connect/native/go.mdx","fullPath":"/consul/docs/connect/native/go","id":"sidebar-nav-item-230"}],"id":"sidebar-nav-item-228"},{"title":"Certificate Management","routes":[{"title":"Overview","path":"connect/ca","filePath":"../content/docs/connect/ca/index.mdx","fullPath":"/consul/docs/connect/ca","id":"sidebar-nav-item-232"},{"title":"Built-In CA","path":"connect/ca/consul","filePath":"../content/docs/connect/ca/consul.mdx","fullPath":"/consul/docs/connect/ca/consul","id":"sidebar-nav-item-233"},{"title":"Vault","path":"connect/ca/vault","filePath":"../content/docs/connect/ca/vault.mdx","fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-234"},{"title":"ACM Private CA","path":"connect/ca/aws","filePath":"../content/docs/connect/ca/aws.mdx","fullPath":"/consul/docs/connect/ca/aws","id":"sidebar-nav-item-235"}],"id":"sidebar-nav-item-231"},{"title":"Develop and Debug","path":"connect/dev","filePath":"../content/docs/connect/dev.mdx","fullPath":"/consul/docs/connect/dev","id":"sidebar-nav-item-236"},{"title":"Consul Dataplane","routes":[{"title":"Overview","path":"connect/dataplane","filePath":"../content/docs/connect/dataplane/index.mdx","fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-238"},{"title":"CLI Reference","path":"connect/dataplane/consul-dataplane","filePath":"../content/docs/connect/dataplane/consul-dataplane.mdx","fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-239"},{"title":"Telemetry","path":"connect/dataplane/telemetry","filePath":"../content/docs/connect/dataplane/telemetry.mdx","fullPath":"/consul/docs/connect/dataplane/telemetry","id":"sidebar-nav-item-240"}],"id":"sidebar-nav-item-237"}],"id":"sidebar-nav-item-102"},{"title":"Dynamic App Configuration","routes":[{"title":"Consul KV","path":"dynamic-app-config/kv","filePath":"../content/docs/dynamic-app-config/kv.mdx","fullPath":"/consul/docs/dynamic-app-config/kv","id":"sidebar-nav-item-242"},{"title":"Sessions","path":"dynamic-app-config/sessions","filePath":"../content/docs/dynamic-app-config/sessions.mdx","fullPath":"/consul/docs/dynamic-app-config/sessions","id":"sidebar-nav-item-243"},{"title":"Watches","path":"dynamic-app-config/watches","filePath":"../content/docs/dynamic-app-config/watches.mdx","fullPath":"/consul/docs/dynamic-app-config/watches","id":"sidebar-nav-item-244"}],"id":"sidebar-nav-item-241"},{"title":"Security","routes":[{"title":"Overview","path":"security","filePath":"../content/docs/security/index.mdx","fullPath":"/consul/docs/security","id":"sidebar-nav-item-246"},{"title":"Access Control (ACLs)","routes":[{"title":"ACL System Overview","path":"security/acl","filePath":"../content/docs/security/acl/index.mdx","fullPath":"/consul/docs/security/acl","id":"sidebar-nav-item-248"},{"title":"Tokens","routes":[{"title":"Overview","path":"security/acl/tokens","filePath":"../content/docs/security/acl/tokens/index.mdx","fullPath":"/consul/docs/security/acl/tokens","id":"sidebar-nav-item-250"},{"title":"Create ACL Tokens","routes":[{"title":"Create a service token","path":"security/acl/tokens/create/create-a-service-token","filePath":"../content/docs/security/acl/tokens/create/create-a-service-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-service-token","id":"sidebar-nav-item-252"},{"title":"Create an agent token","path":"security/acl/tokens/create/create-an-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-an-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-agent-token","id":"sidebar-nav-item-253"},{"title":"Create a UI token","path":"security/acl/tokens/create/create-a-ui-token","filePath":"../content/docs/security/acl/tokens/create/create-a-ui-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-ui-token","id":"sidebar-nav-item-254"},{"title":"Create a mesh gateway token","path":"security/acl/tokens/create/create-a-mesh-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-mesh-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-mesh-gateway-token","id":"sidebar-nav-item-255"},{"title":"Create an ingress gateway token","path":"security/acl/tokens/create/create-an-ingress-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-an-ingress-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-ingress-gateway-token","id":"sidebar-nav-item-256"},{"title":"Create a terminating gateway token","path":"security/acl/tokens/create/create-a-terminating-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-terminating-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-terminating-gateway-token","id":"sidebar-nav-item-257"},{"title":"Create a DNS token","path":"security/acl/tokens/create/create-a-dns-token","filePath":"../content/docs/security/acl/tokens/create/create-a-dns-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-dns-token","id":"sidebar-nav-item-258"},{"title":"Create a replication token","path":"security/acl/tokens/create/create-a-replication-token","filePath":"../content/docs/security/acl/tokens/create/create-a-replication-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-replication-token","id":"sidebar-nav-item-259"},{"title":"Create a snapshot agent token","path":"security/acl/tokens/create/create-a-snapshot-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-a-snapshot-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-snapshot-agent-token","id":"sidebar-nav-item-260"},{"title":"Create a token for Vault's Consul storage backend","path":"security/acl/tokens/create/create-a-token-for-vault-consul-storage","filePath":"../content/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage","id":"sidebar-nav-item-261"},{"title":"Create a Consul ESM token","path":"security/acl/tokens/create/create-a-consul-esm-token","filePath":"../content/docs/security/acl/tokens/create/create-a-consul-esm-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-consul-esm-token","id":"sidebar-nav-item-262"}],"id":"sidebar-nav-item-251"}],"id":"sidebar-nav-item-249"},{"title":"Policies","path":"security/acl/acl-policies","filePath":"../content/docs/security/acl/acl-policies.mdx","fullPath":"/consul/docs/security/acl/acl-policies","id":"sidebar-nav-item-263"},{"title":"Roles","path":"security/acl/acl-roles","filePath":"../content/docs/security/acl/acl-roles.mdx","fullPath":"/consul/docs/security/acl/acl-roles","id":"sidebar-nav-item-264"},{"title":"Rules Reference","path":"security/acl/acl-rules","filePath":"../content/docs/security/acl/acl-rules.mdx","fullPath":"/consul/docs/security/acl/acl-rules","id":"sidebar-nav-item-265"},{"title":"ACLs in Federated Datacenters","path":"security/acl/acl-federated-datacenters","filePath":"../content/docs/security/acl/acl-federated-datacenters.mdx","fullPath":"/consul/docs/security/acl/acl-federated-datacenters","id":"sidebar-nav-item-266"},{"title":"Auth Methods","routes":[{"title":"Overview","path":"security/acl/auth-methods","filePath":"../content/docs/security/acl/auth-methods/index.mdx","fullPath":"/consul/docs/security/acl/auth-methods","id":"sidebar-nav-item-268"},{"title":"Kubernetes","path":"security/acl/auth-methods/kubernetes","filePath":"../content/docs/security/acl/auth-methods/kubernetes.mdx","fullPath":"/consul/docs/security/acl/auth-methods/kubernetes","id":"sidebar-nav-item-269"},{"title":"JWT","path":"security/acl/auth-methods/jwt","filePath":"../content/docs/security/acl/auth-methods/jwt.mdx","fullPath":"/consul/docs/security/acl/auth-methods/jwt","id":"sidebar-nav-item-270"},{"title":"OIDC","path":"security/acl/auth-methods/oidc","filePath":"../content/docs/security/acl/auth-methods/oidc.mdx","fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-271"},{"title":"AWS IAM","path":"security/acl/auth-methods/aws-iam","filePath":"../content/docs/security/acl/auth-methods/aws-iam.mdx","fullPath":"/consul/docs/security/acl/auth-methods/aws-iam","id":"sidebar-nav-item-272"}],"id":"sidebar-nav-item-267"}],"id":"sidebar-nav-item-247"},{"title":"Encryption","path":"security/encryption","filePath":"../content/docs/security/encryption.mdx","fullPath":"/consul/docs/security/encryption","id":"sidebar-nav-item-273"},{"title":"Security Models","routes":[{"title":"Overview","path":"security/security-models","filePath":"../content/docs/security/security-models/index.mdx","fullPath":"/consul/docs/security/security-models","id":"sidebar-nav-item-275"},{"title":"Core","path":"security/security-models/core","filePath":"../content/docs/security/security-models/core.mdx","fullPath":"/consul/docs/security/security-models/core","id":"sidebar-nav-item-276"},{"title":"Network Infrastructure Automation","path":"security/security-models/nia","filePath":"../content/docs/security/security-models/nia.mdx","fullPath":"/consul/docs/security/security-models/nia","id":"sidebar-nav-item-277"}],"id":"sidebar-nav-item-274"}],"id":"sidebar-nav-item-245"},{"title":"Agent","routes":[{"title":"Overview","path":"agent","filePath":"../content/docs/agent/index.mdx","fullPath":"/consul/docs/agent","id":"sidebar-nav-item-279"},{"title":"Configuration","routes":[{"title":"General","path":"agent/config","filePath":"../content/docs/agent/config/index.mdx","fullPath":"/consul/docs/agent/config","id":"sidebar-nav-item-281"},{"title":"CLI Reference","path":"agent/config/cli-flags","filePath":"../content/docs/agent/config/cli-flags.mdx","fullPath":"/consul/docs/agent/config/cli-flags","id":"sidebar-nav-item-282"},{"title":"Configuration Reference","path":"agent/config/config-files","filePath":"../content/docs/agent/config/config-files.mdx","fullPath":"/consul/docs/agent/config/config-files","id":"sidebar-nav-item-283"}],"id":"sidebar-nav-item-280"},{"title":"Limit traffic rates","routes":[{"title":"Overview","path":"agent/limits","filePath":"../content/docs/agent/limits/index.mdx","fullPath":"/consul/docs/agent/limits","id":"sidebar-nav-item-285"},{"title":"Usage","routes":[{"title":"Initialize rate limit settings","path":"agent/limits/usage/init-rate-limits","filePath":"../content/docs/agent/limits/usage/init-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/init-rate-limits","id":"sidebar-nav-item-287"},{"title":"Monitor traffic rate limits","path":"agent/limits/usage/monitor-rate-limits","filePath":"../content/docs/agent/limits/usage/monitor-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/monitor-rate-limits","id":"sidebar-nav-item-288"},{"title":"Set global traffic rate limits","path":"agent/limits/usage/set-global-traffic-rate-limits","filePath":"../content/docs/agent/limits/usage/set-global-traffic-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/set-global-traffic-rate-limits","id":"sidebar-nav-item-289"},{"title":"Limit traffic rates from source IP addresses","path":"agent/limits/usage/limit-request-rates-from-ips","filePath":"../content/docs/agent/limits/usage/limit-request-rates-from-ips.mdx","fullPath":"/consul/docs/agent/limits/usage/limit-request-rates-from-ips","id":"sidebar-nav-item-290"}],"id":"sidebar-nav-item-286"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-291","path":"/docs/connect/config-entries/control-plane-request-limit"}],"id":"sidebar-nav-item-284"},{"title":"Configuration Entries","path":"agent/config-entries","filePath":"../content/docs/agent/config-entries.mdx","fullPath":"/consul/docs/agent/config-entries","id":"sidebar-nav-item-292"},{"title":"Telemetry","path":"agent/telemetry","filePath":"../content/docs/agent/telemetry.mdx","fullPath":"/consul/docs/agent/telemetry","id":"sidebar-nav-item-293"},{"title":"Sentinel","path":"agent/sentinel","filePath":"../content/docs/agent/sentinel.mdx","fullPath":"/consul/docs/agent/sentinel","id":"sidebar-nav-item-294"},{"title":"Experimental WAL LogStore","routes":[{"title":"Overview","path":"agent/wal-logstore","filePath":"../content/docs/agent/wal-logstore/index.mdx","fullPath":"/consul/docs/agent/wal-logstore","id":"sidebar-nav-item-296"},{"title":"Enable WAL LogStore backend","path":"agent/wal-logstore/enable","filePath":"../content/docs/agent/wal-logstore/enable.mdx","fullPath":"/consul/docs/agent/wal-logstore/enable","id":"sidebar-nav-item-297"},{"title":"Monitor Raft metrics and logs for WAL","path":"agent/wal-logstore/monitoring","filePath":"../content/docs/agent/wal-logstore/monitoring.mdx","fullPath":"/consul/docs/agent/wal-logstore/monitoring","id":"sidebar-nav-item-298"},{"title":"Revert to BoltDB","path":"agent/wal-logstore/revert-to-boltdb","filePath":"../content/docs/agent/wal-logstore/revert-to-boltdb.mdx","fullPath":"/consul/docs/agent/wal-logstore/revert-to-boltdb","id":"sidebar-nav-item-299"}],"id":"sidebar-nav-item-295"}],"id":"sidebar-nav-item-278"},{"title":"Integrations","routes":[{"title":"Consul Integration Program","path":"integrate/partnerships","filePath":"../content/docs/integrate/partnerships.mdx","fullPath":"/consul/docs/integrate/partnerships","id":"sidebar-nav-item-301"},{"title":"NIA Integration Program","path":"integrate/nia-integration","filePath":"../content/docs/integrate/nia-integration.mdx","fullPath":"/consul/docs/integrate/nia-integration","id":"sidebar-nav-item-302"},{"title":"Vault Integration","href":null,"fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-303","path":"/docs/connect/ca/vault"},{"title":"Proxy Integration","href":null,"fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-304","path":"/docs/connect/proxies/integrate"},{"title":"Consul Tools","path":"integrate/download-tools","filePath":"../content/docs/integrate/download-tools.mdx","fullPath":"/consul/docs/integrate/download-tools","id":"sidebar-nav-item-305"}],"id":"sidebar-nav-item-300"},{"title":"Troubleshoot","routes":[{"title":"Service-to-Service Troubleshooting","path":"troubleshoot/troubleshoot-services","filePath":"../content/docs/troubleshoot/troubleshoot-services.mdx","fullPath":"/consul/docs/troubleshoot/troubleshoot-services","id":"sidebar-nav-item-307"},{"title":"Common Error Messages","path":"troubleshoot/common-errors","filePath":"../content/docs/troubleshoot/common-errors.mdx","fullPath":"/consul/docs/troubleshoot/common-errors","id":"sidebar-nav-item-308"},{"title":"FAQ","path":"troubleshoot/faq","filePath":"../content/docs/troubleshoot/faq.mdx","fullPath":"/consul/docs/troubleshoot/faq","id":"sidebar-nav-item-309"}],"id":"sidebar-nav-item-306"},{"divider":true,"id":"sidebar-nav-item-310"},{"title":"Kubernetes","routes":[{"title":"Overview","path":"k8s","filePath":"../content/docs/k8s/index.mdx","fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-312"},{"title":"Architecture","path":"k8s/architecture","filePath":"../content/docs/k8s/architecture.mdx","fullPath":"/consul/docs/k8s/architecture","id":"sidebar-nav-item-313"},{"title":"Installation","routes":[{"title":"Install from Consul K8s CLI","path":"k8s/installation/install-cli","filePath":"../content/docs/k8s/installation/install-cli.mdx","fullPath":"/consul/docs/k8s/installation/install-cli","id":"sidebar-nav-item-315"},{"title":"Install from Helm Chart","path":"k8s/installation/install","filePath":"../content/docs/k8s/installation/install.mdx","fullPath":"/consul/docs/k8s/installation/install","id":"sidebar-nav-item-316"}],"id":"sidebar-nav-item-314"},{"title":"Deployment Configurations","routes":[{"title":"Consul Clients Outside Kubernetes","path":"k8s/deployment-configurations/clients-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/clients-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/clients-outside-kubernetes","id":"sidebar-nav-item-318"},{"title":"Consul Servers Outside Kubernetes","path":"k8s/deployment-configurations/servers-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/servers-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/servers-outside-kubernetes","id":"sidebar-nav-item-319"},{"title":"Single Consul Datacenter in Multiple Kubernetes Clusters","path":"k8s/deployment-configurations/single-dc-multi-k8s","filePath":"../content/docs/k8s/deployment-configurations/single-dc-multi-k8s.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/single-dc-multi-k8s","id":"sidebar-nav-item-320"},{"title":"Consul Enterprise","path":"k8s/deployment-configurations/consul-enterprise","filePath":"../content/docs/k8s/deployment-configurations/consul-enterprise.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/consul-enterprise","id":"sidebar-nav-item-321"},{"title":"Multi-Cluster Federation","routes":[{"title":"Overview","path":"k8s/deployment-configurations/multi-cluster","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster","id":"sidebar-nav-item-323"},{"title":"Federation Between Kubernetes Clusters","path":"k8s/deployment-configurations/multi-cluster/kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/kubernetes","id":"sidebar-nav-item-324"},{"title":"Federation Between VMs and Kubernetes","path":"k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","id":"sidebar-nav-item-325"}],"id":"sidebar-nav-item-322"},{"title":"Vault as Secrets Backend","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault","filePath":"../content/docs/k8s/deployment-configurations/vault/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault","id":"sidebar-nav-item-327"},{"title":"Systems Integration","path":"k8s/deployment-configurations/vault/systems-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/systems-integration.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/systems-integration","id":"sidebar-nav-item-328"},{"title":"Data Integration","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault/data-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration","id":"sidebar-nav-item-330"},{"title":"Bootstrap Token","path":"k8s/deployment-configurations/vault/data-integration/bootstrap-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token","id":"sidebar-nav-item-331"},{"title":"Enterprise License","path":"k8s/deployment-configurations/vault/data-integration/enterprise-license","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license","id":"sidebar-nav-item-332"},{"title":"Gossip Encryption Key","path":"k8s/deployment-configurations/vault/data-integration/gossip","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/gossip.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/gossip","id":"sidebar-nav-item-333"},{"title":"Partition Token","path":"k8s/deployment-configurations/vault/data-integration/partition-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/partition-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/partition-token","id":"sidebar-nav-item-334"},{"title":"Replication Token","path":"k8s/deployment-configurations/vault/data-integration/replication-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/replication-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/replication-token","id":"sidebar-nav-item-335"},{"title":"Server TLS","path":"k8s/deployment-configurations/vault/data-integration/server-tls","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/server-tls.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/server-tls","id":"sidebar-nav-item-336"},{"title":"Service Mesh Certificates","path":"k8s/deployment-configurations/vault/data-integration/connect-ca","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/connect-ca.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/connect-ca","id":"sidebar-nav-item-337"},{"title":"Snapshot Agent Config","path":"k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","id":"sidebar-nav-item-338"},{"title":"Webhook Certificates","path":"k8s/deployment-configurations/vault/data-integration/webhook-certs","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs","id":"sidebar-nav-item-339"}],"id":"sidebar-nav-item-329"},{"title":"WAN Federation","path":"k8s/deployment-configurations/vault/wan-federation","filePath":"../content/docs/k8s/deployment-configurations/vault/wan-federation.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/wan-federation","id":"sidebar-nav-item-340"}],"id":"sidebar-nav-item-326"},{"title":"Datadog metrics","path":"k8s/deployment-configurations/datadog","filePath":"../content/docs/k8s/deployment-configurations/datadog.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/datadog","id":"sidebar-nav-item-341"}],"id":"sidebar-nav-item-317"},{"title":"Platform Guides","routes":[{"title":"Minikube","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-minikube?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=mk","id":"sidebar-nav-item-343"},{"title":"Kind","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-kind?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=kind","id":"sidebar-nav-item-344"},{"title":"AKS (Azure)","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-aks-azure?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=aks","id":"sidebar-nav-item-345"},{"title":"EKS (AWS)","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-eks-aws?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=eks","id":"sidebar-nav-item-346"},{"title":"GKE (Google Cloud)","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-gke-google?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=gke","id":"sidebar-nav-item-347"},{"title":"Red Hat OpenShift","href":"https://learn.hashicorp.com/tutorials/consul/kubernetes-openshift-red-hat?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=openshift","id":"sidebar-nav-item-348"},{"title":"Self Hosted Kubernetes","path":"k8s/platforms/self-hosted-kubernetes","filePath":"../content/docs/k8s/platforms/self-hosted-kubernetes.mdx","fullPath":"/consul/docs/k8s/platforms/self-hosted-kubernetes","id":"sidebar-nav-item-349"}],"id":"sidebar-nav-item-342"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"k8s/connect","filePath":"../content/docs/k8s/connect/index.mdx","fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-351"},{"title":"Admin Partitions","href":null,"fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-352","path":"/docs/enterprise/admin-partitions"},{"title":"Cluster Peering","routes":[{"title":"Technical Specifications","path":"k8s/connect/cluster-peering/tech-specs","filePath":"../content/docs/k8s/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-354"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/establish-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/establish-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/establish-peering","id":"sidebar-nav-item-356"},{"title":"Manage Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/manage-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/manage-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/manage-peering","id":"sidebar-nav-item-357"},{"title":"Manage L7 Traffic With Cluster Peering","path":"k8s/connect/cluster-peering/usage/l7-traffic","filePath":"../content/docs/k8s/connect/cluster-peering/usage/l7-traffic.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/l7-traffic","id":"sidebar-nav-item-358"},{"title":"Create Sameness Groups","path":"k8s/connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/k8s/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-359"}],"id":"sidebar-nav-item-355"}],"id":"sidebar-nav-item-353"},{"title":"Transparent Proxy","routes":[{"title":"Overview","path":"k8s/connect/transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/index.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy","id":"sidebar-nav-item-361"},{"title":"Enable transparent proxy","path":"k8s/connect/transparent-proxy/enable-transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/enable-transparent-proxy.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy/enable-transparent-proxy","id":"sidebar-nav-item-362"},{"title":"Route traffic to virtual services","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-363","path":"/docs/k8s/l7-traffic/route-to-virtual-services"}],"id":"sidebar-nav-item-360"},{"title":"Onboarding services in transparent proxy mode","path":"k8s/connect/onboarding-tproxy-mode","filePath":"../content/docs/k8s/connect/onboarding-tproxy-mode.mdx","fullPath":"/consul/docs/k8s/connect/onboarding-tproxy-mode","id":"sidebar-nav-item-364"},{"title":"Ingress Gateways","path":"k8s/connect/ingress-gateways","filePath":"../content/docs/k8s/connect/ingress-gateways.mdx","fullPath":"/consul/docs/k8s/connect/ingress-gateways","id":"sidebar-nav-item-365"},{"title":"Terminating Gateways","path":"k8s/connect/terminating-gateways","filePath":"../content/docs/k8s/connect/terminating-gateways.mdx","fullPath":"/consul/docs/k8s/connect/terminating-gateways","id":"sidebar-nav-item-366"},{"title":"Ingress Controllers","path":"k8s/connect/ingress-controllers","filePath":"../content/docs/k8s/connect/ingress-controllers.mdx","fullPath":"/consul/docs/k8s/connect/ingress-controllers","id":"sidebar-nav-item-367"},{"title":"Configuring a Connect CA Provider","path":"k8s/connect/connect-ca-provider","filePath":"../content/docs/k8s/connect/connect-ca-provider.mdx","fullPath":"/consul/docs/k8s/connect/connect-ca-provider","id":"sidebar-nav-item-368"},{"title":"Health Checks","path":"k8s/connect/health","filePath":"../content/docs/k8s/connect/health.mdx","fullPath":"/consul/docs/k8s/connect/health","id":"sidebar-nav-item-369"},{"title":"Observability","routes":[{"title":"Metrics","path":"k8s/connect/observability/metrics","filePath":"../content/docs/k8s/connect/observability/metrics.mdx","fullPath":"/consul/docs/k8s/connect/observability/metrics","id":"sidebar-nav-item-371"}],"id":"sidebar-nav-item-370"}],"id":"sidebar-nav-item-350"},{"title":"V2 Catalog API","routes":[{"title":"Overview","path":"k8s/multiport","filePath":"../content/docs/k8s/multiport/index.mdx","fullPath":"/consul/docs/k8s/multiport","id":"sidebar-nav-item-373"},{"title":"Configure multi-port services","path":"k8s/multiport/configure","filePath":"../content/docs/k8s/multiport/configure.mdx","fullPath":"/consul/docs/k8s/multiport/configure","id":"sidebar-nav-item-374"},{"title":"Split TCP traffic between multiple ports","path":"k8s/multiport/traffic-split","filePath":"../content/docs/k8s/multiport/traffic-split.mdx","fullPath":"/consul/docs/k8s/multiport/traffic-split","id":"sidebar-nav-item-375"},{"title":"Reference","routes":[{"title":"GRPCRoute resource","path":"k8s/multiport/reference/grpcroute","filePath":"../content/docs/k8s/multiport/reference/grpcroute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/grpcroute","id":"sidebar-nav-item-377"},{"title":"HTTPRoute resource","path":"k8s/multiport/reference/httproute","filePath":"../content/docs/k8s/multiport/reference/httproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/httproute","id":"sidebar-nav-item-378"},{"title":"ProxyConfiguration resource","path":"k8s/multiport/reference/proxyconfiguration","filePath":"../content/docs/k8s/multiport/reference/proxyconfiguration.mdx","fullPath":"/consul/docs/k8s/multiport/reference/proxyconfiguration","id":"sidebar-nav-item-379"},{"title":"TCPRoute resource","path":"k8s/multiport/reference/tcproute","filePath":"../content/docs/k8s/multiport/reference/tcproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/tcproute","id":"sidebar-nav-item-380"},{"title":"TrafficPermissions resource","path":"k8s/multiport/reference/trafficpermissions","filePath":"../content/docs/k8s/multiport/reference/trafficpermissions.mdx","fullPath":"/consul/docs/k8s/multiport/reference/trafficpermissions","id":"sidebar-nav-item-381"}],"id":"sidebar-nav-item-376"}],"id":"sidebar-nav-item-372"},{"title":"L7 traffic management","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-383","path":"/docs/connect/manage-traffic"},{"title":"Configure failover services","path":"k8s/l7-traffic/failover-tproxy","filePath":"../content/docs/k8s/l7-traffic/failover-tproxy.mdx","fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-384"},{"title":"Route traffic to virtual services","path":"k8s/l7-traffic/route-to-virtual-services","filePath":"../content/docs/k8s/l7-traffic/route-to-virtual-services.mdx","fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-385"}],"id":"sidebar-nav-item-382"},{"title":"Service Sync","path":"k8s/service-sync","filePath":"../content/docs/k8s/service-sync.mdx","fullPath":"/consul/docs/k8s/service-sync","id":"sidebar-nav-item-386"},{"title":"Custom Resource Definitions","routes":[{"title":"Overview","path":"k8s/crds","filePath":"../content/docs/k8s/crds/index.mdx","fullPath":"/consul/docs/k8s/crds","id":"sidebar-nav-item-388"},{"title":"Upgrade An Existing Cluster to CRDs","path":"k8s/crds/upgrade-to-crds","filePath":"../content/docs/k8s/crds/upgrade-to-crds.mdx","fullPath":"/consul/docs/k8s/crds/upgrade-to-crds","id":"sidebar-nav-item-389"}],"id":"sidebar-nav-item-387"},{"title":"Annotations and Labels","path":"k8s/annotations-and-labels","filePath":"../content/docs/k8s/annotations-and-labels.mdx","fullPath":"/consul/docs/k8s/annotations-and-labels","id":"sidebar-nav-item-390"},{"title":"Consul DNS","path":"k8s/dns","filePath":"../content/docs/k8s/dns.mdx","fullPath":"/consul/docs/k8s/dns","id":"sidebar-nav-item-391"},{"title":"Upgrade","routes":[{"title":"Upgrading Consul on Kubernetes","path":"k8s/upgrade","filePath":"../content/docs/k8s/upgrade/index.mdx","fullPath":"/consul/docs/k8s/upgrade","id":"sidebar-nav-item-393"},{"title":"Upgrading Consul K8s CLI","path":"k8s/upgrade/upgrade-cli","filePath":"../content/docs/k8s/upgrade/upgrade-cli.mdx","fullPath":"/consul/docs/k8s/upgrade/upgrade-cli","id":"sidebar-nav-item-394"}],"id":"sidebar-nav-item-392"},{"title":"Consul Dataplane","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-396","path":"/docs/connect/dataplane"},{"title":"CLI Reference","href":null,"fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-397","path":"/docs/connect/dataplane/consul-dataplane"}],"id":"sidebar-nav-item-395"},{"title":"Operations","routes":[{"title":"Uninstall","path":"k8s/operations/uninstall","filePath":"../content/docs/k8s/operations/uninstall.mdx","fullPath":"/consul/docs/k8s/operations/uninstall","id":"sidebar-nav-item-399"},{"title":"Certificate Rotation","path":"k8s/operations/certificate-rotation","filePath":"../content/docs/k8s/operations/certificate-rotation.mdx","fullPath":"/consul/docs/k8s/operations/certificate-rotation","id":"sidebar-nav-item-400"},{"title":"Gossip Encryption Key Rotation","path":"k8s/operations/gossip-encryption-key-rotation","filePath":"../content/docs/k8s/operations/gossip-encryption-key-rotation.mdx","fullPath":"/consul/docs/k8s/operations/gossip-encryption-key-rotation","id":"sidebar-nav-item-401"},{"title":"Configure TLS on an Existing Cluster","path":"k8s/operations/tls-on-existing-cluster","filePath":"../content/docs/k8s/operations/tls-on-existing-cluster.mdx","fullPath":"/consul/docs/k8s/operations/tls-on-existing-cluster","id":"sidebar-nav-item-402"}],"id":"sidebar-nav-item-398"},{"title":"Troubleshoot","routes":[{"title":"Common Error Messages","href":null,"fullPath":"/consul/docs/troubleshoot/common-errors#common-errors-on-kubernetes","id":"sidebar-nav-item-404","path":"/docs/troubleshoot/common-errors#common-errors-on-kubernetes"},{"title":"FAQ","href":null,"fullPath":"/consul/docs/troubleshoot/faq#consul-on-kubernetes","id":"sidebar-nav-item-405","path":"/docs/troubleshoot/faq#consul-on-kubernetes"}],"id":"sidebar-nav-item-403"},{"title":"Compatibility Matrix","path":"k8s/compatibility","filePath":"../content/docs/k8s/compatibility.mdx","fullPath":"/consul/docs/k8s/compatibility","id":"sidebar-nav-item-406"},{"title":"Helm Chart Configuration","path":"k8s/helm","filePath":"../content/docs/k8s/helm.mdx","fullPath":"/consul/docs/k8s/helm","id":"sidebar-nav-item-407"},{"title":"Consul K8s CLI Reference","path":"k8s/k8s-cli","filePath":"../content/docs/k8s/k8s-cli.mdx","fullPath":"/consul/docs/k8s/k8s-cli","id":"sidebar-nav-item-408"}],"id":"sidebar-nav-item-311"},{"title":"Nomad","path":"nomad","filePath":"../content/docs/nomad/index.mdx","fullPath":"/consul/docs/nomad","id":"sidebar-nav-item-409"},{"title":"AWS ECS","routes":[{"title":"Overview","path":"ecs","filePath":"../content/docs/ecs/index.mdx","fullPath":"/consul/docs/ecs","id":"sidebar-nav-item-411"},{"title":"Architecture","path":"ecs/architecture","filePath":"../content/docs/ecs/architecture.mdx","fullPath":"/consul/docs/ecs/architecture","id":"sidebar-nav-item-412"},{"title":"Technical specifications","path":"ecs/tech-specs","filePath":"../content/docs/ecs/tech-specs.mdx","fullPath":"/consul/docs/ecs/tech-specs","id":"sidebar-nav-item-413"},{"title":"Deploy Consul to ECS","routes":[{"title":"Deploy using the Terraform module","path":"ecs/deploy/terraform","filePath":"../content/docs/ecs/deploy/terraform.mdx","fullPath":"/consul/docs/ecs/deploy/terraform","id":"sidebar-nav-item-415"},{"title":"Deploy manually","path":"ecs/deploy/manual","filePath":"../content/docs/ecs/deploy/manual.mdx","fullPath":"/consul/docs/ecs/deploy/manual","id":"sidebar-nav-item-416"},{"title":"Configure the ECS task bind address","path":"ecs/deploy/bind-addresses","filePath":"../content/docs/ecs/deploy/bind-addresses.mdx","fullPath":"/consul/docs/ecs/deploy/bind-addresses","id":"sidebar-nav-item-417"},{"title":"Configure routes between ECS tasks","path":"ecs/deploy/configure-routes","filePath":"../content/docs/ecs/deploy/configure-routes.mdx","fullPath":"/consul/docs/ecs/deploy/configure-routes","id":"sidebar-nav-item-418"},{"title":"Migrate existing tasks","path":"ecs/deploy/migrate-existing-tasks","filePath":"../content/docs/ecs/deploy/migrate-existing-tasks.mdx","fullPath":"/consul/docs/ecs/deploy/migrate-existing-tasks","id":"sidebar-nav-item-419"}],"id":"sidebar-nav-item-414"},{"title":"Upgrade to Consul dataplane architecture","path":"ecs/upgrade-to-dataplanes","filePath":"../content/docs/ecs/upgrade-to-dataplanes.mdx","fullPath":"/consul/docs/ecs/upgrade-to-dataplanes","id":"sidebar-nav-item-420"},{"title":"Consul Enterprise","path":"ecs/enterprise","filePath":"../content/docs/ecs/enterprise.mdx","fullPath":"/consul/docs/ecs/enterprise","id":"sidebar-nav-item-421"},{"title":"Reference","routes":[{"title":"ECS configuration reference","path":"ecs/reference/configuration-reference","filePath":"../content/docs/ecs/reference/configuration-reference.mdx","fullPath":"/consul/docs/ecs/reference/configuration-reference","id":"sidebar-nav-item-423"},{"title":"ECS compatibility matrix","path":"ecs/reference/compatibility","filePath":"../content/docs/ecs/reference/compatibility.mdx","fullPath":"/consul/docs/ecs/reference/compatibility","id":"sidebar-nav-item-424"},{"title":"ECS Consul server JSON schema","path":"ecs/reference/consul-server-json","filePath":"../content/docs/ecs/reference/consul-server-json.mdx","fullPath":"/consul/docs/ecs/reference/consul-server-json","id":"sidebar-nav-item-425"}],"id":"sidebar-nav-item-422"}],"id":"sidebar-nav-item-410"},{"title":"AWS Lambda","routes":[{"title":"Overview","path":"lambda","filePath":"../content/docs/lambda/index.mdx","fullPath":"/consul/docs/lambda","id":"sidebar-nav-item-427"},{"title":"Register Lambda Functions","routes":[{"title":"Requirements","path":"lambda/registration","filePath":"../content/docs/lambda/registration/index.mdx","fullPath":"/consul/docs/lambda/registration","id":"sidebar-nav-item-429"},{"title":"Automate Registration","path":"lambda/registration/automate","filePath":"../content/docs/lambda/registration/automate.mdx","fullPath":"/consul/docs/lambda/registration/automate","id":"sidebar-nav-item-430"},{"title":"Manual Registration","path":"lambda/registration/manual","filePath":"../content/docs/lambda/registration/manual.mdx","fullPath":"/consul/docs/lambda/registration/manual","id":"sidebar-nav-item-431"}],"id":"sidebar-nav-item-428"},{"title":"Invoke Lambda Functions from Services","path":"lambda/invocation","filePath":"../content/docs/lambda/invocation.mdx","fullPath":"/consul/docs/lambda/invocation","id":"sidebar-nav-item-432"},{"title":"Invoke Services from Lambda Functions","path":"lambda/invoke-from-lambda","badge":{"text":"BETA","type":"outlined","color":"neutral"},"filePath":"../content/docs/lambda/invoke-from-lambda.mdx","fullPath":"/consul/docs/lambda/invoke-from-lambda","id":"sidebar-nav-item-433"}],"id":"sidebar-nav-item-426"},{"divider":true,"id":"sidebar-nav-item-434"},{"title":"HCP Consul","href":"/hcp/docs/consul","id":"sidebar-nav-item-435"},{"title":"Consul Enterprise","routes":[{"title":"Overview","path":"enterprise","filePath":"../content/docs/enterprise/index.mdx","fullPath":"/consul/docs/enterprise","id":"sidebar-nav-item-437"},{"title":"Long Term Support (LTS)","path":"enterprise/long-term-support","filePath":"../content/docs/enterprise/long-term-support.mdx","fullPath":"/consul/docs/enterprise/long-term-support","id":"sidebar-nav-item-438"},{"title":"Admin Partitions","path":"enterprise/admin-partitions","filePath":"../content/docs/enterprise/admin-partitions.mdx","fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-439"},{"title":"Audit Logging","path":"enterprise/audit-logging","filePath":"../content/docs/enterprise/audit-logging.mdx","fullPath":"/consul/docs/enterprise/audit-logging","id":"sidebar-nav-item-440"},{"title":"Automated Backups","path":"enterprise/backups","filePath":"../content/docs/enterprise/backups.mdx","fullPath":"/consul/docs/enterprise/backups","id":"sidebar-nav-item-441"},{"title":"Automated Upgrades","path":"enterprise/upgrades","filePath":"../content/docs/enterprise/upgrades.mdx","fullPath":"/consul/docs/enterprise/upgrades","id":"sidebar-nav-item-442"},{"title":"Enhanced Read Scalability","path":"enterprise/read-scale","filePath":"../content/docs/enterprise/read-scale.mdx","fullPath":"/consul/docs/enterprise/read-scale","id":"sidebar-nav-item-443"},{"title":"Fault injection","href":null,"fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-444","path":"/docs/connect/manage-traffic/fault-injection"},{"title":"FIPS","path":"enterprise/fips","filePath":"../content/docs/enterprise/fips.mdx","fullPath":"/consul/docs/enterprise/fips","id":"sidebar-nav-item-445"},{"title":"Single sign-on - OIDC","href":null,"fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-446","path":"/docs/security/acl/auth-methods/oidc"},{"title":"Redundancy Zones","path":"enterprise/redundancy","filePath":"../content/docs/enterprise/redundancy.mdx","fullPath":"/consul/docs/enterprise/redundancy","id":"sidebar-nav-item-447"},{"title":"Advanced Federation","path":"enterprise/federation","filePath":"../content/docs/enterprise/federation.mdx","fullPath":"/consul/docs/enterprise/federation","id":"sidebar-nav-item-448"},{"title":"Network Segments","routes":[{"title":"Network Segments Overview","path":"enterprise/network-segments/network-segments-overview","filePath":"../content/docs/enterprise/network-segments/network-segments-overview.mdx","fullPath":"/consul/docs/enterprise/network-segments/network-segments-overview","id":"sidebar-nav-item-450"},{"title":"Create a Network Segment","path":"enterprise/network-segments/create-network-segment","filePath":"../content/docs/enterprise/network-segments/create-network-segment.mdx","fullPath":"/consul/docs/enterprise/network-segments/create-network-segment","id":"sidebar-nav-item-451"}],"id":"sidebar-nav-item-449"},{"title":"Namespaces","path":"enterprise/namespaces","filePath":"../content/docs/enterprise/namespaces.mdx","fullPath":"/consul/docs/enterprise/namespaces","id":"sidebar-nav-item-452"},{"title":"NIA with TFE","href":null,"fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-453","path":"/docs/nia/enterprise"},{"title":"License","routes":[{"title":"Overview","path":"enterprise/license/overview","filePath":"../content/docs/enterprise/license/overview.mdx","fullPath":"/consul/docs/enterprise/license/overview","id":"sidebar-nav-item-455"},{"title":"Automated entitlement utilization reporting","path":"enterprise/license/utilization-reporting","filePath":"../content/docs/enterprise/license/utilization-reporting.mdx","fullPath":"/consul/docs/enterprise/license/utilization-reporting","id":"sidebar-nav-item-456"},{"title":"FAQ","path":"enterprise/license/faq","filePath":"../content/docs/enterprise/license/faq.mdx","fullPath":"/consul/docs/enterprise/license/faq","id":"sidebar-nav-item-457"}],"id":"sidebar-nav-item-454"},{"title":"Enterprise to CE downgrade","path":"enterprise/ent-to-ce-downgrades","filePath":"../content/docs/enterprise/ent-to-ce-downgrades.mdx","fullPath":"/consul/docs/enterprise/ent-to-ce-downgrades","id":"sidebar-nav-item-458"}],"id":"sidebar-nav-item-436"},{"divider":true,"id":"sidebar-nav-item-459"},{"title":"Network Infrastructure Automation","routes":[{"title":"Overview","path":"nia","filePath":"../content/docs/nia/index.mdx","fullPath":"/consul/docs/nia","id":"sidebar-nav-item-461"},{"title":"Get Started","routes":[{"title":"Installation","path":"nia/installation/install","filePath":"../content/docs/nia/installation/install.mdx","fullPath":"/consul/docs/nia/installation/install","id":"sidebar-nav-item-463"},{"title":"Configuration","path":"nia/installation/configure","filePath":"../content/docs/nia/installation/configure.mdx","fullPath":"/consul/docs/nia/installation/configure","id":"sidebar-nav-item-464"}],"id":"sidebar-nav-item-462"},{"title":"Usage","routes":[{"title":"Requirements","path":"nia/usage/requirements","filePath":"../content/docs/nia/usage/requirements.mdx","fullPath":"/consul/docs/nia/usage/requirements","id":"sidebar-nav-item-466"},{"title":"Run Consul-Terraform-Sync","path":"nia/usage/run","filePath":"../content/docs/nia/usage/run.mdx","fullPath":"/consul/docs/nia/usage/run","id":"sidebar-nav-item-467"},{"title":"Run Consul-Terraform-Sync with High Availability","path":"nia/usage/run-ha","filePath":"../content/docs/nia/usage/run-ha.mdx","fullPath":"/consul/docs/nia/usage/run-ha","id":"sidebar-nav-item-468"},{"title":"Error Messages","path":"nia/usage/errors-ref","filePath":"../content/docs/nia/usage/errors-ref.mdx","fullPath":"/consul/docs/nia/usage/errors-ref","id":"sidebar-nav-item-469"}],"id":"sidebar-nav-item-465"},{"title":"Architecture","path":"nia/architecture","filePath":"../content/docs/nia/architecture.mdx","fullPath":"/consul/docs/nia/architecture","id":"sidebar-nav-item-470"},{"title":"API","routes":[{"title":"Overview","path":"nia/api","filePath":"../content/docs/nia/api/index.mdx","fullPath":"/consul/docs/nia/api","id":"sidebar-nav-item-472"},{"title":"Status","path":"nia/api/status","filePath":"../content/docs/nia/api/status.mdx","fullPath":"/consul/docs/nia/api/status","id":"sidebar-nav-item-473"},{"title":"Tasks","path":"nia/api/tasks","filePath":"../content/docs/nia/api/tasks.mdx","fullPath":"/consul/docs/nia/api/tasks","id":"sidebar-nav-item-474"},{"title":"Health","path":"nia/api/health","filePath":"../content/docs/nia/api/health.mdx","fullPath":"/consul/docs/nia/api/health","id":"sidebar-nav-item-475"}],"id":"sidebar-nav-item-471"},{"title":"CLI","routes":[{"title":"Overview","path":"nia/cli","filePath":"../content/docs/nia/cli/index.mdx","fullPath":"/consul/docs/nia/cli","id":"sidebar-nav-item-477"},{"title":"task","path":"nia/cli/task","filePath":"../content/docs/nia/cli/task.mdx","fullPath":"/consul/docs/nia/cli/task","id":"sidebar-nav-item-478"},{"title":"start","path":"nia/cli/start","filePath":"../content/docs/nia/cli/start.mdx","fullPath":"/consul/docs/nia/cli/start","id":"sidebar-nav-item-479"}],"id":"sidebar-nav-item-476"},{"title":"Configuration","path":"nia/configuration","filePath":"../content/docs/nia/configuration.mdx","fullPath":"/consul/docs/nia/configuration","id":"sidebar-nav-item-480"},{"title":"Tasks","path":"nia/tasks","filePath":"../content/docs/nia/tasks.mdx","fullPath":"/consul/docs/nia/tasks","id":"sidebar-nav-item-481"},{"title":"Terraform Modules","path":"nia/terraform-modules","filePath":"../content/docs/nia/terraform-modules.mdx","fullPath":"/consul/docs/nia/terraform-modules","id":"sidebar-nav-item-482"},{"title":"Enterprise","routes":[{"title":"Overview","path":"nia/enterprise","filePath":"../content/docs/nia/enterprise/index.mdx","fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-484"},{"title":"License","path":"nia/enterprise/license","filePath":"../content/docs/nia/enterprise/license.mdx","fullPath":"/consul/docs/nia/enterprise/license","id":"sidebar-nav-item-485"},{"title":"Terraform Cloud Driver","href":null,"fullPath":"/consul/docs/nia/network-drivers/terraform-cloud","id":"sidebar-nav-item-486","path":"/docs/nia/network-drivers/terraform-cloud"}],"id":"sidebar-nav-item-483"},{"title":"Network Drivers","routes":[{"title":"Overview","path":"nia/network-drivers","filePath":"../content/docs/nia/network-drivers/index.mdx","fullPath":"/consul/docs/nia/network-drivers","id":"sidebar-nav-item-488"},{"title":"Terraform","path":"nia/network-drivers/terraform","filePath":"../content/docs/nia/network-drivers/terraform.mdx","fullPath":"/consul/docs/nia/network-drivers/terraform","id":"sidebar-nav-item-489"},{"title":"Terraform Cloud","path":"nia/network-drivers/terraform-cloud","filePath":"../content/docs/nia/network-drivers/terraform-cloud.mdx","fullPath":"/consul/docs/nia/network-drivers/terraform-cloud","id":"sidebar-nav-item-490"}],"id":"sidebar-nav-item-487"},{"title":"Compatibility","path":"nia/compatibility","filePath":"../content/docs/nia/compatibility.mdx","fullPath":"/consul/docs/nia/compatibility","id":"sidebar-nav-item-491"}],"id":"sidebar-nav-item-460"}],"title":"Documentation","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/consul/blob/main/website/../content/docs/architecture/scale.mdx"},"metadata":{"title":"Recommendations for operating Consul at scale","description":"When using Consul for large scale deployments, you can ensure network resilience by tailoring your network to your needs. Learn more about HashiCorp's recommendations for deploying Consul at scale.","layout":null},"outlineItems":[{"title":"Operating Consul at Scale","url":"#operating-consul-at-scale","dataHeapTrack":"toc-list-item-index-0"},{"title":"Overview","url":"#overview","dataHeapTrack":"toc-list-item-index-1"},{"title":"General deployment recommendations","url":"#general-deployment-recommendations","dataHeapTrack":"toc-list-item-index-2"},{"title":"Consul server deployment recommendations","url":"#consul-server-deployment-recommendations","dataHeapTrack":"toc-list-item-index-3"},{"title":"Resource usage and metrics recommendations","url":"#resource-usage-and-metrics-recommendations","dataHeapTrack":"toc-list-item-index-4"},{"title":"Performance considerations for specific use cases","url":"#performance-considerations-for-specific-use-cases","dataHeapTrack":"toc-list-item-index-5"}],"pageHeading":{"id":"operating-consul-at-scale","title":"Operating Consul at Scale"},"mdxSource":{"compiledSource":"var d=Object.defineProperty,p=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var l=(a,t,n)=>t in a?d(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,e=(a,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(a,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&l(a,n,t[n]);return a},c=(a,t)=>p(a,m(t));var u=(a,t)=>{var n={};for(var s in a)o.call(a,s)&&t.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&r)for(var s of r(a))t.indexOf(s)<0&&i.call(a,s)&&(n[s]=a[s]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var s=n,{components:a}=s,t=u(s,[\"components\"]);return mdx(MDXLayout,c(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"This page describes how Consul's architecture impacts its performance with large scale deployments and shares recommendations for operating Consul in production at scale.\"),mdx(\"h2\",e({},{id:\"overview\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#overview\",\"aria-label\":\"overview permalink\"}),\"\\xBB\"),\"Overview\"),mdx(\"p\",null,\"Consul is a distributed service networking system deployed as a centralized set of servers that coordinate network activity using sidecars that are located alongside user workloads. When Consul is used for its service mesh capabilities, servers also generate configurations for Envoy proxies that run alongside service instances. These proxies support service mesh capabilities like end-to-end mTLS and progressive deployments.\"),mdx(\"p\",null,\"Consul can be deployed in either a single datacenter or across multiple datacenters by establishing WAN federation or peering connections. In this context, a datacenter refers to a named environment whose hosts can communicate with low networking latency. Typically, users map a Consul datacenter to a cloud provider region such as AWS \",mdx(\"inlineCode\",{parentName:\"p\"},\"us-east-1\"),\" or Azure \",mdx(\"inlineCode\",{parentName:\"p\"},\"East US\"),\".\"),mdx(\"p\",null,\"To ensure consistency and high availability, Consul servers share data using the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/architecture/consensus\"}),\"Raft consensus protocol\"),\". When persisting data, Consul uses BoltDB to store Raft logs and a custom file format for state snapshots. For more information, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/architecture\"}),\"Consul architecture\"),\".\"),mdx(\"h2\",e({},{id:\"general-deployment-recommendations\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#general-deployment-recommendations\",\"aria-label\":\"general deployment recommendations permalink\"}),\"\\xBB\"),\"General deployment recommendations\"),mdx(\"p\",null,\"This section provides general configuration and monitoring recommendations for operating Consul at scale.\"),mdx(\"h3\",e({},{id:\"data-plane-resiliency\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#data-plane-resiliency\",\"aria-label\":\"data plane resiliency permalink\"}),\"\\xBB\"),\"Data plane resiliency\"),mdx(\"p\",null,\"To make service-to-service communication resilient against outages and failures, we recommend spreading multiple service instances for a service across fault domains. Resilient deployments spread services across multiples of the following:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Infrastructure-level availability zones\"),mdx(\"li\",{parentName:\"ul\"},\"Runtime platform instances, such as Kubernetes clusters\"),mdx(\"li\",{parentName:\"ul\"},\"Consul datacenters\")),mdx(\"p\",null,\"In the event that any individual domain experiences a failure, service failover ensures that healthy instances in other domains remain discoverable. Consul automatically provides service failover between instances within a single \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/enterprise/admin-partitions\"}),\"admin partition\"),\" or datacenter.\"),mdx(\"p\",null,\"Service failover across Consul datacenters must be configured in the datacenters before you can use it. Use one of the following methods to configure failover across datacenters:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"If you are using Consul service mesh\"),\": Implement failover using \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/connect/config-entries/service-resolver#failover\"}),\"service-resolver configuration entries\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"If you are using Consul service discovery without service mesh\"),\": Implement \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/tutorials/developer-discovery/automate-geo-failover\"}),\"geo-redundant failover using prepared queries\"),\".\")),mdx(\"h3\",e({},{id:\"control-plane-resiliency\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#control-plane-resiliency\",\"aria-label\":\"control plane resiliency permalink\"}),\"\\xBB\"),\"Control plane resiliency\"),mdx(\"p\",null,\"When a large number services are deployed to a single datacenter, the Consul servers may experience slower network performance. To make the control plane more resilient against slowdowns and outages, limit the size of individual datacenters by spreading deployments across availability zones, runtimes, and datacenters.\"),mdx(\"h4\",e({},{id:\"datacenter-size\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#datacenter-size\",\"aria-label\":\"datacenter size permalink\"}),\"\\xBB\"),\"Datacenter size\"),mdx(\"p\",null,\"To ensure resiliency, we recommend limiting deployments to a maximum of 5,000 Consul client agents per Consul datacenter. There are two reasons for this recommendation:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Blast radius reduction\"),\": When Consul suffers a server outage in a datacenter or region, \",mdx(\"em\",{parentName:\"li\"},\"blast radius\"),\" refers to the number of Consul clients or dataplanes attached to that datacenter that can no longer communicate as a result. We recommend limiting the total number of clients attached to a single Consul datacenter in order to reduce the size of its blast radius. Even though Consul is able to run clusters with 10,000 or more nodes, it takes longer to bring larger deployments back online after an outage, which impacts time to recovery.\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Agent gossip management\"),\": Consul agents use the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/architecture/gossip\"}),\"gossip protocol\"),\" to share membership information in a gossip pool. By default, all client agents in a single Consul datacenter are in a single gossip pool. Whenever an agent joins or leaves the gossip pool, the other agents propagate that event throughout the pool. If a Consul datacenter experiences \",mdx(\"em\",{parentName:\"li\"},\"agent churn\"),\", or a consistently high rate of agents joining and leaving a single pool, cluster performance may be affected by gossip messages being generated faster than they can be transmitted. The result is an ever-growing message queue.\")),mdx(\"p\",null,\"To mitigate these risks, we recommend a maximum of 5,000 Consul client agents in a single gossip pool. There are several strategies for making gossip pools smaller:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"Run exactly one Consul agent per host in the infrastructure.\"),mdx(\"li\",{parentName:\"ol\"},\"Break up the single Consul datacenter into multiple smaller datacenters.\"),mdx(\"li\",{parentName:\"ol\"},\"Enterprise users can define \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/enterprise/network-segments/network-segments-overview\"}),\"network segments\"),\" to divide the single gossip pool in the Consul datacenter into multiple smaller pools.\")),mdx(\"p\",null,\"If appropriate for your use case, we recommend breaking up a single Consul datacenter into multiple smaller datacenters. Running multiple datacenters reduces your network\\u2019s blast radius more than applying network segments.\"),mdx(\"p\",null,\"Be aware that the number 5,000 is a heuristic for deployments. The number of agents you deploy per datacenter is limited by performance, not Consul itself. Because gossip stability risk is determined by \",mdx(\"em\",{parentName:\"p\"},\"the rate of agent churn\"),\" rather than \",mdx(\"em\",{parentName:\"p\"},\"the number of nodes\"),\", a gossip pool with mostly static nodes may be able to operate effectively with more than 5,000 agents. Meanwhile, a gossip pool with highly dynamic agents, such as spot fleet instances and serverless functions where 10% of agents are replaced each day, may need to be smaller than 5,000 agents.\"),mdx(\"p\",null,\"For additional information about the specific tests we conducted on Consul deployments at scale in order to generate these recommendations, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.hashicorp.com/blog/consul-scale-test-report-to-observe-gossip-stability\"}),\"Consul Scale Test Report to Observe Gossip Stability\"),\" on the HashiCorp blog.\"),mdx(\"p\",null,\"For most use cases, a limit of 5,000 agents is appropriate. When the \",mdx(\"inlineCode\",{parentName:\"p\"},\"consul.serf.queue.Intent\"),\" metric is consistently high, it is an indication that the gossip pool cannot keep up with the sustained level of churn. In this situation, reduce the churn by lowering the number agents per datacenter.\"),mdx(\"h4\",e({},{id:\"kubernetes-specific-guidance\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#kubernetes-specific-guidance\",\"aria-label\":\"kubernetes specific guidance permalink\"}),\"\\xBB\"),\"Kubernetes-specific guidance\"),mdx(\"p\",null,\"In Kubernetes, even though it is possible to deploy Consul agents inside pods alongside services running in the same pod, this unsupported deployment pattern has known performance issues at scale. At large volumes, pod registration and deregistration in Kubernetes causes gossip instability that can lead to cascading failures as services are marked unhealthy, resulting in further cluster churn.\"),mdx(\"p\",null,\"In Consul v1.14 and higher, Consul on Kubernetes does not need to run client agents on every node in a cluster for service discovery and service mesh. This deployment configuration lowers Consul\\u2019s resource usage in the data plane, but requires additional resources in the control plane to process \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#xds-server-parameters\"}),\"xDS resources\"),\". To learn more, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect/dataplane\"}),\"simplified service mesh with Consul Dataplane\"),\".\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"If you use Kubernetes and Consul as a backend for Vault\"),\": Use Vault\\u2019s integrated storage backend instead of Consul. A runtime dependency conflict prevents Consul dataplanes from being compatible with Vault. If you need to use Consul v1.14 and higher as a backend for Vault in your Kubernetes deployment, create a separate Consul datacenter that is not federated or peered to your other Consul servers. You can size this datacenter according to your needs and use it exclusively for backend storage for Vault.\"),mdx(\"h2\",e({},{id:\"consul-server-deployment-recommendations\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#consul-server-deployment-recommendations\",\"aria-label\":\"consul server deployment recommendations permalink\"}),\"\\xBB\"),\"Consul server deployment recommendations\"),mdx(\"p\",null,\"Consul server agents are an important part of Consul\\u2019s architecture. This section summarizes the differences between running managed and self-managed servers, as well as recommendations on the number of servers to run, how to deploy servers across redundancy zones, hardware requirements, and cloud provider integrations.\"),mdx(\"h3\",e({},{id:\"consul-server-runtimes\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#consul-server-runtimes\",\"aria-label\":\"consul server runtimes permalink\"}),\"\\xBB\"),\"Consul server runtimes\"),mdx(\"p\",null,\"Consul servers can be deployed on a few different runtimes:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"HashiCorp Cloud Platform (HCP) Consul (Managed)\"),\". These Consul servers are deployed in a hosted environment managed by HCP. To get started with HCP Consul servers in Kubernetes or VM deployments, refer to the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/tutorials/get-started-hcp/hcp-gs-deploy\"}),\"Deploy HCP Consul tutorial\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"VMs or bare metal servers (Self-managed)\"),\". To get started with Consul on VMs or bare metal servers, refer to the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/tutorials/get-started-vms/virtual-machine-gs-deploy\"}),\"Deploy Consul server tutorial\"),\". For a full list of configuration options, refer to \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent\"}),\"Agents Overview\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Kubernetes (Self-managed)\"),\". To get started with Consul on Kubernetes, refer to the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/tutorials/get-started-kubernetes/kubernetes-gs-deploy\"}),\"Deploy Consul on Kubernetes tutorial\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Other container environments, including Docker, Rancher, and Mesos (Self-managed)\"),\".\")),mdx(\"p\",null,\"When operating Consul at scale, self-managed VM or bare metal server deployments offer the most flexibility. Some Consul Enterprise features that can enhance fault tolerance and read scalability, such as \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/enterprise/redundancy\"}),\"redundancy zones\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/enterprise/read-scale\"}),\"read replicas\"),\", are not available to server agents on Kubernetes runtimes. To learn more, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/enterprise#feature-availability-by-runtime\"}),\"Consul Enterprise feature availability by runtime\"),\".\"),mdx(\"h3\",e({},{id:\"number-of-consul-servers\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#number-of-consul-servers\",\"aria-label\":\"number of consul servers permalink\"}),\"\\xBB\"),\"Number of Consul servers\"),mdx(\"p\",null,\"Determining the number of Consul servers to deploy on your network has two key considerations:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Fault tolerance\"),\": The number of server outages your deployment can tolerate while maintaining quorum. Additional servers increase a network\\u2019s fault tolerance.\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"strong\",{parentName:\"li\"},\"Performance scalability\"),\": To handle more requests, additional servers produce latency and slow the quorum process. Having too many servers impedes your network instead of helping it.\")),mdx(\"p\",null,\"Fault tolerance should determine your initial decision for how many Consul server agents to deploy. Our recommendation for the number of servers to deploy depends on whether you have access to Consul Enterprise redundancy zones:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"With redundancy zones\"),\": Deploy 6 Consul servers across 3 availability zones. This deployment provides the performance of a 3 server deployment with the fault tolerance of a 7 server deployment.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Without redundancy zones\"),\": Deploy 5 Consul servers across 3 availability zones. All 5 servers should be voting servers, not \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/enterprise/read-scale\"}),\"read replicas\"),\".\")),mdx(\"p\",null,\"For more details, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/architecture/improving-consul-resilience\"}),\"Improving Consul Resilience\"),\".\"),mdx(\"h3\",e({},{id:\"server-requirements\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#server-requirements\",\"aria-label\":\"server requirements permalink\"}),\"\\xBB\"),\"Server requirements\"),mdx(\"p\",null,\"To ensure your server nodes are a sufficient size, we recommend reviewing \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/tutorials/production-deploy/reference-architecture#hardware-sizing-for-consul-servers\"}),\"hardware sizing for Consul servers\"),\". If your network needs to handle heavy workloads, refer to our recommendations in \",mdx(\"a\",e({parentName:\"p\"},{href:\"#read-heavy-workload-sources-and-solutions\"}),\"read-heavy workload sources and solutions\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"#write-heavy-workload-sources-and-solutions\"}),\"write-heavy workload sources and solutions\"),\".\"),mdx(\"h4\",e({},{id:\"file-descriptors\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#file-descriptors\",\"aria-label\":\"file descriptors permalink\"}),\"\\xBB\"),\"File descriptors\"),mdx(\"p\",null,\"Consul's agents use network sockets for gossip communication with the other nodes and agents. As a result, servers create file descriptors for connections from clients, connections from other servers, watch handlers, health checks, and log files. For write-heavy clusters, you must increase the size limit for the number of file descriptions from the default value, 1024. We recommend using a number that is two times higher than your expected number of clients in the cluster.\"),mdx(\"h4\",e({},{id:\"auto-scaling-groups\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#auto-scaling-groups\",\"aria-label\":\"auto scaling groups permalink\"}),\"\\xBB\"),\"Auto scaling groups\"),mdx(\"p\",null,\"Auto scaling groups (ASGs) are infrastructure associations in cloud providers used to ensure a specific number of replicas are available for a deployment. When using ASGs for Consul servers, there are specific requirements and processes for bootstrapping Raft and maintaining quorum.\"),mdx(\"p\",null,\"We recommend using the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/cli-flags#_bootstrap_expect\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"bootstrap-expect\"),\" command-line flag\"),\" during cluster creation. However, if you spawn new servers to add to a cluster or upgrade servers, do not configure them to automatically bootstrap. If \",mdx(\"inlineCode\",{parentName:\"p\"},\"bootstrap-expect\"),\" is set on these replicas, it is possible for them to create a separate Raft system, which causes a \",mdx(\"em\",{parentName:\"p\"},\"split brain\"),\" and leads to errors and general cluster instability.\"),mdx(\"h4\",e({},{id:\"numa-architecture-awareness\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#numa-architecture-awareness\",\"aria-label\":\"numa architecture awareness permalink\"}),\"\\xBB\"),\"NUMA architecture awareness\"),mdx(\"p\",null,\"Some cloud providers offer extremely large instance sizes with Non-Uniform Memory Access (NUMA) architectures. Because the Go runtime is not NUMA aware, Consul is not NUMA aware. Even though you can run Consul on NUMA architecture, it will not take advantage of the multiprocessing capabilities.\"),mdx(\"h3\",e({},{id:\"consistency-modes\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#consistency-modes\",\"aria-label\":\"consistency modes permalink\"}),\"\\xBB\"),\"Consistency modes\"),mdx(\"p\",null,\"Consul offers different \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency#stale\"}),\"consistency modes\"),\" for both its DNS and HTTP APIs.\"),mdx(\"h4\",e({},{id:\"dns\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#dns\",\"aria-label\":\"dns permalink\"}),\"\\xBB\"),\"DNS\"),mdx(\"p\",null,\"We strongly recommend using \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency#consul-dns-queries\"}),\"stale consistency mode for DNS lookups\"),\" to optimize for performance over consistency when operating at scale. It is enabled by default and configured with \",mdx(\"inlineCode\",{parentName:\"p\"},\"dns_config.allow_stale\"),\".\"),mdx(\"p\",null,\"We also recommend that you do not configure \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency#limiting-staleness-advanced-usage\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dns_config.max_stale\"),\" to limit the staleness of DNS responses\"),\", as it may result in a prolonged outage if your Consul servers become overloaded. If bounded result consistency is required by a service, consider modifying the service to use consistent service discovery HTTP API queries instead of DNS lookups.\"),mdx(\"p\",null,\"Avoid using \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#dns_use_cache\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"dns_config.use_cache\")),\" when operating Consul at scale. Because the Consul agent cache allocates memory for each requested route and each allocation can live up to 3 days, severe memory issues may occur. To implement DNS caching, we instead recommend that you \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/tutorials/networking/dns-caching#ttl\"}),\"configure TTLs for services and nodes\"),\" to enable the DNS client to cache responses from Consul.\"),mdx(\"h4\",e({},{id:\"http-api\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#http-api\",\"aria-label\":\"http api permalink\"}),\"\\xBB\"),\"HTTP API\"),mdx(\"p\",null,\"By default, all HTTP API read requests use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency#default-1\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"default\"),\" consistency mode\"),\" unless overridden on a per-request basis. We do not recommend changing the default consistency mode for HTTP API requests.\"),mdx(\"p\",null,\"We also recommend that you do not configure \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency#changing-the-default-consistency-mode-advanced-usage\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"http_config.discovery_max_stale\")),\" to limit the staleness of HTTP responses.\"),mdx(\"h2\",e({},{id:\"resource-usage-and-metrics-recommendations\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#resource-usage-and-metrics-recommendations\",\"aria-label\":\"resource usage and metrics recommendations permalink\"}),\"\\xBB\"),\"Resource usage and metrics recommendations\"),mdx(\"p\",null,\"While operating Consul, monitor the CPU load on the Consul server agents and use metrics from agent telemetry to figure out the cause. Procedures for mitigating heavy resource usage depend on whether the load is caused by read operations, write operations, or Consul\\u2019s consensus protocol.\"),mdx(\"h3\",e({},{id:\"read-heavy-workload-sources-and-solutions\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#read-heavy-workload-sources-and-solutions\",\"aria-label\":\"read heavy workload sources and solutions permalink\"}),\"\\xBB\"),\"Read-heavy workload sources and solutions\"),mdx(\"p\",null,\"The highest CPU load usually belongs to the current leader. If the CPU load is high, request load is likely a major contributor. Check the following \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#server-health\"}),\"server health metrics\"),\":\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"consul-rpc\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#consul-rpc\",\"aria-label\":\"consul rpc permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.rpc.*\")),\" - Traditional RPC metrics. The most relevant metrics for understanding server CPU load in read-heavy workloads are \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.rpc.query\"),\" and \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.rpc.queries_blocking\"),\".\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"consul-grpc-server\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#consul-grpc-server\",\"aria-label\":\"consul grpc server permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.grpc.server.*\")),\" - Metrics for the number of streams being processed by the server.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"consul-xds-server\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#consul-xds-server\",\"aria-label\":\"consul xds server permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.xds.server.*\")),\" - Metrics for the Envoy xDS resources being processed by the server. In Consul v1.14 and higher, these metrics have the potential to become a significant source of read load. Refer to \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/connect/dataplane\"}),\"Consul dataplanes\"),\" for more information.\")),mdx(\"p\",null,\"Depending on your needs, choose one of the following strategies to mitigate server CPU load:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"The fastest mitigation strategy is to vertically scale servers. However, this strategy increases compute costs and does not scale indefinitely.\"),mdx(\"li\",{parentName:\"ul\"},\"The most effective long term mitigation strategy is to use \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/api-docs/features/consistency#stale\"}),\"stale consistency mode\"),\" for as many read requests as possible. In Consul v1.12 and higher, operators can use the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/telemetry#server-workload\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.rpc.server.call\"),\" metric\"),\" to identify the most frequent type of read requests made to the Consul servers. Cross reference the results with each endpoint\\u2019s \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/api-docs\"}),\"HTTP API documentation\"),\" and use stale consistency for endpoints that support it.\"),mdx(\"li\",{parentName:\"ul\"},\"If most read requests already use stale consistency mode and you still need to reduce your request load, add more non-voting servers to your deployment. You can use either \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/enterprise/redundancy\"}),\"redundancy zones\"),\" or \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/enterprise/read-scale\"}),\"read replicas\"),\" to scale reads without impacting write latency. We recommend adding more servers to redundancy zones because they improve both fault tolerance and stale read scalability.\"),mdx(\"li\",{parentName:\"ul\"},\"In Consul v1.14 and higher, servers handle Envoy XDS streams for \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/connect/dataplane\"}),\"Consul Dataplane deployments\"),\" in stale consistency mode. As a result, server consistency mode is not configurable. Use the \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.xds.server.*\"),\" metrics to identify issues related to XDS streams.\")),mdx(\"h3\",e({},{id:\"write-heavy-workload-sources-and-solutions\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#write-heavy-workload-sources-and-solutions\",\"aria-label\":\"write heavy workload sources and solutions permalink\"}),\"\\xBB\"),\"Write-heavy workload sources and solutions\"),mdx(\"p\",null,\"Consul is write-limited by disk I/O. For write-heavy workloads, we recommend using NVMe disks.\"),mdx(\"p\",null,\"As a starting point, you should make sure your hardware meets the requirements for \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/tutorials/production-deploy/reference-architecture#hardware-sizing-for-consul-servers\"}),\"large size server clusters\"),\", which has 7500+ IOps and 250+ MB/s disk throughput. IOps should be around 5 to 10 times the expected write rate. Conduct further analysis around disk sizing and your expected write rates to understand your network\\u2019s specific needs.\"),mdx(\"p\",null,\"If you use network storage, such as AWS EBS, we recommend provisioned I/O volumes. While general purpose volumes function properly, their burstable IOps make it harder to capacity plan. A small peak in writes may not trigger alerts, but as usage grows you may reach a point where the burst limit runs out and workload performance worsens.\"),mdx(\"p\",null,\"For more information, refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/install/performance#read-write-tuning\"}),\"server performance read/write tuning\"),\".\"),mdx(\"h3\",e({},{id:\"raft-database-performance-sources-and-solutions\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#raft-database-performance-sources-and-solutions\",\"aria-label\":\"raft database performance sources and solutions permalink\"}),\"\\xBB\"),\"Raft database performance sources and solutions\"),mdx(\"p\",null,\"Consul servers use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/architecture/consensus\"}),\"Raft consensus protocol\"),\" to maintain a consistent and fault-tolerant state. Raft stores most Consul data in a MemDB database, which is an in-memory database with indexing. In order to tolerate restarts and power outages, Consul writes Raft logs to disk using BoltDB. Refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry\"}),\"Agent telemetry\"),\" for more information on metrics for detecting write health.\"),mdx(\"p\",null,\"To monitor overall transaction performance, check for spikes in the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#transaction-timing\"}),\"Transaction timing metrics\"),\". You can also use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#raft-replication-capacity-issues\"}),\"Raft replication capacity issues metrics\"),\" to monitor Raft log snapshots and restores, as spikes and longer durations can be symptoms of overall write and disk contention issues.\"),mdx(\"p\",null,\"In Consul v1.11 and higher, you can also monitor Raft performance with the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#bolt-db-performance\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.raft.boltdb.*\"),\" metrics\"),\". We recommend monitoring \",mdx(\"inlineCode\",{parentName:\"p\"},\"consul.raft.boltdb.storeLogs\"),\" for increased activity above normal operating patterns.\"),mdx(\"p\",null,\"Refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#bolt-db-performance\"}),\"Consul agent telemetry\"),\" for more information on agent metrics and how to use them.\"),mdx(\"h4\",e({},{id:\"raft-database-size\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#raft-database-size\",\"aria-label\":\"raft database size permalink\"}),\"\\xBB\"),\"Raft database size\"),mdx(\"p\",null,\"Raft writes logs to BoltDB, which is designed as a single grow-only file. As a result, if you add 1GB of log entries and then you take a snapshot, only a small number of recent log entries may appear in the file. However, the actual file on disk never shrinks smaller than the 1GB size it grew.\"),mdx(\"p\",null,\"If you need to reclaim disk space, use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"bbolt\"),\" CLI to copy the data to a new database and repoint to the new database in the process. However, be aware that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"bbolt compact\"),\" command requires the database to be offline while being pointed to the new database.\"),mdx(\"p\",null,\"In many cases, including in large clusters, disk space is not a primary concern because Raft logs rarely grow larger than a small number of GiB. However, an inflated file with lots of free space significantly degrades write performance overall due to \",mdx(\"em\",{parentName:\"p\"},\"freelist management\"),\".\"),mdx(\"p\",null,\"After they are written to disk, Raft logs are eventually captured in a snapshot and log nodes are removed from BoltDB. BoltDB keeps track of the pages for the removed nodes in its freelist. BoltDB also writes this freelist to disk every time there is a Raft write. When the Raft log grows large quickly and then gets truncated, the size of the freelist can become very large. In the worst case reported to us, the freelist was over 10MB. When this large freelist is written to disk on every Raft commit, the result is a large write amplification for what should be a small Raft commit.\"),mdx(\"p\",null,\"To figure out if a Consul server\\u2019s disk performance issues are the result of BoldDB\\u2019s freelist, try the following strategies:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Compare network bandwidth inbound to the server against disk write bandwidth. If \",mdx(\"em\",{parentName:\"li\"},\"disk write bandwidth\"),\" is greater than or equal to 5 times the \",mdx(\"em\",{parentName:\"li\"},\"inbound network bandwidth\"),\", the disks are likely experiencing freelist management performance issues. While BoltDB freelist may cause problems at ratios lower than 5 to 1, high write bandwidth to inbound bandwidth ratios are a reliable indicator that BoltDB freelist is causing a problem.\"),mdx(\"li\",{parentName:\"ul\"},\"Use the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/telemetry#server-health\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"consul.raft.leader.dispatchLog\"),\" metric\"),\" to get information about how long it takes to write a batch of logs to disk.\"),mdx(\"li\",{parentName:\"ul\"},\"In Consul v1.13 and higher, you can use \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/telemetry#raft-thread-saturation\"}),\"Raft thread saturation metrics\"),\" to figure out if Raft is experiencing back pressure and is unable to accept new work due disk limitations.\")),mdx(\"p\",null,\"In Consul v1.11 and higher, you can prevent BoltDB from writing the freelist to disk by setting \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#NoFreelistSync\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"raftboltdb.NoFreelistSync\")),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\". This setting causes BoltDB to retain the freelist in memory instead. However, be aware that when BoltDB restarts, it needs to scan the database file to manually create the freelist. Small delays in startup may occur. On a fast disk, we measured these delays at the order of tens of seconds for a raft.db file that was 5GiB in size with only 250MiB of used pages.\"),mdx(\"p\",null,\"In general, set \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#NoFreelistSync\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"raftboltdb.NoFreelistSync\")),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" to produce the following effects:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Reduce the amount of data written to disk\"),mdx(\"li\",{parentName:\"ul\"},\"Increase the amount of time it takes to load the raft.db file on startup\")),mdx(\"p\",null,\"We recommend operators optimize networks according to their individual concerns. For example, if your server runs into disk performance issues but Consul servers do not restart often, setting \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#NoFreelistSync\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"raftboltdb.NoFreelistSync\")),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" may solve your problems. However, the same action causes issues for deployments with large database files and frequent server restarts.\"),mdx(\"h4\",e({},{id:\"raft-snapshots\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#raft-snapshots\",\"aria-label\":\"raft snapshots permalink\"}),\"\\xBB\"),\"Raft snapshots\"),mdx(\"p\",null,\"Each state change produces a Raft log entry, and each Consul server receives the same sequence of log entries, which results in servers sharing the same state. The sequence of Raft logs is periodically compacted by the leader into a \",mdx(\"em\",{parentName:\"p\"},\"snapshot\"),\" of state history. These snapshots are internal to Raft and are not the same as the snapshots generated through Consul's API, although they contain the same data. Raft snapshots are stored in the server's data directory in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"raft/\"),\" folder, alongside the logs in \",mdx(\"inlineCode\",{parentName:\"p\"},\"raft.db\"),\".\"),mdx(\"p\",null,\"When you add a new Consul server, it must catch up to the current state. It receives the latest snapshot from the leader followed by the sequence of logs between that snapshot and the leader\\u2019s current state. Each Raft log has a sequence number and each snapshot contains the last sequence number included in the snapshot. A combination of write-heavy workloads, a large state, congested networks, or busy servers makes it possible for new servers to struggle to catch up to the current state before the next log they need from the leader has already been truncated. The result is a \",mdx(\"em\",{parentName:\"p\"},\"snapshot install loop\"),\".\"),mdx(\"p\",null,\"For example, if snapshot A on the leader has an index of 99 and the current index is 150, then when a new server comes online the leader streams snapshot A to the new server for it to restore. However, this snapshot only enables the new server to catch up to index 99. Not only does the new server still need to catch up to index 150, but the leader continued to commit Raft logs in the meantime.\"),mdx(\"p\",null,\"When the leader takes snapshot B at index 199, it truncates the logs that accumulated between snapshot A and snapshot B, which means it truncates Raft logs with indexes between 100 and 199.\"),mdx(\"p\",null,\"Because the new server restored snapshot A, the new server has a current index of 99. It requests logs 100 to 150 because index 150 was the current index when it started the replication restore process. At this point, the leader recognizes that it only has logs 200 and higher, and does not have logs for indexes 100 to 150. The leader determines that the new server\\u2019s state is stale and starts the process over by sending the new server the latest snapshot, snapshot B.\"),mdx(\"p\",null,\"Consul keeps a configurable number of \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/config/config-files#raft_trailing_logs\"}),\"Raft trailing logs\"),\" to prevent the snapshot install loop from repeating. The trailing logs are the last logs that went into the snapshot, and the new server can more easily catch up to the current state using these logs. The default Raft trailing logs configuration value is suitable for most deployments.\"),mdx(\"p\",null,\"In Consul v1.10 and higher, operators can try to prevent a snapshot install loop by monitoring and comparing Consul servers\\u2019 \",mdx(\"inlineCode\",{parentName:\"p\"},\"consul.raft.rpc.installSnapshot\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"consul.raft.leader.oldestLogAge\"),\" timing metrics. Monitor these metrics for the following situations:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"After truncation, the lowest number on \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.raft.leader.oldestLogAge\"),\" should always be at least two times higher than the lowest number for \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.raft.rpc.installSnapshot\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"If these metrics are too close, increase the number of Raft trailing logs, which increases \",mdx(\"inlineCode\",{parentName:\"li\"},\"consul.raft.leader.oldestLogAge\"),\". Do not set the Raft trailing logs higher than necessary, as it can negatively affect write throughput and latency.\")),mdx(\"p\",null,\"For more information, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#raft-replication-capacity-issues\"}),\"Raft Replication Capacity Issues\"),\".\"),mdx(\"h2\",e({},{id:\"performance-considerations-for-specific-use-cases\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#performance-considerations-for-specific-use-cases\",\"aria-label\":\"performance considerations for specific use cases permalink\"}),\"\\xBB\"),\"Performance considerations for specific use cases\"),mdx(\"p\",null,\"This section provides configuration and monitoring recommendations for Consul deployments according to the features you prioritize and their use cases.\"),mdx(\"h3\",e({},{id:\"service-discovery\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#service-discovery\",\"aria-label\":\"service discovery permalink\"}),\"\\xBB\"),\"Service discovery\"),mdx(\"p\",null,\"To optimize performance for service discovery, we recommend deploying multiple small clusters with consistent numbers of service instances and watches.\"),mdx(\"p\",null,\"Several factors influence Consul performance at scale when used primarily for its service discovery and health check features. The factors you have control over include:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"The overall number of registered service instances\"),mdx(\"li\",{parentName:\"ul\"},\"The use of \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/api-docs/features/consistency#consul-dns-queries\"}),\"stale reads\"),\" for DNS queries\"),mdx(\"li\",{parentName:\"ul\"},\"The number of entities, such as Consul client agents or dataplane components, that are monitoring Consul for changes in a service's instances, including registration and health status. When any service change occurs, all of those entities incur a computational cost because they must process the state change and reconcile it with previously known data for the service. In addition, the Consul server agents also incur a computational cost when sending these updates.\"),mdx(\"li\",{parentName:\"ul\"},\"Number of \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/dynamic-app-config/watches\"}),\"watches\"),\" monitoring for changes to a service.\"),mdx(\"li\",{parentName:\"ul\"},\"Rate of catalog updates, which is affected by the following events:\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"A service instance\\u2019s health check status changes\"),mdx(\"li\",{parentName:\"ul\"},\"A service instance\\u2019s node loses connectivity to Consul servers\"),mdx(\"li\",{parentName:\"ul\"},\"The contents of the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/services/configuration/services-configuration-reference\"}),\"service definition file\"),\" changes\"),mdx(\"li\",{parentName:\"ul\"},\"Service instances are registered or deregistered\"),mdx(\"li\",{parentName:\"ul\"},\"Orchestrators such as Kubernetes or Nomad move a service to a new node\")))),mdx(\"p\",null,\"These factors can occur in combination with one another. Overall, the amount of work the servers complete for service discovery is the product of these factors:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Data size, which changes as the number of services and service instances increases\"),mdx(\"li\",{parentName:\"ul\"},\"The catalog update rate\"),mdx(\"li\",{parentName:\"ul\"},\"The number of active watches\")),mdx(\"p\",null,\"Because it is typical for these factors to increase in number as clusters grow, the CPU and network resources the servers require to distribute updates may eventually exceed linear growth.\"),mdx(\"p\",null,\"In situations where you can\\u2019t run a Consul client agent alongside the service instance you want to register with Consul, such as instances hosted externally or on legacy infrastructure, we recommend using \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/hashicorp/consul-esm\"}),\"Consul ESM\"),\".\"),mdx(\"p\",null,\"Consul ESM enables health checks and monitoring for external services. When using Consul ESM, we recommend running multiple instances to ensure redundancy.\"),mdx(\"h3\",e({},{id:\"service-mesh\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#service-mesh\",\"aria-label\":\"service mesh permalink\"}),\"\\xBB\"),\"Service mesh\"),mdx(\"p\",null,\"Because Consul\\u2019s service mesh uses service discovery subsystems, service mesh performance is also optimized by deploying multiple small clusters with consistent numbers of service instances and watches. Service mesh performance is influenced by the following additional factors:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"The \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/connect/transparent-proxy\"}),\"transparent proxy\"),\" feature causes client agents to listen for service instance updates across all services instead of a subset. To prevent performance issues, we recommend that you do not use the permissive intention, \",mdx(\"inlineCode\",{parentName:\"li\"},\"default: allow\"),\", with the transparent proxy feature. When combined, every service instance update propagates to every proxy, which causes additional server load.\"),mdx(\"li\",{parentName:\"ul\"},\"When you use the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/connect/ca/consul#built-in-ca\"}),\"built-in service mesh CA provider\"),\", Consul leaders are responsible for signing certificates used for mTLS across the service mesh. The impact on CPU utilization depends on the total number of service instances and configured certificate TTLs. You can use the \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/config/config-files#common-ca-config-options\"}),\"CA provider configuration options\"),\" to control the number of requests a server processes. We recommend adjusting \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/config/config-files#ca_csr_max_concurrent\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"csr_max_concurrent\")),\" and \",mdx(\"a\",e({parentName:\"li\"},{href:\"/consul/docs/agent/config/config-files#ca_csr_max_concurrent\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"csr_max_per_second\")),\" to suit your environment.\")),mdx(\"h3\",e({},{id:\"k-v-store\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#k-v-store\",\"aria-label\":\"k v store permalink\"}),\"\\xBB\"),\"K/V store\"),mdx(\"p\",null,\"While the K/V store in Consul has some similarities to object stores we recommend that you do not use it as a primary application data store.\"),mdx(\"p\",null,\"When using Consul's K/V store for application configuration and metadata, we recommend the following to optimize performance:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Values must be below 512 KB and transactions should be below 64 operations.\"),mdx(\"li\",{parentName:\"ul\"},\"The keyspace must be well bound. While 10,000 keys may not affect performance, millions of keys are more likely to cause performance issues.\"),mdx(\"li\",{parentName:\"ul\"},\"Total data size must fit in memory, with additional room for indexes. We recommend that the in-memory size is 3 times the raw key value size.\"),mdx(\"li\",{parentName:\"ul\"},\"Total data size should remain below 1 GB. Larger snapshots are possible on suitably fast hardware, but they significantly increase recovery times and the operational complexity needed for replication. We recommend limiting data size to keep the cluster healthy and able to recover during maintenance and outages.\"),mdx(\"li\",{parentName:\"ul\"},\"The K/V store is optimized for reading. To know when you need to make changes to server resources and capacity, we recommend carefully monitoring update rates after they exceed more than a hundred updates per second across the cluster.\"),mdx(\"li\",{parentName:\"ul\"},\"We recommend that you do not use the K/V store as a general purpose database or object store.\")),mdx(\"p\",null,\"In addition, we recommend that you do not use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/blocking\"}),\"blocking query mechanism\"),\" to listen for updates when your K/V store\\u2019s update rate is high. When a K/V result is updated too fast, blocking query loops degrade into busy loops. These loops consume excessive client CPU and cause high server load until appropriately throttled. Watching large key prefixes is unlikely to solve the issue because returning the entire key prefix every time it updates can quickly consume a lot of bandwidth.\"),mdx(\"h3\",e({},{id:\"backend-for-vault\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#backend-for-vault\",\"aria-label\":\"backend for vault permalink\"}),\"\\xBB\"),\"Backend for Vault\"),mdx(\"p\",null,\"At scale, using Consul as a backend for Vault results in increased memory and CPU utilization on Consul servers. It also produces unbounded growth in Consul\\u2019s data persistence layer that is proportional to both the amount of data being stored in Vault and the rate the data is updated.\"),mdx(\"p\",null,\"In situations where Consul handles large amounts of data and has high write throughput, we recommend adding monitoring for the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/agent/telemetry#raft-replication-capacity-issues\"}),\"capacity and health of raft replication on servers\"),\". If the server experiences heavy load when the size of its stored data is large enough, a follower may be unable to catch up on replication and become a voter after restarting. This situation occurs when the time it takes for a server to restore from disk takes longer than it takes for the leader to write a new snapshot and truncate its logs. Refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"#raft-snapshots\"}),\"Raft snapshots\"),\" for more information.\"),mdx(\"p\",null,\"Vault v1.4 and higher provides \",mdx(\"a\",e({parentName:\"p\"},{href:\"/vault/docs/concepts/integrated-storage\"}),\"integrated storage\"),\" as its recommended storage option. If you currently use Consul as a storage backend for Vault, we recommend switching to integrated storage. For a comparison between Vault's integrated storage and Consul as a backend for Vault, refer to \",mdx(\"a\",e({parentName:\"p\"},{href:\"/vault/docs/configuration/storage#integrated-storage-vs-consul-as-vault-storage\"}),\"storage backends in the Vault documentation\"),\". For detailed guidance on migrating the Vault backend from Consul to Vault's integrated storage, refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/vault/docs/configuration/storage#integrated-storage-vs-consul-as-vault-storage\"}),\"storage migration tutorial\"),\". Integrated storage improves resiliency by preventing a Consul outage from also affecting Vault functionality.\"))}MDXContent.isMDXComponent=!0;\n","scope":{"version":"latest"}},"product":{"name":"Consul","slug":"consul","algoliaConfig":{"indexName":"product_CONSUL","searchOnlyApiKey":"fbd5dc1f0078d41509fcc560386fd534"},"analyticsConfig":{"includedDomains":"consul.io www.consul.io","segmentWriteKey":"IyzLrqXkox5KJ8XL4fo8vTYNGfiKlTCm"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Consul by HashiCorp","description":"Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.","image":"https://www.consulproject.io/consul-public/img/og-image.png","icon":[{"href":"/consul-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.11.3","subnavItems":[],"basePaths":["docs","api-docs","commands","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"currentRootDocsPath":{"iconName":"docs","name":"Documentation","path":"docs"}},"projectName":null,"versions":null},"__N_SSG":true}