<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Envoy Proxy Configuration | Service Mesh | Consul | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Consul supports Envoy proxies to direct traffic throughout the service mesh. Learn about Consul versions and their Envoy support, and use the reference guide to review options for bootstrap configuration, dynamic configuration, and advanced topics like escape hatch overrides."/><meta name="twitter:description" content="Consul supports Envoy proxies to direct traffic throughout the service mesh. Learn about Consul versions and their Envoy support, and use the reference guide to review options for bootstrap configuration, dynamic configuration, and advanced topics like escape hatch overrides."/><meta property="og:site_name" content="Envoy Proxy Configuration | Service Mesh | Consul | HashiCorp Developer"/><meta property="og:title" content="Envoy Proxy Configuration | Service Mesh | Consul | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/consul.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/consul/docs/connect/proxies/envoy"/><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="icon" href="/icon.svg" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="zd-site-verification" content="xnvnvv1i0wl4tf0pzaymb" data-product="hcp"/><meta name="zd-site-verification" content="36fp2i1pj67d8cjtzf4fi9" data-product="terraform"/><meta name="zd-site-verification" content="nbe87kfyp1sck7b13vj1i" data-product="packer"/><meta name="zd-site-verification" content="wvsmmqa1cfb9am9zlwfj" data-product="consul"/><meta name="zd-site-verification" content="cw22oopfwr68ujj0n5pn9i" data-product="boundary"/><meta name="zd-site-verification" content="lkslvganwfgfqfwpdeicgh" data-product="vault"/><meta name="zd-site-verification" content="jl2wp2hoej9rz6c8rmqdns" data-product="nomad"/><meta name="zd-site-verification" content="2eb0cu6xceo73t0038m0tb" data-product="waypoint"/><meta name="zd-site-verification" content="n52xisxdf3higs2q9kuogd" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/consul.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Consul","item":"https://developer.hashicorp.com/consul"},{"@type":"ListItem","position":3,"name":"Documentation","item":"https://developer.hashicorp.com/consul/docs"},{"@type":"ListItem","position":4,"name":"Service Mesh","item":"https://developer.hashicorp.com/consul/docs/connect"},{"@type":"ListItem","position":5,"name":"Proxies","item":"https://developer.hashicorp.com/consul/docs/connect/proxies"},{"@type":"ListItem","position":6,"name":"Envoy proxies reference","item":"https://developer.hashicorp.com/consul/docs/connect/proxies/envoy"}]}]</script><meta name="next-head-count" content="31"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/62f3294bfc989add.css" as="style"/><link rel="stylesheet" href="/_next/static/css/62f3294bfc989add.css" data-n-g=""/><link rel="preload" href="/_next/static/css/dcb6e784b5764eb2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/dcb6e784b5764eb2.css" data-n-p=""/><link rel="preload" href="/_next/static/css/18ed324149c36ad6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/18ed324149c36ad6.css" data-n-p=""/><link rel="preload" href="/_next/static/css/fc1808d4a21f9a59.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fc1808d4a21f9a59.css" data-n-p=""/><link rel="preload" href="/_next/static/css/91dca0714ee7c672.css" as="style"/><link rel="stylesheet" href="/_next/static/css/91dca0714ee7c672.css" data-n-p=""/><link rel="preload" href="/_next/static/css/5fa2b4dd18e20c37.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5fa2b4dd18e20c37.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-f861fd4ab584f5dc.js" defer=""></script><script src="/_next/static/chunks/framework-56eb74ff06128874.js" defer=""></script><script src="/_next/static/chunks/main-0785f91db64576b8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-49535d849d7ff472.js" defer=""></script><script src="/_next/static/chunks/832-1733acefac904547.js" defer=""></script><script src="/_next/static/chunks/1122-3f2be94f653ef8d7.js" defer=""></script><script src="/_next/static/chunks/5973-f4f8c1167cd72fd3.js" defer=""></script><script src="/_next/static/chunks/1306-699e21fe04afb846.js" defer=""></script><script src="/_next/static/chunks/5888-731e387770363bca.js" defer=""></script><script src="/_next/static/chunks/6010-8790d8642bb38cba.js" defer=""></script><script src="/_next/static/chunks/7963-cdf3ff11e5b4f7ec.js" defer=""></script><script src="/_next/static/chunks/9325-e0903af1b37d2118.js" defer=""></script><script src="/_next/static/chunks/2291-52f1771184c676af.js" defer=""></script><script src="/_next/static/chunks/1825-58a66b9e99dc9bcd.js" defer=""></script><script src="/_next/static/chunks/7775-e851d12df43ee2d5.js" defer=""></script><script src="/_next/static/chunks/6075-8fa8c2611ee20dbb.js" defer=""></script><script src="/_next/static/chunks/7709-8138af14dcab3e76.js" defer=""></script><script src="/_next/static/chunks/pages/consul/docs/%5B...page%5D-8d1a4f03ffbee897.js" defer=""></script><script src="/_next/static/C_aCbyHEz7wf5PZ-lSB3G/_buildManifest.js" defer=""></script><script src="/_next/static/C_aCbyHEz7wf5PZ-lSB3G/_ssgManifest.js" defer=""></script></head><body><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://artemis.hashicorp.com/script/"+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics._cdn="https://artemis.hashicorp.com";analytics.SNIPPET_VERSION="4.1.0";}}();</script><div id="__next"><div class="style_root__dZhZu style_vagrant__u39kD style_isShown__D4mb6"><a href="https://www.hashicorp.com/blog/hashicorp-joins-ibm" class="style_linkElem__hCESK"><span class="style_textContainer__6CuI7 g-grid-container"><span class="style_tag__jbHGz g-type-body-small-x-strong">News<!-- --> </span><span class="style_text__rwS0u g-type-body-small">HashiCorp to join IBM to accelerate multi-cloud automation.<span class="style_linkText__E8GJf g-type-body-small-x-strong"> <!-- -->Read the blog â†’</span></span></span></a><button class="style_closeButton__57J9w"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_hashicorp-to-join-ibm-to-accelerate-multi-cloud-automation.=1')) {
      const element = document.querySelector('.style_root__dZhZu')
      element.classList.remove('style_isShown__D4mb6')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__MT1PZ"><div class="base-layout_root___qiZs" data-layout="base-new"><div class="base-layout_header__XhkxS"><header class="navigation-header_root__oE_HT"><div class="navigation-header_leftSide__V0xlc"><div class="product-page-content_productsDropdown__haUyw"><div class="dropdown-menu_root__Hwy5S"><div class="dropdown-menu_activatorWrapper__LxPRt"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__xXb00 g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__bnKKs" data-heap-track="navigation-header-dropdown-menu-activator"><span class="dropdown-menu_activatorLeadingIcon__YQQlH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__gXtly"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__r_cCd"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__AZWxN product-page-content_productsDropdownPane__bcdWz" id="navigation-header-menu-react-aria-1" style="display:none"><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.846 2.574a.25.25 0 01.308 0l5.25 4.12a.25.25 0 01.096.196v7.36a.75.75 0 001.5 0V6.89a1.75 1.75 0 00-.67-1.377L9.08 1.394a1.75 1.75 0 00-2.16 0l-5.25 4.12A1.75 1.75 0 001 6.89v7.36a.75.75 0 001.5 0V6.89a.25.25 0 01.096-.196l5.25-4.12z"></path><path d="M6.5 14.25V10.5h3v3.75a.75.75 0 001.5 0v-4C11 9.56 10.44 9 9.75 9h-3.5C5.56 9 5 9.56 5 10.25v4a.75.75 0 001.5 0z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Developer</span></div></div></a></li></ul><hr class="dropdown-menu_itemGroupDivider__X38aR"/><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/hcp"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Cloud Platform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/terraform"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Terraform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/packer"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Packer</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/consul"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Consul</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/vault"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-vault-brand)" d="M0 0l7.971 15.516L16 0H0zm6.732 6.16h-1.27V4.89h1.27v1.27zm0-1.906h-1.27V2.985h1.27v1.269zm1.904 3.81h-1.27v-1.27h1.27v1.27zm0-1.905h-1.27V4.89h1.27v1.27zm0-1.905h-1.27V2.985h1.27v1.269zm1.894 1.905H9.26V4.89h1.27v1.27zM9.26 4.254V2.985h1.27v1.269H9.26z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vault</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/boundary"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-boundary-brand)"><path d="M4.81 15v-1.085h2.25v-.67H5.968v-1.093h5.149L8.726 8l2.392-4.154H5.84v5.76H3V1h9.775l1.631 2.832L12.006 8l2.448 4.252L12.872 15H4.81z"></path><path d="M5.248 12.152h-1.09v1.092h1.09v-1.092zM3 13.907h1.09v1.092H3v-1.092z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Boundary</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/nomad"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-nomad-brand)" d="M8 0L1 4v8l7 4 7-4V4L8 0zm3.119 8.797L9.254 9.863 7.001 8.65v2.549l-2.118 1.33v-5.33l1.68-1.018 2.332 1.216V4.794l2.23-1.322-.006 5.325z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Nomad</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/waypoint"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-waypoint-brand)"><path d="M4 5.312h1.334L10 13.4l3.334-5.777L10.666 3H8l2.666 4.623L10 8.778 6.667 3H0l6 10.4 1.333-2.31L4 5.311zM14.002 6.463L16 3h-3.996l1.998 3.463z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Waypoint</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/vagrant"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="#1868F2" d="M13.08.75L9.924 2.58v1.123L8 8.245 6.076 3.703V2.58L2.92.75 1 1.864v1.293l4.276 10.514L8 15.25l2.724-1.579L15 3.157V1.864L13.08.75z"></path><path fill="#0850C5" d="M15 1.865l-3.157 1.829v1.124L9.28 10.57 8 11.312v3.939l2.724-1.579L15 3.158V1.865zM6.076 3.703V2.58l-1.92 1.113v1.125l2.564 5.751L8 9.827V8.245L6.076 3.703z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vagrant</span></div></div></a></li></ul></div></div></div><div class="product-page-content_productLinkAndNav__YTzcr"><a aria-label="Consul home" class="product-icon-text-link_root__bNTSz g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-product-logo-link" aria-describedby="" href="/consul"><div class="product-icon-text-lockup_root__358wV"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__Zp_5o"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg><span class="product-icon-text-lockup_text__nHTL7 hds-typography-body-200">Consul</span></div></a><nav class="nav-bar-list-container_nav__C_i0_"><ul class="nav-bar-list-container_ul___04HI"><li><a aria-label="Consul Install" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/consul/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Install</span></a></li><li><a aria-label="Consul Tutorials" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/consul/tutorials"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Tutorials</span></a></li><li><a aria-label="Consul Documentation" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/consul/docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Documentation</span></a></li><li><a aria-label="Consul API" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/consul/api-docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">API</span></a></li><li><a aria-label="Consul CLI" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/consul/commands"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">CLI</span></a></li><li><a aria-label="Consul Try Cloud" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="opens-in-new-tab-label-react-aria-18" target="_blank" href="https://portal.cloud.hashicorp.com/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-18">(opens in new tab)</span></li></ul></nav></div></div><div class="navigation-header_rightSide___Vvh_"><button aria-label="Search" class="command-bar-activator_root__qgVMy g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__ATQTg"><span class="command-bar-activator_leadingIcon__jECP5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M7.25 2a5.25 5.25 0 103.144 9.455l2.326 2.325a.75.75 0 101.06-1.06l-2.325-2.326A5.25 5.25 0 007.25 2zM3.5 7.25a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__pTZN_">Search</span></span><span class="command-bar-activator_right__XejfJ"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="cmd-ctrl-icon_root___TToz"><svg xmlns="http://www.w3.org/2000/svg" width="41" height="11" fill="none" viewBox="0 0 41 11"><path fill="#fff" fill-rule="evenodd" d="M4.125 2.063V3h2.25v-.937a2.062 2.062 0 1 1 2.063 2.062H7.5v2.25h.938a2.062 2.062 0 1 1-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 1 1-2.062-2.063H3v-2.25h-.937a2.062 2.062 0 1 1 2.062-2.062m-2.062-.938a.937.937 0 1 0 0 1.875H3v-.937a.937.937 0 0 0-.937-.938M7.5 7.5v.938a.937.937 0 1 0 .938-.938zM6.375 6.375v-2.25h-2.25v2.25zM2.063 7.5H3v.938a.937.937 0 1 1-.937-.938M7.5 3h.938a.937.937 0 1 0-.938-.937z" clip-rule="evenodd"/><path fill="#fff" d="M15.09 10.5 18.085 0h-1.097L14 10.5zM26.387 5.308c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041zM33.207 10.356h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 0 0-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354zM38.638 10.356h1.407V0h-1.407z"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="k-icon_root__a_5pR"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 8 10"><path fill="#fff" d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9z"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__EP1LY"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj"><button aria-controls="disclosure-react-aria-19-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo navigation-header_userDropdownDisclosureActivator__RayIV g-focus-ring-from-box-shadow-dark activator_hasIcon__5HO6W g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__kaK0w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__4_AVG"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-19-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><button class="list-item_button__nXy5K g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" aria-describedby="" href="/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__ZdUej"><hr class="list-item_separator__cBVLs"/></li><li class="list-item_root__ZdUej user-dropdown-switcher_listItem__Q_GIj hds-font-weight-medium"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-21">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__74S4w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-layout_contentArea__BMvQn"><div class="sidebar-sidecar-layout_root__h5rD8 sidebar-sidecar-layout_mainWidth-narrow__FhCbs"><div class="mobile-menu-container_root__fPUFu sidebar-sidecar-layout_sidebarContainer__4fcF8"><div class="sidebar-sidecar-layout_sidebarContentWrapper__ftn5q"><div class="sidebar_sidebar___fTlC"><div class="sidebar_backToLinkWrapper__F6iLs"><div class="sidebar-back-to-link_root__z_Hj1"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_primary__ESNCA" data-heap-track="standalone-link sidebar-back-to-link" aria-describedby="" href="/consul"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">Consul Home</span></div></a></div></div><div class="sidebar_filterInputWrapper__0_l_Y"><div class="filter-input_filterInputContainer__thZt3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="filter-input_filterIcon__UET0p filter-input_sharedIconColorAndPositioning__hXPit"><g fill="currentColor"><path d="M1 3.75A.75.75 0 011.75 3h12.5a.75.75 0 010 1.5H1.75A.75.75 0 011 3.75zM3.5 7.75A.75.75 0 014.25 7h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM6.75 11a.75.75 0 000 1.5h2.5a.75.75 0 000-1.5h-2.5z"></path></g></svg><input class="filter-input_filterInput__hga4N g-focus-ring-from-box-shadow" placeholder="Filter sidebar" autoComplete="off" autoCorrect="off" autoCapitalize="none" spellcheck="false" value=""/></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__IworY" id="sidebar-nav"><div class="g-screen-reader-only"><h2 class="sidebar-headings_root__tGfxC" id="sidebar-label">Documentation</h2></div><ul class="sidebar_navList__4Rg4g"><li><a class="sidebar-nav-highlight-item_root___pPhp g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-consul__NA90N" aria-describedby="" href="/consul/docs"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="sidebar-nav-highlight-item_icon__G8JxG"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg><span class="sidebar-nav-highlight-item_text__VORFJ hds-typography-body-200">Documentation</span></a></li><li id="sidebar-nav-item-0"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/intro"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">What is Consul?</span></a></li><li id="sidebar-nav-item-1"><button aria-controls="sidebar-nav-item-1-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-1-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Why Choose Consul?</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-7"><button aria-controls="sidebar-nav-item-7-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-7-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Core Concepts</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-10"><button aria-controls="sidebar-nav-item-10-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-10-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Get Started</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-22"><button aria-controls="sidebar-nav-item-22-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-22-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Architecture</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-36"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-37"><button aria-controls="sidebar-nav-item-37-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-37-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Release Notes</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-75"><button aria-controls="sidebar-nav-item-75-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-75-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Upgrade</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-86"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-87"><button aria-controls="sidebar-nav-item-87-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-87-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Services</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-104"><button aria-controls="sidebar-nav-item-104-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-104-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Service Mesh</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-104-list"><li id="sidebar-nav-item-105"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Overview</span></a></li><li id="sidebar-nav-item-106"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/connect-internals"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">How Service Mesh Works</span></a></li><li id="sidebar-nav-item-107"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/configuration"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Configuration</span></a></li><li id="sidebar-nav-item-108"><button aria-controls="sidebar-nav-item-108-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-108-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Configuration entries</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-128"><button aria-controls="sidebar-nav-item-128-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-128-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Proxies</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-128-list"><li id="sidebar-nav-item-129"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Overview</span></a></li><li id="sidebar-nav-item-130"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/deploy-service-mesh-proxies"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Deploy service mesh proxies</span></a></li><li id="sidebar-nav-item-131"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/deploy-sidecar-services"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Deploy sidecar services</span></a></li><li id="sidebar-nav-item-132"><button aria-controls="sidebar-nav-item-132-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-132-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Envoy Extensions</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-147"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/integrate"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Proxy integration</span></a></li><li id="sidebar-nav-item-148"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Proxy defaults configuration reference</span></a></li><li id="sidebar-nav-item-149"><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/envoy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Envoy proxies reference</span></a></li><li id="sidebar-nav-item-150"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/built-in"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Built-in proxy reference</span></a></li><li id="sidebar-nav-item-151"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Service mesh proxy configuration reference</span></a></li></ul></li><li id="sidebar-nav-item-152"><button aria-controls="sidebar-nav-item-152-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-152-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Service intentions</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-158"><button aria-controls="sidebar-nav-item-158-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-158-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Observability</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-162"><button aria-controls="sidebar-nav-item-162-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-162-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Manage traffic</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-176"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/connectivity-tasks"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Connectivity Tasks</span></a></li><li id="sidebar-nav-item-177"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/distributed-tracing"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Distributed Tracing</span></a></li><li id="sidebar-nav-item-178"><button aria-controls="sidebar-nav-item-178-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-178-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Gateways</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-221"><button aria-controls="sidebar-nav-item-221-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-221-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Cluster Peering</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-229"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/nomad"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Nomad</span></a></li><li id="sidebar-nav-item-230"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/k8s/connect"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Kubernetes</span></a></li><li id="sidebar-nav-item-231"><button aria-controls="sidebar-nav-item-231-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-231-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Native App Integration</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-234"><button aria-controls="sidebar-nav-item-234-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-234-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Certificate Management</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-239"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/connect/dev"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Develop and Debug</span></a></li><li id="sidebar-nav-item-240"><button aria-controls="sidebar-nav-item-240-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-240-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Consul Dataplane</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li></ul></li><li id="sidebar-nav-item-244"><button aria-controls="sidebar-nav-item-244-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-244-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Dynamic App Configuration</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-250"><button aria-controls="sidebar-nav-item-250-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-250-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Security</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-283"><button aria-controls="sidebar-nav-item-283-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-283-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Agent</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-305"><button aria-controls="sidebar-nav-item-305-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-305-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Integrations</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-311"><button aria-controls="sidebar-nav-item-311-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-311-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Troubleshoot</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-315"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-316"><button aria-controls="sidebar-nav-item-316-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-316-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Kubernetes</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-414"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/consul/docs/nomad"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Nomad</span></a></li><li id="sidebar-nav-item-415"><button aria-controls="sidebar-nav-item-415-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-415-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">AWS ECS</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-431"><button aria-controls="sidebar-nav-item-431-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-431-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">AWS Lambda</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-439"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-440"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/hcp/docs/consul"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">HCP Consul</span></a></li><li id="sidebar-nav-item-441"><button aria-controls="sidebar-nav-item-441-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-441-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Consul Enterprise</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-464"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-465"><button aria-controls="sidebar-nav-item-465-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-465-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Network Infrastructure Automation</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li></ul><hr class="sidebar-horizontal-rule_root__UY7oh"/><ul class="sidebar_navList__4Rg4g"><li><h3 class="sidebar-headings_root__tGfxC">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/tutorials/library?product=consul"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Tutorial Library</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/certifications/networking-automation"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Certifications</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-45" target="_blank" href="https://discuss.hashicorp.com/c/consul/29"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-45">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-46" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-46">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-47" target="_blank" href="https://github.com/hashicorp/consul"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-47">(opens in new tab)</span></li></ul></nav></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__Z5BK4"><div class="sidebar-sidecar-layout_paddedAreaWrapper___S_Ff"><div class="sidebar-sidecar-layout_breadcrumbContainer__3uz7P"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__coOcu"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__wd_C5"><ol class="breadcrumb-bar_listRoot__8eupO"><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/">Developer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/consul">Consul</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/consul/docs">Documentation</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/consul/docs/connect">Service Mesh</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/consul/docs/connect/proxies">Proxies</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><span class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" aria-current="page" data-heap-track="breadcrumb-bar-item">Envoy proxies reference</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__UDm3Z"><main id="main" class="sidebar-sidecar-layout_main__0SN51"><div class="docs-page-heading_root__QuBg_ docs-view_docsPageHeading___xkrK"><div class="docs-page-heading_pageHeadingWrapper__LEMQ7"><h1 class="hds-typography-display-600 hds-font-weight-bold docs-plain-page-heading_root__HzRuX g-offset-scroll-margin-top" id="envoy-proxy-configuration-for-service-mesh">Envoy Proxy Configuration for Service Mesh</h1></div></div><div class="dev-dot-content_root__UJDct hds-typography-body-300"><div class="docs-view_mdxContent___uMnx"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul service mesh has first class support for using
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io">Envoy</a> as a proxy. Consul configures Envoy by
optionally exposing a gRPC service on the local agent that serves <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-docs/xds_protocol">Envoy&#x27;s xDS
configuration
API</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul can configure Envoy sidecars to proxy traffic over the following protocols:</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th>Protocol</th><th>Service network support</th></tr></thead><tbody><tr><td>HTTP/1.1</td><td>L7</td></tr><tr><td>HTTP2</td><td>L7</td></tr><tr><td>gRPC</td><td>L7</td></tr><tr><td>All TCP-based protocols</td><td>L4</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">On Consul 1.5.0 and older, Envoy proxies can only proxy TCP traffic at L4.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">You can configure some <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/manage-traffic">L7 features</a> in <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/agent/config-entries">configuration entries</a>. You can add <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#advanced-configuration">custom Envoy configurations</a> to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service definition</a>, which enables you to leverage Envoy features that are not exposed through configuration entries. You can also use the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy-extensions">Consul Envoy extensions</a> to implement Envoy features.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> When using Envoy with Consul and not using the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands/connect/envoy"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy</code> command</a>
Envoy must be run with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">--max-obj-name-len</code> option set to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">256</code> or greater for Envoy versions prior to 1.11.0.</p></div><h2 id="supported-versions" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="supported versions permalink" href="/consul/docs/connect/proxies/envoy#supported-versions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Supported Versions</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following matrix describes Envoy compatibility for the
currently supported major Consul releases:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The latest (N) release of Consul community edition (CE) and Enterprise</li><li class="mdx-lists_listItem__nkqhg">The 2 preceding major releases (N-1 and N-2) of Consul Enterprise</li><li class="mdx-lists_listItem__nkqhg">The 2 latest <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/enterprise/long-term-support">Consul Enterprise LTS</a> major releases</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">For previous Consul version compatibility,
refer to the previous release&#x27;s version of this page.</p><h3 id="envoy-and-consul-client-agent" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="envoy and consul client agent permalink" href="/consul/docs/connect/proxies/envoy#envoy-and-consul-client-agent"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Envoy and Consul Client Agent</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Every major Consul release initially supports <strong>four major Envoy releases</strong>.
Standard major Consul releases do not expand that support in minor releases.
However, <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/enterprise/long-term-support">Consul Enterprise Long Term Support (LTS)</a>
releases do expand their Envoy version compatibility window in minor releases
to ensure compatibility with a maintained Envoy version.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Every major Consul release maintains and tests compatibility with specific Envoy
patch releases to ensure users can benefit from bug and security fixes in Envoy.</p><h4 id="standard-releases" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="standard releases permalink" href="/consul/docs/connect/proxies/envoy#standard-releases"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Standard releases</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Unless otherwise noted, rows in the following compatibility table
apply to both Consul Enterprise and Consul community edition (CE).</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th>Consul Version</th><th>Compatible Envoy Versions</th></tr></thead><tbody><tr><td>1.18.x CE</td><td>1.28.2, 1.27.4, 1.26.8, 1.25.11</td></tr><tr><td>1.17.x</td><td>1.27.4, 1.26.8, 1.25.11, 1.24.12</td></tr><tr><td>1.16.x</td><td>1.26.8, 1.25.11, 1.24.12, 1.23.12</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><h4 id="enterprise-long-term-support-releases" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="enterprise long term support releases permalink" href="/consul/docs/connect/proxies/envoy#enterprise-long-term-support-releases"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Enterprise Long Term Support releases</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Active Consul Enterprise
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/enterprise/long-term-support">Long Term Support (LTS)</a>
releases expand their Envoy version compatibility window
until the LTS release reaches its end of maintenance.</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th>Consul Version</th><th>Compatible Envoy Versions</th></tr></thead><tbody><tr><td>1.18.x Ent</td><td>1.28.2, 1.27.4, 1.26.8, 1.25.11</td></tr><tr><td>1.15.x Ent</td><td>1.28.2, 1.27.4, 1.26.8, 1.25.11, 1.24.12, 1.23.12, 1.22.11</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><h3 id="envoy-and-consul-dataplane" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="envoy and consul dataplane permalink" href="/consul/docs/connect/proxies/envoy#envoy-and-consul-dataplane"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Envoy and Consul Dataplane</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The Consul dataplane component was introduced in Consul v1.14
as a way to manage Envoy proxies without the use of Consul clients.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Each major version of Consul is released with a new major version of Consul dataplane,
which packages both Envoy and the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> binary in a single container image.
To enable seamless upgrades, each major version of Consul also supports
the previous and next Consul dataplane versions.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Compared to standard Consul releases, Consul Enterprise
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/enterprise/long-term-support">Long Term Support (LTS)</a>
releases have the following differences with Consul dataplane compatibility:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#enterprise-long-term-support-releases">Expanded compatibility window</a>:
Active Consul Enterprise LTS releases expand their Consul dataplane
version compatibility window until the LTS release reaches its
end of maintenance.</li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#consul-dataplane-releases-that-span-envoy-major-versions">Maintained Envoy version</a>:
Major versions of Consul dataplane aligned with a Consul Enterprise LTS version
may contain minor version updates that use a new major version of Envoy.
These minor version updates are necessary to ensure maintained versions
of Consul dataplane use a maintained version of Envoy.</li></ul><h4 id="standard-releases-1" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="standard releases permalink" href="/consul/docs/connect/proxies/envoy#standard-releases-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Standard releases</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Unless otherwise noted, rows in the following compatibility table
apply to both Consul Enterprise and Consul community edition (CE).</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th>Consul Version</th><th>Default <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> Version</th><th>Other compatible <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> Versions</th></tr></thead><tbody><tr><td>1.18.x CE</td><td>1.4.x (Envoy 1.28.x)</td><td>1.3.x (Envoy 1.27.x)</td></tr><tr><td>1.17.x</td><td>1.3.x (Envoy 1.27.x)</td><td>1.4.x (Envoy 1.28.x), 1.2.x (Envoy 1.26.x)</td></tr><tr><td>1.16.x</td><td>1.2.x (Envoy 1.26.x)</td><td>1.3.x (Envoy 1.27.x), 1.1.x (Envoy 1.25.x)</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><h4 id="enterprise-long-term-support-releases-1" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="enterprise long term support releases permalink" href="/consul/docs/connect/proxies/envoy#enterprise-long-term-support-releases-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Enterprise Long Term Support releases</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Active Consul Enterprise
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/enterprise/long-term-support">Long Term Support (LTS)</a>
releases expand their Envoy version compatibility window
until the LTS release reaches its end of maintenance.</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th>Consul Version</th><th>Default <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> Version</th><th>Other compatible <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> Versions</th></tr></thead><tbody><tr><td>1.18.x Ent</td><td>1.4.x (Envoy 1.28.x)</td><td>1.3.x (Envoy 1.27.x)</td></tr><tr><td>1.15.x Ent</td><td>1.1.x (Envoy 1.26.x)</td><td>1.4.x (Envoy 1.28.x) - 1.0.x (Envoy 1.24.x)</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><h4 id="consul-dataplane-releases-that-span-envoy-major-versions" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="consul dataplane releases that span envoy major versions permalink" href="/consul/docs/connect/proxies/envoy#consul-dataplane-releases-that-span-envoy-major-versions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Consul dataplane releases that span Envoy major versions</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Major versions of Consul dataplane aligned with a Consul Enterprise LTS version
may contain minor version updates that use a new major version of Envoy.
These minor version updates are necessary to ensure maintained versions
of Consul dataplane use a maintained version of Envoy.</p><div class="mdx-table_root__adKqa"><div class="mdx-table_tableWrapper__81O9J"><table><thead><tr><th><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul-dataplane</code> Version Range</th><th>Associated Consul Enterprise LTS version</th><th>Contained Envoy Binary Version</th></tr></thead><tbody><tr><td>1.4.0 - 1.4.latest</td><td>1.18.x Ent</td><td>Envoy 1.28.x</td></tr><tr><td>1.1.9 - 1.1.latest</td><td>1.15.x Ent</td><td>Envoy 1.26.x</td></tr><tr><td>1.1.0 - 1.1.8</td><td>1.15.x Ent</td><td>Envoy 1.25.x</td></tr></tbody></table></div><div class="mdx-table_tableFocusRing__qNrYf"></div><div><div class="mdx-table_leftScrim__mYsmq mdx-table_scrim__VtktE"></div><div class="mdx-table_rightScrim__Ikt63 mdx-table_scrim__VtktE"></div></div></div><h2 id="getting-started" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="getting started permalink" href="/consul/docs/connect/proxies/envoy#getting-started"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Getting Started</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To get started with Envoy and see a working example you can follow the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/tutorials/developer-mesh/service-mesh-with-envoy-proxy?utm_source=docs">Using
Envoy with Consul service mesh</a> tutorial.</p><h2 id="configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="configuration permalink" href="/consul/docs/connect/proxies/envoy#configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Envoy proxies require two types of configuration: an initial <em>bootstrap
configuration</em> and a <em>dynamic configuration</em> that is discovered from a &quot;management
server&quot;, in this case Consul.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The bootstrap configuration at a minimum needs to configure the proxy with an
identity (node id) and the location of its local Consul agent from which it
discovers all of its dynamic configuration. See <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#bootstrap-configuration">Bootstrap
Configuration</a> for more details.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The dynamic configuration Consul service mesh provides to each Envoy instance includes:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">TLS certificates and keys to enable mutual authentication and keep certificates
rotating.</li><li class="mdx-lists_listItem__nkqhg">[Intentions]<!-- --> to enforce service-to-service authorization rules.</li><li class="mdx-lists_listItem__nkqhg">Service-discovery results for upstreams to enable each sidecar proxy to load-balance
outgoing connections.</li><li class="mdx-lists_listItem__nkqhg">L7 configuration including timeouts and protocol-specific options.</li><li class="mdx-lists_listItem__nkqhg">Configuration to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference#expose-paths-configuration-reference">expose specific HTTP paths</a>.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">For more information on the parts of the Envoy proxy runtime configuration
that are currently controllable via Consul service mesh, refer to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#dynamic-configuration">Dynamic
Configuration</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We plan to enable more and more of Envoy&#x27;s features through
Consul service mesh&#x27;s first-class configuration over time, however some advanced users will
need additional control to configure Envoy in specific ways. To enable this, we
provide several <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#advanced-configuration">&quot;escape hatch&quot;</a> options that allow
users to provide low-level raw Envoy config syntax for some sub-components in each
Envoy instance. This allows operators to have full control over and
responsibility for correctly configuring Envoy and ensuring version support etc.</p><h2 id="intention-enforcement" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="intention enforcement permalink" href="/consul/docs/connect/proxies/envoy#intention-enforcement"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Intention Enforcement</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/intentions">Intentions</a> are enforced using Envoy&#x27;s RBAC filters. Depending on the
configured <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults#protocol">protocol</a> of the proxied service, intentions are either enforced
per-connection (L4) using a network filter, or per-request (L7) using an HTTP
filter.</p><div class="alert alert-info g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> Prior to Consul 1.9.0 intentions were exclusively enforced
per-connection (L4) using an <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ext_authz</code> network filter.</p></div><h2 id="fetching-certificates" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="fetching certificates permalink" href="/consul/docs/connect/proxies/envoy#fetching-certificates"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Fetching Certificates</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Envoy will use the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_http_token"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_HTTP_TOKEN</code></a> and <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_http_addr"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_HTTP_ADDR</code></a> environment variables to contact Consul to fetch certificates if the following conditions are met:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_HTTP_TOKEN</code> environment variable contains a Consul ACL token.</li><li class="mdx-lists_listItem__nkqhg">The Consul ACL token has the necessary permissions to read configuration for that service.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If TLS is enabled on Consul, you will also need to add the following environment variables <em>prior</em> to starting Envoy:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_cacert"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_CACERT</code></a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_client_cert"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_CLIENT_CERT</code></a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_client_key"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_CLIENT_KEY</code></a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands#consul_http_ssl"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">CONSUL_HTTP_SSL</code></a></li></ul><h2 id="bootstrap-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="bootstrap configuration permalink" href="/consul/docs/connect/proxies/envoy#bootstrap-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Bootstrap Configuration</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Envoy requires an initial bootstrap configuration file. You can either create the file manually using the Consul command line or configure Consul Dataplane to generate the file.</p><h3 id="generate-the-bootstrap-file-on-the-consul-cli" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="generate the bootstrap file on the consul cli permalink" href="/consul/docs/connect/proxies/envoy#generate-the-bootstrap-file-on-the-consul-cli"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Generate the bootstrap file on the Consul CLI</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Connect to a local Consul client agent and run the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands/connect/envoy"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy</code> command</a> to create the Envoy bootstrap configuration. The command either outputs the bootstrap configuration directly to stdout or generates the configuration and issues an <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">exec</code> command to the Envoy binary as a convenience wrapper. For more information about using <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">exec</code> to bootstrap Envoy, refer to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands/connect/envoy#exec-security-details">Exec Security Details</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you experience issues when bootstrapping Envoy proxies from the CLI, use the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">-enable-config-gen-logging</code> flag to enable debug message logging. These logs can
help you troubleshoot issues that occur during the bootstrapping process.
For more information about available flags and parameters, refer to the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands/connect/envoy"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy CLI</code> reference</a>.</p><h3 id="generate-the-bootstrap-file-from-consul-dataplane" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="generate the bootstrap file from consul dataplane permalink" href="/consul/docs/connect/proxies/envoy#generate-the-bootstrap-file-from-consul-dataplane"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Generate the bootstrap file from Consul Dataplane</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul Dataplane automatically configures and manages an Envoy process. Consul Dataplane generates the Envoy bootstrap configuration file prior to starting Envoy. To configure how Consul Dataplane starts Envoy, refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/dataplane/consul-dataplane">Consul Dataplane CLI reference</a>.</p><h3 id="control-bootstrap-configuration-from-proxy-configuration" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="control bootstrap configuration from proxy configuration permalink" href="/consul/docs/connect/proxies/envoy#control-bootstrap-configuration-from-proxy-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Control bootstrap configuration from proxy configuration</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul service mesh can control some parts of the bootstrap configuration by specifying Envoy proxy configuration options.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Add the following configuration items to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code> configuration
entry</a> or override them directly in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code>
field of a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/proxies/proxy-config-reference">proxy service definition</a>. When
connected to a Consul client agent, you can place the configuration in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code> field of
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/deploy-sidecar-services"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sidecar_service</code></a> block.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="envoy_statsd_url" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_statsd_url permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_statsd_url"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_statsd_url</code></a> - A URL in the form <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">udp://ip:port</code> identifying a UDP
StatsD listener that Envoy should deliver metrics to. For example, this may be
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">udp://127.0.0.1:8125</code> if every host has a local StatsD listener. In this case
users can configure this property once in the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code>
configuration entry</a> for convenience. Currently, TCP is not supported.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> currently the url <strong>must use an ip address</strong> not a dns name due
to the way Envoy is setup for StatsD.</p></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Expansion of the environment variable <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">HOST_IP</code> is supported, e.g.
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">udp://${HOST_IP}:8125</code>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Users can also specify the whole parameter in the form <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">$ENV_VAR_NAME</code>, which
will cause the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy</code> command to resolve the actual URL from
the named environment variable when it runs. This, for example, allows each
pod in a Kubernetes cluster to learn of a pod-specific IP address for StatsD
when the Envoy instance is bootstrapped while still allowing global
configuration of all proxies to use StatsD in the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code>
configuration entry</a>. The env
variable must contain a full valid URL value as specified above and nothing else.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_dogstatsd_url" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_dogstatsd_url permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_dogstatsd_url"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_dogstatsd_url</code></a> - The same as <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_statsd_url</code> with the following
differences in behavior:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">Envoy will use dogstatsd tags instead of statsd dot-separated metric names.</li><li class="mdx-lists_listItem__nkqhg">As well as <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">udp://</code>, a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">unix://</code> URL may be specified if your agent can
listen on a unix socket (e.g. the dogstatsd agent).</li></ul></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_prometheus_bind_addr" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_prometheus_bind_addr permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_prometheus_bind_addr"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_prometheus_bind_addr</code></a> - Specifies that the proxy should expose a Prometheus
metrics endpoint to the <em>public</em> network. It must be supplied in the form
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ip:port</code> and port and the ip/port combination must be free within the network
namespace the proxy runs. Typically the IP would be <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">0.0.0.0</code> to bind to all
available interfaces or a pod IP address.</p><div class="alert alert-info g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> Envoy versions prior to 1.10 do not export timing histograms
using the internal Prometheus endpoint.</p></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_stats_bind_addr" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_stats_bind_addr permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_stats_bind_addr"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_bind_addr</code></a> - Specifies that the proxy should expose the /stats prefix
to the <em>public</em> network. It must be supplied in the form <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ip:port</code> and
the ip/port combination must be free within the network namespace the proxy runs.
Typically the IP would be <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">0.0.0.0</code> to bind to all available interfaces or a pod IP address.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_stats_tags" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_stats_tags permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_stats_tags"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_tags</code></a> - Specifies one or more static tags that will be added to
all metrics produced by the proxy.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_stats_flush_interval" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_stats_flush_interval permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_stats_flush_interval"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_flush_interval</code></a> - Configures Envoy&#x27;s
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-flush-interval"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stats_flush_interval</code></a>.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_telemetry_collector_bind_socket_dir" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_telemetry_collector_bind_socket_dir permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_telemetry_collector_bind_socket_dir"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_telemetry_collector_bind_socket_dir</code></a> - Specifies the directory where Envoy creates a Unix socket.
Envoy sends metrics to the socket where a Consul telemetry collector can collect them.
The socket is not configured by default.
Enabling this sets Envoy&#x27;s <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-flush-interval"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stats_flush_interval</code></a> to one minute if <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_flush_interval</code> is unset and if no other stats sinks are configured, like <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_dogstats_url</code>, for instance.</p></li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#advanced-configuration">Advanced Configuration</a> section describes additional configurations that allow incremental or complete control over the bootstrap configuration generated.</p><h3 id="bootstrap-envoy-on-windows-vms" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="bootstrap envoy on windows vms permalink" href="/consul/docs/connect/proxies/envoy#bootstrap-envoy-on-windows-vms"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Bootstrap Envoy on Windows VMs</h3><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Complete the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/tutorials/developer-mesh/consul-windows-workloads">Connect Services on Windows Workloads to Consul Service Mesh tutorial</a> to learn how to deploy Consul and use its service mesh on Windows VMs.</p></blockquote><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you are running Consul on a Windows VM, attempting to bootstrap Envoy with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy</code> command returns the following output:</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token output">Directly running Envoy is only supported on linux and macOS since envoy itself doesn&#x27;t build on other platforms currently.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token output">Use the -bootstrap option to generate the JSON to use when running envoy on a supported OS or via a container or VM.</span>
</span></span></span></code></pre></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To bootstrap Envoy on Windows VMs, you must generate the bootstrap configuration as a .json file and then manually edit it to add both your ACL token and a valid access log path.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To generate the bootstrap configuration file, add the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">-bootstrap</code> option to the command and then save the output to a file:</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">consul connect envoy -bootstrap <span class="token operator">&gt;</span> bootstrap.json</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Then, open <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">bootstrap.json</code> and update the following sections with your ACL token and log path.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_filename__lKNyi g-type-code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none"><path fill="#000" fill-rule="evenodd" d="M6 2.08a2.75 2.75 0 0 0-2.75 2.75v16A2.75 2.75 0 0 0 6 23.58h12a2.75 2.75 0 0 0 2.75-2.75v-11a.748.748 0 0 0-.22-.53l-7-7a.751.751 0 0 0-.53-.22m-.75 1.5H6c-.69 0-1.25.56-1.25 1.25v16c0 .691.56 1.25 1.25 1.25h12c.69 0 1.25-.559 1.25-1.25V10.58H13a.75.75 0 0 1-.75-.75V3.58Zm5.94 5.5-4.44-4.439v4.44h4.44Z" clip-rule="evenodd"></path></svg>bootstrap.json</div></div><div class="style_rightSide__tzFHY"></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_numbersColumn__scIAe"><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">1 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_highlight__w4Nrs">2 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">3 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">4 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">5 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">6 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">7 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">8 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">9 </span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">10</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">11</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">12</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">13</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">14</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">15</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">16</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">17</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">18</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_highlight__w4Nrs">19</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">20</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">21</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">22</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">23</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">24</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">25</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">26</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">27</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">28</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">29</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">30</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">31</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">32</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">33</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">34</span><span class="code-lines_LineNumber__H__E8 g-type-code code-lines_dim__hNQb8">35</span></span><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_highlight__w4Nrs">  <span class="token property">&quot;admin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token property">&quot;access_log&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.access_loggers.file&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token property">&quot;typed_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">          <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">          <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/dev/null&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">19000</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_highlight__w4Nrs">  ## ...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">  <span class="token property">&quot;dynamic_resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    ## ...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token property">&quot;ads_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      ## ...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token property">&quot;grpc_services&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token property">&quot;initial_metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">          <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x-consul-token&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ACL-Token&gt;&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">        ## ...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_dim__hNQb8"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To complete the bootstrap process, start Envoy and include the path to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">bootstrap.json</code>:</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">envoy -c bootstrap.json</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Security Note</strong>: The bootstrap JSON contains the ACL token and should be handled as a secret. Because this token authorizes the identity of any service it has <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service:write</code> permissions for, it can be used to access upstream services.</p></div><h2 id="dynamic-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="dynamic configuration permalink" href="/consul/docs/connect/proxies/envoy#dynamic-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Dynamic Configuration</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul automatically generates Envoy&#x27;s dynamic configuration based on its
knowledge of the cluster. Users may specify default configuration options for
a service through the available fields in the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-defaults</code> configuration
entry</a>. Consul will use this
information to configure appropriate proxy settings for that service&#x27;s proxies
and also for the upstream listeners used by the service.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">One example is how users can define a service&#x27;s protocol in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">Protocol</code> field of <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-defaults</code> configuration
entry</a>. Agents with
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/agent/config/config-files#enable_central_service_config"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable_central_service_config</code></a>
set to true will automatically discover the protocol when configuring a proxy
for a service. The proxy will discover the main protocol of the service it
represents and use this to configure its main public listener. It will also
discover the protocols defined for any of its upstream services and
automatically configure its upstream listeners appropriately too as below.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This automated discovery results in Consul auto-populating the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code>
and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.upstreams[*].config</code> fields of the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a> that is
actually registered.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To learn about other options that can be configured centrally see the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/agent/config-entries">Configuration Entries</a> docs.</p><h3 id="proxy-config-options" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="proxy config options permalink" href="/consul/docs/connect/proxies/envoy#proxy-config-options"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Proxy Config Options</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">These fields may also be overridden explicitly in <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code> of the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a>, or defined in
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code> configuration
entry</a> to act as
defaults that are inherited by all services.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="protocol" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="protocol permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#protocol"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code></a> - The protocol the service speaks. Consul service mesh&#x27;s Envoy integration
currently supports the following <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code> values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="tcp" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="tcp permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#tcp"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">tcp</code></a> - Unless otherwise specified this is the default, which causes Envoy
to proxy at L4. This provides all the security benefits of the service mesh&#x27;s mTLS
and works for any TCP-based protocol. Load-balancing and metrics are
available at the connection level.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="http" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="http permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#http"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">http</code></a> - This specifies that the service speaks HTTP/1.x. Envoy will setup an
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">http_connection_manager</code> and will be able to load-balance requests
individually to available upstream services. Envoy will also emit L7 metrics
such as request rates broken down by HTTP response code family (2xx, 4xx, 5xx,
etc).</p></li><li class="mdx-lists_listItem__nkqhg"><a id="http2" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="http2 permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#http2"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">http2</code></a> - This specifies that the service speaks http2 (specifically h2c since
Envoy will still only connect to the local service instance via plain TCP not
TLS). This behaves much like <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">http</code> with L7 load-balancing and metrics but has
additional settings that correctly enable end-to-end http2.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="grpc" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="grpc permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#grpc"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">grpc</code></a> - gRPC is a common RPC protocol based on http2. In addition to the
http2 support above, Envoy listeners will be configured with a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/configuration/http/http_filters/grpc_http1_bridge_filter">gRPC bridge
filter</a>
that translates HTTP/1.1 calls into gRPC, and instruments
metrics with <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">gRPC-status</code> trailer codes.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> The protocol of a service should ideally be configured via the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults#protocol"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code></a>
field of a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-defaults</code></a>
config entry for the service. Configuring it in a
proxy config will not fully enable some <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/manage-traffic">L7
features</a>.
It is supported here for backwards compatibility with Consul versions prior to 1.6.0.</p></div></li></ul></li><li class="mdx-lists_listItem__nkqhg"><a id="bind_address" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="bind_address permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#bind_address"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">bind_address</code></a> - Override the address Envoy&#x27;s public listener binds to. By
default Envoy will bind to the service address or 0.0.0.0 if there is not explicit address on the service registration.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="bind_port" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="bind_port permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#bind_port"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">bind_port</code></a> - Override the port Envoy&#x27;s public listener binds to. By default
Envoy will bind to the service port.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="local_connect_timeout_ms" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="local_connect_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#local_connect_timeout_ms"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">local_connect_timeout_ms</code></a> - The number of milliseconds allowed to make
connections to the local application instance before timing out. Defaults to 5000
(5 seconds).</p></li><li class="mdx-lists_listItem__nkqhg"><a id="local_request_timeout_ms" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="local_request_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#local_request_timeout_ms"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">local_request_timeout_ms</code></a> - In milliseconds, the request timeout for HTTP requests
to the local application instance. Applies to HTTP based protocols only. If not
specified, inherits the Envoy default for route timeouts (15s). A value of 0 will
disable request timeouts.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="local_idle_timeout_ms" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="local_idle_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#local_idle_timeout_ms"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">local_idle_timeout_ms</code></a> - In milliseconds, the idle timeout for HTTP requests
to the local application instance. Applies to HTTP based protocols only. If not
specified, inherits the Envoy default for route idle timeouts (15s). A value of 0
disables request timeouts.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="max_inbound_connections" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="max_inbound_connections permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_inbound_connections"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_inbound_connections</code></a> - The maximum number of concurrent inbound connections
to the local application instance. If not specified, inherits the Envoy default (1024).</p></li><li class="mdx-lists_listItem__nkqhg"><a id="balance_inbound_connections" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="balance_inbound_connections permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#balance_inbound_connections"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">balance_inbound_connections</code></a> - The strategy used for balancing inbound connections
across Envoy worker threads. Consul service mesh Envoy integration supports the
following <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">balance_inbound_connections</code> values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label=" permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;&quot;</code></a> - Empty string (default). No connection balancing strategy is used. Consul does not balance inbound connections.</li><li class="mdx-lists_listItem__nkqhg"><a id="exact_balance" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="exact_balance permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#exact_balance"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">exact_balance</code></a> - Inbound connections to the service use the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://cloudnative.to/envoy/api-v3/config/listener/v3/listener.proto.html#config-listener-v3-listener-connectionbalanceconfig-exactbalance">Envoy Exact Balance Strategy.</a></li></ul></li><li class="mdx-lists_listItem__nkqhg"><a id="xds_fetch_timeout_ms" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="xds_fetch_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#xds_fetch_timeout_ms"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">xds_fetch_timeout_ms</code></a> - In milliseconds, the amount of time for Envoy to wait for EDS and RDS configuration before timing out. If not specified, this field uses Envoy&#x27;s default value of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">15000</code>, or 15 seconds. When an Envoy instance is configured with a large number of upstreams that take a significant amount of time to populate with data, setting this field to a higher value may prevent temporary disruption caused by unexpected timeouts.</p></li></ul><h3 id="proxy-upstream-config-options" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="proxy upstream config options permalink" href="/consul/docs/connect/proxies/envoy#proxy-upstream-config-options"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Proxy Upstream Config Options</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following configuration items may be overridden directly in the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.upstreams[].config</code> field of a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/deploy-sidecar-services"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sidecar_service</code></a> block.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="protocol-1" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="protocol permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#protocol-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code></a> - Same as above in main config but affects the listener setup for
the upstream.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> The protocol of a service should ideally be configured via the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults#protocol"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code></a>
field of a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-defaults"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-defaults</code></a>
config entry for the upstream destination service. Configuring it in a
proxy upstream config will not fully enable some <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/manage-traffic">L7
features</a>.
It is supported here for backwards compatibility with Consul versions prior to 1.6.0.</p></div></li><li class="mdx-lists_listItem__nkqhg"><a id="connect_timeout_ms" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="connect_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#connect_timeout_ms"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">connect_timeout_ms</code></a> - The number of milliseconds to allow when making upstream
connections before timing out. Defaults to 5000
(5 seconds).</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> The connection timeout for a service should ideally be
configured via the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-resolver#connecttimeout"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">connect_timeout</code></a>
field of a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-resolver"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-resolver</code></a>
config entry for the upstream destination service. Configuring it in a
proxy upstream config will override any values defined in config entries.
It is supported here for backwards compatibility with Consul versions prior to 1.6.0.</p></div></li><li class="mdx-lists_listItem__nkqhg"><a id="limits" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="limits permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#limits"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">limits</code></a> - A set of limits to apply when connecting to the upstream service.
These limits are applied on a per-service-instance basis. The following
limits are respected:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="max_connections" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="max_connections permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_connections"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_connections</code></a> - The maximum number of connections a service instance
will be allowed to establish against the given upstream. Use this to limit
HTTP/1.1 traffic, since HTTP/1.1 has a request per connection.</li><li class="mdx-lists_listItem__nkqhg"><a id="max_pending_requests" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="max_pending_requests permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_pending_requests"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_pending_requests</code></a> - The maximum number of requests that will be queued
while waiting for a connection to be established. For this configuration to
be respected, a L7 protocol must be defined in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code> field.</li><li class="mdx-lists_listItem__nkqhg"><a id="max_concurrent_requests" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="max_concurrent_requests permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_concurrent_requests"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_concurrent_requests</code></a> - The maximum number of concurrent requests that
will be allowed at a single point in time. Use this to limit HTTP/2 traffic,
since HTTP/2 has many requests per connection. For this configuration to be
respected, a L7 protocol must be defined in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">protocol</code> field.</li></ul></li><li class="mdx-lists_listItem__nkqhg"><a id="passive_health_check" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="passive_health_check permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#passive_health_check"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">passive_health_check</code></a> - Passive health checks remove hosts from the upstream
cluster that are unreachable or that return errors.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="interval" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="interval permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#interval"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">interval</code></a> - The time in nanosecond between checks. Each check will cause
hosts which have exceeded <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_failures</code> to be removed from the load
balancer, and any hosts which have passed their ejection time to be
returned to the load balancer. If not specified, it uses the default value.
For example, 10s for Envoy proxy.</li><li class="mdx-lists_listItem__nkqhg"><a id="max_failures" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="max_failures permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_failures"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_failures</code></a> - The number of consecutive failures that cause a host to be
removed from the upstream cluster. If not specified, Consul uses the proxy&#x27;s
default value. For example, <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">5</code> for Envoy proxy.</li><li class="mdx-lists_listItem__nkqhg"><a id="enforcing_consecutive_5xx" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="enforcing_consecutive_5xx permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#enforcing_consecutive_5xx"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enforcing_consecutive_5xx</code></a> - A percentage representing the chance that a
host will be actually ejected when the proxy detects an outlier status
through consecutive errors in the 500 code range. If not specified, Consul
uses the proxy&#x27;s default value. For example, <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">100</code> for Envoy proxy.</li><li class="mdx-lists_listItem__nkqhg"><a id="max_ejection_percent" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="max_ejection_percent permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#max_ejection_percent"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">max_ejection_percent</code></a> - The maximum percentage of hosts that can be ejected
from a upstream cluster due to passive health check failures. If not specified,
inherits Envoy&#x27;s default of 10% or at least one host.</li><li class="mdx-lists_listItem__nkqhg"><a id="base_ejection_time" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="base_ejection_time permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#base_ejection_time"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">base_ejection_time</code></a> - The base time that a host is ejected for. The real
time is equal to the base time multiplied by the number of times the host has
been ejected and is capped by max_ejection_time (Default 300s). If not
specified, inherits Envoy&#x27;s default value of 30s.</li></ul></li><li class="mdx-lists_listItem__nkqhg"><a id="balance_outbound_connections" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="balance_outbound_connections permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#balance_outbound_connections"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">balance_outbound_connections</code></a> - Specifies the strategy for balancing outbound connections
across Envoy worker threads. Consul service mesh Envoy integration supports the
following <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">balance_outbound_connections</code> values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="-1" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label=" permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;&quot;</code></a> - Empty string (default). No connection balancing strategy is used. Consul does not balance outbound connections.</li><li class="mdx-lists_listItem__nkqhg"><a id="exact_balance-1" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><a aria-label="exact_balance permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#exact_balance-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">exact_balance</code></a> - Outbound connections from the upstream use the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://cloudnative.to/envoy/api-v3/config/listener/v3/listener.proto.html#config-listener-v3-listener-connectionbalanceconfig-exactbalance">Envoy Exact Balance Strategy.</a></li></ul></li></ul><h3 id="gateway-options" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="gateway options permalink" href="/consul/docs/connect/proxies/envoy#gateway-options"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Gateway Options</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">These fields may also be overridden explicitly in the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a>, or defined in
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code> configuration
entry</a> to act as
defaults that are inherited by all services.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Prior to 1.8.0 these settings were specific to Mesh Gateways. The deprecated
names such as <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_mesh_gateway_bind_addresses</code> and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_mesh_gateway_no_default_bind</code>
will continue to be supported.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="connect_timeout_ms-1" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="connect_timeout_ms permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#connect_timeout_ms-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">connect_timeout_ms</code></a> - The number of milliseconds to allow when making upstream
connections before timing out. Defaults to 5000 (5 seconds). If the upstream
service has the configuration option
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-resolver#connecttimeout"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">connect_timeout_ms</code></a>
set for the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-resolver</code>, that timeout value will take precedence over
this gateway option.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_bind_tagged_addresses" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_bind_tagged_addresses permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_bind_tagged_addresses"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_bind_tagged_addresses</code></a> - Indicates that the gateway
services tagged addresses should be bound to listeners in addition to the
default listener address.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_bind_addresses" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_bind_addresses permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_bind_addresses"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_bind_addresses</code></a> - A map of additional addresses to be bound.
This map&#x27;s keys are the name of the listeners to be created and the values are
a map with two keys, address and port, that combined make the address to bind the
listener to. These are bound in addition to the default address.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_no_default_bind" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_no_default_bind permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_no_default_bind"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_no_default_bind</code></a> - Prevents binding to the default address
of the gateway service. This should be used with one of the other options
to configure the gateway&#x27;s bind addresses.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_dns_discovery_type" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_dns_discovery_type permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_dns_discovery_type"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_dns_discovery_type</code></a> - Determines how Envoy will resolve hostnames. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">LOGICAL_DNS</code>.
Must be one of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">STRICT_DNS</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">LOGICAL_DNS</code>. Details for each type are available in
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/intro/arch_overview/upstream/service_discovery">Envoy documentation</a>.
This option applies to terminating gateways that route to services
addressed by a hostname, such as a managed database. It also applies to mesh gateways,
such as when gateways in other Consul datacenters are behind a load balancer that is addressed by a hostname.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_remote_tcp_enable_keepalive" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_remote_tcp_enable_keepalive permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_remote_tcp_enable_keepalive"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_remote_tcp_enable_keepalive</code></a> - Enables TCP keepalive settings on remote
upstream connections for mesh and terminating gateways. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>. Must be one
of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>. Details for this feature are available in the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive">Envoy documentation</a>.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_remote_tcp_keepalive_time" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_remote_tcp_keepalive_time permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_remote_tcp_keepalive_time"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_remote_tcp_keepalive_time</code></a> - The number of seconds a connection needs to
be idle before keep-alive probes start being sent. For more information, see the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive">Envoy documentation</a>.
This option only applies to remote upstream connections for mesh and terminating gateways.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_remote_tcp_keepalive_interval" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_remote_tcp_keepalive_interval permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_remote_tcp_keepalive_interval"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_remote_tcp_keepalive_interval</code></a> - The number of seconds between keep-alive probes.
For more information, see the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive">Envoy documentation</a>.
This option only applies to remote upstream connections for mesh and terminating gateways.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_gateway_remote_tcp_keepalive_probes" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_gateway_remote_tcp_keepalive_probes permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_gateway_remote_tcp_keepalive_probes"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_gateway_remote_tcp_keepalive_probes</code></a> - Maximum number of keepalive probes to send without
response before deciding the connection is dead. For more information, see the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive">Envoy documentation</a>.
This option only applies to remote upstream connections for mesh and terminating gateways.</p></li></ul><h2 id="advanced-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="advanced configuration permalink" href="/consul/docs/connect/proxies/envoy#advanced-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Advanced Configuration</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To support more flexibility when configuring Envoy, several &quot;lower-level&quot; options exist
that require knowledge of Envoy&#x27;s configuration format.
Many options allow configuring a subsection of either the bootstrap or
dynamic configuration using your own custom protobuf config.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We separate these into two sets, <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#advanced-bootstrap-options">Advanced Bootstrap
Options</a> and <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#escape-hatch-overrides">Escape Hatch
Overrides</a>. Both require writing Envoy config in the
protobuf JSON encoding. Advanced options cover smaller chunks that might
commonly need to be set for tasks like configuring tracing. In contrast, escape hatches
give almost complete control over the proxy setup, but require operators to
manually code the entire configuration in protobuf JSON.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Advanced Topic!</strong> This section covers options that allow users to take almost
complete control of Envoy&#x27;s configuration. We provide these options so users can
experiment or take advantage of features not yet fully supported in Consul service mesh. We
plan to retain this ability in the future, but it should still be considered
experimental because it requires in-depth knowledge of Envoy&#x27;s configuration format.
Users should consider Envoy version compatibility when using these features because they can configure Envoy in ways that
are outside of Consul&#x27;s control. Incorrect configuration could prevent all
proxies in your mesh from functioning correctly, or bypass the security
guarantees Consul service mesh is designed to enforce.</p></div><h3 id="configuration-formatting" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="configuration formatting permalink" href="/consul/docs/connect/proxies/envoy#configuration-formatting"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration Formatting</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">All configurations are specified as strings containing the serialized proto3 JSON encoding
of the specified Envoy configuration type. They are full JSON types except where
noted.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The JSON supplied may describe a protobuf <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">types.Any</code> message with an <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">@type</code>
field set to the appropriate type (for example
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">type.googleapis.com/envoy.config.listener.v3.Listener</code>).</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">For example, given a tracing config:</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_tracing_json configuration</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;http&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.tracers.zipkin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;typedConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zipkin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HTTP_JSON&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/v1/spans&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;shared_span_context&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">JSON escape the value of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">tracing</code> into a string, for example using <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://codebeautify.org/json-escape-unescape">https://codebeautify.org/json-escape-unescape</a>,
or using <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://stedolan.github.io/jq/">jq</a>.</p><div class="g-code-block style_root__i1k0c language-shell mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> jq <span class="token string">&#x27;. | @json&#x27;</span></span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">  &quot;http&quot;: {</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">    &quot;name&quot;: &quot;envoy.tracers.zipkin&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">    &quot;typedConfig&quot;: {</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">      &quot;@type&quot;: &quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">      &quot;collector_cluster&quot;: &quot;zipkin&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">      &quot;collector_endpoint_version&quot;: &quot;HTTP_JSON&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">      &quot;collector_endpoint&quot;: &quot;/api/v1/spans&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">      &quot;shared_span_context&quot;: false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">    }</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">  }</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>http<span class="token entity" title="\&quot;">\&quot;</span>:{<span class="token entity" title="\&quot;">\&quot;</span>name<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>envoy.tracers.zipkin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>typedConfig<span class="token entity" title="\&quot;">\&quot;</span>:{<span class="token entity" title="\&quot;">\&quot;</span>@type<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>type.googleapis.com/envoy.config.trace.v3.ZipkinConfig<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>collector_cluster<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>zipkin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>collector_endpoint_version<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>HTTP_JSON<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>collector_endpoint<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>/api/v1/spans<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>shared_span_context<span class="token entity" title="\&quot;">\&quot;</span>:false}}}&quot;</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Then use that as the value for <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_tracing_json</code>:</p><div class="g-code-block style_root__i1k0c language-json mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-json mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;proxy-defaults&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;global&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;envoy_tracing_json&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;http\&quot;:{\&quot;name\&quot;:\&quot;envoy.tracers.zipkin\&quot;,\&quot;typedConfig\&quot;:{\&quot;@type\&quot;:\&quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\&quot;,\&quot;collector_cluster\&quot;:\&quot;zipkin\&quot;,\&quot;collector_endpoint_version\&quot;:\&quot;HTTP_JSON\&quot;,\&quot;collector_endpoint\&quot;:\&quot;/api/v1/spans\&quot;,\&quot;shared_span_context\&quot;:false}}}\n&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If using HCL, this escaping is done automatically:</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token property">Kind</span> <span class="token punctuation">=</span> <span class="token string">&quot;proxy-defaults&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token property">Name</span> <span class="token punctuation">=</span> <span class="token string">&quot;global&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">Config</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">envoy_tracing_json</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">  &quot;http&quot;: {</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    &quot;name&quot;: &quot;envoy.tracers.zipkin&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    &quot;typedConfig&quot;: {</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">      &quot;@type&quot;: &quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">      &quot;collector_cluster&quot;: &quot;zipkin&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">      &quot;collector_endpoint_version&quot;: &quot;HTTP_JSON&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">      &quot;collector_endpoint&quot;: &quot;/api/v1/spans&quot;,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">      &quot;shared_span_context&quot;: false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    }</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">  }</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h3 id="advanced-bootstrap-options" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="advanced bootstrap options permalink" href="/consul/docs/connect/proxies/envoy#advanced-bootstrap-options"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Advanced Bootstrap Options</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Users may add the following configuration items to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code>
configuration
entry</a> or
override them directly in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code> field of a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/deploy-sidecar-services"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sidecar_service</code></a> block.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="envoy_extra_static_clusters_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_extra_static_clusters_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_extra_static_clusters_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_extra_static_clusters_json</code></a> - Specifies one or more <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto">Envoy clusters</a>
that will be appended to the array of <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-staticresources-clusters">static
clusters</a>
in the bootstrap config. This enables you to add custom clusters for tracing sinks,
for example. In order to configure a single cluster, specify a single JSON object with the cluster details. For multiple
clusters, specify objects in a comma-separated list with no trailing comma. The
cluster objects will be interpolated directly into a JSON array.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_extra_static_clusters_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local-service-cluster&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;load_assignment&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;cluster_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local-service-cluster&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;lb_endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;endpoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">32769</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_extra_static_listeners_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_extra_static_listeners_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_extra_static_listeners_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_extra_static_listeners_json</code></a> - Similar to
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_extra_static_clusters_json</code> but appends one or more <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto">Envoy listeners</a> to the array of <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-staticresources-listeners">static
listener</a> definitions.
Can be used to setup limited access that bypasses the service mesh&#x27;s mTLS or
authorization for health checks or metrics.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_extra_static_listeners_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_envoy_mtls_bypass_listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">20201</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;filter_chains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.network.http_connection_manager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token property">&quot;typedConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;http_filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.http.router&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;route_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;self_admin_route&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token property">&quot;virtual_hosts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;self_admin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;domains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                    <span class="token string">&quot;*&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                      <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                      <span class="token property">&quot;route&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                        <span class="token property">&quot;cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local-service-cluster&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;stat_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy_mtls_bypass&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;tracing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token property">&quot;random_sampling&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_extra_stats_sinks_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_extra_stats_sinks_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_extra_stats_sinks_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_extra_stats_sinks_json</code></a> - Similar to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_extra_static_clusters_json</code>
but for <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-sinks">stats sinks</a>.
These are appended to any sinks defined by use of the
higher-level <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_statsd_url"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_statsd_url</code></a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_dogstatsd_url"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_dogstatsd_url</code></a> config options.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_extra_stats_sinks_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.stat_sinks.dog_statsd&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;typed_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.metrics.v3.DogStatsdSink&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UDP&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">8125</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;172.31.20.6&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_stats_config_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_stats_config_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_stats_config_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_config_json</code></a> - The entire <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-config">stats
config</a>.
If provided this will override the higher-level
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_stats_tags"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_stats_tags</code></a>. It allows full control over dynamic
tag replacements etc.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_stats_config_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;stats_matcher&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;reject_all&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;stats_tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;tag_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.http_user_agent&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;regex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^http(?=\\.).*?\\.user_agent\\.((.+?)\\.)\\w+?$&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;use_all_default_tags&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_tracing_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_tracing_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_tracing_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_tracing_json</code></a> - The entire <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-tracing">tracing
config</a>.
Most tracing providers will also require adding static clusters to define the
endpoints to send tracing data to.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_tracing_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;http&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.tracers.zipkin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;typedConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zipkin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HTTP_JSON&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/v1/spans&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;shared_span_context&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li></ul><h3 id="escape-hatch-overrides" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="escape hatch overrides permalink" href="/consul/docs/connect/proxies/envoy#escape-hatch-overrides"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Escape-Hatch Overrides</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Users may add the following configuration items to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/proxy-defaults">global <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy-defaults</code>
configuration
entry</a> or
override them directly in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.config</code> field of a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/deploy-sidecar-services"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sidecar_service</code></a> block.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="envoy_bootstrap_json_tpl" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_bootstrap_json_tpl permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_bootstrap_json_tpl"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_bootstrap_json_tpl</code></a> - Specifies a template in Go template syntax that
is used in place of <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/hashicorp/consul/blob/71d45a34601423abdfc0a64d44c6a55cf88fa2fc/command/connect/envoy/bootstrap_tpl.go#L129">the default
template</a>
when generating bootstrap via <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/commands/connect/envoy"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consul connect envoy</code>
command</a>. The variables that are available
to be interpolated are <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/hashicorp/consul/blob/71d45a34601423abdfc0a64d44c6a55cf88fa2fc/command/connect/envoy/bootstrap_tpl.go#L5">documented
here</a>.
This offers complete control of the proxy&#x27;s bootstrap although major
deviations from the default template may break Consul&#x27;s ability to correctly
manage the proxy or enforce its security model.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_public_listener_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_public_listener_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_public_listener_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_public_listener_json</code></a> - Specifies a complete <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto">Envoy listener</a>
to be delivered in place of the main public listener that the proxy used to
accept inbound connections. This will be used verbatim with the following
exceptions:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">Every <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">FilterChain</code> added to the listener will have its <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TlsContext</code>
overridden by the Connect TLS certificates and validation context. This
means there is no way to override the service mesh&#x27;s mutual TLS for the public
listener.</li><li class="mdx-lists_listItem__nkqhg">Every <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">FilterChain</code> will have the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy.filters.{network|http}.rbac</code> filter
prepended to the filters array to ensure that all inbound connections are
authorized by the service mesh. Before Consul 1.9.0 <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy.ext_authz</code> was inserted instead.</li></ul><div class="mdx-code-blocks_codeTabsMargin__XyBTZ style_root__Ib9Qn theme-dark_base__RNsat"><div style="height:0px;overflow:hidden;visibility:hidden" role="presentation" aria-hidden="true"><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example envoy_public_listener_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">HTTP</button><button class="style_tabControl__A5k2n g-type-body-small-strong style_hasHeading__tsJPr">TCP</button></div></div></div><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example envoy_public_listener_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">HTTP</button><button class="style_tabControl__A5k2n g-type-body-small-strong style_hasHeading__tsJPr">TCP</button></div></div><div><div style="display:block"><div class="g-code-block style_root__i1k0c language-json theme-dark_base__RNsat theme-dark_syntax__QCDzs style_hasBarAbove__gZA5T" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.listener.v3.Listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public_listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">21002</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;filter_chains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.network.http_connection_manager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;typed_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;stat_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ingress_http&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;http_filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.http.router&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;route_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local_route&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token property">&quot;virtual_hosts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local_service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;domains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token property">&quot;route&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local-service-cluster&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"> <span class="token property">&quot;traffic_direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;INBOUND&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div><div style="display:none"><div class="g-code-block style_root__i1k0c language-json theme-dark_base__RNsat theme-dark_syntax__QCDzs style_hasBarAbove__gZA5T" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.listener.v3.Listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public_listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">21002</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;filter_chains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.network.tcp_proxy&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;typed_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;stat_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ingress_tcp&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local-service-cluster&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;traffic_direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;INBOUND&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div></div></div></li></ul><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="envoy_listener_tracing_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_listener_tracing_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_listener_tracing_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_listener_tracing_json</code></a> - Specifies a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto#envoy-v3-api-msg-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing">tracing
configuration</a>
to be inserted in the proxy&#x27;s public and upstreams listeners.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_listener_tracing_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;@type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager.Tracing&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;provider&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;envoy.tracers.zipkin&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;typed_config&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;@type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_cluster&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;otelcolector&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/api/v2/spans&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;collector_endpoint_version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;HTTP_JSON&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;shared_span_context&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;custom_tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;tag&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;custom_header&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;request_header&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;x-custom-traceid&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;default_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;tag&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;alloc_id&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token property">&quot;environment&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;NOMAD_ALLOC_ID&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_local_cluster_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_local_cluster_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_local_cluster_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_local_cluster_json</code></a> - Specifies a complete <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto">Envoy cluster</a>
to be delivered in place of the local application cluster. This allows
customization of timeouts, rate limits, load balancing strategy etc.</p><div class="g-code-block style_root__i1k0c style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_root___hL1f"><div class="style_leftSide__uPoap"><div class="style_heading__1_nVl g-type-body-small-strong">Example envoy_local_cluster_json</div></div><div class="style_rightSide__tzFHY"><div class="style_copyBtnContainer__1HWoT"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.cluster.v3.Cluster&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local_app&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;STATIC&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;connect_timeout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5s&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;circuit_breakers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;thresholds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;priority&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DEFAULT&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;max_connections&quot;</span><span class="token operator">:</span> <span class="token number">2048</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token property">&quot;load_assignment&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;cluster_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;local_app&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token property">&quot;endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token property">&quot;lb_endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token property">&quot;endpoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                  <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">8080</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">            <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">        <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code"><span class="token punctuation">}</span>
</span></span></span></code></pre></div></div></li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following configuration items may be overridden directly in the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">proxy.upstreams[].config</code> field of a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/proxies/proxy-config-reference">proxy service
definition</a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/deploy/deploy-sidecar-services"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sidecar_service</code></a> block.</p><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note:</strong> - When a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-router"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-router</code></a>,
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-splitter"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-splitter</code></a>, or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/consul/docs/connect/config-entries/service-resolver"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service-resolver</code></a> config
entry exists for a service the below escape hatches are ignored and will log a
warning.</p></div><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="envoy_listener_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_listener_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_listener_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_listener_json</code></a> - Specifies a complete <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto">Listener</a>
to be delivered in place of the upstream listener that the proxy exposes to
the application for outbound connections. This will be used verbatim with the
following exceptions:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">Every <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">FilterChain</code> added to the listener will have its <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TlsContext</code>
overridden by the service mesh TLS certificates and validation context. This
means there is no way to override the service mesh&#x27;s mutual TLS for the public
listener.</li></ul><div class="mdx-code-blocks_codeTabsMargin__XyBTZ style_root__Ib9Qn theme-dark_base__RNsat"><div style="height:0px;overflow:hidden;visibility:hidden" role="presentation" aria-hidden="true"><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example upstream envoy_listener_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">JSON</button></div></div></div><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example upstream envoy_listener_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">JSON</button></div></div><div><div style="display:block"><div class="g-code-block style_root__i1k0c language-json theme-dark_base__RNsat theme-dark_syntax__QCDzs style_hasBarAbove__gZA5T" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.listener.v3.Listener&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;socket_address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;port_value&quot;</span><span class="token operator">:</span> <span class="token number">14000</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;filter_chains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.network.http_connection_manager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token property">&quot;typedConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;access_log&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.access_loggers.file&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token property">&quot;typedConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/var/log/envoy-access/example-service.log&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;http_filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;envoy.filters.http.router&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;route_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token property">&quot;virtual_hosts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;domains&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                    <span class="token string">&quot;*&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                    <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token property">&quot;route&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;90s&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token property">&quot;retry_policy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                          <span class="token property">&quot;retry_on&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5xx,connect-failure&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                          <span class="token property">&quot;num_retries&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                          <span class="token property">&quot;per_try_timeout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;60s&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">                <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;stat_prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token property">&quot;tracing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">              <span class="token property">&quot;random_sampling&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">            <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;traffic_direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OUTBOUND&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div></div></div></li><li class="mdx-lists_listItem__nkqhg"><a id="envoy_cluster_json" aria-hidden="true" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="envoy_cluster_json permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy_cluster_json"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">envoy_cluster_json</code></a> - Specifies a complete <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto">Envoy cluster</a>
to be delivered in place of the discovered upstream cluster. This allows
customization of timeouts, circuit breaking, rate limits, load balancing
strategy etc.</p><div class="mdx-code-blocks_codeTabsMargin__XyBTZ style_root__Ib9Qn theme-dark_base__RNsat"><div style="height:0px;overflow:hidden;visibility:hidden" role="presentation" aria-hidden="true"><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example upstream envoy_cluster_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">JSON</button></div></div></div><div class="style_topBar__0pZ_b"><div class="style_heading__2_7Zj g-type-body-small-strong">Example upstream envoy_cluster_json</div><div class="style_tabsAsTabs__lZ0ce style_hasHeading__tsJPr"><button class="style_tabControl__A5k2n g-type-body-small-strong style_isActive__AmKFP style_hasHeading__tsJPr">JSON</button></div></div><div><div style="display:block"><div class="g-code-block style_root__i1k0c language-json theme-dark_base__RNsat theme-dark_syntax__QCDzs style_hasBarAbove__gZA5T" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-json"><code class="code-lines_code__luWmT language-json"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;@type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;type.googleapis.com/envoy.config.cluster.v3.Cluster&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-service&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EDS&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;eds_cluster_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;eds_config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">&quot;ads&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;connect_timeout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;90s&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;lb_policy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ROUND_ROBIN&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">&quot;circuit_breakers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">&quot;thresholds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token property">&quot;priority&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DEFAULT&quot;</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token property">&quot;max_connections&quot;</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token property">&quot;max_pending_requests&quot;</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token property">&quot;max_requests&quot;</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token property">&quot;max_retries&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div></div></div></li></ul></div></div><a href="https://github.com/hashicorp/consul/blob/main/website/../content/docs/connect/proxies/envoy.mdx" target="_blank" class="edit-on-github-link_editLink__AsG8Z sidebar-sidecar-layout_editOnGithubLink__SDraB" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="edit-on-github-link_editLinkIcon__wMtY9"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg>Edit this page on GitHub</a></main><div class="sidebar-sidecar-layout_sidecarPosition__WtTq0"><div class="sidebar-sidecar-layout_sidecarTopSlot__qRAEI"></div><div class="sidecar-scroll-container_root__a8nIj"><div class="sidecar-scroll-container_scrollContainer__Dw9id"><div><nav aria-labelledby="react-aria-269"><p id="react-aria-269" class="outline-nav_navLabel__HrjQb hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__Sm1fr"><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-0" aria-describedby="" href="/consul/docs/connect/proxies/envoy#envoy-proxy-configuration-for-service-mesh">Envoy Proxy Configuration for Service Mesh</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-1" aria-describedby="" href="/consul/docs/connect/proxies/envoy#supported-versions">Supported Versions</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-2" aria-describedby="" href="/consul/docs/connect/proxies/envoy#getting-started">Getting Started</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-3" aria-describedby="" href="/consul/docs/connect/proxies/envoy#configuration">Configuration</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-4" aria-describedby="" href="/consul/docs/connect/proxies/envoy#intention-enforcement">Intention Enforcement</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-5" aria-describedby="" href="/consul/docs/connect/proxies/envoy#fetching-certificates">Fetching Certificates</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-6" aria-describedby="" href="/consul/docs/connect/proxies/envoy#bootstrap-configuration">Bootstrap Configuration</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-7" aria-describedby="" href="/consul/docs/connect/proxies/envoy#dynamic-configuration">Dynamic Configuration</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-8" aria-describedby="" href="/consul/docs/connect/proxies/envoy#advanced-configuration">Advanced Configuration</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-layout_footer__HGqK8 base-layout_showFooterTopBorder__4_CwH"><footer class="footer_root__qJO_k"><span class="footer_logoAndSwitcher__CJkN3"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__pe9i3 g-focus-ring-from-box-shadow"><div><svg xmlns="http://www.w3.org/2000/svg" width="254" height="53" fill="none" viewBox="0 0 254 53"><g fill="#000" clip-path="url(#a)"><g><path d="M63.01 12.22h5.32v11.43h12.19V12.22h5.36V40.2h-5.36V28.45H68.33V40.2h-5.32zM89.28 34.77c0-4.2 2.96-5.6 6.56-6.44l6.079-1.4v-.48c0-2.04-1.32-3.32-3.44-3.32s-3.36 1.16-3.76 3.08l-4.56-.52c.68-3.84 3.92-6.32 8.52-6.32 5.08 0 8.4 3.2 8.4 7.88v8.2c0 .52.16.68.52.68h1.12v4.08h-3.12c-1.96 0-2.84-.64-2.84-2.24 0-.48.08-1.04.28-1.76l-.44-.16c-1.44 3.12-3.56 4.48-6.56 4.48-4.12 0-6.76-2.28-6.76-5.76m8.12 2c2.639 0 4.519-1.92 4.519-4.96v-1.6l-4.36 1.04c-2.2.52-3.12 1.28-3.12 2.96s1.16 2.56 2.96 2.56M110.59 34.69l4.88-.96c.52 2.16 2.24 3.24 4.52 3.24 2.28 0 3.56-.92 3.56-2.48s-1.52-1.88-4.4-2.4c-3.64-.56-8.35-1.24-8.35-6.28 0-3.8 3.24-6.44 8.52-6.44 4.68 0 8.32 1.96 9.15 5.92l-4.92.8c-.44-2-2.08-3.04-4.24-3.04-2.36 0-3.48 1-3.48 2.36 0 1.56 1.56 1.88 4.44 2.4 3.6.56 8.32 1.24 8.32 6.28 0 3.96-3.2 6.6-8.6 6.6-4.88 0-8.52-2-9.4-6M136.94 40.21h-5.2V11.42h5.2v8.96c0 1.04-.2 2.04-.48 3.52l.48.16c1.24-2.96 3.12-4.68 6.6-4.68 4.44 0 6.8 2.8 6.8 7.56v13.27h-5.2V27.1c0-2.32-1.16-3.6-3.48-3.6-2.64 0-4.72 2-4.72 5.52zM161.01 35.05c0 .8.28 1.04.88 1.04h2.28v4.12h-4.72c-2.36 0-3.64-1.32-3.64-3.76V23.98h-2.88v-4.12h8.08zm-5.92-20.63c0-1.76 1.44-3.2 3.16-3.2 1.72 0 3.16 1.44 3.16 3.2 0 1.76-1.4 3.16-3.16 3.16-1.76 0-3.16-1.4-3.16-3.16M165.89 26.22c0-8.4 5.52-14.47 13.51-14.47 6.72 0 11.31 3.88 12.55 9.15l-5.28 1.28c-1-3.68-3.44-5.76-7.28-5.76-4.88 0-7.96 4.04-7.96 9.79 0 5.75 3.2 9.79 8.16 9.79 3.92 0 6.32-2.12 7.32-6.04l5 .56c-1.2 6.28-5.84 10.15-12.39 10.15-8.08 0-13.63-6.08-13.63-14.47zM194.08 30.01c0-6.2 4.36-10.63 10.39-10.63s10.39 4.44 10.39 10.63-4.36 10.67-10.39 10.67-10.39-4.48-10.39-10.67m15.59 0c0-3.84-2.04-6.4-5.2-6.4s-5.2 2.56-5.2 6.4c0 3.84 2.08 6.44 5.2 6.44s5.2-2.56 5.2-6.44M218.149 19.86h4.8v.8c0 1.08-.04 1.96-.36 3.6l.48.12c.76-2.68 2.16-4.52 5.44-4.52h1.48v5.04h-2.12c-2.92 0-4.52 1.76-4.52 5v10.31h-5.2zM232.43 19.86h5.12v.92c0 .92-.08 1.64-.36 3.28l.48.12c1.24-3.24 3.56-4.8 6.56-4.8 4.96 0 8.88 4.08 8.88 10.63 0 6.55-3.92 10.67-8.88 10.67-3 0-5.2-1.56-6.48-4.84l-.44.16c.24 1.6.32 2.36.32 3.24v9.15h-5.2V19.85zm15.51 10.15c0-3.96-2.16-6.4-5.2-6.4s-5.2 2.44-5.2 6.4c0 3.96 2.16 6.44 5.2 6.44s5.2-2.44 5.2-6.44"/></g><g><path d="M20.79.01.07 11.97v28.71l7.78 4.5V16.46l12.94-7.47z"/><path d="M29.06.01v22.87h-8.27v-8.54L13 18.84v29.3l7.79 4.5v-22.8h8.27v8.48l7.79-4.49V4.51z"/><path d="M29.06 52.65 49.78 40.7V11.99L42 7.49V36.2l-12.94 7.47z"/></g></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h254v53H0z"/></clipPath></defs></svg></div></a><span class="footer_themeSwitcher__CPJxw hds-font-weight-regular"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-279">Theme</label></span></span><ul class="footer_links__t81SU"><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="/certifications"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://status.hashicorp.com"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/security"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/privacy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/trade-controls"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="opens-in-new-tab-label-react-aria-287" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-287">(opens in new tab)</span></li></ul></footer></div></div></div><div class="style_root__owpNH"></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Consul","url":"/consul"},{"title":"Documentation","url":"/consul/docs","isCurrentPage":false},{"title":"Service Mesh","url":"/consul/docs/connect"},{"title":"Proxies","url":"/consul/docs/connect/proxies"},{"title":"Envoy proxies reference","url":"/consul/docs/connect/proxies/envoy","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Consul Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Consul","fullPath":"/consul","theme":"consul"},{"title":"Install","fullPath":"/consul/install"},{"title":"Tutorials","fullPath":"/consul/tutorials"},{"title":"Documentation","fullPath":"/consul/docs"},{"title":"API","fullPath":"/consul/api-docs"},{"title":"CLI","fullPath":"/consul/commands"}],"showFilterInput":false,"title":"Consul","visuallyHideTitle":true},{"backToLinkProps":{"text":"Consul Home","href":"/consul"},"levelButtonProps":{"levelUpButtonText":"Consul Home"},"menuItems":[{"title":"Documentation","fullPath":"/consul/docs","theme":"consul"},{"title":"What is Consul?","path":"intro","filePath":"../content/docs/intro/index.mdx","fullPath":"/consul/docs/intro","id":"sidebar-nav-item-0"},{"title":"Why Choose Consul?","routes":[{"title":"Overview","path":"consul-vs-other","filePath":"../content/docs/consul-vs-other/index.mdx","fullPath":"/consul/docs/consul-vs-other","id":"sidebar-nav-item-2"},{"title":"Service Meshes","path":"consul-vs-other/service-mesh-compare","filePath":"../content/docs/consul-vs-other/service-mesh-compare.mdx","fullPath":"/consul/docs/consul-vs-other/service-mesh-compare","id":"sidebar-nav-item-3"},{"title":"DNS Tools","path":"consul-vs-other/dns-tools-compare","filePath":"../content/docs/consul-vs-other/dns-tools-compare.mdx","fullPath":"/consul/docs/consul-vs-other/dns-tools-compare","id":"sidebar-nav-item-4"},{"title":"Configuration Management Tools","path":"consul-vs-other/config-management-compare","filePath":"../content/docs/consul-vs-other/config-management-compare.mdx","fullPath":"/consul/docs/consul-vs-other/config-management-compare","id":"sidebar-nav-item-5"},{"title":"API Gateways","path":"consul-vs-other/api-gateway-compare","filePath":"../content/docs/consul-vs-other/api-gateway-compare.mdx","fullPath":"/consul/docs/consul-vs-other/api-gateway-compare","id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-1"},{"title":"Core Concepts","routes":[{"title":"Service Discovery","path":"concepts/service-discovery","filePath":"../content/docs/concepts/service-discovery.mdx","fullPath":"/consul/docs/concepts/service-discovery","id":"sidebar-nav-item-8"},{"title":"Service Mesh","path":"concepts/service-mesh","filePath":"../content/docs/concepts/service-mesh.mdx","fullPath":"/consul/docs/concepts/service-mesh","id":"sidebar-nav-item-9"}],"id":"sidebar-nav-item-7"},{"title":"Get Started","routes":[{"title":"Install Consul","path":"install","filePath":"../content/docs/install/index.mdx","fullPath":"/consul/docs/install","id":"sidebar-nav-item-11"},{"title":"Learn HCP Consul","href":"https://developer.hashicorp.com/consul/tutorials/get-started-hcp","id":"sidebar-nav-item-12"},{"title":"Learn Consul on Kubernetes","href":"https://developer.hashicorp.com/consul/tutorials/get-started-kubernetes","id":"sidebar-nav-item-13"},{"title":"Learn Consul on VMs","href":"https://developer.hashicorp.com/consul/tutorials/get-started-vms","id":"sidebar-nav-item-14"},{"title":"Consul Agent","href":null,"fullPath":"/consul/docs/agent","id":"sidebar-nav-item-15","path":"/docs/agent"},{"title":"Glossary","path":"install/glossary","filePath":"../content/docs/install/glossary.mdx","fullPath":"/consul/docs/install/glossary","id":"sidebar-nav-item-16"},{"title":"Required Ports","path":"install/ports","filePath":"../content/docs/install/ports.mdx","fullPath":"/consul/docs/install/ports","id":"sidebar-nav-item-17"},{"title":"Bootstrapping a Datacenter","path":"install/bootstrapping","filePath":"../content/docs/install/bootstrapping.mdx","fullPath":"/consul/docs/install/bootstrapping","id":"sidebar-nav-item-18"},{"title":"Cloud Auto-join","path":"install/cloud-auto-join","filePath":"../content/docs/install/cloud-auto-join.mdx","fullPath":"/consul/docs/install/cloud-auto-join","id":"sidebar-nav-item-19"},{"title":"Server Performance","path":"install/performance","filePath":"../content/docs/install/performance.mdx","fullPath":"/consul/docs/install/performance","id":"sidebar-nav-item-20"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-21","path":"/docs/k8s"}],"id":"sidebar-nav-item-10"},{"title":"Architecture","routes":[{"title":"Overview","path":"architecture","filePath":"../content/docs/architecture/index.mdx","fullPath":"/consul/docs/architecture","id":"sidebar-nav-item-23"},{"title":"v1 Catalog","path":"architecture/catalog","filePath":"../content/docs/architecture/catalog.mdx","fullPath":"/consul/docs/architecture/catalog","id":"sidebar-nav-item-24"},{"title":"v2 architecture","routes":[{"title":"Overview","path":"architecture/v2","filePath":"../content/docs/architecture/v2/index.mdx","fullPath":"/consul/docs/architecture/v2","id":"sidebar-nav-item-26"},{"title":"Catalog","path":"architecture/v2/catalog","filePath":"../content/docs/architecture/v2/catalog.mdx","fullPath":"/consul/docs/architecture/v2/catalog","id":"sidebar-nav-item-27"},{"title":"Resource groups","path":"architecture/v2/groups","filePath":"../content/docs/architecture/v2/groups.mdx","fullPath":"/consul/docs/architecture/v2/groups","id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-25"},{"title":"Improving Consul Resilience","path":"architecture/improving-consul-resilience","filePath":"../content/docs/architecture/improving-consul-resilience.mdx","fullPath":"/consul/docs/architecture/improving-consul-resilience","id":"sidebar-nav-item-29"},{"title":"Anti-Entropy","path":"architecture/anti-entropy","filePath":"../content/docs/architecture/anti-entropy.mdx","fullPath":"/consul/docs/architecture/anti-entropy","id":"sidebar-nav-item-30"},{"title":"Consensus Protocol","path":"architecture/consensus","filePath":"../content/docs/architecture/consensus.mdx","fullPath":"/consul/docs/architecture/consensus","id":"sidebar-nav-item-31"},{"title":"Gossip Protocol","path":"architecture/gossip","filePath":"../content/docs/architecture/gossip.mdx","fullPath":"/consul/docs/architecture/gossip","id":"sidebar-nav-item-32"},{"title":"Jepsen Testing","path":"architecture/jepsen","filePath":"../content/docs/architecture/jepsen.mdx","fullPath":"/consul/docs/architecture/jepsen","id":"sidebar-nav-item-33"},{"title":"Network Coordinates","path":"architecture/coordinates","filePath":"../content/docs/architecture/coordinates.mdx","fullPath":"/consul/docs/architecture/coordinates","id":"sidebar-nav-item-34"},{"title":"Consul at Scale","path":"architecture/scale","filePath":"../content/docs/architecture/scale.mdx","fullPath":"/consul/docs/architecture/scale","id":"sidebar-nav-item-35"}],"id":"sidebar-nav-item-22"},{"divider":true,"id":"sidebar-nav-item-36"},{"title":"Release Notes","routes":[{"title":"Overview","path":"release-notes","filePath":"../content/docs/release-notes/index.mdx","fullPath":"/consul/docs/release-notes","id":"sidebar-nav-item-38"},{"title":"Consul","routes":[{"title":"v1.19.x","path":"release-notes/consul/v1_19_x","filePath":"../content/docs/release-notes/consul/v1_19_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_19_x","id":"sidebar-nav-item-40"},{"title":"v1.18.x","path":"release-notes/consul/v1_18_x","filePath":"../content/docs/release-notes/consul/v1_18_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_18_x","id":"sidebar-nav-item-41"},{"title":"v1.17.x","path":"release-notes/consul/v1_17_x","filePath":"../content/docs/release-notes/consul/v1_17_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_17_x","id":"sidebar-nav-item-42"},{"title":"v1.16.x","path":"release-notes/consul/v1_16_x","filePath":"../content/docs/release-notes/consul/v1_16_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_16_x","id":"sidebar-nav-item-43"},{"title":"v1.15.x","path":"release-notes/consul/v1_15_x","filePath":"../content/docs/release-notes/consul/v1_15_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_15_x","id":"sidebar-nav-item-44"},{"title":"v1.14.x","path":"release-notes/consul/v1_14_x","filePath":"../content/docs/release-notes/consul/v1_14_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_14_x","id":"sidebar-nav-item-45"},{"title":"v1.13.x","path":"release-notes/consul/v1_13_x","filePath":"../content/docs/release-notes/consul/v1_13_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_13_x","id":"sidebar-nav-item-46"},{"title":"v1.12.x","path":"release-notes/consul/v1_12_x","filePath":"../content/docs/release-notes/consul/v1_12_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_12_x","id":"sidebar-nav-item-47"},{"title":"v1.11.x","path":"release-notes/consul/v1_11_x","filePath":"../content/docs/release-notes/consul/v1_11_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_11_x","id":"sidebar-nav-item-48"},{"title":"v1.10.x","path":"release-notes/consul/v1_10_x","filePath":"../content/docs/release-notes/consul/v1_10_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_10_x","id":"sidebar-nav-item-49"},{"title":"v1.9.x","path":"release-notes/consul/v1_9_x","filePath":"../content/docs/release-notes/consul/v1_9_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_9_x","id":"sidebar-nav-item-50"}],"id":"sidebar-nav-item-39"},{"title":"Consul K8s","routes":[{"title":"v1.4.x","path":"release-notes/consul-k8s/v1_4_x","filePath":"../content/docs/release-notes/consul-k8s/v1_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_4_x","id":"sidebar-nav-item-52"},{"title":"v1.3.x","path":"release-notes/consul-k8s/v1_3_x","filePath":"../content/docs/release-notes/consul-k8s/v1_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_3_x","id":"sidebar-nav-item-53"},{"title":"v1.2.x","path":"release-notes/consul-k8s/v1_2_x","filePath":"../content/docs/release-notes/consul-k8s/v1_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_2_x","id":"sidebar-nav-item-54"},{"title":"v1.1.x","path":"release-notes/consul-k8s/v1_1_x","filePath":"../content/docs/release-notes/consul-k8s/v1_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_1_x","id":"sidebar-nav-item-55"},{"title":"v1.0.x","path":"release-notes/consul-k8s/v1_0_x","filePath":"../content/docs/release-notes/consul-k8s/v1_0_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_0_x","id":"sidebar-nav-item-56"},{"title":"v0.49.x","path":"release-notes/consul-k8s/v0_49_x","filePath":"../content/docs/release-notes/consul-k8s/v0_49_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_49_x","id":"sidebar-nav-item-57"},{"title":"v0.48.x","path":"release-notes/consul-k8s/v0_48_x","filePath":"../content/docs/release-notes/consul-k8s/v0_48_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_48_x","id":"sidebar-nav-item-58"},{"title":"v0.47.x","path":"release-notes/consul-k8s/v0_47_x","filePath":"../content/docs/release-notes/consul-k8s/v0_47_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_47_x","id":"sidebar-nav-item-59"}],"id":"sidebar-nav-item-51"},{"title":"API Gateway for Kubernetes","routes":[{"title":"v0.5.x","path":"release-notes/consul-api-gateway/v0_5_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_5_x","id":"sidebar-nav-item-61"},{"title":"v0.4.x","path":"release-notes/consul-api-gateway/v0_4_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_4_x","id":"sidebar-nav-item-62"},{"title":"v0.3.x","path":"release-notes/consul-api-gateway/v0_3_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_3_x","id":"sidebar-nav-item-63"},{"title":"v0.2.x","path":"release-notes/consul-api-gateway/v0_2_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_2_x","id":"sidebar-nav-item-64"},{"title":"v0.1.x","path":"release-notes/consul-api-gateway/v0_1_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_1_x","id":"sidebar-nav-item-65"}],"id":"sidebar-nav-item-60"},{"title":"Consul ECS","routes":[{"title":"v0.7.x","path":"release-notes/consul-ecs/v0_7_x","filePath":"../content/docs/release-notes/consul-ecs/v0_7_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_7_x","id":"sidebar-nav-item-67"},{"title":"v0.5.x","path":"release-notes/consul-ecs/v0_5_x","filePath":"../content/docs/release-notes/consul-ecs/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_5_x","id":"sidebar-nav-item-68"},{"title":"v0.4.x","path":"release-notes/consul-ecs/v0_4_x","filePath":"../content/docs/release-notes/consul-ecs/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_4_x","id":"sidebar-nav-item-69"},{"title":"v0.3.x","path":"release-notes/consul-ecs/v0_3_x","filePath":"../content/docs/release-notes/consul-ecs/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_3_x","id":"sidebar-nav-item-70"},{"title":"v0.2.x","path":"release-notes/consul-ecs/v0_2_x","filePath":"../content/docs/release-notes/consul-ecs/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_2_x","id":"sidebar-nav-item-71"}],"id":"sidebar-nav-item-66"},{"title":"Consul Terraform Sync","routes":[{"title":"v0.6.x","path":"release-notes/consul-terraform-sync/v0_6_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_6_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_6_x","id":"sidebar-nav-item-73"},{"title":"v0.5.x","path":"release-notes/consul-terraform-sync/v0_5_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_5_x","id":"sidebar-nav-item-74"}],"id":"sidebar-nav-item-72"}],"id":"sidebar-nav-item-37"},{"title":"Upgrade","routes":[{"title":"Overview","path":"upgrading","filePath":"../content/docs/upgrading/index.mdx","fullPath":"/consul/docs/upgrading","id":"sidebar-nav-item-76"},{"title":"Compatibility Promise","path":"upgrading/compatibility","filePath":"../content/docs/upgrading/compatibility.mdx","fullPath":"/consul/docs/upgrading/compatibility","id":"sidebar-nav-item-77"},{"title":"Specific Version Details","path":"upgrading/upgrade-specific","filePath":"../content/docs/upgrading/upgrade-specific.mdx","fullPath":"/consul/docs/upgrading/upgrade-specific","id":"sidebar-nav-item-78"},{"title":"Upgrade Instructions","routes":[{"title":"Overview","path":"upgrading/instructions","filePath":"../content/docs/upgrading/instructions/index.mdx","fullPath":"/consul/docs/upgrading/instructions","id":"sidebar-nav-item-80"},{"title":"General Process","path":"upgrading/instructions/general-process","filePath":"../content/docs/upgrading/instructions/general-process.mdx","fullPath":"/consul/docs/upgrading/instructions/general-process","id":"sidebar-nav-item-81"},{"title":"Upgrading to Latest 1.2.x","path":"upgrading/instructions/upgrade-to-1-2-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-2-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-2-x","id":"sidebar-nav-item-82"},{"title":"Upgrading to Latest 1.6.x","path":"upgrading/instructions/upgrade-to-1-6-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-6-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-6-x","id":"sidebar-nav-item-83"},{"title":"Upgrading to Latest 1.8.x","path":"upgrading/instructions/upgrade-to-1-8-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-8-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-8-x","id":"sidebar-nav-item-84"},{"title":"Upgrading to Latest 1.10.x","path":"upgrading/instructions/upgrade-to-1-10-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-10-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-10-x","id":"sidebar-nav-item-85"}],"id":"sidebar-nav-item-79"}],"id":"sidebar-nav-item-75"},{"divider":true,"id":"sidebar-nav-item-86"},{"title":"Services","routes":[{"title":"Overview","path":"services/services","filePath":"../content/docs/services/services.mdx","fullPath":"/consul/docs/services/services","id":"sidebar-nav-item-88"},{"title":"Usage","routes":[{"title":"Define services","path":"services/usage/define-services","filePath":"../content/docs/services/usage/define-services.mdx","fullPath":"/consul/docs/services/usage/define-services","id":"sidebar-nav-item-90"},{"title":"Define health checks","path":"services/usage/checks","filePath":"../content/docs/services/usage/checks.mdx","fullPath":"/consul/docs/services/usage/checks","id":"sidebar-nav-item-91"},{"title":"Register services and health checks","path":"services/usage/register-services-checks","filePath":"../content/docs/services/usage/register-services-checks.mdx","fullPath":"/consul/docs/services/usage/register-services-checks","id":"sidebar-nav-item-92"}],"id":"sidebar-nav-item-89"},{"title":"Discover services with DNS","routes":[{"title":"Overview","path":"services/discovery/dns-overview","filePath":"../content/docs/services/discovery/dns-overview.mdx","fullPath":"/consul/docs/services/discovery/dns-overview","id":"sidebar-nav-item-94"},{"title":"Configure DNS behavior","path":"services/discovery/dns-configuration","filePath":"../content/docs/services/discovery/dns-configuration.mdx","fullPath":"/consul/docs/services/discovery/dns-configuration","id":"sidebar-nav-item-95"},{"title":"Perform static DNS lookups","path":"services/discovery/dns-static-lookups","filePath":"../content/docs/services/discovery/dns-static-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-static-lookups","id":"sidebar-nav-item-96"},{"title":"Cache DNS lookups","path":"services/discovery/dns-cache","filePath":"../content/docs/services/discovery/dns-cache.mdx","fullPath":"/consul/docs/services/discovery/dns-cache","id":"sidebar-nav-item-97"},{"title":"Enable dynamic DNS lookups","path":"services/discovery/dns-dynamic-lookups","filePath":"../content/docs/services/discovery/dns-dynamic-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-dynamic-lookups","id":"sidebar-nav-item-98"}],"id":"sidebar-nav-item-93"},{"title":"Configuration","routes":[{"title":"Overview","path":"services/configuration/services-configuration-overview","filePath":"../content/docs/services/configuration/services-configuration-overview.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-overview","id":"sidebar-nav-item-100"},{"title":"Services","path":"services/configuration/services-configuration-reference","filePath":"../content/docs/services/configuration/services-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-reference","id":"sidebar-nav-item-101"},{"title":"Health checks","path":"services/configuration/checks-configuration-reference","filePath":"../content/docs/services/configuration/checks-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/checks-configuration-reference","id":"sidebar-nav-item-102"},{"title":"Service defaults","href":null,"fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-103","path":"connect/config-entries/service-defaults"}],"id":"sidebar-nav-item-99"}],"id":"sidebar-nav-item-87"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"connect","filePath":"../content/docs/connect/index.mdx","fullPath":"/consul/docs/connect","id":"sidebar-nav-item-105"},{"title":"How Service Mesh Works","path":"connect/connect-internals","filePath":"../content/docs/connect/connect-internals.mdx","fullPath":"/consul/docs/connect/connect-internals","id":"sidebar-nav-item-106"},{"title":"Configuration","path":"connect/configuration","filePath":"../content/docs/connect/configuration.mdx","fullPath":"/consul/docs/connect/configuration","id":"sidebar-nav-item-107"},{"title":"Configuration entries","routes":[{"title":"Overview","path":"connect/config-entries","filePath":"../content/docs/connect/config-entries/index.mdx","fullPath":"/consul/docs/connect/config-entries","id":"sidebar-nav-item-109"},{"title":"API gateway","path":"connect/config-entries/api-gateway","filePath":"../content/docs/connect/config-entries/api-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/api-gateway","id":"sidebar-nav-item-110"},{"title":"HTTP route","path":"connect/config-entries/http-route","filePath":"../content/docs/connect/config-entries/http-route.mdx","fullPath":"/consul/docs/connect/config-entries/http-route","id":"sidebar-nav-item-111"},{"title":"TCP route","path":"connect/config-entries/tcp-route","filePath":"../content/docs/connect/config-entries/tcp-route.mdx","fullPath":"/consul/docs/connect/config-entries/tcp-route","id":"sidebar-nav-item-112"},{"title":"File system certificate","path":"connect/config-entries/file-system-certificate","filePath":"../content/docs/connect/config-entries/file-system-certificate.mdx","fullPath":"/consul/docs/connect/config-entries/file-system-certificate","id":"sidebar-nav-item-113"},{"title":"Inline certificate","path":"connect/config-entries/inline-certificate","filePath":"../content/docs/connect/config-entries/inline-certificate.mdx","fullPath":"/consul/docs/connect/config-entries/inline-certificate","id":"sidebar-nav-item-114"},{"title":"Ingress gateway","path":"connect/config-entries/ingress-gateway","filePath":"../content/docs/connect/config-entries/ingress-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-115"},{"title":"JWT Provider","path":"connect/config-entries/jwt-provider","filePath":"../content/docs/connect/config-entries/jwt-provider.mdx","fullPath":"/consul/docs/connect/config-entries/jwt-provider","id":"sidebar-nav-item-116"},{"title":"Mesh","path":"connect/config-entries/mesh","filePath":"../content/docs/connect/config-entries/mesh.mdx","fullPath":"/consul/docs/connect/config-entries/mesh","id":"sidebar-nav-item-117"},{"title":"Exported services","path":"connect/config-entries/exported-services","filePath":"../content/docs/connect/config-entries/exported-services.mdx","fullPath":"/consul/docs/connect/config-entries/exported-services","id":"sidebar-nav-item-118"},{"title":"Proxy defaults","path":"connect/config-entries/proxy-defaults","filePath":"../content/docs/connect/config-entries/proxy-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-119"},{"title":"Sameness Group","path":"connect/config-entries/sameness-group","filePath":"../content/docs/connect/config-entries/sameness-group.mdx","fullPath":"/consul/docs/connect/config-entries/sameness-group","id":"sidebar-nav-item-120"},{"title":"Service Defaults","path":"connect/config-entries/service-defaults","filePath":"../content/docs/connect/config-entries/service-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-121"},{"title":"Service intentions","path":"connect/config-entries/service-intentions","filePath":"../content/docs/connect/config-entries/service-intentions.mdx","fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-122"},{"title":"Service resolver","path":"connect/config-entries/service-resolver","filePath":"../content/docs/connect/config-entries/service-resolver.mdx","fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-123"},{"title":"Service router","path":"connect/config-entries/service-router","filePath":"../content/docs/connect/config-entries/service-router.mdx","fullPath":"/consul/docs/connect/config-entries/service-router","id":"sidebar-nav-item-124"},{"title":"Service splitter","path":"connect/config-entries/service-splitter","filePath":"../content/docs/connect/config-entries/service-splitter.mdx","fullPath":"/consul/docs/connect/config-entries/service-splitter","id":"sidebar-nav-item-125"},{"title":"Terminating gateway","path":"connect/config-entries/terminating-gateway","filePath":"../content/docs/connect/config-entries/terminating-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/terminating-gateway","id":"sidebar-nav-item-126"},{"title":"Control plane request limit","path":"connect/config-entries/control-plane-request-limit","filePath":"../content/docs/connect/config-entries/control-plane-request-limit.mdx","fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-127"}],"id":"sidebar-nav-item-108"},{"title":"Proxies","routes":[{"title":"Overview","path":"connect/proxies","filePath":"../content/docs/connect/proxies/index.mdx","fullPath":"/consul/docs/connect/proxies","id":"sidebar-nav-item-129"},{"title":"Deploy service mesh proxies","path":"connect/proxies/deploy-service-mesh-proxies","filePath":"../content/docs/connect/proxies/deploy-service-mesh-proxies.mdx","fullPath":"/consul/docs/connect/proxies/deploy-service-mesh-proxies","id":"sidebar-nav-item-130"},{"title":"Deploy sidecar services","path":"connect/proxies/deploy-sidecar-services","filePath":"../content/docs/connect/proxies/deploy-sidecar-services.mdx","fullPath":"/consul/docs/connect/proxies/deploy-sidecar-services","id":"sidebar-nav-item-131"},{"title":"Envoy Extensions","routes":[{"title":"Overview","path":"connect/proxies/envoy-extensions","filePath":"../content/docs/connect/proxies/envoy-extensions/index.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions","id":"sidebar-nav-item-133"},{"title":"Usage","routes":[{"title":"Delegate authorization to Apigee","path":"connect/proxies/envoy-extensions/usage/apigee-ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz","id":"sidebar-nav-item-135"},{"title":"Delegate authorization to external services","path":"connect/proxies/envoy-extensions/usage/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/ext-authz","id":"sidebar-nav-item-136"},{"title":"Run Lua scripts in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lua","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lua.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lua","id":"sidebar-nav-item-137"},{"title":"Invoke Lambda functions in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lambda","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lambda.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lambda","id":"sidebar-nav-item-138"},{"title":"Send access logs to OpenTelemetry collector service","path":"connect/proxies/envoy-extensions/usage/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/otel-access-logging","id":"sidebar-nav-item-139"},{"title":"Configure Envoy proxy properties","path":"connect/proxies/envoy-extensions/usage/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/property-override","id":"sidebar-nav-item-140"},{"title":"Run WebAssembly plug-ins in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/wasm","id":"sidebar-nav-item-141"}],"id":"sidebar-nav-item-134"},{"title":"Configuration","routes":[{"title":"External authorization","path":"connect/proxies/envoy-extensions/configuration/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/ext-authz","id":"sidebar-nav-item-143"},{"title":"OpenTelemetry Access Logging","path":"connect/proxies/envoy-extensions/configuration/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging","id":"sidebar-nav-item-144"},{"title":"Property override","path":"connect/proxies/envoy-extensions/configuration/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/property-override","id":"sidebar-nav-item-145"},{"title":"WebAssembly","path":"connect/proxies/envoy-extensions/configuration/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/wasm","id":"sidebar-nav-item-146"}],"id":"sidebar-nav-item-142"}],"id":"sidebar-nav-item-132"},{"title":"Proxy integration","path":"connect/proxies/integrate","filePath":"../content/docs/connect/proxies/integrate.mdx","fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-147"},{"title":"Proxy defaults configuration reference","href":null,"fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-148","path":"/consul/docs/connect/config-entries/proxy-defaults"},{"title":"Envoy proxies reference","path":"connect/proxies/envoy","filePath":"../content/docs/connect/proxies/envoy.mdx","fullPath":"/consul/docs/connect/proxies/envoy","id":"sidebar-nav-item-149"},{"title":"Built-in proxy reference","path":"connect/proxies/built-in","filePath":"../content/docs/connect/proxies/built-in.mdx","fullPath":"/consul/docs/connect/proxies/built-in","id":"sidebar-nav-item-150"},{"title":"Service mesh proxy configuration reference","path":"connect/proxies/proxy-config-reference","filePath":"../content/docs/connect/proxies/proxy-config-reference.mdx","fullPath":"/consul/docs/connect/proxies/proxy-config-reference","id":"sidebar-nav-item-151"}],"id":"sidebar-nav-item-128"},{"title":"Service intentions","routes":[{"title":"Overview","path":"connect/intentions","filePath":"../content/docs/connect/intentions/index.mdx","fullPath":"/consul/docs/connect/intentions","id":"sidebar-nav-item-153"},{"title":"Create and manage service intentions","path":"connect/intentions/create-manage-intentions","filePath":"../content/docs/connect/intentions/create-manage-intentions.mdx","fullPath":"/consul/docs/connect/intentions/create-manage-intentions","id":"sidebar-nav-item-154"},{"title":"JWT authorization for intentions","path":"connect/intentions/jwt-authorization","filePath":"../content/docs/connect/intentions/jwt-authorization.mdx","fullPath":"/consul/docs/connect/intentions/jwt-authorization","id":"sidebar-nav-item-155"},{"title":"Service intentions legacy mode","path":"connect/intentions/legacy","filePath":"../content/docs/connect/intentions/legacy.mdx","fullPath":"/consul/docs/connect/intentions/legacy","id":"sidebar-nav-item-156"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-157","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-152"},{"title":"Observability","routes":[{"title":"Overview","path":"connect/observability","filePath":"../content/docs/connect/observability/index.mdx","fullPath":"/consul/docs/connect/observability","id":"sidebar-nav-item-159"},{"title":"Access Logs","path":"connect/observability/access-logs","filePath":"../content/docs/connect/observability/access-logs.mdx","fullPath":"/consul/docs/connect/observability/access-logs","id":"sidebar-nav-item-160"},{"title":"UI Visualization","path":"connect/observability/ui-visualization","filePath":"../content/docs/connect/observability/ui-visualization.mdx","fullPath":"/consul/docs/connect/observability/ui-visualization","id":"sidebar-nav-item-161"}],"id":"sidebar-nav-item-158"},{"title":"Manage traffic","routes":[{"title":"Overview","path":"connect/manage-traffic","filePath":"../content/docs/connect/manage-traffic/index.mdx","fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-163"},{"title":"Route traffic to local upstreams","path":"connect/manage-traffic/route-to-local-upstreams","filePath":"../content/docs/connect/manage-traffic/route-to-local-upstreams.mdx","fullPath":"/consul/docs/connect/manage-traffic/route-to-local-upstreams","id":"sidebar-nav-item-164"},{"title":"Limit request rates to services","path":"connect/manage-traffic/limit-request-rates","filePath":"../content/docs/connect/manage-traffic/limit-request-rates.mdx","fullPath":"/consul/docs/connect/manage-traffic/limit-request-rates","id":"sidebar-nav-item-165"},{"title":"Fault Injection","path":"connect/manage-traffic/fault-injection","filePath":"../content/docs/connect/manage-traffic/fault-injection.mdx","fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-166"},{"title":"Failover","routes":[{"title":"Overview","path":"connect/manage-traffic/failover","filePath":"../content/docs/connect/manage-traffic/failover/index.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover","id":"sidebar-nav-item-168"},{"title":"Configure failover services for Kubernetes","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-169","path":"/docs/k8s/l7-traffic/failover-tproxy"},{"title":"Automate geo-failover with prepared queries","href":null,"fullPath":"/consul/tutorials/developer-discovery/automate-geo-failover","id":"sidebar-nav-item-170","path":"/tutorials/developer-discovery/automate-geo-failover"},{"title":"Failover with sameness groups","path":"connect/manage-traffic/failover/sameness","filePath":"../content/docs/connect/manage-traffic/failover/sameness.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover/sameness","id":"sidebar-nav-item-171"},{"title":"Configuration","routes":[{"title":"Service resolver","href":null,"fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-173","path":"/consul/docs/connect/config-entries/service-resolver"},{"title":"Service intentions","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-174","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-172"}],"id":"sidebar-nav-item-167"},{"title":"Discovery chain reference","path":"connect/manage-traffic/discovery-chain","filePath":"../content/docs/connect/manage-traffic/discovery-chain.mdx","fullPath":"/consul/docs/connect/manage-traffic/discovery-chain","id":"sidebar-nav-item-175"}],"id":"sidebar-nav-item-162"},{"title":"Connectivity Tasks","path":"connect/connectivity-tasks","filePath":"../content/docs/connect/connectivity-tasks.mdx","fullPath":"/consul/docs/connect/connectivity-tasks","id":"sidebar-nav-item-176"},{"title":"Distributed Tracing","path":"connect/distributed-tracing","filePath":"../content/docs/connect/distributed-tracing.mdx","fullPath":"/consul/docs/connect/distributed-tracing","id":"sidebar-nav-item-177"},{"title":"Gateways","routes":[{"title":"Overview","path":"connect/gateways","filePath":"../content/docs/connect/gateways/index.mdx","fullPath":"/consul/docs/connect/gateways","id":"sidebar-nav-item-179"},{"title":"API Gateways","routes":[{"title":"Overview","path":"connect/gateways/api-gateway","filePath":"../content/docs/connect/gateways/api-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway","id":"sidebar-nav-item-181"},{"title":"Technical specifications for Kubernetes","path":"connect/gateways/api-gateway/tech-specs","filePath":"../content/docs/connect/gateways/api-gateway/tech-specs.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/tech-specs","id":"sidebar-nav-item-182"},{"title":"Install on Kubernetes","path":"connect/gateways/api-gateway/install-k8s","filePath":"../content/docs/connect/gateways/api-gateway/install-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/install-k8s","id":"sidebar-nav-item-183"},{"title":"Upgrade on Kubernetes","path":"connect/gateways/api-gateway/upgrades-k8s","filePath":"../content/docs/connect/gateways/api-gateway/upgrades-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/upgrades-k8s","id":"sidebar-nav-item-184"},{"title":"Deploy listeners","routes":[{"title":"Deploy listeners to VMs","path":"connect/gateways/api-gateway/deploy/listeners-vms","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-vms","id":"sidebar-nav-item-186"},{"title":"Deploy listeners to Kubernetes","path":"connect/gateways/api-gateway/deploy/listeners-k8s","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-k8s","id":"sidebar-nav-item-187"}],"id":"sidebar-nav-item-185"},{"title":"Define routes","routes":[{"title":"Define routes on VMs","path":"connect/gateways/api-gateway/define-routes/routes-vms","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-vms","id":"sidebar-nav-item-189"},{"title":"Define routes on Kubernetes","path":"connect/gateways/api-gateway/define-routes/routes-k8s","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-k8s","id":"sidebar-nav-item-190"},{"title":"Reroute traffic in Kubernetes","path":"connect/gateways/api-gateway/define-routes/reroute-http-requests","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests","id":"sidebar-nav-item-191"},{"title":"Route to peered services in Kubernetes","path":"connect/gateways/api-gateway/define-routes/route-to-peered-services","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services","id":"sidebar-nav-item-192"}],"id":"sidebar-nav-item-188"},{"title":"Secure traffic","routes":[{"title":"Encrypt traffic on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/encrypt-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms","id":"sidebar-nav-item-194"},{"title":"Verify incoming requests with JWTs on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","id":"sidebar-nav-item-195"},{"title":"Verify incoming requests with JWTs on Kubernetes","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","id":"sidebar-nav-item-196"}],"id":"sidebar-nav-item-193"},{"title":"Configuration","routes":[{"title":"Overview","path":"connect/gateways/api-gateway/configuration","filePath":"../content/docs/connect/gateways/api-gateway/configuration/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration","id":"sidebar-nav-item-198"},{"title":"Gateway","path":"connect/gateways/api-gateway/configuration/gateway","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gateway.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gateway","id":"sidebar-nav-item-199"},{"title":"GatewayClass","path":"connect/gateways/api-gateway/configuration/gatewayclass","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclass.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclass","id":"sidebar-nav-item-200"},{"title":"GatewayClassConfig","path":"connect/gateways/api-gateway/configuration/gatewayclassconfig","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig","id":"sidebar-nav-item-201"},{"title":"GatewayPolicy","path":"connect/gateways/api-gateway/configuration/gatewaypolicy","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewaypolicy.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewaypolicy","id":"sidebar-nav-item-202"},{"title":"RouteAuthFilter","path":"connect/gateways/api-gateway/configuration/routeauthfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeauthfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeauthfilter","id":"sidebar-nav-item-203"},{"title":"Routes","path":"connect/gateways/api-gateway/configuration/routes","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routes.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routes","id":"sidebar-nav-item-204"},{"title":"RouteRetryFilter","path":"connect/gateways/api-gateway/configuration/routeretryfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeretryfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeretryfilter","id":"sidebar-nav-item-205"},{"title":"RouteTimeoutFilter","path":"connect/gateways/api-gateway/configuration/routetimeoutfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter","id":"sidebar-nav-item-206"},{"title":"MeshService","path":"connect/gateways/api-gateway/configuration/meshservice","filePath":"../content/docs/connect/gateways/api-gateway/configuration/meshservice.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/meshservice","id":"sidebar-nav-item-207"}],"id":"sidebar-nav-item-197"},{"title":"Error Messages","path":"connect/gateways/api-gateway/errors","filePath":"../content/docs/connect/gateways/api-gateway/errors.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/errors","id":"sidebar-nav-item-208"}],"id":"sidebar-nav-item-180"},{"title":"Mesh Gateways","routes":[{"title":"Overview","path":"connect/gateways/mesh-gateway","filePath":"../content/docs/connect/gateways/mesh-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway","id":"sidebar-nav-item-210"},{"title":"Enabling WAN Federation Control Plane Traffic","path":"connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","id":"sidebar-nav-item-211"},{"title":"Enabling Service-to-service Traffic Across WAN Federated Datacenters","path":"connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","id":"sidebar-nav-item-212"},{"title":"Enabling Service-to-service Traffic Across Admin Partitions","path":"connect/gateways/mesh-gateway/service-to-service-traffic-partitions","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions","id":"sidebar-nav-item-213"},{"title":"Enabling Peering Control Plane Traffic","path":"connect/gateways/mesh-gateway/peering-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways","id":"sidebar-nav-item-214"}],"id":"sidebar-nav-item-209"},{"title":"Ingress Gateways","routes":[{"title":"Overview","path":"connect/gateways/ingress-gateway","filePath":"../content/docs/connect/gateways/ingress-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway","id":"sidebar-nav-item-216"},{"title":"Implement an ingress gateway","path":"connect/gateways/ingress-gateway/usage","filePath":"../content/docs/connect/gateways/ingress-gateway/usage.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/usage","id":"sidebar-nav-item-217"},{"title":"Serve TLS certificates from an external service","path":"connect/gateways/ingress-gateway/tls-external-service","filePath":"../content/docs/connect/gateways/ingress-gateway/tls-external-service.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/tls-external-service","id":"sidebar-nav-item-218"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-219","path":"/consul/docs/connect/config-entries/ingress-gateway"}],"id":"sidebar-nav-item-215"},{"title":"Terminating Gateways","path":"connect/gateways/terminating-gateway","filePath":"../content/docs/connect/gateways/terminating-gateway.mdx","fullPath":"/consul/docs/connect/gateways/terminating-gateway","id":"sidebar-nav-item-220"}],"id":"sidebar-nav-item-178"},{"title":"Cluster Peering","routes":[{"title":"Overview","path":"connect/cluster-peering","filePath":"../content/docs/connect/cluster-peering/index.mdx","fullPath":"/consul/docs/connect/cluster-peering","id":"sidebar-nav-item-222"},{"title":"Technical Specifications","path":"connect/cluster-peering/tech-specs","filePath":"../content/docs/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-223"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"connect/cluster-peering/usage/establish-cluster-peering","filePath":"../content/docs/connect/cluster-peering/usage/establish-cluster-peering.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/establish-cluster-peering","id":"sidebar-nav-item-225"},{"title":"Manage Cluster Peering Connections","path":"connect/cluster-peering/usage/manage-connections","filePath":"../content/docs/connect/cluster-peering/usage/manage-connections.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/manage-connections","id":"sidebar-nav-item-226"},{"title":"Manage L7 Traffic With Cluster Peering","path":"connect/cluster-peering/usage/peering-traffic-management","filePath":"../content/docs/connect/cluster-peering/usage/peering-traffic-management.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/peering-traffic-management","id":"sidebar-nav-item-227"},{"title":"Create Sameness Groups","path":"connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-228"}],"id":"sidebar-nav-item-224"}],"id":"sidebar-nav-item-221"},{"title":"Nomad","path":"connect/nomad","filePath":"../content/docs/connect/nomad.mdx","fullPath":"/consul/docs/connect/nomad","id":"sidebar-nav-item-229"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-230","path":"/docs/k8s/connect"},{"title":"Native App Integration","routes":[{"title":"Overview","path":"connect/native","filePath":"../content/docs/connect/native/index.mdx","fullPath":"/consul/docs/connect/native","id":"sidebar-nav-item-232"},{"title":"Go Integration","path":"connect/native/go","filePath":"../content/docs/connect/native/go.mdx","fullPath":"/consul/docs/connect/native/go","id":"sidebar-nav-item-233"}],"id":"sidebar-nav-item-231"},{"title":"Certificate Management","routes":[{"title":"Overview","path":"connect/ca","filePath":"../content/docs/connect/ca/index.mdx","fullPath":"/consul/docs/connect/ca","id":"sidebar-nav-item-235"},{"title":"Built-In CA","path":"connect/ca/consul","filePath":"../content/docs/connect/ca/consul.mdx","fullPath":"/consul/docs/connect/ca/consul","id":"sidebar-nav-item-236"},{"title":"Vault","path":"connect/ca/vault","filePath":"../content/docs/connect/ca/vault.mdx","fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-237"},{"title":"ACM Private CA","path":"connect/ca/aws","filePath":"../content/docs/connect/ca/aws.mdx","fullPath":"/consul/docs/connect/ca/aws","id":"sidebar-nav-item-238"}],"id":"sidebar-nav-item-234"},{"title":"Develop and Debug","path":"connect/dev","filePath":"../content/docs/connect/dev.mdx","fullPath":"/consul/docs/connect/dev","id":"sidebar-nav-item-239"},{"title":"Consul Dataplane","routes":[{"title":"Overview","path":"connect/dataplane","filePath":"../content/docs/connect/dataplane/index.mdx","fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-241"},{"title":"CLI Reference","path":"connect/dataplane/consul-dataplane","filePath":"../content/docs/connect/dataplane/consul-dataplane.mdx","fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-242"},{"title":"Telemetry","path":"connect/dataplane/telemetry","filePath":"../content/docs/connect/dataplane/telemetry.mdx","fullPath":"/consul/docs/connect/dataplane/telemetry","id":"sidebar-nav-item-243"}],"id":"sidebar-nav-item-240"}],"id":"sidebar-nav-item-104"},{"title":"Dynamic App Configuration","routes":[{"title":"Consul KV","routes":[{"title":"Overview","path":"dynamic-app-config/kv","filePath":"../content/docs/dynamic-app-config/kv/index.mdx","fullPath":"/consul/docs/dynamic-app-config/kv","id":"sidebar-nav-item-246"},{"title":"Store keys and values","path":"dynamic-app-config/kv/store","filePath":"../content/docs/dynamic-app-config/kv/store.mdx","fullPath":"/consul/docs/dynamic-app-config/kv/store","id":"sidebar-nav-item-247"}],"id":"sidebar-nav-item-245"},{"title":"Sessions","path":"dynamic-app-config/sessions","filePath":"../content/docs/dynamic-app-config/sessions.mdx","fullPath":"/consul/docs/dynamic-app-config/sessions","id":"sidebar-nav-item-248"},{"title":"Watches","path":"dynamic-app-config/watches","filePath":"../content/docs/dynamic-app-config/watches.mdx","fullPath":"/consul/docs/dynamic-app-config/watches","id":"sidebar-nav-item-249"}],"id":"sidebar-nav-item-244"},{"title":"Security","routes":[{"title":"Overview","path":"security","filePath":"../content/docs/security/index.mdx","fullPath":"/consul/docs/security","id":"sidebar-nav-item-251"},{"title":"Access Control (ACLs)","routes":[{"title":"ACL System Overview","path":"security/acl","filePath":"../content/docs/security/acl/index.mdx","fullPath":"/consul/docs/security/acl","id":"sidebar-nav-item-253"},{"title":"Tokens","routes":[{"title":"Overview","path":"security/acl/tokens","filePath":"../content/docs/security/acl/tokens/index.mdx","fullPath":"/consul/docs/security/acl/tokens","id":"sidebar-nav-item-255"},{"title":"Create ACL Tokens","routes":[{"title":"Create a service token","path":"security/acl/tokens/create/create-a-service-token","filePath":"../content/docs/security/acl/tokens/create/create-a-service-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-service-token","id":"sidebar-nav-item-257"},{"title":"Create an agent token","path":"security/acl/tokens/create/create-an-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-an-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-agent-token","id":"sidebar-nav-item-258"},{"title":"Create a UI token","path":"security/acl/tokens/create/create-a-ui-token","filePath":"../content/docs/security/acl/tokens/create/create-a-ui-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-ui-token","id":"sidebar-nav-item-259"},{"title":"Create a mesh gateway token","path":"security/acl/tokens/create/create-a-mesh-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-mesh-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-mesh-gateway-token","id":"sidebar-nav-item-260"},{"title":"Create an ingress gateway token","path":"security/acl/tokens/create/create-an-ingress-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-an-ingress-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-ingress-gateway-token","id":"sidebar-nav-item-261"},{"title":"Create a terminating gateway token","path":"security/acl/tokens/create/create-a-terminating-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-terminating-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-terminating-gateway-token","id":"sidebar-nav-item-262"},{"title":"Create a DNS token","path":"security/acl/tokens/create/create-a-dns-token","filePath":"../content/docs/security/acl/tokens/create/create-a-dns-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-dns-token","id":"sidebar-nav-item-263"},{"title":"Create a replication token","path":"security/acl/tokens/create/create-a-replication-token","filePath":"../content/docs/security/acl/tokens/create/create-a-replication-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-replication-token","id":"sidebar-nav-item-264"},{"title":"Create a snapshot agent token","path":"security/acl/tokens/create/create-a-snapshot-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-a-snapshot-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-snapshot-agent-token","id":"sidebar-nav-item-265"},{"title":"Create a token for Vault's Consul storage backend","path":"security/acl/tokens/create/create-a-token-for-vault-consul-storage","filePath":"../content/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage","id":"sidebar-nav-item-266"},{"title":"Create a Consul ESM token","path":"security/acl/tokens/create/create-a-consul-esm-token","filePath":"../content/docs/security/acl/tokens/create/create-a-consul-esm-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-consul-esm-token","id":"sidebar-nav-item-267"}],"id":"sidebar-nav-item-256"}],"id":"sidebar-nav-item-254"},{"title":"Policies","path":"security/acl/acl-policies","filePath":"../content/docs/security/acl/acl-policies.mdx","fullPath":"/consul/docs/security/acl/acl-policies","id":"sidebar-nav-item-268"},{"title":"Roles","path":"security/acl/acl-roles","filePath":"../content/docs/security/acl/acl-roles.mdx","fullPath":"/consul/docs/security/acl/acl-roles","id":"sidebar-nav-item-269"},{"title":"Rules Reference","path":"security/acl/acl-rules","filePath":"../content/docs/security/acl/acl-rules.mdx","fullPath":"/consul/docs/security/acl/acl-rules","id":"sidebar-nav-item-270"},{"title":"ACLs in Federated Datacenters","path":"security/acl/acl-federated-datacenters","filePath":"../content/docs/security/acl/acl-federated-datacenters.mdx","fullPath":"/consul/docs/security/acl/acl-federated-datacenters","id":"sidebar-nav-item-271"},{"title":"Auth Methods","routes":[{"title":"Overview","path":"security/acl/auth-methods","filePath":"../content/docs/security/acl/auth-methods/index.mdx","fullPath":"/consul/docs/security/acl/auth-methods","id":"sidebar-nav-item-273"},{"title":"Kubernetes","path":"security/acl/auth-methods/kubernetes","filePath":"../content/docs/security/acl/auth-methods/kubernetes.mdx","fullPath":"/consul/docs/security/acl/auth-methods/kubernetes","id":"sidebar-nav-item-274"},{"title":"JWT","path":"security/acl/auth-methods/jwt","filePath":"../content/docs/security/acl/auth-methods/jwt.mdx","fullPath":"/consul/docs/security/acl/auth-methods/jwt","id":"sidebar-nav-item-275"},{"title":"OIDC","path":"security/acl/auth-methods/oidc","filePath":"../content/docs/security/acl/auth-methods/oidc.mdx","fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-276"},{"title":"AWS IAM","path":"security/acl/auth-methods/aws-iam","filePath":"../content/docs/security/acl/auth-methods/aws-iam.mdx","fullPath":"/consul/docs/security/acl/auth-methods/aws-iam","id":"sidebar-nav-item-277"}],"id":"sidebar-nav-item-272"}],"id":"sidebar-nav-item-252"},{"title":"Encryption","path":"security/encryption","filePath":"../content/docs/security/encryption.mdx","fullPath":"/consul/docs/security/encryption","id":"sidebar-nav-item-278"},{"title":"Security Models","routes":[{"title":"Overview","path":"security/security-models","filePath":"../content/docs/security/security-models/index.mdx","fullPath":"/consul/docs/security/security-models","id":"sidebar-nav-item-280"},{"title":"Core","path":"security/security-models/core","filePath":"../content/docs/security/security-models/core.mdx","fullPath":"/consul/docs/security/security-models/core","id":"sidebar-nav-item-281"},{"title":"Network Infrastructure Automation","path":"security/security-models/nia","filePath":"../content/docs/security/security-models/nia.mdx","fullPath":"/consul/docs/security/security-models/nia","id":"sidebar-nav-item-282"}],"id":"sidebar-nav-item-279"}],"id":"sidebar-nav-item-250"},{"title":"Agent","routes":[{"title":"Overview","path":"agent","filePath":"../content/docs/agent/index.mdx","fullPath":"/consul/docs/agent","id":"sidebar-nav-item-284"},{"title":"Configuration","routes":[{"title":"General","path":"agent/config","filePath":"../content/docs/agent/config/index.mdx","fullPath":"/consul/docs/agent/config","id":"sidebar-nav-item-286"},{"title":"CLI Reference","path":"agent/config/cli-flags","filePath":"../content/docs/agent/config/cli-flags.mdx","fullPath":"/consul/docs/agent/config/cli-flags","id":"sidebar-nav-item-287"},{"title":"Configuration Reference","path":"agent/config/config-files","filePath":"../content/docs/agent/config/config-files.mdx","fullPath":"/consul/docs/agent/config/config-files","id":"sidebar-nav-item-288"}],"id":"sidebar-nav-item-285"},{"title":"Limit traffic rates","routes":[{"title":"Overview","path":"agent/limits","filePath":"../content/docs/agent/limits/index.mdx","fullPath":"/consul/docs/agent/limits","id":"sidebar-nav-item-290"},{"title":"Usage","routes":[{"title":"Initialize rate limit settings","path":"agent/limits/usage/init-rate-limits","filePath":"../content/docs/agent/limits/usage/init-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/init-rate-limits","id":"sidebar-nav-item-292"},{"title":"Monitor traffic rate limits","path":"agent/limits/usage/monitor-rate-limits","filePath":"../content/docs/agent/limits/usage/monitor-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/monitor-rate-limits","id":"sidebar-nav-item-293"},{"title":"Set global traffic rate limits","path":"agent/limits/usage/set-global-traffic-rate-limits","filePath":"../content/docs/agent/limits/usage/set-global-traffic-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/set-global-traffic-rate-limits","id":"sidebar-nav-item-294"},{"title":"Limit traffic rates from source IP addresses","path":"agent/limits/usage/limit-request-rates-from-ips","filePath":"../content/docs/agent/limits/usage/limit-request-rates-from-ips.mdx","fullPath":"/consul/docs/agent/limits/usage/limit-request-rates-from-ips","id":"sidebar-nav-item-295"}],"id":"sidebar-nav-item-291"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-296","path":"/docs/connect/config-entries/control-plane-request-limit"}],"id":"sidebar-nav-item-289"},{"title":"Configuration Entries","path":"agent/config-entries","filePath":"../content/docs/agent/config-entries.mdx","fullPath":"/consul/docs/agent/config-entries","id":"sidebar-nav-item-297"},{"title":"Telemetry","path":"agent/telemetry","filePath":"../content/docs/agent/telemetry.mdx","fullPath":"/consul/docs/agent/telemetry","id":"sidebar-nav-item-298"},{"title":"Sentinel","path":"agent/sentinel","filePath":"../content/docs/agent/sentinel.mdx","fullPath":"/consul/docs/agent/sentinel","id":"sidebar-nav-item-299"},{"title":"Experimental WAL LogStore","routes":[{"title":"Overview","path":"agent/wal-logstore","filePath":"../content/docs/agent/wal-logstore/index.mdx","fullPath":"/consul/docs/agent/wal-logstore","id":"sidebar-nav-item-301"},{"title":"Enable WAL LogStore backend","path":"agent/wal-logstore/enable","filePath":"../content/docs/agent/wal-logstore/enable.mdx","fullPath":"/consul/docs/agent/wal-logstore/enable","id":"sidebar-nav-item-302"},{"title":"Monitor Raft metrics and logs for WAL","path":"agent/wal-logstore/monitoring","filePath":"../content/docs/agent/wal-logstore/monitoring.mdx","fullPath":"/consul/docs/agent/wal-logstore/monitoring","id":"sidebar-nav-item-303"},{"title":"Revert to BoltDB","path":"agent/wal-logstore/revert-to-boltdb","filePath":"../content/docs/agent/wal-logstore/revert-to-boltdb.mdx","fullPath":"/consul/docs/agent/wal-logstore/revert-to-boltdb","id":"sidebar-nav-item-304"}],"id":"sidebar-nav-item-300"}],"id":"sidebar-nav-item-283"},{"title":"Integrations","routes":[{"title":"Consul Integration Program","path":"integrate/partnerships","filePath":"../content/docs/integrate/partnerships.mdx","fullPath":"/consul/docs/integrate/partnerships","id":"sidebar-nav-item-306"},{"title":"NIA Integration Program","path":"integrate/nia-integration","filePath":"../content/docs/integrate/nia-integration.mdx","fullPath":"/consul/docs/integrate/nia-integration","id":"sidebar-nav-item-307"},{"title":"Vault Integration","href":null,"fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-308","path":"/docs/connect/ca/vault"},{"title":"Proxy Integration","href":null,"fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-309","path":"/docs/connect/proxies/integrate"},{"title":"Consul Tools","path":"integrate/download-tools","filePath":"../content/docs/integrate/download-tools.mdx","fullPath":"/consul/docs/integrate/download-tools","id":"sidebar-nav-item-310"}],"id":"sidebar-nav-item-305"},{"title":"Troubleshoot","routes":[{"title":"Service-to-Service Troubleshooting","path":"troubleshoot/troubleshoot-services","filePath":"../content/docs/troubleshoot/troubleshoot-services.mdx","fullPath":"/consul/docs/troubleshoot/troubleshoot-services","id":"sidebar-nav-item-312"},{"title":"Common Error Messages","path":"troubleshoot/common-errors","filePath":"../content/docs/troubleshoot/common-errors.mdx","fullPath":"/consul/docs/troubleshoot/common-errors","id":"sidebar-nav-item-313"},{"title":"FAQ","path":"troubleshoot/faq","filePath":"../content/docs/troubleshoot/faq.mdx","fullPath":"/consul/docs/troubleshoot/faq","id":"sidebar-nav-item-314"}],"id":"sidebar-nav-item-311"},{"divider":true,"id":"sidebar-nav-item-315"},{"title":"Kubernetes","routes":[{"title":"Overview","path":"k8s","filePath":"../content/docs/k8s/index.mdx","fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-317"},{"title":"Architecture","path":"k8s/architecture","filePath":"../content/docs/k8s/architecture.mdx","fullPath":"/consul/docs/k8s/architecture","id":"sidebar-nav-item-318"},{"title":"Installation","routes":[{"title":"Install from Consul K8s CLI","path":"k8s/installation/install-cli","filePath":"../content/docs/k8s/installation/install-cli.mdx","fullPath":"/consul/docs/k8s/installation/install-cli","id":"sidebar-nav-item-320"},{"title":"Install from Helm Chart","path":"k8s/installation/install","filePath":"../content/docs/k8s/installation/install.mdx","fullPath":"/consul/docs/k8s/installation/install","id":"sidebar-nav-item-321"}],"id":"sidebar-nav-item-319"},{"title":"Deployment Configurations","routes":[{"title":"Consul Clients Outside Kubernetes","path":"k8s/deployment-configurations/clients-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/clients-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/clients-outside-kubernetes","id":"sidebar-nav-item-323"},{"title":"Consul Servers Outside Kubernetes","path":"k8s/deployment-configurations/servers-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/servers-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/servers-outside-kubernetes","id":"sidebar-nav-item-324"},{"title":"Single Consul Datacenter in Multiple Kubernetes Clusters","path":"k8s/deployment-configurations/single-dc-multi-k8s","filePath":"../content/docs/k8s/deployment-configurations/single-dc-multi-k8s.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/single-dc-multi-k8s","id":"sidebar-nav-item-325"},{"title":"Consul Enterprise","path":"k8s/deployment-configurations/consul-enterprise","filePath":"../content/docs/k8s/deployment-configurations/consul-enterprise.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/consul-enterprise","id":"sidebar-nav-item-326"},{"title":"Multi-Cluster Federation","routes":[{"title":"Overview","path":"k8s/deployment-configurations/multi-cluster","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster","id":"sidebar-nav-item-328"},{"title":"Federation Between Kubernetes Clusters","path":"k8s/deployment-configurations/multi-cluster/kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/kubernetes","id":"sidebar-nav-item-329"},{"title":"Federation Between VMs and Kubernetes","path":"k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","id":"sidebar-nav-item-330"}],"id":"sidebar-nav-item-327"},{"title":"Vault as Secrets Backend","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault","filePath":"../content/docs/k8s/deployment-configurations/vault/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault","id":"sidebar-nav-item-332"},{"title":"Systems Integration","path":"k8s/deployment-configurations/vault/systems-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/systems-integration.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/systems-integration","id":"sidebar-nav-item-333"},{"title":"Data Integration","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault/data-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration","id":"sidebar-nav-item-335"},{"title":"Bootstrap Token","path":"k8s/deployment-configurations/vault/data-integration/bootstrap-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token","id":"sidebar-nav-item-336"},{"title":"Enterprise License","path":"k8s/deployment-configurations/vault/data-integration/enterprise-license","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license","id":"sidebar-nav-item-337"},{"title":"Gossip Encryption Key","path":"k8s/deployment-configurations/vault/data-integration/gossip","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/gossip.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/gossip","id":"sidebar-nav-item-338"},{"title":"Partition Token","path":"k8s/deployment-configurations/vault/data-integration/partition-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/partition-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/partition-token","id":"sidebar-nav-item-339"},{"title":"Replication Token","path":"k8s/deployment-configurations/vault/data-integration/replication-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/replication-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/replication-token","id":"sidebar-nav-item-340"},{"title":"Server TLS","path":"k8s/deployment-configurations/vault/data-integration/server-tls","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/server-tls.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/server-tls","id":"sidebar-nav-item-341"},{"title":"Service Mesh Certificates","path":"k8s/deployment-configurations/vault/data-integration/connect-ca","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/connect-ca.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/connect-ca","id":"sidebar-nav-item-342"},{"title":"Snapshot Agent Config","path":"k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","id":"sidebar-nav-item-343"},{"title":"Webhook Certificates","path":"k8s/deployment-configurations/vault/data-integration/webhook-certs","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs","id":"sidebar-nav-item-344"}],"id":"sidebar-nav-item-334"},{"title":"WAN Federation","path":"k8s/deployment-configurations/vault/wan-federation","filePath":"../content/docs/k8s/deployment-configurations/vault/wan-federation.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/wan-federation","id":"sidebar-nav-item-345"}],"id":"sidebar-nav-item-331"},{"title":"Datadog metrics","path":"k8s/deployment-configurations/datadog","filePath":"../content/docs/k8s/deployment-configurations/datadog.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/datadog","id":"sidebar-nav-item-346"}],"id":"sidebar-nav-item-322"},{"title":"Platform Guides","routes":[{"title":"Minikube","href":"/consul/tutorials/kubernetes/kubernetes-minikube?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=mk","id":"sidebar-nav-item-348"},{"title":"Kind","href":"/consul/tutorials/kubernetes/kubernetes-kind?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=kind","id":"sidebar-nav-item-349"},{"title":"AKS (Azure)","href":"/consul/tutorials/kubernetes/kubernetes-aks-azure?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=aks","id":"sidebar-nav-item-350"},{"title":"EKS (AWS)","href":"/consul/tutorials/kubernetes/kubernetes-eks-aws?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=eks","id":"sidebar-nav-item-351"},{"title":"GKE (Google Cloud)","href":"/consul/tutorials/kubernetes/kubernetes-gke-google?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=gke","id":"sidebar-nav-item-352"},{"title":"Red Hat OpenShift","href":"/consul/tutorials/kubernetes/kubernetes-openshift-red-hat?utm_source=consul.io\u0026utm_medium=docs\u0026utm_content=k8s\u0026utm_term=openshift","id":"sidebar-nav-item-353"},{"title":"Self Hosted Kubernetes","path":"k8s/platforms/self-hosted-kubernetes","filePath":"../content/docs/k8s/platforms/self-hosted-kubernetes.mdx","fullPath":"/consul/docs/k8s/platforms/self-hosted-kubernetes","id":"sidebar-nav-item-354"}],"id":"sidebar-nav-item-347"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"k8s/connect","filePath":"../content/docs/k8s/connect/index.mdx","fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-356"},{"title":"Admin Partitions","href":null,"fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-357","path":"/docs/enterprise/admin-partitions"},{"title":"Cluster Peering","routes":[{"title":"Technical Specifications","path":"k8s/connect/cluster-peering/tech-specs","filePath":"../content/docs/k8s/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-359"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/establish-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/establish-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/establish-peering","id":"sidebar-nav-item-361"},{"title":"Manage Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/manage-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/manage-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/manage-peering","id":"sidebar-nav-item-362"},{"title":"Manage L7 Traffic With Cluster Peering","path":"k8s/connect/cluster-peering/usage/l7-traffic","filePath":"../content/docs/k8s/connect/cluster-peering/usage/l7-traffic.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/l7-traffic","id":"sidebar-nav-item-363"},{"title":"Create Sameness Groups","path":"k8s/connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/k8s/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-364"}],"id":"sidebar-nav-item-360"}],"id":"sidebar-nav-item-358"},{"title":"Transparent Proxy","routes":[{"title":"Overview","path":"k8s/connect/transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/index.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy","id":"sidebar-nav-item-366"},{"title":"Enable transparent proxy","path":"k8s/connect/transparent-proxy/enable-transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/enable-transparent-proxy.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy/enable-transparent-proxy","id":"sidebar-nav-item-367"},{"title":"Route traffic to virtual services","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-368","path":"/docs/k8s/l7-traffic/route-to-virtual-services"}],"id":"sidebar-nav-item-365"},{"title":"Onboarding services in transparent proxy mode","path":"k8s/connect/onboarding-tproxy-mode","filePath":"../content/docs/k8s/connect/onboarding-tproxy-mode.mdx","fullPath":"/consul/docs/k8s/connect/onboarding-tproxy-mode","id":"sidebar-nav-item-369"},{"title":"Ingress Gateways","path":"k8s/connect/ingress-gateways","filePath":"../content/docs/k8s/connect/ingress-gateways.mdx","fullPath":"/consul/docs/k8s/connect/ingress-gateways","id":"sidebar-nav-item-370"},{"title":"Terminating Gateways","path":"k8s/connect/terminating-gateways","filePath":"../content/docs/k8s/connect/terminating-gateways.mdx","fullPath":"/consul/docs/k8s/connect/terminating-gateways","id":"sidebar-nav-item-371"},{"title":"Ingress Controllers","path":"k8s/connect/ingress-controllers","filePath":"../content/docs/k8s/connect/ingress-controllers.mdx","fullPath":"/consul/docs/k8s/connect/ingress-controllers","id":"sidebar-nav-item-372"},{"title":"Configuring a Connect CA Provider","path":"k8s/connect/connect-ca-provider","filePath":"../content/docs/k8s/connect/connect-ca-provider.mdx","fullPath":"/consul/docs/k8s/connect/connect-ca-provider","id":"sidebar-nav-item-373"},{"title":"Health Checks","path":"k8s/connect/health","filePath":"../content/docs/k8s/connect/health.mdx","fullPath":"/consul/docs/k8s/connect/health","id":"sidebar-nav-item-374"},{"title":"Observability","routes":[{"title":"Metrics","path":"k8s/connect/observability/metrics","filePath":"../content/docs/k8s/connect/observability/metrics.mdx","fullPath":"/consul/docs/k8s/connect/observability/metrics","id":"sidebar-nav-item-376"}],"id":"sidebar-nav-item-375"}],"id":"sidebar-nav-item-355"},{"title":"V2 Catalog API","routes":[{"title":"Overview","path":"k8s/multiport","filePath":"../content/docs/k8s/multiport/index.mdx","fullPath":"/consul/docs/k8s/multiport","id":"sidebar-nav-item-378"},{"title":"Configure multi-port services","path":"k8s/multiport/configure","filePath":"../content/docs/k8s/multiport/configure.mdx","fullPath":"/consul/docs/k8s/multiport/configure","id":"sidebar-nav-item-379"},{"title":"Split TCP traffic between multiple ports","path":"k8s/multiport/traffic-split","filePath":"../content/docs/k8s/multiport/traffic-split.mdx","fullPath":"/consul/docs/k8s/multiport/traffic-split","id":"sidebar-nav-item-380"},{"title":"Reference","routes":[{"title":"GRPCRoute resource","path":"k8s/multiport/reference/grpcroute","filePath":"../content/docs/k8s/multiport/reference/grpcroute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/grpcroute","id":"sidebar-nav-item-382"},{"title":"HTTPRoute resource","path":"k8s/multiport/reference/httproute","filePath":"../content/docs/k8s/multiport/reference/httproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/httproute","id":"sidebar-nav-item-383"},{"title":"ProxyConfiguration resource","path":"k8s/multiport/reference/proxyconfiguration","filePath":"../content/docs/k8s/multiport/reference/proxyconfiguration.mdx","fullPath":"/consul/docs/k8s/multiport/reference/proxyconfiguration","id":"sidebar-nav-item-384"},{"title":"TCPRoute resource","path":"k8s/multiport/reference/tcproute","filePath":"../content/docs/k8s/multiport/reference/tcproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/tcproute","id":"sidebar-nav-item-385"},{"title":"TrafficPermissions resource","path":"k8s/multiport/reference/trafficpermissions","filePath":"../content/docs/k8s/multiport/reference/trafficpermissions.mdx","fullPath":"/consul/docs/k8s/multiport/reference/trafficpermissions","id":"sidebar-nav-item-386"}],"id":"sidebar-nav-item-381"}],"id":"sidebar-nav-item-377"},{"title":"L7 traffic management","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-388","path":"/docs/connect/manage-traffic"},{"title":"Configure failover services","path":"k8s/l7-traffic/failover-tproxy","filePath":"../content/docs/k8s/l7-traffic/failover-tproxy.mdx","fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-389"},{"title":"Route traffic to virtual services","path":"k8s/l7-traffic/route-to-virtual-services","filePath":"../content/docs/k8s/l7-traffic/route-to-virtual-services.mdx","fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-390"}],"id":"sidebar-nav-item-387"},{"title":"Service Sync","path":"k8s/service-sync","filePath":"../content/docs/k8s/service-sync.mdx","fullPath":"/consul/docs/k8s/service-sync","id":"sidebar-nav-item-391"},{"title":"Custom Resource Definitions","routes":[{"title":"Overview","path":"k8s/crds","filePath":"../content/docs/k8s/crds/index.mdx","fullPath":"/consul/docs/k8s/crds","id":"sidebar-nav-item-393"},{"title":"Upgrade An Existing Cluster to CRDs","path":"k8s/crds/upgrade-to-crds","filePath":"../content/docs/k8s/crds/upgrade-to-crds.mdx","fullPath":"/consul/docs/k8s/crds/upgrade-to-crds","id":"sidebar-nav-item-394"}],"id":"sidebar-nav-item-392"},{"title":"Annotations and Labels","path":"k8s/annotations-and-labels","filePath":"../content/docs/k8s/annotations-and-labels.mdx","fullPath":"/consul/docs/k8s/annotations-and-labels","id":"sidebar-nav-item-395"},{"title":"Consul DNS","path":"k8s/dns","filePath":"../content/docs/k8s/dns.mdx","fullPath":"/consul/docs/k8s/dns","id":"sidebar-nav-item-396"},{"title":"Upgrade","routes":[{"title":"Upgrading Consul on Kubernetes","path":"k8s/upgrade","filePath":"../content/docs/k8s/upgrade/index.mdx","fullPath":"/consul/docs/k8s/upgrade","id":"sidebar-nav-item-398"},{"title":"Upgrading Consul K8s CLI","path":"k8s/upgrade/upgrade-cli","filePath":"../content/docs/k8s/upgrade/upgrade-cli.mdx","fullPath":"/consul/docs/k8s/upgrade/upgrade-cli","id":"sidebar-nav-item-399"}],"id":"sidebar-nav-item-397"},{"title":"Consul Dataplane","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-401","path":"/docs/connect/dataplane"},{"title":"CLI Reference","href":null,"fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-402","path":"/docs/connect/dataplane/consul-dataplane"}],"id":"sidebar-nav-item-400"},{"title":"Operations","routes":[{"title":"Uninstall","path":"k8s/operations/uninstall","filePath":"../content/docs/k8s/operations/uninstall.mdx","fullPath":"/consul/docs/k8s/operations/uninstall","id":"sidebar-nav-item-404"},{"title":"Certificate Rotation","path":"k8s/operations/certificate-rotation","filePath":"../content/docs/k8s/operations/certificate-rotation.mdx","fullPath":"/consul/docs/k8s/operations/certificate-rotation","id":"sidebar-nav-item-405"},{"title":"Gossip Encryption Key Rotation","path":"k8s/operations/gossip-encryption-key-rotation","filePath":"../content/docs/k8s/operations/gossip-encryption-key-rotation.mdx","fullPath":"/consul/docs/k8s/operations/gossip-encryption-key-rotation","id":"sidebar-nav-item-406"},{"title":"Configure TLS on an Existing Cluster","path":"k8s/operations/tls-on-existing-cluster","filePath":"../content/docs/k8s/operations/tls-on-existing-cluster.mdx","fullPath":"/consul/docs/k8s/operations/tls-on-existing-cluster","id":"sidebar-nav-item-407"}],"id":"sidebar-nav-item-403"},{"title":"Troubleshoot","routes":[{"title":"Common Error Messages","href":null,"fullPath":"/consul/docs/troubleshoot/common-errors#common-errors-on-kubernetes","id":"sidebar-nav-item-409","path":"/docs/troubleshoot/common-errors#common-errors-on-kubernetes"},{"title":"FAQ","href":null,"fullPath":"/consul/docs/troubleshoot/faq#consul-on-kubernetes","id":"sidebar-nav-item-410","path":"/docs/troubleshoot/faq#consul-on-kubernetes"}],"id":"sidebar-nav-item-408"},{"title":"Compatibility Matrix","path":"k8s/compatibility","filePath":"../content/docs/k8s/compatibility.mdx","fullPath":"/consul/docs/k8s/compatibility","id":"sidebar-nav-item-411"},{"title":"Helm Chart Configuration","path":"k8s/helm","filePath":"../content/docs/k8s/helm.mdx","fullPath":"/consul/docs/k8s/helm","id":"sidebar-nav-item-412"},{"title":"Consul K8s CLI Reference","path":"k8s/k8s-cli","filePath":"../content/docs/k8s/k8s-cli.mdx","fullPath":"/consul/docs/k8s/k8s-cli","id":"sidebar-nav-item-413"}],"id":"sidebar-nav-item-316"},{"title":"Nomad","path":"nomad","filePath":"../content/docs/nomad/index.mdx","fullPath":"/consul/docs/nomad","id":"sidebar-nav-item-414"},{"title":"AWS ECS","routes":[{"title":"Overview","path":"ecs","filePath":"../content/docs/ecs/index.mdx","fullPath":"/consul/docs/ecs","id":"sidebar-nav-item-416"},{"title":"Architecture","path":"ecs/architecture","filePath":"../content/docs/ecs/architecture.mdx","fullPath":"/consul/docs/ecs/architecture","id":"sidebar-nav-item-417"},{"title":"Technical specifications","path":"ecs/tech-specs","filePath":"../content/docs/ecs/tech-specs.mdx","fullPath":"/consul/docs/ecs/tech-specs","id":"sidebar-nav-item-418"},{"title":"Deploy Consul to ECS","routes":[{"title":"Deploy using the Terraform module","path":"ecs/deploy/terraform","filePath":"../content/docs/ecs/deploy/terraform.mdx","fullPath":"/consul/docs/ecs/deploy/terraform","id":"sidebar-nav-item-420"},{"title":"Deploy manually","path":"ecs/deploy/manual","filePath":"../content/docs/ecs/deploy/manual.mdx","fullPath":"/consul/docs/ecs/deploy/manual","id":"sidebar-nav-item-421"},{"title":"Configure the ECS task bind address","path":"ecs/deploy/bind-addresses","filePath":"../content/docs/ecs/deploy/bind-addresses.mdx","fullPath":"/consul/docs/ecs/deploy/bind-addresses","id":"sidebar-nav-item-422"},{"title":"Configure routes between ECS tasks","path":"ecs/deploy/configure-routes","filePath":"../content/docs/ecs/deploy/configure-routes.mdx","fullPath":"/consul/docs/ecs/deploy/configure-routes","id":"sidebar-nav-item-423"},{"title":"Migrate existing tasks","path":"ecs/deploy/migrate-existing-tasks","filePath":"../content/docs/ecs/deploy/migrate-existing-tasks.mdx","fullPath":"/consul/docs/ecs/deploy/migrate-existing-tasks","id":"sidebar-nav-item-424"}],"id":"sidebar-nav-item-419"},{"title":"Upgrade to Consul dataplane architecture","path":"ecs/upgrade-to-dataplanes","filePath":"../content/docs/ecs/upgrade-to-dataplanes.mdx","fullPath":"/consul/docs/ecs/upgrade-to-dataplanes","id":"sidebar-nav-item-425"},{"title":"Consul Enterprise","path":"ecs/enterprise","filePath":"../content/docs/ecs/enterprise.mdx","fullPath":"/consul/docs/ecs/enterprise","id":"sidebar-nav-item-426"},{"title":"Reference","routes":[{"title":"ECS configuration reference","path":"ecs/reference/configuration-reference","filePath":"../content/docs/ecs/reference/configuration-reference.mdx","fullPath":"/consul/docs/ecs/reference/configuration-reference","id":"sidebar-nav-item-428"},{"title":"ECS compatibility matrix","path":"ecs/reference/compatibility","filePath":"../content/docs/ecs/reference/compatibility.mdx","fullPath":"/consul/docs/ecs/reference/compatibility","id":"sidebar-nav-item-429"},{"title":"ECS Consul server JSON schema","path":"ecs/reference/consul-server-json","filePath":"../content/docs/ecs/reference/consul-server-json.mdx","fullPath":"/consul/docs/ecs/reference/consul-server-json","id":"sidebar-nav-item-430"}],"id":"sidebar-nav-item-427"}],"id":"sidebar-nav-item-415"},{"title":"AWS Lambda","routes":[{"title":"Overview","path":"lambda","filePath":"../content/docs/lambda/index.mdx","fullPath":"/consul/docs/lambda","id":"sidebar-nav-item-432"},{"title":"Register Lambda Functions","routes":[{"title":"Requirements","path":"lambda/registration","filePath":"../content/docs/lambda/registration/index.mdx","fullPath":"/consul/docs/lambda/registration","id":"sidebar-nav-item-434"},{"title":"Automate Registration","path":"lambda/registration/automate","filePath":"../content/docs/lambda/registration/automate.mdx","fullPath":"/consul/docs/lambda/registration/automate","id":"sidebar-nav-item-435"},{"title":"Manual Registration","path":"lambda/registration/manual","filePath":"../content/docs/lambda/registration/manual.mdx","fullPath":"/consul/docs/lambda/registration/manual","id":"sidebar-nav-item-436"}],"id":"sidebar-nav-item-433"},{"title":"Invoke Lambda Functions from Services","path":"lambda/invocation","filePath":"../content/docs/lambda/invocation.mdx","fullPath":"/consul/docs/lambda/invocation","id":"sidebar-nav-item-437"},{"title":"Invoke Services from Lambda Functions","path":"lambda/invoke-from-lambda","badge":{"text":"BETA","type":"outlined","color":"neutral"},"filePath":"../content/docs/lambda/invoke-from-lambda.mdx","fullPath":"/consul/docs/lambda/invoke-from-lambda","id":"sidebar-nav-item-438"}],"id":"sidebar-nav-item-431"},{"divider":true,"id":"sidebar-nav-item-439"},{"title":"HCP Consul","href":"/hcp/docs/consul","id":"sidebar-nav-item-440"},{"title":"Consul Enterprise","routes":[{"title":"Overview","path":"enterprise","filePath":"../content/docs/enterprise/index.mdx","fullPath":"/consul/docs/enterprise","id":"sidebar-nav-item-442"},{"title":"Long Term Support (LTS)","path":"enterprise/long-term-support","filePath":"../content/docs/enterprise/long-term-support.mdx","fullPath":"/consul/docs/enterprise/long-term-support","id":"sidebar-nav-item-443"},{"title":"Admin Partitions","path":"enterprise/admin-partitions","filePath":"../content/docs/enterprise/admin-partitions.mdx","fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-444"},{"title":"Audit Logging","path":"enterprise/audit-logging","filePath":"../content/docs/enterprise/audit-logging.mdx","fullPath":"/consul/docs/enterprise/audit-logging","id":"sidebar-nav-item-445"},{"title":"Automated Backups","path":"enterprise/backups","filePath":"../content/docs/enterprise/backups.mdx","fullPath":"/consul/docs/enterprise/backups","id":"sidebar-nav-item-446"},{"title":"Automated Upgrades","path":"enterprise/upgrades","filePath":"../content/docs/enterprise/upgrades.mdx","fullPath":"/consul/docs/enterprise/upgrades","id":"sidebar-nav-item-447"},{"title":"Enhanced Read Scalability","path":"enterprise/read-scale","filePath":"../content/docs/enterprise/read-scale.mdx","fullPath":"/consul/docs/enterprise/read-scale","id":"sidebar-nav-item-448"},{"title":"Fault injection","href":null,"fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-449","path":"/docs/connect/manage-traffic/fault-injection"},{"title":"FIPS","path":"enterprise/fips","filePath":"../content/docs/enterprise/fips.mdx","fullPath":"/consul/docs/enterprise/fips","id":"sidebar-nav-item-450"},{"title":"Single sign-on - OIDC","href":null,"fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-451","path":"/docs/security/acl/auth-methods/oidc"},{"title":"Redundancy Zones","path":"enterprise/redundancy","filePath":"../content/docs/enterprise/redundancy.mdx","fullPath":"/consul/docs/enterprise/redundancy","id":"sidebar-nav-item-452"},{"title":"Advanced Federation","path":"enterprise/federation","filePath":"../content/docs/enterprise/federation.mdx","fullPath":"/consul/docs/enterprise/federation","id":"sidebar-nav-item-453"},{"title":"Network Segments","routes":[{"title":"Network Segments Overview","path":"enterprise/network-segments/network-segments-overview","filePath":"../content/docs/enterprise/network-segments/network-segments-overview.mdx","fullPath":"/consul/docs/enterprise/network-segments/network-segments-overview","id":"sidebar-nav-item-455"},{"title":"Create a Network Segment","path":"enterprise/network-segments/create-network-segment","filePath":"../content/docs/enterprise/network-segments/create-network-segment.mdx","fullPath":"/consul/docs/enterprise/network-segments/create-network-segment","id":"sidebar-nav-item-456"}],"id":"sidebar-nav-item-454"},{"title":"Namespaces","path":"enterprise/namespaces","filePath":"../content/docs/enterprise/namespaces.mdx","fullPath":"/consul/docs/enterprise/namespaces","id":"sidebar-nav-item-457"},{"title":"NIA with TFE","href":null,"fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-458","path":"/docs/nia/enterprise"},{"title":"License","routes":[{"title":"Overview","path":"enterprise/license/overview","filePath":"../content/docs/enterprise/license/overview.mdx","fullPath":"/consul/docs/enterprise/license/overview","id":"sidebar-nav-item-460"},{"title":"Automated entitlement utilization reporting","path":"enterprise/license/utilization-reporting","filePath":"../content/docs/enterprise/license/utilization-reporting.mdx","fullPath":"/consul/docs/enterprise/license/utilization-reporting","id":"sidebar-nav-item-461"},{"title":"FAQ","path":"enterprise/license/faq","filePath":"../content/docs/enterprise/license/faq.mdx","fullPath":"/consul/docs/enterprise/license/faq","id":"sidebar-nav-item-462"}],"id":"sidebar-nav-item-459"},{"title":"Enterprise to CE downgrade","path":"enterprise/ent-to-ce-downgrades","filePath":"../content/docs/enterprise/ent-to-ce-downgrades.mdx","fullPath":"/consul/docs/enterprise/ent-to-ce-downgrades","id":"sidebar-nav-item-463"}],"id":"sidebar-nav-item-441"},{"divider":true,"id":"sidebar-nav-item-464"},{"title":"Network Infrastructure Automation","routes":[{"title":"Overview","path":"nia","filePath":"../content/docs/nia/index.mdx","fullPath":"/consul/docs/nia","id":"sidebar-nav-item-466"},{"title":"Get Started","routes":[{"title":"Installation","path":"nia/installation/install","filePath":"../content/docs/nia/installation/install.mdx","fullPath":"/consul/docs/nia/installation/install","id":"sidebar-nav-item-468"},{"title":"Configuration","path":"nia/installation/configure","filePath":"../content/docs/nia/installation/configure.mdx","fullPath":"/consul/docs/nia/installation/configure","id":"sidebar-nav-item-469"}],"id":"sidebar-nav-item-467"},{"title":"Usage","routes":[{"title":"Requirements","path":"nia/usage/requirements","filePath":"../content/docs/nia/usage/requirements.mdx","fullPath":"/consul/docs/nia/usage/requirements","id":"sidebar-nav-item-471"},{"title":"Run Consul-Terraform-Sync","path":"nia/usage/run","filePath":"../content/docs/nia/usage/run.mdx","fullPath":"/consul/docs/nia/usage/run","id":"sidebar-nav-item-472"},{"title":"Run Consul-Terraform-Sync with High Availability","path":"nia/usage/run-ha","filePath":"../content/docs/nia/usage/run-ha.mdx","fullPath":"/consul/docs/nia/usage/run-ha","id":"sidebar-nav-item-473"},{"title":"Error Messages","path":"nia/usage/errors-ref","filePath":"../content/docs/nia/usage/errors-ref.mdx","fullPath":"/consul/docs/nia/usage/errors-ref","id":"sidebar-nav-item-474"}],"id":"sidebar-nav-item-470"},{"title":"Architecture","path":"nia/architecture","filePath":"../content/docs/nia/architecture.mdx","fullPath":"/consul/docs/nia/architecture","id":"sidebar-nav-item-475"},{"title":"API","routes":[{"title":"Overview","path":"nia/api","filePath":"../content/docs/nia/api/index.mdx","fullPath":"/consul/docs/nia/api","id":"sidebar-nav-item-477"},{"title":"Status","path":"nia/api/status","filePath":"../content/docs/nia/api/status.mdx","fullPath":"/consul/docs/nia/api/status","id":"sidebar-nav-item-478"},{"title":"Tasks","path":"nia/api/tasks","filePath":"../content/docs/nia/api/tasks.mdx","fullPath":"/consul/docs/nia/api/tasks","id":"sidebar-nav-item-479"},{"title":"Health","path":"nia/api/health","filePath":"../content/docs/nia/api/health.mdx","fullPath":"/consul/docs/nia/api/health","id":"sidebar-nav-item-480"}],"id":"sidebar-nav-item-476"},{"title":"CLI","routes":[{"title":"Overview","path":"nia/cli","filePath":"../content/docs/nia/cli/index.mdx","fullPath":"/consul/docs/nia/cli","id":"sidebar-nav-item-482"},{"title":"task","path":"nia/cli/task","filePath":"../content/docs/nia/cli/task.mdx","fullPath":"/consul/docs/nia/cli/task","id":"sidebar-nav-item-483"},{"title":"start","path":"nia/cli/start","filePath":"../content/docs/nia/cli/start.mdx","fullPath":"/consul/docs/nia/cli/start","id":"sidebar-nav-item-484"}],"id":"sidebar-nav-item-481"},{"title":"Configuration","path":"nia/configuration","filePath":"../content/docs/nia/configuration.mdx","fullPath":"/consul/docs/nia/configuration","id":"sidebar-nav-item-485"},{"title":"Tasks","path":"nia/tasks","filePath":"../content/docs/nia/tasks.mdx","fullPath":"/consul/docs/nia/tasks","id":"sidebar-nav-item-486"},{"title":"Terraform Modules","path":"nia/terraform-modules","filePath":"../content/docs/nia/terraform-modules.mdx","fullPath":"/consul/docs/nia/terraform-modules","id":"sidebar-nav-item-487"},{"title":"Enterprise","routes":[{"title":"Overview","path":"nia/enterprise","filePath":"../content/docs/nia/enterprise/index.mdx","fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-489"},{"title":"License","path":"nia/enterprise/license","filePath":"../content/docs/nia/enterprise/license.mdx","fullPath":"/consul/docs/nia/enterprise/license","id":"sidebar-nav-item-490"},{"title":"HCP Terraform Driver","href":null,"fullPath":"/consul/docs/nia/network-drivers/terraform-cloud","id":"sidebar-nav-item-491","path":"/docs/nia/network-drivers/terraform-cloud"}],"id":"sidebar-nav-item-488"},{"title":"Network Drivers","routes":[{"title":"Overview","path":"nia/network-drivers","filePath":"../content/docs/nia/network-drivers/index.mdx","fullPath":"/consul/docs/nia/network-drivers","id":"sidebar-nav-item-493"},{"title":"Terraform","path":"nia/network-drivers/terraform","filePath":"../content/docs/nia/network-drivers/terraform.mdx","fullPath":"/consul/docs/nia/network-drivers/terraform","id":"sidebar-nav-item-494"},{"title":"HCP Terraform","path":"nia/network-drivers/hcp-terraform","filePath":"../content/docs/nia/network-drivers/hcp-terraform.mdx","fullPath":"/consul/docs/nia/network-drivers/hcp-terraform","id":"sidebar-nav-item-495"}],"id":"sidebar-nav-item-492"},{"title":"Compatibility","path":"nia/compatibility","filePath":"../content/docs/nia/compatibility.mdx","fullPath":"/consul/docs/nia/compatibility","id":"sidebar-nav-item-496"}],"id":"sidebar-nav-item-465"}],"title":"Documentation","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/consul/blob/main/website/../content/docs/connect/proxies/envoy.mdx"},"metadata":{"title":"Envoy Proxy Configuration | Service Mesh","description":"Consul supports Envoy proxies to direct traffic throughout the service mesh. Learn about Consul versions and their Envoy support, and use the reference guide to review options for bootstrap configuration, dynamic configuration, and advanced topics like escape hatch overrides.","layout":null},"outlineItems":[{"title":"Envoy Proxy Configuration for Service Mesh","url":"#envoy-proxy-configuration-for-service-mesh","dataHeapTrack":"toc-list-item-index-0"},{"title":"Supported Versions","url":"#supported-versions","dataHeapTrack":"toc-list-item-index-1"},{"title":"Getting Started","url":"#getting-started","dataHeapTrack":"toc-list-item-index-2"},{"title":"Configuration","url":"#configuration","dataHeapTrack":"toc-list-item-index-3"},{"title":"Intention Enforcement","url":"#intention-enforcement","dataHeapTrack":"toc-list-item-index-4"},{"title":"Fetching Certificates","url":"#fetching-certificates","dataHeapTrack":"toc-list-item-index-5"},{"title":"Bootstrap Configuration","url":"#bootstrap-configuration","dataHeapTrack":"toc-list-item-index-6"},{"title":"Dynamic Configuration","url":"#dynamic-configuration","dataHeapTrack":"toc-list-item-index-7"},{"title":"Advanced Configuration","url":"#advanced-configuration","dataHeapTrack":"toc-list-item-index-8"}],"pageHeading":{"id":"envoy-proxy-configuration-for-service-mesh","title":"Envoy Proxy Configuration for Service Mesh"},"mdxSource":{"compiledSource":"const makeShortcode=name=\u003efunction MDXDefaultShortcode(props){console.warn(\"Component \"+name+\" was not imported, exported, or provided by MDXProvider as global scope\");return mdx(\"div\",props)};const CodeBlockConfig=makeShortcode(\"CodeBlockConfig\");const CodeTabs=makeShortcode(\"CodeTabs\");const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`Consul service mesh has first class support for using\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io\"},`Envoy`),` as a proxy. Consul configures Envoy by\noptionally exposing a gRPC service on the local agent that serves `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-docs/xds_protocol\"},`Envoy's xDS\nconfiguration\nAPI`),`.`),mdx(\"p\",null,`Consul can configure Envoy sidecars to proxy traffic over the following protocols:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Protocol`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Service network support`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`HTTP/1.1`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`L7`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`HTTP2`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`L7`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`gRPC`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`L7`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`All TCP-based protocols`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`L4`)))),mdx(\"p\",null,`On Consul 1.5.0 and older, Envoy proxies can only proxy TCP traffic at L4.`),mdx(\"p\",null,`You can configure some `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/manage-traffic\"},`L7 features`),` in `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config-entries\"},`configuration entries`),`. You can add `,mdx(\"a\",{parentName:\"p\",\"href\":\"#advanced-configuration\"},`custom Envoy configurations`),` to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service definition`),`, which enables you to leverage Envoy features that are not exposed through configuration entries. You can also use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/envoy-extensions\"},`Consul Envoy extensions`),` to implement Envoy features.`),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` When using Envoy with Consul and not using the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy`),` command`),`\nEnvoy must be run with the `,mdx(\"inlineCode\",{parentName:\"p\"},`--max-obj-name-len`),` option set to `,mdx(\"inlineCode\",{parentName:\"p\"},`256`),` or greater for Envoy versions prior to 1.11.0.`)),mdx(\"h2\",{\"id\":\"supported-versions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#supported-versions\",\"aria-label\":\"supported versions permalink\"},`\\xbb`),`Supported Versions`),mdx(\"p\",null,`The following matrix describes Envoy compatibility for the\ncurrently supported major Consul releases:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`The latest (N) release of Consul community edition (CE) and Enterprise`),mdx(\"li\",{parentName:\"ul\"},`The 2 preceding major releases (N-1 and N-2) of Consul Enterprise`),mdx(\"li\",{parentName:\"ul\"},`The 2 latest `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/enterprise/long-term-support\"},`Consul Enterprise LTS`),` major releases`)),mdx(\"p\",null,`For previous Consul version compatibility,\nrefer to the previous release's version of this page.`),mdx(\"h3\",{\"id\":\"envoy-and-consul-client-agent\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#envoy-and-consul-client-agent\",\"aria-label\":\"envoy and consul client agent permalink\"},`\\xbb`),`Envoy and Consul Client Agent`),mdx(\"p\",null,`Every major Consul release initially supports `,mdx(\"strong\",{parentName:\"p\"},`four major Envoy releases`),`.\nStandard major Consul releases do not expand that support in minor releases.\nHowever, `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/long-term-support\"},`Consul Enterprise Long Term Support (LTS)`),`\nreleases do expand their Envoy version compatibility window in minor releases\nto ensure compatibility with a maintained Envoy version.`),mdx(\"p\",null,`Every major Consul release maintains and tests compatibility with specific Envoy\npatch releases to ensure users can benefit from bug and security fixes in Envoy.`),mdx(\"h4\",{\"id\":\"standard-releases\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#standard-releases\",\"aria-label\":\"standard releases permalink\"},`\\xbb`),`Standard releases`),mdx(\"p\",null,`Unless otherwise noted, rows in the following compatibility table\napply to both Consul Enterprise and Consul community edition (CE).`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Consul Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Compatible Envoy Versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x CE`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.28.2, 1.27.4, 1.26.8, 1.25.11`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.17.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.27.4, 1.26.8, 1.25.11, 1.24.12`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.16.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.26.8, 1.25.11, 1.24.12, 1.23.12`)))),mdx(\"h4\",{\"id\":\"enterprise-long-term-support-releases\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#enterprise-long-term-support-releases\",\"aria-label\":\"enterprise long term support releases permalink\"},`\\xbb`),`Enterprise Long Term Support releases`),mdx(\"p\",null,`Active Consul Enterprise\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/long-term-support\"},`Long Term Support (LTS)`),`\nreleases expand their Envoy version compatibility window\nuntil the LTS release reaches its end of maintenance.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Consul Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Compatible Envoy Versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.28.2, 1.27.4, 1.26.8, 1.25.11`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.15.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.28.2, 1.27.4, 1.26.8, 1.25.11, 1.24.12, 1.23.12, 1.22.11`)))),mdx(\"h3\",{\"id\":\"envoy-and-consul-dataplane\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#envoy-and-consul-dataplane\",\"aria-label\":\"envoy and consul dataplane permalink\"},`\\xbb`),`Envoy and Consul Dataplane`),mdx(\"p\",null,`The Consul dataplane component was introduced in Consul v1.14\nas a way to manage Envoy proxies without the use of Consul clients.`),mdx(\"p\",null,`Each major version of Consul is released with a new major version of Consul dataplane,\nwhich packages both Envoy and the `,mdx(\"inlineCode\",{parentName:\"p\"},`consul-dataplane`),` binary in a single container image.\nTo enable seamless upgrades, each major version of Consul also supports\nthe previous and next Consul dataplane versions.`),mdx(\"p\",null,`Compared to standard Consul releases, Consul Enterprise\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/long-term-support\"},`Long Term Support (LTS)`),`\nreleases have the following differences with Consul dataplane compatibility:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#enterprise-long-term-support-releases\"},`Expanded compatibility window`),`:\nActive Consul Enterprise LTS releases expand their Consul dataplane\nversion compatibility window until the LTS release reaches its\nend of maintenance.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#consul-dataplane-releases-that-span-envoy-major-versions\"},`Maintained Envoy version`),`:\nMajor versions of Consul dataplane aligned with a Consul Enterprise LTS version\nmay contain minor version updates that use a new major version of Envoy.\nThese minor version updates are necessary to ensure maintained versions\nof Consul dataplane use a maintained version of Envoy.`)),mdx(\"h4\",{\"id\":\"standard-releases-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#standard-releases-1\",\"aria-label\":\"standard releases permalink\"},`\\xbb`),`Standard releases`),mdx(\"p\",null,`Unless otherwise noted, rows in the following compatibility table\napply to both Consul Enterprise and Consul community edition (CE).`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Consul Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Default `,mdx(\"inlineCode\",{parentName:\"th\"},`consul-dataplane`),` Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Other compatible `,mdx(\"inlineCode\",{parentName:\"th\"},`consul-dataplane`),` Versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x CE`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.4.x (Envoy 1.28.x)`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.3.x (Envoy 1.27.x)`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.17.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.3.x (Envoy 1.27.x)`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.4.x (Envoy 1.28.x), 1.2.x (Envoy 1.26.x)`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.16.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.2.x (Envoy 1.26.x)`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.3.x (Envoy 1.27.x), 1.1.x (Envoy 1.25.x)`)))),mdx(\"h4\",{\"id\":\"enterprise-long-term-support-releases-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#enterprise-long-term-support-releases-1\",\"aria-label\":\"enterprise long term support releases permalink\"},`\\xbb`),`Enterprise Long Term Support releases`),mdx(\"p\",null,`Active Consul Enterprise\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/long-term-support\"},`Long Term Support (LTS)`),`\nreleases expand their Envoy version compatibility window\nuntil the LTS release reaches its end of maintenance.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Consul Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Default `,mdx(\"inlineCode\",{parentName:\"th\"},`consul-dataplane`),` Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Other compatible `,mdx(\"inlineCode\",{parentName:\"th\"},`consul-dataplane`),` Versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.4.x (Envoy 1.28.x)`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.3.x (Envoy 1.27.x)`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.15.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.1.x (Envoy 1.26.x)`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.4.x (Envoy 1.28.x) - 1.0.x (Envoy 1.24.x)`)))),mdx(\"h4\",{\"id\":\"consul-dataplane-releases-that-span-envoy-major-versions\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#consul-dataplane-releases-that-span-envoy-major-versions\",\"aria-label\":\"consul dataplane releases that span envoy major versions permalink\"},`\\xbb`),`Consul dataplane releases that span Envoy major versions`),mdx(\"p\",null,`Major versions of Consul dataplane aligned with a Consul Enterprise LTS version\nmay contain minor version updates that use a new major version of Envoy.\nThese minor version updates are necessary to ensure maintained versions\nof Consul dataplane use a maintained version of Envoy.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"th\"},`consul-dataplane`),` Version Range`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Associated Consul Enterprise LTS version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Contained Envoy Binary Version`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.4.0 - 1.4.latest`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`Envoy 1.28.x`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.1.9 - 1.1.latest`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.15.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`Envoy 1.26.x`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.1.0 - 1.1.8`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.15.x Ent`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`Envoy 1.25.x`)))),mdx(\"h2\",{\"id\":\"getting-started\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#getting-started\",\"aria-label\":\"getting started permalink\"},`\\xbb`),`Getting Started`),mdx(\"p\",null,`To get started with Envoy and see a working example you can follow the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/developer-mesh/service-mesh-with-envoy-proxy?utm_source=docs\"},`Using\nEnvoy with Consul service mesh`),` tutorial.`),mdx(\"h2\",{\"id\":\"configuration\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#configuration\",\"aria-label\":\"configuration permalink\"},`\\xbb`),`Configuration`),mdx(\"p\",null,`Envoy proxies require two types of configuration: an initial `,mdx(\"em\",{parentName:\"p\"},`bootstrap\nconfiguration`),` and a `,mdx(\"em\",{parentName:\"p\"},`dynamic configuration`),` that is discovered from a \"management\nserver\", in this case Consul.`),mdx(\"p\",null,`The bootstrap configuration at a minimum needs to configure the proxy with an\nidentity (node id) and the location of its local Consul agent from which it\ndiscovers all of its dynamic configuration. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"#bootstrap-configuration\"},`Bootstrap\nConfiguration`),` for more details.`),mdx(\"p\",null,`The dynamic configuration Consul service mesh provides to each Envoy instance includes:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`TLS certificates and keys to enable mutual authentication and keep certificates\nrotating.`),mdx(\"li\",{parentName:\"ul\"},`[Intentions]`,` to enforce service-to-service authorization rules.`),mdx(\"li\",{parentName:\"ul\"},`Service-discovery results for upstreams to enable each sidecar proxy to load-balance\noutgoing connections.`),mdx(\"li\",{parentName:\"ul\"},`L7 configuration including timeouts and protocol-specific options.`),mdx(\"li\",{parentName:\"ul\"},`Configuration to `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference#expose-paths-configuration-reference\"},`expose specific HTTP paths`),`.`)),mdx(\"p\",null,`For more information on the parts of the Envoy proxy runtime configuration\nthat are currently controllable via Consul service mesh, refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"#dynamic-configuration\"},`Dynamic\nConfiguration`),`.`),mdx(\"p\",null,`We plan to enable more and more of Envoy's features through\nConsul service mesh's first-class configuration over time, however some advanced users will\nneed additional control to configure Envoy in specific ways. To enable this, we\nprovide several `,mdx(\"a\",{parentName:\"p\",\"href\":\"#advanced-configuration\"},`\"escape hatch\"`),` options that allow\nusers to provide low-level raw Envoy config syntax for some sub-components in each\nEnvoy instance. This allows operators to have full control over and\nresponsibility for correctly configuring Envoy and ensuring version support etc.`),mdx(\"h2\",{\"id\":\"intention-enforcement\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#intention-enforcement\",\"aria-label\":\"intention enforcement permalink\"},`\\xbb`),`Intention Enforcement`),mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/intentions\"},`Intentions`),` are enforced using Envoy's RBAC filters. Depending on the\nconfigured `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#protocol\"},`protocol`),` of the proxied service, intentions are either enforced\nper-connection (L4) using a network filter, or per-request (L7) using an HTTP\nfilter.`),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` Prior to Consul 1.9.0 intentions were exclusively enforced\nper-connection (L4) using an `,mdx(\"inlineCode\",{parentName:\"p\"},`ext_authz`),` network filter.`)),mdx(\"h2\",{\"id\":\"fetching-certificates\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#fetching-certificates\",\"aria-label\":\"fetching certificates permalink\"},`\\xbb`),`Fetching Certificates`),mdx(\"p\",null,`Envoy will use the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands#consul_http_token\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_HTTP_TOKEN`)),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands#consul_http_addr\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_HTTP_ADDR`)),` environment variables to contact Consul to fetch certificates if the following conditions are met:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`The `,mdx(\"inlineCode\",{parentName:\"li\"},`CONSUL_HTTP_TOKEN`),` environment variable contains a Consul ACL token.`),mdx(\"li\",{parentName:\"ul\"},`The Consul ACL token has the necessary permissions to read configuration for that service.`)),mdx(\"p\",null,`If TLS is enabled on Consul, you will also need to add the following environment variables `,mdx(\"em\",{parentName:\"p\"},`prior`),` to starting Envoy:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands#consul_cacert\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_CACERT`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands#consul_client_cert\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_CLIENT_CERT`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands#consul_client_key\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_CLIENT_KEY`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands#consul_http_ssl\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_HTTP_SSL`)))),mdx(\"h2\",{\"id\":\"bootstrap-configuration\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#bootstrap-configuration\",\"aria-label\":\"bootstrap configuration permalink\"},`\\xbb`),`Bootstrap Configuration`),mdx(\"p\",null,`Envoy requires an initial bootstrap configuration file. You can either create the file manually using the Consul command line or configure Consul Dataplane to generate the file.`),mdx(\"h3\",{\"id\":\"generate-the-bootstrap-file-on-the-consul-cli\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#generate-the-bootstrap-file-on-the-consul-cli\",\"aria-label\":\"generate the bootstrap file on the consul cli permalink\"},`\\xbb`),`Generate the bootstrap file on the Consul CLI`),mdx(\"p\",null,`Connect to a local Consul client agent and run the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy`),` command`),` to create the Envoy bootstrap configuration. The command either outputs the bootstrap configuration directly to stdout or generates the configuration and issues an `,mdx(\"inlineCode\",{parentName:\"p\"},`exec`),` command to the Envoy binary as a convenience wrapper. For more information about using `,mdx(\"inlineCode\",{parentName:\"p\"},`exec`),` to bootstrap Envoy, refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy#exec-security-details\"},`Exec Security Details`),`.`),mdx(\"p\",null,`If you experience issues when bootstrapping Envoy proxies from the CLI, use the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`-enable-config-gen-logging`),` flag to enable debug message logging. These logs can\nhelp you troubleshoot issues that occur during the bootstrapping process.\nFor more information about available flags and parameters, refer to the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy CLI`),` reference`),`.`),mdx(\"h3\",{\"id\":\"generate-the-bootstrap-file-from-consul-dataplane\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#generate-the-bootstrap-file-from-consul-dataplane\",\"aria-label\":\"generate the bootstrap file from consul dataplane permalink\"},`\\xbb`),`Generate the bootstrap file from Consul Dataplane`),mdx(\"p\",null,`Consul Dataplane automatically configures and manages an Envoy process. Consul Dataplane generates the Envoy bootstrap configuration file prior to starting Envoy. To configure how Consul Dataplane starts Envoy, refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/dataplane/consul-dataplane\"},`Consul Dataplane CLI reference`),`.`),mdx(\"h3\",{\"id\":\"control-bootstrap-configuration-from-proxy-configuration\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#control-bootstrap-configuration-from-proxy-configuration\",\"aria-label\":\"control bootstrap configuration from proxy configuration permalink\"},`\\xbb`),`Control bootstrap configuration from proxy configuration`),mdx(\"p\",null,`Consul service mesh can control some parts of the bootstrap configuration by specifying Envoy proxy configuration options.`),mdx(\"p\",null,`Add the following configuration items to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),` configuration\nentry`),` or override them directly in the `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),`\nfield of a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/proxies/proxy-config-reference\"},`proxy service definition`),`. When\nconnected to a Consul client agent, you can place the configuration in the `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),` field of\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/deploy-sidecar-services\"},mdx(\"inlineCode\",{parentName:\"a\"},`sidecar_service`)),` block.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_statsd_url\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_statsd_url\",\"aria-label\":\"envoy_statsd_url permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_statsd_url`)),` - A URL in the form `,mdx(\"inlineCode\",{parentName:\"p\"},`udp://ip:port`),` identifying a UDP\nStatsD listener that Envoy should deliver metrics to. For example, this may be\n`,mdx(\"inlineCode\",{parentName:\"p\"},`udp://127.0.0.1:8125`),` if every host has a local StatsD listener. In this case\nusers can configure this property once in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),`\nconfiguration entry`),` for convenience. Currently, TCP is not supported.`),mdx(\"div\",{parentName:\"li\",\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` currently the url `,mdx(\"strong\",{parentName:\"p\"},`must use an ip address`),` not a dns name due\nto the way Envoy is setup for StatsD.`)),mdx(\"p\",{parentName:\"li\"},`Expansion of the environment variable `,mdx(\"inlineCode\",{parentName:\"p\"},`HOST_IP`),` is supported, e.g.\n`,mdx(\"inlineCode\",{parentName:\"p\"},`udp://\\${HOST_IP}:8125`),`.`),mdx(\"p\",{parentName:\"li\"},`Users can also specify the whole parameter in the form `,mdx(\"inlineCode\",{parentName:\"p\"},`$ENV_VAR_NAME`),`, which\nwill cause the `,mdx(\"inlineCode\",{parentName:\"p\"},`consul connect envoy`),` command to resolve the actual URL from\nthe named environment variable when it runs. This, for example, allows each\npod in a Kubernetes cluster to learn of a pod-specific IP address for StatsD\nwhen the Envoy instance is bootstrapped while still allowing global\nconfiguration of all proxies to use StatsD in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),`\nconfiguration entry`),`. The env\nvariable must contain a full valid URL value as specified above and nothing else.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_dogstatsd_url\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_dogstatsd_url\",\"aria-label\":\"envoy_dogstatsd_url permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_dogstatsd_url`)),` - The same as `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_statsd_url`),` with the following\ndifferences in behavior:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`Envoy will use dogstatsd tags instead of statsd dot-separated metric names.`),mdx(\"li\",{parentName:\"ul\"},`As well as `,mdx(\"inlineCode\",{parentName:\"li\"},`udp://`),`, a `,mdx(\"inlineCode\",{parentName:\"li\"},`unix://`),` URL may be specified if your agent can\nlisten on a unix socket (e.g. the dogstatsd agent).`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_prometheus_bind_addr\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_prometheus_bind_addr\",\"aria-label\":\"envoy_prometheus_bind_addr permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_prometheus_bind_addr`)),` - Specifies that the proxy should expose a Prometheus\nmetrics endpoint to the `,mdx(\"em\",{parentName:\"p\"},`public`),` network. It must be supplied in the form\n`,mdx(\"inlineCode\",{parentName:\"p\"},`ip:port`),` and port and the ip/port combination must be free within the network\nnamespace the proxy runs. Typically the IP would be `,mdx(\"inlineCode\",{parentName:\"p\"},`0.0.0.0`),` to bind to all\navailable interfaces or a pod IP address.`),mdx(\"div\",{parentName:\"li\",\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` Envoy versions prior to 1.10 do not export timing histograms\nusing the internal Prometheus endpoint.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_stats_bind_addr\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_stats_bind_addr\",\"aria-label\":\"envoy_stats_bind_addr permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_stats_bind_addr`)),` - Specifies that the proxy should expose the /stats prefix\nto the `,mdx(\"em\",{parentName:\"p\"},`public`),` network. It must be supplied in the form `,mdx(\"inlineCode\",{parentName:\"p\"},`ip:port`),` and\nthe ip/port combination must be free within the network namespace the proxy runs.\nTypically the IP would be `,mdx(\"inlineCode\",{parentName:\"p\"},`0.0.0.0`),` to bind to all available interfaces or a pod IP address.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_stats_tags\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_stats_tags\",\"aria-label\":\"envoy_stats_tags permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_stats_tags`)),` - Specifies one or more static tags that will be added to\nall metrics produced by the proxy.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_stats_flush_interval\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_stats_flush_interval\",\"aria-label\":\"envoy_stats_flush_interval permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_stats_flush_interval`)),` - Configures Envoy's\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-flush-interval\"},mdx(\"inlineCode\",{parentName:\"a\"},`stats_flush_interval`)),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_telemetry_collector_bind_socket_dir\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_telemetry_collector_bind_socket_dir\",\"aria-label\":\"envoy_telemetry_collector_bind_socket_dir permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_telemetry_collector_bind_socket_dir`)),` - Specifies the directory where Envoy creates a Unix socket.\nEnvoy sends metrics to the socket where a Consul telemetry collector can collect them.\nThe socket is not configured by default.\nEnabling this sets Envoy's `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-flush-interval\"},mdx(\"inlineCode\",{parentName:\"a\"},`stats_flush_interval`)),` to one minute if `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_stats_flush_interval`),` is unset and if no other stats sinks are configured, like `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_dogstats_url`),`, for instance.`))),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"#advanced-configuration\"},`Advanced Configuration`),` section describes additional configurations that allow incremental or complete control over the bootstrap configuration generated.`),mdx(\"h3\",{\"id\":\"bootstrap-envoy-on-windows-vms\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#bootstrap-envoy-on-windows-vms\",\"aria-label\":\"bootstrap envoy on windows vms permalink\"},`\\xbb`),`Bootstrap Envoy on Windows VMs`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},`Complete the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/developer-mesh/consul-windows-workloads\"},`Connect Services on Windows Workloads to Consul Service Mesh tutorial`),` to learn how to deploy Consul and use its service mesh on Windows VMs.`)),mdx(\"p\",null,`If you are running Consul on a Windows VM, attempting to bootstrap Envoy with the `,mdx(\"inlineCode\",{parentName:\"p\"},`consul connect envoy`),` command returns the following output:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\",\"metastring\":\"hideClipboard\",\"hideClipboard\":true},mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Directly running Envoy is only supported on linux and macOS since envoy itself doesn't build on other platforms currently.`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Use the -bootstrap option to generate the JSON to use when running envoy on a supported OS or via a container or VM.`),`\n`)),mdx(\"p\",null,`To bootstrap Envoy on Windows VMs, you must generate the bootstrap configuration as a .json file and then manually edit it to add both your ACL token and a valid access log path.`),mdx(\"p\",null,`To generate the bootstrap configuration file, add the `,mdx(\"inlineCode\",{parentName:\"p\"},`-bootstrap`),` option to the command and then save the output to a file:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`consul connect envoy -bootstrap `,mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`\u003e`),` bootstrap.json`)),`\n`)),mdx(\"p\",null,`Then, open `,mdx(\"inlineCode\",{parentName:\"p\"},`bootstrap.json`),` and update the following sections with your ACL token and log path.`),mdx(CodeBlockConfig,{filename:\"bootstrap.json\",hideClipboard:true,lineNumbers:true,highlight:\"2,19\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"admin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"access_log\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.access_loggers.file\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typed_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"path\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/dev/null\"`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"127.0.0.1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`19000`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  ## ...`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"dynamic_resources\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    ## ...`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"ads_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      ## ...`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"grpc_services\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"initial_metadata\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"key\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"x-consul-token\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\u003cACL-Token\u003e\"`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        ## ...`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))),mdx(\"p\",null,`To complete the bootstrap process, start Envoy and include the path to `,mdx(\"inlineCode\",{parentName:\"p\"},`bootstrap.json`),`:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`envoy -c bootstrap.json`)),`\n`)),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Security Note`),`: The bootstrap JSON contains the ACL token and should be handled as a secret. Because this token authorizes the identity of any service it has `,mdx(\"inlineCode\",{parentName:\"p\"},`service:write`),` permissions for, it can be used to access upstream services.`)),mdx(\"h2\",{\"id\":\"dynamic-configuration\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#dynamic-configuration\",\"aria-label\":\"dynamic configuration permalink\"},`\\xbb`),`Dynamic Configuration`),mdx(\"p\",null,`Consul automatically generates Envoy's dynamic configuration based on its\nknowledge of the cluster. Users may specify default configuration options for\na service through the available fields in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-defaults`),` configuration\nentry`),`. Consul will use this\ninformation to configure appropriate proxy settings for that service's proxies\nand also for the upstream listeners used by the service.`),mdx(\"p\",null,`One example is how users can define a service's protocol in the `,mdx(\"inlineCode\",{parentName:\"p\"},`Protocol`),` field of `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-defaults`),` configuration\nentry`),`. Agents with\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#enable_central_service_config\"},mdx(\"inlineCode\",{parentName:\"a\"},`enable_central_service_config`)),`\nset to true will automatically discover the protocol when configuring a proxy\nfor a service. The proxy will discover the main protocol of the service it\nrepresents and use this to configure its main public listener. It will also\ndiscover the protocols defined for any of its upstream services and\nautomatically configure its upstream listeners appropriately too as below.`),mdx(\"p\",null,`This automated discovery results in Consul auto-populating the `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),`\nand `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.upstreams[*].config`),` fields of the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),` that is\nactually registered.`),mdx(\"p\",null,`To learn about other options that can be configured centrally see the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config-entries\"},`Configuration Entries`),` docs.`),mdx(\"h3\",{\"id\":\"proxy-config-options\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#proxy-config-options\",\"aria-label\":\"proxy config options permalink\"},`\\xbb`),`Proxy Config Options`),mdx(\"p\",null,`These fields may also be overridden explicitly in `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),` of the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),`, or defined in\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),` configuration\nentry`),` to act as\ndefaults that are inherited by all services.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"protocol\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#protocol\",\"aria-label\":\"protocol permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`protocol`)),` - The protocol the service speaks. Consul service mesh's Envoy integration\ncurrently supports the following `,mdx(\"inlineCode\",{parentName:\"p\"},`protocol`),` values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"tcp\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#tcp\",\"aria-label\":\"tcp permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`tcp`)),` - Unless otherwise specified this is the default, which causes Envoy\nto proxy at L4. This provides all the security benefits of the service mesh's mTLS\nand works for any TCP-based protocol. Load-balancing and metrics are\navailable at the connection level.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"http\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#http\",\"aria-label\":\"http permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`http`)),` - This specifies that the service speaks HTTP/1.x. Envoy will setup an\n`,mdx(\"inlineCode\",{parentName:\"p\"},`http_connection_manager`),` and will be able to load-balance requests\nindividually to available upstream services. Envoy will also emit L7 metrics\nsuch as request rates broken down by HTTP response code family (2xx, 4xx, 5xx,\netc).`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"http2\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#http2\",\"aria-label\":\"http2 permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`http2`)),` - This specifies that the service speaks http2 (specifically h2c since\nEnvoy will still only connect to the local service instance via plain TCP not\nTLS). This behaves much like `,mdx(\"inlineCode\",{parentName:\"p\"},`http`),` with L7 load-balancing and metrics but has\nadditional settings that correctly enable end-to-end http2.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"grpc\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#grpc\",\"aria-label\":\"grpc permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`grpc`)),` - gRPC is a common RPC protocol based on http2. In addition to the\nhttp2 support above, Envoy listeners will be configured with a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/configuration/http/http_filters/grpc_http1_bridge_filter\"},`gRPC bridge\nfilter`),`\nthat translates HTTP/1.1 calls into gRPC, and instruments\nmetrics with `,mdx(\"inlineCode\",{parentName:\"p\"},`gRPC-status`),` trailer codes.`),mdx(\"div\",{parentName:\"li\",\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` The protocol of a service should ideally be configured via the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#protocol\"},mdx(\"inlineCode\",{parentName:\"a\"},`protocol`)),`\nfield of a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-defaults`)),`\nconfig entry for the service. Configuring it in a\nproxy config will not fully enable some `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/manage-traffic\"},`L7\nfeatures`),`.\nIt is supported here for backwards compatibility with Consul versions prior to 1.6.0.`))))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"bind_address\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#bind_address\",\"aria-label\":\"bind_address permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`bind_address`)),` - Override the address Envoy's public listener binds to. By\ndefault Envoy will bind to the service address or 0.0.0.0 if there is not explicit address on the service registration.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"bind_port\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#bind_port\",\"aria-label\":\"bind_port permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`bind_port`)),` - Override the port Envoy's public listener binds to. By default\nEnvoy will bind to the service port.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"local_connect_timeout_ms\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#local_connect_timeout_ms\",\"aria-label\":\"local_connect_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`local_connect_timeout_ms`)),` - The number of milliseconds allowed to make\nconnections to the local application instance before timing out. Defaults to 5000\n(5 seconds).`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"local_request_timeout_ms\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#local_request_timeout_ms\",\"aria-label\":\"local_request_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`local_request_timeout_ms`)),` - In milliseconds, the request timeout for HTTP requests\nto the local application instance. Applies to HTTP based protocols only. If not\nspecified, inherits the Envoy default for route timeouts (15s). A value of 0 will\ndisable request timeouts.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"local_idle_timeout_ms\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#local_idle_timeout_ms\",\"aria-label\":\"local_idle_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`local_idle_timeout_ms`)),` - In milliseconds, the idle timeout for HTTP requests\nto the local application instance. Applies to HTTP based protocols only. If not\nspecified, inherits the Envoy default for route idle timeouts (15s). A value of 0\ndisables request timeouts.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_inbound_connections\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#max_inbound_connections\",\"aria-label\":\"max_inbound_connections permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_inbound_connections`)),` - The maximum number of concurrent inbound connections\nto the local application instance. If not specified, inherits the Envoy default (1024).`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"balance_inbound_connections\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#balance_inbound_connections\",\"aria-label\":\"balance_inbound_connections permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`balance_inbound_connections`)),` - The strategy used for balancing inbound connections\nacross Envoy worker threads. Consul service mesh Envoy integration supports the\nfollowing `,mdx(\"inlineCode\",{parentName:\"p\"},`balance_inbound_connections`),` values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#\",\"aria-label\":\" permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`\"\"`)),` - Empty string (default). No connection balancing strategy is used. Consul does not balance inbound connections.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"exact_balance\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#exact_balance\",\"aria-label\":\"exact_balance permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`exact_balance`)),` - Inbound connections to the service use the\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"https://cloudnative.to/envoy/api-v3/config/listener/v3/listener.proto.html#config-listener-v3-listener-connectionbalanceconfig-exactbalance\"},`Envoy Exact Balance Strategy.`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"xds_fetch_timeout_ms\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#xds_fetch_timeout_ms\",\"aria-label\":\"xds_fetch_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`xds_fetch_timeout_ms`)),` - In milliseconds, the amount of time for Envoy to wait for EDS and RDS configuration before timing out. If not specified, this field uses Envoy's default value of `,mdx(\"inlineCode\",{parentName:\"p\"},`15000`),`, or 15 seconds. When an Envoy instance is configured with a large number of upstreams that take a significant amount of time to populate with data, setting this field to a higher value may prevent temporary disruption caused by unexpected timeouts.`))),mdx(\"h3\",{\"id\":\"proxy-upstream-config-options\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#proxy-upstream-config-options\",\"aria-label\":\"proxy upstream config options permalink\"},`\\xbb`),`Proxy Upstream Config Options`),mdx(\"p\",null,`The following configuration items may be overridden directly in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.upstreams[].config`),` field of a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/deploy-sidecar-services\"},mdx(\"inlineCode\",{parentName:\"a\"},`sidecar_service`)),` block.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"protocol-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#protocol-1\",\"aria-label\":\"protocol permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`protocol`)),` - Same as above in main config but affects the listener setup for\nthe upstream.`),mdx(\"div\",{parentName:\"li\",\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` The protocol of a service should ideally be configured via the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#protocol\"},mdx(\"inlineCode\",{parentName:\"a\"},`protocol`)),`\nfield of a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-defaults`)),`\nconfig entry for the upstream destination service. Configuring it in a\nproxy upstream config will not fully enable some `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/manage-traffic\"},`L7\nfeatures`),`.\nIt is supported here for backwards compatibility with Consul versions prior to 1.6.0.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"connect_timeout_ms\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#connect_timeout_ms\",\"aria-label\":\"connect_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect_timeout_ms`)),` - The number of milliseconds to allow when making upstream\nconnections before timing out. Defaults to 5000\n(5 seconds).`),mdx(\"div\",{parentName:\"li\",\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` The connection timeout for a service should ideally be\nconfigured via the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-resolver#connecttimeout\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect_timeout`)),`\nfield of a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-resolver\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-resolver`)),`\nconfig entry for the upstream destination service. Configuring it in a\nproxy upstream config will override any values defined in config entries.\nIt is supported here for backwards compatibility with Consul versions prior to 1.6.0.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"limits\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#limits\",\"aria-label\":\"limits permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`limits`)),` - A set of limits to apply when connecting to the upstream service.\nThese limits are applied on a per-service-instance basis. The following\nlimits are respected:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_connections\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#max_connections\",\"aria-label\":\"max_connections permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_connections`)),` - The maximum number of connections a service instance\nwill be allowed to establish against the given upstream. Use this to limit\nHTTP/1.1 traffic, since HTTP/1.1 has a request per connection.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_pending_requests\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#max_pending_requests\",\"aria-label\":\"max_pending_requests permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_pending_requests`)),` - The maximum number of requests that will be queued\nwhile waiting for a connection to be established. For this configuration to\nbe respected, a L7 protocol must be defined in the `,mdx(\"inlineCode\",{parentName:\"li\"},`protocol`),` field.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_concurrent_requests\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#max_concurrent_requests\",\"aria-label\":\"max_concurrent_requests permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_concurrent_requests`)),` - The maximum number of concurrent requests that\nwill be allowed at a single point in time. Use this to limit HTTP/2 traffic,\nsince HTTP/2 has many requests per connection. For this configuration to be\nrespected, a L7 protocol must be defined in the `,mdx(\"inlineCode\",{parentName:\"li\"},`protocol`),` field.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"passive_health_check\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#passive_health_check\",\"aria-label\":\"passive_health_check permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`passive_health_check`)),` - Passive health checks remove hosts from the upstream\ncluster that are unreachable or that return errors.`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"interval\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#interval\",\"aria-label\":\"interval permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`interval`)),` - The time in nanosecond between checks. Each check will cause\nhosts which have exceeded `,mdx(\"inlineCode\",{parentName:\"li\"},`max_failures`),` to be removed from the load\nbalancer, and any hosts which have passed their ejection time to be\nreturned to the load balancer. If not specified, it uses the default value.\nFor example, 10s for Envoy proxy.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_failures\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#max_failures\",\"aria-label\":\"max_failures permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_failures`)),` - The number of consecutive failures that cause a host to be\nremoved from the upstream cluster. If not specified, Consul uses the proxy's\ndefault value. For example, `,mdx(\"inlineCode\",{parentName:\"li\"},`5`),` for Envoy proxy.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"enforcing_consecutive_5xx\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#enforcing_consecutive_5xx\",\"aria-label\":\"enforcing_consecutive_5xx permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`enforcing_consecutive_5xx`)),` - A percentage representing the chance that a\nhost will be actually ejected when the proxy detects an outlier status\nthrough consecutive errors in the 500 code range. If not specified, Consul\nuses the proxy's default value. For example, `,mdx(\"inlineCode\",{parentName:\"li\"},`100`),` for Envoy proxy.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"max_ejection_percent\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#max_ejection_percent\",\"aria-label\":\"max_ejection_percent permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_ejection_percent`)),` - The maximum percentage of hosts that can be ejected\nfrom a upstream cluster due to passive health check failures. If not specified,\ninherits Envoy's default of 10% or at least one host.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"base_ejection_time\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#base_ejection_time\",\"aria-label\":\"base_ejection_time permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`base_ejection_time`)),` - The base time that a host is ejected for. The real\ntime is equal to the base time multiplied by the number of times the host has\nbeen ejected and is capped by max_ejection_time (Default 300s). If not\nspecified, inherits Envoy's default value of 30s.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"balance_outbound_connections\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#balance_outbound_connections\",\"aria-label\":\"balance_outbound_connections permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`balance_outbound_connections`)),` - Specifies the strategy for balancing outbound connections\nacross Envoy worker threads. Consul service mesh Envoy integration supports the\nfollowing `,mdx(\"inlineCode\",{parentName:\"p\"},`balance_outbound_connections`),` values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#-1\",\"aria-label\":\" permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`\"\"`)),` - Empty string (default). No connection balancing strategy is used. Consul does not balance outbound connections.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"exact_balance-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#exact_balance-1\",\"aria-label\":\"exact_balance permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`exact_balance`)),` - Outbound connections from the upstream use the\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"https://cloudnative.to/envoy/api-v3/config/listener/v3/listener.proto.html#config-listener-v3-listener-connectionbalanceconfig-exactbalance\"},`Envoy Exact Balance Strategy.`))))),mdx(\"h3\",{\"id\":\"gateway-options\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#gateway-options\",\"aria-label\":\"gateway options permalink\"},`\\xbb`),`Gateway Options`),mdx(\"p\",null,`These fields may also be overridden explicitly in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),`, or defined in\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),` configuration\nentry`),` to act as\ndefaults that are inherited by all services.`),mdx(\"p\",null,`Prior to 1.8.0 these settings were specific to Mesh Gateways. The deprecated\nnames such as `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_mesh_gateway_bind_addresses`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_mesh_gateway_no_default_bind`),`\nwill continue to be supported.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"connect_timeout_ms-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#connect_timeout_ms-1\",\"aria-label\":\"connect_timeout_ms permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect_timeout_ms`)),` - The number of milliseconds to allow when making upstream\nconnections before timing out. Defaults to 5000 (5 seconds). If the upstream\nservice has the configuration option\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-resolver#connecttimeout\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect_timeout_ms`)),`\nset for the `,mdx(\"inlineCode\",{parentName:\"p\"},`service-resolver`),`, that timeout value will take precedence over\nthis gateway option.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_bind_tagged_addresses\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_bind_tagged_addresses\",\"aria-label\":\"envoy_gateway_bind_tagged_addresses permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_bind_tagged_addresses`)),` - Indicates that the gateway\nservices tagged addresses should be bound to listeners in addition to the\ndefault listener address.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_bind_addresses\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_bind_addresses\",\"aria-label\":\"envoy_gateway_bind_addresses permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_bind_addresses`)),` - A map of additional addresses to be bound.\nThis map's keys are the name of the listeners to be created and the values are\na map with two keys, address and port, that combined make the address to bind the\nlistener to. These are bound in addition to the default address.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_no_default_bind\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_no_default_bind\",\"aria-label\":\"envoy_gateway_no_default_bind permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_no_default_bind`)),` - Prevents binding to the default address\nof the gateway service. This should be used with one of the other options\nto configure the gateway's bind addresses.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_dns_discovery_type\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_dns_discovery_type\",\"aria-label\":\"envoy_dns_discovery_type permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_dns_discovery_type`)),` - Determines how Envoy will resolve hostnames. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`LOGICAL_DNS`),`.\nMust be one of `,mdx(\"inlineCode\",{parentName:\"p\"},`STRICT_DNS`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`LOGICAL_DNS`),`. Details for each type are available in\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/intro/arch_overview/upstream/service_discovery\"},`Envoy documentation`),`.\nThis option applies to terminating gateways that route to services\naddressed by a hostname, such as a managed database. It also applies to mesh gateways,\nsuch as when gateways in other Consul datacenters are behind a load balancer that is addressed by a hostname.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_remote_tcp_enable_keepalive\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_remote_tcp_enable_keepalive\",\"aria-label\":\"envoy_gateway_remote_tcp_enable_keepalive permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_remote_tcp_enable_keepalive`)),` - Enables TCP keepalive settings on remote\nupstream connections for mesh and terminating gateways. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. Must be one\nof `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. Details for this feature are available in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive\"},`Envoy documentation`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_remote_tcp_keepalive_time\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_remote_tcp_keepalive_time\",\"aria-label\":\"envoy_gateway_remote_tcp_keepalive_time permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_remote_tcp_keepalive_time`)),` - The number of seconds a connection needs to\nbe idle before keep-alive probes start being sent. For more information, see the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive\"},`Envoy documentation`),`.\nThis option only applies to remote upstream connections for mesh and terminating gateways.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_remote_tcp_keepalive_interval\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_remote_tcp_keepalive_interval\",\"aria-label\":\"envoy_gateway_remote_tcp_keepalive_interval permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_remote_tcp_keepalive_interval`)),` - The number of seconds between keep-alive probes.\nFor more information, see the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive\"},`Envoy documentation`),`.\nThis option only applies to remote upstream connections for mesh and terminating gateways.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_gateway_remote_tcp_keepalive_probes\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_gateway_remote_tcp_keepalive_probes\",\"aria-label\":\"envoy_gateway_remote_tcp_keepalive_probes permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_gateway_remote_tcp_keepalive_probes`)),` - Maximum number of keepalive probes to send without\nresponse before deciding the connection is dead. For more information, see the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/address.proto#envoy-v3-api-msg-config-core-v3-tcpkeepalive\"},`Envoy documentation`),`.\nThis option only applies to remote upstream connections for mesh and terminating gateways.`))),mdx(\"h2\",{\"id\":\"advanced-configuration\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#advanced-configuration\",\"aria-label\":\"advanced configuration permalink\"},`\\xbb`),`Advanced Configuration`),mdx(\"p\",null,`To support more flexibility when configuring Envoy, several \"lower-level\" options exist\nthat require knowledge of Envoy's configuration format.\nMany options allow configuring a subsection of either the bootstrap or\ndynamic configuration using your own custom protobuf config.`),mdx(\"p\",null,`We separate these into two sets, `,mdx(\"a\",{parentName:\"p\",\"href\":\"#advanced-bootstrap-options\"},`Advanced Bootstrap\nOptions`),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"#escape-hatch-overrides\"},`Escape Hatch\nOverrides`),`. Both require writing Envoy config in the\nprotobuf JSON encoding. Advanced options cover smaller chunks that might\ncommonly need to be set for tasks like configuring tracing. In contrast, escape hatches\ngive almost complete control over the proxy setup, but require operators to\nmanually code the entire configuration in protobuf JSON.`),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Advanced Topic!`),` This section covers options that allow users to take almost\ncomplete control of Envoy's configuration. We provide these options so users can\nexperiment or take advantage of features not yet fully supported in Consul service mesh. We\nplan to retain this ability in the future, but it should still be considered\nexperimental because it requires in-depth knowledge of Envoy's configuration format.\nUsers should consider Envoy version compatibility when using these features because they can configure Envoy in ways that\nare outside of Consul's control. Incorrect configuration could prevent all\nproxies in your mesh from functioning correctly, or bypass the security\nguarantees Consul service mesh is designed to enforce.`)),mdx(\"h3\",{\"id\":\"configuration-formatting\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#configuration-formatting\",\"aria-label\":\"configuration formatting permalink\"},`\\xbb`),`Configuration Formatting`),mdx(\"p\",null,`All configurations are specified as strings containing the serialized proto3 JSON encoding\nof the specified Envoy configuration type. They are full JSON types except where\nnoted.`),mdx(\"p\",null,`The JSON supplied may describe a protobuf `,mdx(\"inlineCode\",{parentName:\"p\"},`types.Any`),` message with an `,mdx(\"inlineCode\",{parentName:\"p\"},`@type`),`\nfield set to the appropriate type (for example\n`,mdx(\"inlineCode\",{parentName:\"p\"},`type.googleapis.com/envoy.config.listener.v3.Listener`),`).`),mdx(\"p\",null,`For example, given a tracing config:`),mdx(CodeBlockConfig,{heading:\"Example envoy_tracing_json configuration\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"http\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.tracers.zipkin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typedConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"zipkin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint_version\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"HTTP_JSON\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/api/v1/spans\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"shared_span_context\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`false`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))),mdx(\"p\",null,`JSON escape the value of `,mdx(\"inlineCode\",{parentName:\"p\"},`tracing`),` into a string, for example using `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://codebeautify.org/json-escape-unescape\"},`https://codebeautify.org/json-escape-unescape`),`,\nor using `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://stedolan.github.io/jq/\"},`jq`),`.`),mdx(\"pre\",{\"className\":\"language-shell\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell\"},`$ `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`cat`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`\u003c\u003c`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`EOF`,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash punctuation\"},` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`|`),` jq `,mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`'. | @json'`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`{`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`  \"http\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`    \"name\": \"envoy.tracers.zipkin\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`    \"typedConfig\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`      \"@type\": \"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`      \"collector_cluster\": \"zipkin\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`      \"collector_endpoint_version\": \"HTTP_JSON\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`      \"collector_endpoint\": \"/api/v1/spans\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`      \"shared_span_context\": false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`    }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`  }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"{`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`http`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:{`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`name`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`envoy.tracers.zipkin`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`,`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`typedConfig`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:{`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`@type`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`type.googleapis.com/envoy.config.trace.v3.ZipkinConfig`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`,`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`collector_cluster`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`zipkin`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`,`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`collector_endpoint_version`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`HTTP_JSON`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`,`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`collector_endpoint`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`/api/v1/spans`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`,`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`shared_span_context`,mdx(\"span\",{parentName:\"span\",\"className\":\"token entity\",\"title\":'\\\\\"'},`\\\\\"`),`:false}}}\"`),`\n`)),mdx(\"p\",null,`Then use that as the value for `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_tracing_json`),`:`),mdx(\"pre\",{\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"kind\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"proxy-defaults\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"global\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"envoy_tracing_json\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"{\\\\\"http\\\\\":{\\\\\"name\\\\\":\\\\\"envoy.tracers.zipkin\\\\\",\\\\\"typedConfig\\\\\":{\\\\\"@type\\\\\":\\\\\"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\\\\\",\\\\\"collector_cluster\\\\\":\\\\\"zipkin\\\\\",\\\\\"collector_endpoint_version\\\\\":\\\\\"HTTP_JSON\\\\\",\\\\\"collector_endpoint\\\\\":\\\\\"/api/v1/spans\\\\\",\\\\\"shared_span_context\\\\\":false}}}\\\\n\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`If using HCL, this escaping is done automatically:`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Kind`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"proxy-defaults\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"global\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`Config`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`envoy_tracing_json`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`\u003c\u003cEOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`{`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`  \"http\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    \"name\": \"envoy.tracers.zipkin\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    \"typedConfig\": {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`      \"@type\": \"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`      \"collector_cluster\": \"zipkin\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`      \"collector_endpoint_version\": \"HTTP_JSON\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`      \"collector_endpoint\": \"/api/v1/spans\",`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`      \"shared_span_context\": false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`  }`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h3\",{\"id\":\"advanced-bootstrap-options\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#advanced-bootstrap-options\",\"aria-label\":\"advanced bootstrap options permalink\"},`\\xbb`),`Advanced Bootstrap Options`),mdx(\"p\",null,`Users may add the following configuration items to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),`\nconfiguration\nentry`),` or\noverride them directly in the `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),` field of a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/deploy-sidecar-services\"},mdx(\"inlineCode\",{parentName:\"a\"},`sidecar_service`)),` block.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_extra_static_clusters_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_extra_static_clusters_json\",\"aria-label\":\"envoy_extra_static_clusters_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_extra_static_clusters_json`)),` - Specifies one or more `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto\"},`Envoy clusters`),`\nthat will be appended to the array of `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-staticresources-clusters\"},`static\nclusters`),`\nin the bootstrap config. This enables you to add custom clusters for tracing sinks,\nfor example. In order to configure a single cluster, specify a single JSON object with the cluster details. For multiple\nclusters, specify objects in a comma-separated list with no trailing comma. The\ncluster objects will be interpolated directly into a JSON array.`),mdx(CodeBlockConfig,{heading:\"Example envoy_extra_static_clusters_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local-service-cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"load_assignment\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster_name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local-service-cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"endpoints\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"lb_endpoints\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"endpoint\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"127.0.0.1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`32769`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_extra_static_listeners_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_extra_static_listeners_json\",\"aria-label\":\"envoy_extra_static_listeners_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_extra_static_listeners_json`)),` - Similar to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_extra_static_clusters_json`),` but appends one or more `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto\"},`Envoy listeners`),` to the array of `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-staticresources-listeners\"},`static\nlistener`),` definitions.\nCan be used to setup limited access that bypasses the service mesh's mTLS or\nauthorization for health checks or metrics.`),mdx(CodeBlockConfig,{heading:\"Example envoy_extra_static_listeners_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"test_envoy_mtls_bypass_listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"0.0.0.0\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`20201`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filter_chains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.network.http_connection_manager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typedConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"http_filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.http.router\"`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"self_admin_route\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"virtual_hosts\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"self_admin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"domains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"*\"`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"routes\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"match\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"path\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/\"`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local-service-cluster\"`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stat_prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy_mtls_bypass\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"tracing\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"random_sampling\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_extra_stats_sinks_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_extra_stats_sinks_json\",\"aria-label\":\"envoy_extra_stats_sinks_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_extra_stats_sinks_json`)),` - Similar to `,mdx(\"inlineCode\",{parentName:\"p\"},`envoy_extra_static_clusters_json`),`\nbut for `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-sinks\"},`stats sinks`),`.\nThese are appended to any sinks defined by use of the\nhigher-level `,mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_statsd_url\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_statsd_url`)),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_dogstatsd_url\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_dogstatsd_url`)),` config options.`),mdx(CodeBlockConfig,{heading:\"Example envoy_extra_stats_sinks_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.stat_sinks.dog_statsd\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typed_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.metrics.v3.DogStatsdSink\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"protocol\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"UDP\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`8125`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"172.31.20.6\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_stats_config_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_stats_config_json\",\"aria-label\":\"envoy_stats_config_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_stats_config_json`)),` - The entire `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-config\"},`stats\nconfig`),`.\nIf provided this will override the higher-level\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_stats_tags\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_stats_tags`)),`. It allows full control over dynamic\ntag replacements etc.`),mdx(CodeBlockConfig,{heading:\"Example envoy_stats_config_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stats_matcher\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"reject_all\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stats_tags\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"tag_name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.http_user_agent\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"regex\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"^http(?=\\\\\\\\.).*?\\\\\\\\.user_agent\\\\\\\\.((.+?)\\\\\\\\.)\\\\\\\\w+?$\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"use_all_default_tags\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`false`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_tracing_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_tracing_json\",\"aria-label\":\"envoy_tracing_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_tracing_json`)),` - The entire `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/bootstrap/v3/bootstrap.proto#envoy-v3-api-field-config-bootstrap-v3-bootstrap-tracing\"},`tracing\nconfig`),`.\nMost tracing providers will also require adding static clusters to define the\nendpoints to send tracing data to.`),mdx(CodeBlockConfig,{heading:\"Example envoy_tracing_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"http\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.tracers.zipkin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typedConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"zipkin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint_version\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"HTTP_JSON\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/api/v1/spans\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"shared_span_context\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`false`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))))),mdx(\"h3\",{\"id\":\"escape-hatch-overrides\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#escape-hatch-overrides\",\"aria-label\":\"escape hatch overrides permalink\"},`\\xbb`),`Escape-Hatch Overrides`),mdx(\"p\",null,`Users may add the following configuration items to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/proxy-defaults\"},`global `,mdx(\"inlineCode\",{parentName:\"a\"},`proxy-defaults`),`\nconfiguration\nentry`),` or\noverride them directly in the `,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.config`),` field of a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/deploy-sidecar-services\"},mdx(\"inlineCode\",{parentName:\"a\"},`sidecar_service`)),` block.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_bootstrap_json_tpl\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_bootstrap_json_tpl\",\"aria-label\":\"envoy_bootstrap_json_tpl permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_bootstrap_json_tpl`)),` - Specifies a template in Go template syntax that\nis used in place of `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/blob/71d45a34601423abdfc0a64d44c6a55cf88fa2fc/command/connect/envoy/bootstrap_tpl.go#L129\"},`the default\ntemplate`),`\nwhen generating bootstrap via `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy`),`\ncommand`),`. The variables that are available\nto be interpolated are `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/blob/71d45a34601423abdfc0a64d44c6a55cf88fa2fc/command/connect/envoy/bootstrap_tpl.go#L5\"},`documented\nhere`),`.\nThis offers complete control of the proxy's bootstrap although major\ndeviations from the default template may break Consul's ability to correctly\nmanage the proxy or enforce its security model.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_public_listener_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_public_listener_json\",\"aria-label\":\"envoy_public_listener_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_public_listener_json`)),` - Specifies a complete `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto\"},`Envoy listener`),`\nto be delivered in place of the main public listener that the proxy used to\naccept inbound connections. This will be used verbatim with the following\nexceptions:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`Every `,mdx(\"inlineCode\",{parentName:\"li\"},`FilterChain`),` added to the listener will have its `,mdx(\"inlineCode\",{parentName:\"li\"},`TlsContext`),`\noverridden by the Connect TLS certificates and validation context. This\nmeans there is no way to override the service mesh's mutual TLS for the public\nlistener.`),mdx(\"li\",{parentName:\"ul\"},`Every `,mdx(\"inlineCode\",{parentName:\"li\"},`FilterChain`),` will have the `,mdx(\"inlineCode\",{parentName:\"li\"},`envoy.filters.{network|http}.rbac`),` filter\nprepended to the filters array to ensure that all inbound connections are\nauthorized by the service mesh. Before Consul 1.9.0 `,mdx(\"inlineCode\",{parentName:\"li\"},`envoy.ext_authz`),` was inserted instead.`)),mdx(CodeTabs,{heading:\"Example envoy_public_listener_json\",tabs:[\"HTTP\",\"TCP\"],mdxType:\"CodeTabs\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.listener.v3.Listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"public_listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"127.0.0.1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`21002`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filter_chains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.network.http_connection_manager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typed_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stat_prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ingress_http\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"http_filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.http.router\"`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local_route\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"virtual_hosts\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local_service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"domains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"*\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"routes\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"match\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/\"`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local-service-cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"traffic_direction\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"INBOUND\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.listener.v3.Listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"public_listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"127.0.0.1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`21002`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filter_chains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.network.tcp_proxy\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typed_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stat_prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ingress_tcp\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local-service-cluster\"`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"traffic_direction\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"INBOUND\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_listener_tracing_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_listener_tracing_json\",\"aria-label\":\"envoy_listener_tracing_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_listener_tracing_json`)),` - Specifies a `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto#envoy-v3-api-msg-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing\"},`tracing\nconfiguration`),`\nto be inserted in the proxy's public and upstreams listeners.`),mdx(CodeBlockConfig,{heading:\"Example envoy_listener_tracing_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager.Tracing\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"provider\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.tracers.zipkin\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typed_config\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.trace.v3.ZipkinConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_cluster\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"otelcolector\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/api/v2/spans\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"collector_endpoint_version\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"HTTP_JSON\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"shared_span_context\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`false`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"custom_tags\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"tag\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"custom_header\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"request_header\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"x-custom-traceid\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"default_value\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"tag\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"alloc_id\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"environment\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"NOMAD_ALLOC_ID\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_local_cluster_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_local_cluster_json\",\"aria-label\":\"envoy_local_cluster_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_local_cluster_json`)),` - Specifies a complete `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto\"},`Envoy cluster`),`\nto be delivered in place of the local application cluster. This allows\ncustomization of timeouts, rate limits, load balancing strategy etc.`),mdx(CodeBlockConfig,{heading:\"Example envoy_local_cluster_json\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.cluster.v3.Cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local_app\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"STATIC\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"connect_timeout\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"5s\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"circuit_breakers\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"thresholds\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"priority\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"DEFAULT\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"max_connections\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`2048`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"load_assignment\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster_name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"local_app\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"endpoints\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"lb_endpoints\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"endpoint\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"127.0.0.1\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`8080`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))))),mdx(\"p\",null,`The following configuration items may be overridden directly in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`proxy.upstreams[].config`),` field of a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/proxy-config-reference\"},`proxy service\ndefinition`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/deploy/deploy-sidecar-services\"},mdx(\"inlineCode\",{parentName:\"a\"},`sidecar_service`)),` block.`),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note:`),` - When a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-router\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-router`)),`,\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-splitter\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-splitter`)),`, or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-resolver\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-resolver`)),` config\nentry exists for a service the below escape hatches are ignored and will log a\nwarning.`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_listener_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_listener_json\",\"aria-label\":\"envoy_listener_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_listener_json`)),` - Specifies a complete `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/listener/v3/listener.proto\"},`Listener`),`\nto be delivered in place of the upstream listener that the proxy exposes to\nthe application for outbound connections. This will be used verbatim with the\nfollowing exceptions:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`Every `,mdx(\"inlineCode\",{parentName:\"li\"},`FilterChain`),` added to the listener will have its `,mdx(\"inlineCode\",{parentName:\"li\"},`TlsContext`),`\noverridden by the service mesh TLS certificates and validation context. This\nmeans there is no way to override the service mesh's mutual TLS for the public\nlistener.`)),mdx(CodeTabs,{heading:\"Example upstream envoy_listener_json\",mdxType:\"CodeTabs\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.listener.v3.Listener\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"socket_address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"address\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"0.0.0.0\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"port_value\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`14000`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filter_chains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.network.http_connection_manager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typedConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"access_log\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.access_loggers.file\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"typedConfig\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"path\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/var/log/envoy-access/example-service.log\"`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"http_filters\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"envoy.filters.http.router\"`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"virtual_hosts\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"domains\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"*\"`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"routes\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"match\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"/\"`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"route\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"timeout\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"90s\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"retry_policy\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`                          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"retry_on\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"5xx,connect-failure\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"num_retries\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`2`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`                          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"per_try_timeout\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"60s\"`),`\n`,`                        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`                  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`                `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"stat_prefix\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"tracing\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`              `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"random_sampling\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`            `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"traffic_direction\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"OUTBOUND\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"envoy_cluster_json\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#envoy_cluster_json\",\"aria-label\":\"envoy_cluster_json permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`envoy_cluster_json`)),` - Specifies a complete `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-v3/config/cluster/v3/cluster.proto\"},`Envoy cluster`),`\nto be delivered in place of the discovered upstream cluster. This allows\ncustomization of timeouts, circuit breaking, rate limits, load balancing\nstrategy etc.`),mdx(CodeTabs,{heading:\"Example upstream envoy_cluster_json\",mdxType:\"CodeTabs\"},mdx(\"pre\",{parentName:\"li\",\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"@type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"type.googleapis.com/envoy.config.cluster.v3.Cluster\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"name\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example-service\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"type\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"EDS\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"eds_cluster_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"eds_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"ads\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"connect_timeout\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"90s\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"lb_policy\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ROUND_ROBIN\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"circuit_breakers\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"thresholds\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"priority\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"DEFAULT\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"max_connections\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`1024`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"max_pending_requests\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`1024`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"max_requests\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`1024`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`,`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"max_retries\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`3`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))))))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"name":"Consul","slug":"consul","algoliaConfig":{"indexName":"product_CONSUL","searchOnlyApiKey":"fbd5dc1f0078d41509fcc560386fd534"},"analyticsConfig":{"includedDomains":"consul.io www.consul.io","segmentWriteKey":"IyzLrqXkox5KJ8XL4fo8vTYNGfiKlTCm"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Consul by HashiCorp","description":"Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.","image":"https://www.consulproject.io/consul-public/img/og-image.png","icon":[{"href":"/consul-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.11.3","subnavItems":[],"basePaths":["docs","api-docs","commands","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"currentRootDocsPath":{"iconName":"docs","name":"Documentation","path":"docs"}},"projectName":null,"versions":null},"__N_SSG":true},"page":"/consul/docs/[...page]","query":{"page":["connect","proxies","envoy"]},"buildId":"C_aCbyHEz7wf5PZ-lSB3G","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>