{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Consul","url":"/consul"},{"title":"Documentation","url":"/consul/docs","isCurrentPage":false},{"title":"Upgrade","url":"/consul/docs/upgrading"},{"title":"Specific Version Details","url":"/consul/docs/upgrading/upgrade-specific","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Consul Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Consul","fullPath":"/consul","theme":"consul"},{"title":"Install","fullPath":"/consul/install"},{"title":"Tutorials","fullPath":"/consul/tutorials"},{"title":"Documentation","fullPath":"/consul/docs"},{"title":"API","fullPath":"/consul/api-docs"},{"title":"CLI","fullPath":"/consul/commands"}],"showFilterInput":false,"title":"Consul","visuallyHideTitle":true},{"backToLinkProps":{"text":"Consul Home","href":"/consul"},"levelButtonProps":{"levelUpButtonText":"Consul Home"},"menuItems":[{"title":"Documentation","fullPath":"/consul/docs","theme":"consul"},{"title":"What is Consul?","path":"intro","filePath":"../content/docs/intro/index.mdx","fullPath":"/consul/docs/intro","id":"sidebar-nav-item-0"},{"title":"Why Choose Consul?","routes":[{"title":"Overview","path":"consul-vs-other","filePath":"../content/docs/consul-vs-other/index.mdx","fullPath":"/consul/docs/consul-vs-other","id":"sidebar-nav-item-2"},{"title":"Service Meshes","path":"consul-vs-other/service-mesh-compare","filePath":"../content/docs/consul-vs-other/service-mesh-compare.mdx","fullPath":"/consul/docs/consul-vs-other/service-mesh-compare","id":"sidebar-nav-item-3"},{"title":"DNS Tools","path":"consul-vs-other/dns-tools-compare","filePath":"../content/docs/consul-vs-other/dns-tools-compare.mdx","fullPath":"/consul/docs/consul-vs-other/dns-tools-compare","id":"sidebar-nav-item-4"},{"title":"Configuration Management Tools","path":"consul-vs-other/config-management-compare","filePath":"../content/docs/consul-vs-other/config-management-compare.mdx","fullPath":"/consul/docs/consul-vs-other/config-management-compare","id":"sidebar-nav-item-5"},{"title":"API Gateways","path":"consul-vs-other/api-gateway-compare","filePath":"../content/docs/consul-vs-other/api-gateway-compare.mdx","fullPath":"/consul/docs/consul-vs-other/api-gateway-compare","id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-1"},{"title":"Core Concepts","routes":[{"title":"Service Discovery","path":"concepts/service-discovery","filePath":"../content/docs/concepts/service-discovery.mdx","fullPath":"/consul/docs/concepts/service-discovery","id":"sidebar-nav-item-8"},{"title":"Service Mesh","path":"concepts/service-mesh","filePath":"../content/docs/concepts/service-mesh.mdx","fullPath":"/consul/docs/concepts/service-mesh","id":"sidebar-nav-item-9"}],"id":"sidebar-nav-item-7"},{"title":"Get Started","routes":[{"title":"Install Consul","path":"install","filePath":"../content/docs/install/index.mdx","fullPath":"/consul/docs/install","id":"sidebar-nav-item-11"},{"title":"Learn HCP Consul","href":"https://developer.hashicorp.com/consul/tutorials/get-started-hcp","id":"sidebar-nav-item-12"},{"title":"Learn Consul on Kubernetes","href":"https://developer.hashicorp.com/consul/tutorials/get-started-kubernetes","id":"sidebar-nav-item-13"},{"title":"Learn Consul on VMs","href":"https://developer.hashicorp.com/consul/tutorials/get-started-vms","id":"sidebar-nav-item-14"},{"title":"Consul Agent","href":null,"fullPath":"/consul/docs/agent","id":"sidebar-nav-item-15","path":"/docs/agent"},{"title":"Glossary","path":"install/glossary","filePath":"../content/docs/install/glossary.mdx","fullPath":"/consul/docs/install/glossary","id":"sidebar-nav-item-16"},{"title":"Required Ports","path":"install/ports","filePath":"../content/docs/install/ports.mdx","fullPath":"/consul/docs/install/ports","id":"sidebar-nav-item-17"},{"title":"Bootstrapping a Datacenter","path":"install/bootstrapping","filePath":"../content/docs/install/bootstrapping.mdx","fullPath":"/consul/docs/install/bootstrapping","id":"sidebar-nav-item-18"},{"title":"Cloud Auto-join","path":"install/cloud-auto-join","filePath":"../content/docs/install/cloud-auto-join.mdx","fullPath":"/consul/docs/install/cloud-auto-join","id":"sidebar-nav-item-19"},{"title":"Server Performance","path":"install/performance","filePath":"../content/docs/install/performance.mdx","fullPath":"/consul/docs/install/performance","id":"sidebar-nav-item-20"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-21","path":"/docs/k8s"}],"id":"sidebar-nav-item-10"},{"title":"Architecture","routes":[{"title":"Overview","path":"architecture","filePath":"../content/docs/architecture/index.mdx","fullPath":"/consul/docs/architecture","id":"sidebar-nav-item-23"},{"title":"v1 Catalog","path":"architecture/catalog","filePath":"../content/docs/architecture/catalog.mdx","fullPath":"/consul/docs/architecture/catalog","id":"sidebar-nav-item-24"},{"title":"v2 architecture","routes":[{"title":"Overview","path":"architecture/v2","filePath":"../content/docs/architecture/v2/index.mdx","fullPath":"/consul/docs/architecture/v2","id":"sidebar-nav-item-26"},{"title":"Catalog","path":"architecture/v2/catalog","filePath":"../content/docs/architecture/v2/catalog.mdx","fullPath":"/consul/docs/architecture/v2/catalog","id":"sidebar-nav-item-27"},{"title":"Resource groups","path":"architecture/v2/groups","filePath":"../content/docs/architecture/v2/groups.mdx","fullPath":"/consul/docs/architecture/v2/groups","id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-25"},{"title":"Improving Consul Resilience","path":"architecture/improving-consul-resilience","filePath":"../content/docs/architecture/improving-consul-resilience.mdx","fullPath":"/consul/docs/architecture/improving-consul-resilience","id":"sidebar-nav-item-29"},{"title":"Anti-Entropy","path":"architecture/anti-entropy","filePath":"../content/docs/architecture/anti-entropy.mdx","fullPath":"/consul/docs/architecture/anti-entropy","id":"sidebar-nav-item-30"},{"title":"Consensus Protocol","path":"architecture/consensus","filePath":"../content/docs/architecture/consensus.mdx","fullPath":"/consul/docs/architecture/consensus","id":"sidebar-nav-item-31"},{"title":"Gossip Protocol","path":"architecture/gossip","filePath":"../content/docs/architecture/gossip.mdx","fullPath":"/consul/docs/architecture/gossip","id":"sidebar-nav-item-32"},{"title":"Jepsen Testing","path":"architecture/jepsen","filePath":"../content/docs/architecture/jepsen.mdx","fullPath":"/consul/docs/architecture/jepsen","id":"sidebar-nav-item-33"},{"title":"Network Coordinates","path":"architecture/coordinates","filePath":"../content/docs/architecture/coordinates.mdx","fullPath":"/consul/docs/architecture/coordinates","id":"sidebar-nav-item-34"},{"title":"Consul at Scale","path":"architecture/scale","filePath":"../content/docs/architecture/scale.mdx","fullPath":"/consul/docs/architecture/scale","id":"sidebar-nav-item-35"}],"id":"sidebar-nav-item-22"},{"divider":true,"id":"sidebar-nav-item-36"},{"title":"Release Notes","routes":[{"title":"Overview","path":"release-notes","filePath":"../content/docs/release-notes/index.mdx","fullPath":"/consul/docs/release-notes","id":"sidebar-nav-item-38"},{"title":"Consul","routes":[{"title":"v1.19.x","path":"release-notes/consul/v1_19_x","filePath":"../content/docs/release-notes/consul/v1_19_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_19_x","id":"sidebar-nav-item-40"},{"title":"v1.18.x","path":"release-notes/consul/v1_18_x","filePath":"../content/docs/release-notes/consul/v1_18_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_18_x","id":"sidebar-nav-item-41"},{"title":"v1.17.x","path":"release-notes/consul/v1_17_x","filePath":"../content/docs/release-notes/consul/v1_17_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_17_x","id":"sidebar-nav-item-42"},{"title":"v1.16.x","path":"release-notes/consul/v1_16_x","filePath":"../content/docs/release-notes/consul/v1_16_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_16_x","id":"sidebar-nav-item-43"},{"title":"v1.15.x","path":"release-notes/consul/v1_15_x","filePath":"../content/docs/release-notes/consul/v1_15_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_15_x","id":"sidebar-nav-item-44"},{"title":"v1.14.x","path":"release-notes/consul/v1_14_x","filePath":"../content/docs/release-notes/consul/v1_14_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_14_x","id":"sidebar-nav-item-45"},{"title":"v1.13.x","path":"release-notes/consul/v1_13_x","filePath":"../content/docs/release-notes/consul/v1_13_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_13_x","id":"sidebar-nav-item-46"},{"title":"v1.12.x","path":"release-notes/consul/v1_12_x","filePath":"../content/docs/release-notes/consul/v1_12_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_12_x","id":"sidebar-nav-item-47"},{"title":"v1.11.x","path":"release-notes/consul/v1_11_x","filePath":"../content/docs/release-notes/consul/v1_11_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_11_x","id":"sidebar-nav-item-48"},{"title":"v1.10.x","path":"release-notes/consul/v1_10_x","filePath":"../content/docs/release-notes/consul/v1_10_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_10_x","id":"sidebar-nav-item-49"},{"title":"v1.9.x","path":"release-notes/consul/v1_9_x","filePath":"../content/docs/release-notes/consul/v1_9_x.mdx","fullPath":"/consul/docs/release-notes/consul/v1_9_x","id":"sidebar-nav-item-50"}],"id":"sidebar-nav-item-39"},{"title":"Consul K8s","routes":[{"title":"v1.4.x","path":"release-notes/consul-k8s/v1_4_x","filePath":"../content/docs/release-notes/consul-k8s/v1_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_4_x","id":"sidebar-nav-item-52"},{"title":"v1.3.x","path":"release-notes/consul-k8s/v1_3_x","filePath":"../content/docs/release-notes/consul-k8s/v1_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_3_x","id":"sidebar-nav-item-53"},{"title":"v1.2.x","path":"release-notes/consul-k8s/v1_2_x","filePath":"../content/docs/release-notes/consul-k8s/v1_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_2_x","id":"sidebar-nav-item-54"},{"title":"v1.1.x","path":"release-notes/consul-k8s/v1_1_x","filePath":"../content/docs/release-notes/consul-k8s/v1_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_1_x","id":"sidebar-nav-item-55"},{"title":"v1.0.x","path":"release-notes/consul-k8s/v1_0_x","filePath":"../content/docs/release-notes/consul-k8s/v1_0_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v1_0_x","id":"sidebar-nav-item-56"},{"title":"v0.49.x","path":"release-notes/consul-k8s/v0_49_x","filePath":"../content/docs/release-notes/consul-k8s/v0_49_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_49_x","id":"sidebar-nav-item-57"},{"title":"v0.48.x","path":"release-notes/consul-k8s/v0_48_x","filePath":"../content/docs/release-notes/consul-k8s/v0_48_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_48_x","id":"sidebar-nav-item-58"},{"title":"v0.47.x","path":"release-notes/consul-k8s/v0_47_x","filePath":"../content/docs/release-notes/consul-k8s/v0_47_x.mdx","fullPath":"/consul/docs/release-notes/consul-k8s/v0_47_x","id":"sidebar-nav-item-59"}],"id":"sidebar-nav-item-51"},{"title":"API Gateway for Kubernetes","routes":[{"title":"v0.5.x","path":"release-notes/consul-api-gateway/v0_5_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_5_x","id":"sidebar-nav-item-61"},{"title":"v0.4.x","path":"release-notes/consul-api-gateway/v0_4_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_4_x","id":"sidebar-nav-item-62"},{"title":"v0.3.x","path":"release-notes/consul-api-gateway/v0_3_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_3_x","id":"sidebar-nav-item-63"},{"title":"v0.2.x","path":"release-notes/consul-api-gateway/v0_2_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_2_x","id":"sidebar-nav-item-64"},{"title":"v0.1.x","path":"release-notes/consul-api-gateway/v0_1_x","filePath":"../content/docs/release-notes/consul-api-gateway/v0_1_x.mdx","fullPath":"/consul/docs/release-notes/consul-api-gateway/v0_1_x","id":"sidebar-nav-item-65"}],"id":"sidebar-nav-item-60"},{"title":"Consul ECS","routes":[{"title":"v0.7.x","path":"release-notes/consul-ecs/v0_7_x","filePath":"../content/docs/release-notes/consul-ecs/v0_7_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_7_x","id":"sidebar-nav-item-67"},{"title":"v0.5.x","path":"release-notes/consul-ecs/v0_5_x","filePath":"../content/docs/release-notes/consul-ecs/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_5_x","id":"sidebar-nav-item-68"},{"title":"v0.4.x","path":"release-notes/consul-ecs/v0_4_x","filePath":"../content/docs/release-notes/consul-ecs/v0_4_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_4_x","id":"sidebar-nav-item-69"},{"title":"v0.3.x","path":"release-notes/consul-ecs/v0_3_x","filePath":"../content/docs/release-notes/consul-ecs/v0_3_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_3_x","id":"sidebar-nav-item-70"},{"title":"v0.2.x","path":"release-notes/consul-ecs/v0_2_x","filePath":"../content/docs/release-notes/consul-ecs/v0_2_x.mdx","fullPath":"/consul/docs/release-notes/consul-ecs/v0_2_x","id":"sidebar-nav-item-71"}],"id":"sidebar-nav-item-66"},{"title":"Consul Terraform Sync","routes":[{"title":"v0.6.x","path":"release-notes/consul-terraform-sync/v0_6_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_6_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_6_x","id":"sidebar-nav-item-73"},{"title":"v0.5.x","path":"release-notes/consul-terraform-sync/v0_5_x","filePath":"../content/docs/release-notes/consul-terraform-sync/v0_5_x.mdx","fullPath":"/consul/docs/release-notes/consul-terraform-sync/v0_5_x","id":"sidebar-nav-item-74"}],"id":"sidebar-nav-item-72"}],"id":"sidebar-nav-item-37"},{"title":"Upgrade","routes":[{"title":"Overview","path":"upgrading","filePath":"../content/docs/upgrading/index.mdx","fullPath":"/consul/docs/upgrading","id":"sidebar-nav-item-76"},{"title":"Compatibility Promise","path":"upgrading/compatibility","filePath":"../content/docs/upgrading/compatibility.mdx","fullPath":"/consul/docs/upgrading/compatibility","id":"sidebar-nav-item-77"},{"title":"Specific Version Details","path":"upgrading/upgrade-specific","filePath":"../content/docs/upgrading/upgrade-specific.mdx","fullPath":"/consul/docs/upgrading/upgrade-specific","id":"sidebar-nav-item-78"},{"title":"Upgrade Instructions","routes":[{"title":"Overview","path":"upgrading/instructions","filePath":"../content/docs/upgrading/instructions/index.mdx","fullPath":"/consul/docs/upgrading/instructions","id":"sidebar-nav-item-80"},{"title":"General Process","path":"upgrading/instructions/general-process","filePath":"../content/docs/upgrading/instructions/general-process.mdx","fullPath":"/consul/docs/upgrading/instructions/general-process","id":"sidebar-nav-item-81"},{"title":"Upgrading to Latest 1.2.x","path":"upgrading/instructions/upgrade-to-1-2-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-2-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-2-x","id":"sidebar-nav-item-82"},{"title":"Upgrading to Latest 1.6.x","path":"upgrading/instructions/upgrade-to-1-6-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-6-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-6-x","id":"sidebar-nav-item-83"},{"title":"Upgrading to Latest 1.8.x","path":"upgrading/instructions/upgrade-to-1-8-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-8-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-8-x","id":"sidebar-nav-item-84"},{"title":"Upgrading to Latest 1.10.x","path":"upgrading/instructions/upgrade-to-1-10-x","filePath":"../content/docs/upgrading/instructions/upgrade-to-1-10-x.mdx","fullPath":"/consul/docs/upgrading/instructions/upgrade-to-1-10-x","id":"sidebar-nav-item-85"}],"id":"sidebar-nav-item-79"}],"id":"sidebar-nav-item-75"},{"divider":true,"id":"sidebar-nav-item-86"},{"title":"Services","routes":[{"title":"Overview","path":"services/services","filePath":"../content/docs/services/services.mdx","fullPath":"/consul/docs/services/services","id":"sidebar-nav-item-88"},{"title":"Usage","routes":[{"title":"Define services","path":"services/usage/define-services","filePath":"../content/docs/services/usage/define-services.mdx","fullPath":"/consul/docs/services/usage/define-services","id":"sidebar-nav-item-90"},{"title":"Define health checks","path":"services/usage/checks","filePath":"../content/docs/services/usage/checks.mdx","fullPath":"/consul/docs/services/usage/checks","id":"sidebar-nav-item-91"},{"title":"Register services and health checks","path":"services/usage/register-services-checks","filePath":"../content/docs/services/usage/register-services-checks.mdx","fullPath":"/consul/docs/services/usage/register-services-checks","id":"sidebar-nav-item-92"}],"id":"sidebar-nav-item-89"},{"title":"Discover services with DNS","routes":[{"title":"Overview","path":"services/discovery/dns-overview","filePath":"../content/docs/services/discovery/dns-overview.mdx","fullPath":"/consul/docs/services/discovery/dns-overview","id":"sidebar-nav-item-94"},{"title":"Configure DNS behavior","path":"services/discovery/dns-configuration","filePath":"../content/docs/services/discovery/dns-configuration.mdx","fullPath":"/consul/docs/services/discovery/dns-configuration","id":"sidebar-nav-item-95"},{"title":"Perform static DNS lookups","path":"services/discovery/dns-static-lookups","filePath":"../content/docs/services/discovery/dns-static-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-static-lookups","id":"sidebar-nav-item-96"},{"title":"Cache DNS lookups","path":"services/discovery/dns-cache","filePath":"../content/docs/services/discovery/dns-cache.mdx","fullPath":"/consul/docs/services/discovery/dns-cache","id":"sidebar-nav-item-97"},{"title":"Enable dynamic DNS lookups","path":"services/discovery/dns-dynamic-lookups","filePath":"../content/docs/services/discovery/dns-dynamic-lookups.mdx","fullPath":"/consul/docs/services/discovery/dns-dynamic-lookups","id":"sidebar-nav-item-98"}],"id":"sidebar-nav-item-93"},{"title":"Configuration","routes":[{"title":"Overview","path":"services/configuration/services-configuration-overview","filePath":"../content/docs/services/configuration/services-configuration-overview.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-overview","id":"sidebar-nav-item-100"},{"title":"Services","path":"services/configuration/services-configuration-reference","filePath":"../content/docs/services/configuration/services-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/services-configuration-reference","id":"sidebar-nav-item-101"},{"title":"Health checks","path":"services/configuration/checks-configuration-reference","filePath":"../content/docs/services/configuration/checks-configuration-reference.mdx","fullPath":"/consul/docs/services/configuration/checks-configuration-reference","id":"sidebar-nav-item-102"},{"title":"Service defaults","href":null,"fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-103","path":"connect/config-entries/service-defaults"}],"id":"sidebar-nav-item-99"}],"id":"sidebar-nav-item-87"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"connect","filePath":"../content/docs/connect/index.mdx","fullPath":"/consul/docs/connect","id":"sidebar-nav-item-105"},{"title":"How Service Mesh Works","path":"connect/connect-internals","filePath":"../content/docs/connect/connect-internals.mdx","fullPath":"/consul/docs/connect/connect-internals","id":"sidebar-nav-item-106"},{"title":"Configuration","path":"connect/configuration","filePath":"../content/docs/connect/configuration.mdx","fullPath":"/consul/docs/connect/configuration","id":"sidebar-nav-item-107"},{"title":"Configuration entries","routes":[{"title":"Overview","path":"connect/config-entries","filePath":"../content/docs/connect/config-entries/index.mdx","fullPath":"/consul/docs/connect/config-entries","id":"sidebar-nav-item-109"},{"title":"API gateway","path":"connect/config-entries/api-gateway","filePath":"../content/docs/connect/config-entries/api-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/api-gateway","id":"sidebar-nav-item-110"},{"title":"HTTP route","path":"connect/config-entries/http-route","filePath":"../content/docs/connect/config-entries/http-route.mdx","fullPath":"/consul/docs/connect/config-entries/http-route","id":"sidebar-nav-item-111"},{"title":"TCP route","path":"connect/config-entries/tcp-route","filePath":"../content/docs/connect/config-entries/tcp-route.mdx","fullPath":"/consul/docs/connect/config-entries/tcp-route","id":"sidebar-nav-item-112"},{"title":"File system certificate","path":"connect/config-entries/file-system-certificate","filePath":"../content/docs/connect/config-entries/file-system-certificate.mdx","fullPath":"/consul/docs/connect/config-entries/file-system-certificate","id":"sidebar-nav-item-113"},{"title":"Inline certificate","path":"connect/config-entries/inline-certificate","filePath":"../content/docs/connect/config-entries/inline-certificate.mdx","fullPath":"/consul/docs/connect/config-entries/inline-certificate","id":"sidebar-nav-item-114"},{"title":"Ingress gateway","path":"connect/config-entries/ingress-gateway","filePath":"../content/docs/connect/config-entries/ingress-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-115"},{"title":"JWT Provider","path":"connect/config-entries/jwt-provider","filePath":"../content/docs/connect/config-entries/jwt-provider.mdx","fullPath":"/consul/docs/connect/config-entries/jwt-provider","id":"sidebar-nav-item-116"},{"title":"Mesh","path":"connect/config-entries/mesh","filePath":"../content/docs/connect/config-entries/mesh.mdx","fullPath":"/consul/docs/connect/config-entries/mesh","id":"sidebar-nav-item-117"},{"title":"Exported services","path":"connect/config-entries/exported-services","filePath":"../content/docs/connect/config-entries/exported-services.mdx","fullPath":"/consul/docs/connect/config-entries/exported-services","id":"sidebar-nav-item-118"},{"title":"Proxy defaults","path":"connect/config-entries/proxy-defaults","filePath":"../content/docs/connect/config-entries/proxy-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-119"},{"title":"Sameness Group","path":"connect/config-entries/sameness-group","filePath":"../content/docs/connect/config-entries/sameness-group.mdx","fullPath":"/consul/docs/connect/config-entries/sameness-group","id":"sidebar-nav-item-120"},{"title":"Service Defaults","path":"connect/config-entries/service-defaults","filePath":"../content/docs/connect/config-entries/service-defaults.mdx","fullPath":"/consul/docs/connect/config-entries/service-defaults","id":"sidebar-nav-item-121"},{"title":"Service intentions","path":"connect/config-entries/service-intentions","filePath":"../content/docs/connect/config-entries/service-intentions.mdx","fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-122"},{"title":"Service resolver","path":"connect/config-entries/service-resolver","filePath":"../content/docs/connect/config-entries/service-resolver.mdx","fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-123"},{"title":"Service router","path":"connect/config-entries/service-router","filePath":"../content/docs/connect/config-entries/service-router.mdx","fullPath":"/consul/docs/connect/config-entries/service-router","id":"sidebar-nav-item-124"},{"title":"Service splitter","path":"connect/config-entries/service-splitter","filePath":"../content/docs/connect/config-entries/service-splitter.mdx","fullPath":"/consul/docs/connect/config-entries/service-splitter","id":"sidebar-nav-item-125"},{"title":"Terminating gateway","path":"connect/config-entries/terminating-gateway","filePath":"../content/docs/connect/config-entries/terminating-gateway.mdx","fullPath":"/consul/docs/connect/config-entries/terminating-gateway","id":"sidebar-nav-item-126"},{"title":"Control plane request limit","path":"connect/config-entries/control-plane-request-limit","filePath":"../content/docs/connect/config-entries/control-plane-request-limit.mdx","fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-127"}],"id":"sidebar-nav-item-108"},{"title":"Proxies","routes":[{"title":"Overview","path":"connect/proxies","filePath":"../content/docs/connect/proxies/index.mdx","fullPath":"/consul/docs/connect/proxies","id":"sidebar-nav-item-129"},{"title":"Deploy service mesh proxies","path":"connect/proxies/deploy-service-mesh-proxies","filePath":"../content/docs/connect/proxies/deploy-service-mesh-proxies.mdx","fullPath":"/consul/docs/connect/proxies/deploy-service-mesh-proxies","id":"sidebar-nav-item-130"},{"title":"Deploy sidecar services","path":"connect/proxies/deploy-sidecar-services","filePath":"../content/docs/connect/proxies/deploy-sidecar-services.mdx","fullPath":"/consul/docs/connect/proxies/deploy-sidecar-services","id":"sidebar-nav-item-131"},{"title":"Envoy Extensions","routes":[{"title":"Overview","path":"connect/proxies/envoy-extensions","filePath":"../content/docs/connect/proxies/envoy-extensions/index.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions","id":"sidebar-nav-item-133"},{"title":"Usage","routes":[{"title":"Delegate authorization to Apigee","path":"connect/proxies/envoy-extensions/usage/apigee-ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/apigee-ext-authz","id":"sidebar-nav-item-135"},{"title":"Delegate authorization to external services","path":"connect/proxies/envoy-extensions/usage/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/ext-authz","id":"sidebar-nav-item-136"},{"title":"Run Lua scripts in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lua","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lua.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lua","id":"sidebar-nav-item-137"},{"title":"Invoke Lambda functions in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/lambda","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/lambda.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/lambda","id":"sidebar-nav-item-138"},{"title":"Send access logs to OpenTelemetry collector service","path":"connect/proxies/envoy-extensions/usage/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/otel-access-logging","id":"sidebar-nav-item-139"},{"title":"Configure Envoy proxy properties","path":"connect/proxies/envoy-extensions/usage/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/property-override","id":"sidebar-nav-item-140"},{"title":"Run WebAssembly plug-ins in Envoy proxies","path":"connect/proxies/envoy-extensions/usage/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/usage/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/usage/wasm","id":"sidebar-nav-item-141"}],"id":"sidebar-nav-item-134"},{"title":"Configuration","routes":[{"title":"External authorization","path":"connect/proxies/envoy-extensions/configuration/ext-authz","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/ext-authz.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/ext-authz","id":"sidebar-nav-item-143"},{"title":"OpenTelemetry Access Logging","path":"connect/proxies/envoy-extensions/configuration/otel-access-logging","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/otel-access-logging","id":"sidebar-nav-item-144"},{"title":"Property override","path":"connect/proxies/envoy-extensions/configuration/property-override","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/property-override.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/property-override","id":"sidebar-nav-item-145"},{"title":"WebAssembly","path":"connect/proxies/envoy-extensions/configuration/wasm","filePath":"../content/docs/connect/proxies/envoy-extensions/configuration/wasm.mdx","fullPath":"/consul/docs/connect/proxies/envoy-extensions/configuration/wasm","id":"sidebar-nav-item-146"}],"id":"sidebar-nav-item-142"}],"id":"sidebar-nav-item-132"},{"title":"Proxy integration","path":"connect/proxies/integrate","filePath":"../content/docs/connect/proxies/integrate.mdx","fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-147"},{"title":"Proxy defaults configuration reference","href":null,"fullPath":"/consul/docs/connect/config-entries/proxy-defaults","id":"sidebar-nav-item-148","path":"/consul/docs/connect/config-entries/proxy-defaults"},{"title":"Envoy proxies reference","path":"connect/proxies/envoy","filePath":"../content/docs/connect/proxies/envoy.mdx","fullPath":"/consul/docs/connect/proxies/envoy","id":"sidebar-nav-item-149"},{"title":"Built-in proxy reference","path":"connect/proxies/built-in","filePath":"../content/docs/connect/proxies/built-in.mdx","fullPath":"/consul/docs/connect/proxies/built-in","id":"sidebar-nav-item-150"},{"title":"Service mesh proxy configuration reference","path":"connect/proxies/proxy-config-reference","filePath":"../content/docs/connect/proxies/proxy-config-reference.mdx","fullPath":"/consul/docs/connect/proxies/proxy-config-reference","id":"sidebar-nav-item-151"}],"id":"sidebar-nav-item-128"},{"title":"Service intentions","routes":[{"title":"Overview","path":"connect/intentions","filePath":"../content/docs/connect/intentions/index.mdx","fullPath":"/consul/docs/connect/intentions","id":"sidebar-nav-item-153"},{"title":"Create and manage service intentions","path":"connect/intentions/create-manage-intentions","filePath":"../content/docs/connect/intentions/create-manage-intentions.mdx","fullPath":"/consul/docs/connect/intentions/create-manage-intentions","id":"sidebar-nav-item-154"},{"title":"JWT authorization for intentions","path":"connect/intentions/jwt-authorization","filePath":"../content/docs/connect/intentions/jwt-authorization.mdx","fullPath":"/consul/docs/connect/intentions/jwt-authorization","id":"sidebar-nav-item-155"},{"title":"Service intentions legacy mode","path":"connect/intentions/legacy","filePath":"../content/docs/connect/intentions/legacy.mdx","fullPath":"/consul/docs/connect/intentions/legacy","id":"sidebar-nav-item-156"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-157","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-152"},{"title":"Observability","routes":[{"title":"Overview","path":"connect/observability","filePath":"../content/docs/connect/observability/index.mdx","fullPath":"/consul/docs/connect/observability","id":"sidebar-nav-item-159"},{"title":"Access Logs","path":"connect/observability/access-logs","filePath":"../content/docs/connect/observability/access-logs.mdx","fullPath":"/consul/docs/connect/observability/access-logs","id":"sidebar-nav-item-160"},{"title":"UI Visualization","path":"connect/observability/ui-visualization","filePath":"../content/docs/connect/observability/ui-visualization.mdx","fullPath":"/consul/docs/connect/observability/ui-visualization","id":"sidebar-nav-item-161"}],"id":"sidebar-nav-item-158"},{"title":"Manage traffic","routes":[{"title":"Overview","path":"connect/manage-traffic","filePath":"../content/docs/connect/manage-traffic/index.mdx","fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-163"},{"title":"Route traffic to local upstreams","path":"connect/manage-traffic/route-to-local-upstreams","filePath":"../content/docs/connect/manage-traffic/route-to-local-upstreams.mdx","fullPath":"/consul/docs/connect/manage-traffic/route-to-local-upstreams","id":"sidebar-nav-item-164"},{"title":"Limit request rates to services","path":"connect/manage-traffic/limit-request-rates","filePath":"../content/docs/connect/manage-traffic/limit-request-rates.mdx","fullPath":"/consul/docs/connect/manage-traffic/limit-request-rates","id":"sidebar-nav-item-165"},{"title":"Fault Injection","path":"connect/manage-traffic/fault-injection","filePath":"../content/docs/connect/manage-traffic/fault-injection.mdx","fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-166"},{"title":"Failover","routes":[{"title":"Overview","path":"connect/manage-traffic/failover","filePath":"../content/docs/connect/manage-traffic/failover/index.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover","id":"sidebar-nav-item-168"},{"title":"Configure failover services for Kubernetes","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-169","path":"/docs/k8s/l7-traffic/failover-tproxy"},{"title":"Automate geo-failover with prepared queries","href":null,"fullPath":"/consul/tutorials/developer-discovery/automate-geo-failover","id":"sidebar-nav-item-170","path":"/tutorials/developer-discovery/automate-geo-failover"},{"title":"Failover with sameness groups","path":"connect/manage-traffic/failover/sameness","filePath":"../content/docs/connect/manage-traffic/failover/sameness.mdx","fullPath":"/consul/docs/connect/manage-traffic/failover/sameness","id":"sidebar-nav-item-171"},{"title":"Configuration","routes":[{"title":"Service resolver","href":null,"fullPath":"/consul/docs/connect/config-entries/service-resolver","id":"sidebar-nav-item-173","path":"/consul/docs/connect/config-entries/service-resolver"},{"title":"Service intentions","href":null,"fullPath":"/consul/docs/connect/config-entries/service-intentions","id":"sidebar-nav-item-174","path":"/consul/docs/connect/config-entries/service-intentions"}],"id":"sidebar-nav-item-172"}],"id":"sidebar-nav-item-167"},{"title":"Discovery chain reference","path":"connect/manage-traffic/discovery-chain","filePath":"../content/docs/connect/manage-traffic/discovery-chain.mdx","fullPath":"/consul/docs/connect/manage-traffic/discovery-chain","id":"sidebar-nav-item-175"}],"id":"sidebar-nav-item-162"},{"title":"Connectivity Tasks","path":"connect/connectivity-tasks","filePath":"../content/docs/connect/connectivity-tasks.mdx","fullPath":"/consul/docs/connect/connectivity-tasks","id":"sidebar-nav-item-176"},{"title":"Distributed Tracing","path":"connect/distributed-tracing","filePath":"../content/docs/connect/distributed-tracing.mdx","fullPath":"/consul/docs/connect/distributed-tracing","id":"sidebar-nav-item-177"},{"title":"Gateways","routes":[{"title":"Overview","path":"connect/gateways","filePath":"../content/docs/connect/gateways/index.mdx","fullPath":"/consul/docs/connect/gateways","id":"sidebar-nav-item-179"},{"title":"API Gateways","routes":[{"title":"Overview","path":"connect/gateways/api-gateway","filePath":"../content/docs/connect/gateways/api-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway","id":"sidebar-nav-item-181"},{"title":"Technical specifications for Kubernetes","path":"connect/gateways/api-gateway/tech-specs","filePath":"../content/docs/connect/gateways/api-gateway/tech-specs.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/tech-specs","id":"sidebar-nav-item-182"},{"title":"Install on Kubernetes","path":"connect/gateways/api-gateway/install-k8s","filePath":"../content/docs/connect/gateways/api-gateway/install-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/install-k8s","id":"sidebar-nav-item-183"},{"title":"Upgrade on Kubernetes","path":"connect/gateways/api-gateway/upgrades-k8s","filePath":"../content/docs/connect/gateways/api-gateway/upgrades-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/upgrades-k8s","id":"sidebar-nav-item-184"},{"title":"Deploy listeners","routes":[{"title":"Deploy listeners to VMs","path":"connect/gateways/api-gateway/deploy/listeners-vms","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-vms","id":"sidebar-nav-item-186"},{"title":"Deploy listeners to Kubernetes","path":"connect/gateways/api-gateway/deploy/listeners-k8s","filePath":"../content/docs/connect/gateways/api-gateway/deploy/listeners-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/deploy/listeners-k8s","id":"sidebar-nav-item-187"}],"id":"sidebar-nav-item-185"},{"title":"Define routes","routes":[{"title":"Define routes on VMs","path":"connect/gateways/api-gateway/define-routes/routes-vms","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-vms","id":"sidebar-nav-item-189"},{"title":"Define routes on Kubernetes","path":"connect/gateways/api-gateway/define-routes/routes-k8s","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/routes-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/routes-k8s","id":"sidebar-nav-item-190"},{"title":"Reroute traffic in Kubernetes","path":"connect/gateways/api-gateway/define-routes/reroute-http-requests","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/reroute-http-requests","id":"sidebar-nav-item-191"},{"title":"Route to peered services in Kubernetes","path":"connect/gateways/api-gateway/define-routes/route-to-peered-services","filePath":"../content/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/define-routes/route-to-peered-services","id":"sidebar-nav-item-192"}],"id":"sidebar-nav-item-188"},{"title":"Secure traffic","routes":[{"title":"Encrypt traffic on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/encrypt-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/encrypt-vms","id":"sidebar-nav-item-194"},{"title":"Verify incoming requests with JWTs on virtual machines","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-vms","id":"sidebar-nav-item-195"},{"title":"Verify incoming requests with JWTs on Kubernetes","path":"connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","filePath":"../content/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/secure-traffic/verify-jwts-k8s","id":"sidebar-nav-item-196"}],"id":"sidebar-nav-item-193"},{"title":"Configuration","routes":[{"title":"Overview","path":"connect/gateways/api-gateway/configuration","filePath":"../content/docs/connect/gateways/api-gateway/configuration/index.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration","id":"sidebar-nav-item-198"},{"title":"Gateway","path":"connect/gateways/api-gateway/configuration/gateway","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gateway.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gateway","id":"sidebar-nav-item-199"},{"title":"GatewayClass","path":"connect/gateways/api-gateway/configuration/gatewayclass","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclass.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclass","id":"sidebar-nav-item-200"},{"title":"GatewayClassConfig","path":"connect/gateways/api-gateway/configuration/gatewayclassconfig","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewayclassconfig","id":"sidebar-nav-item-201"},{"title":"GatewayPolicy","path":"connect/gateways/api-gateway/configuration/gatewaypolicy","filePath":"../content/docs/connect/gateways/api-gateway/configuration/gatewaypolicy.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/gatewaypolicy","id":"sidebar-nav-item-202"},{"title":"RouteAuthFilter","path":"connect/gateways/api-gateway/configuration/routeauthfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeauthfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeauthfilter","id":"sidebar-nav-item-203"},{"title":"Routes","path":"connect/gateways/api-gateway/configuration/routes","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routes.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routes","id":"sidebar-nav-item-204"},{"title":"RouteRetryFilter","path":"connect/gateways/api-gateway/configuration/routeretryfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routeretryfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routeretryfilter","id":"sidebar-nav-item-205"},{"title":"RouteTimeoutFilter","path":"connect/gateways/api-gateway/configuration/routetimeoutfilter","filePath":"../content/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/routetimeoutfilter","id":"sidebar-nav-item-206"},{"title":"MeshService","path":"connect/gateways/api-gateway/configuration/meshservice","filePath":"../content/docs/connect/gateways/api-gateway/configuration/meshservice.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/configuration/meshservice","id":"sidebar-nav-item-207"}],"id":"sidebar-nav-item-197"},{"title":"Error Messages","path":"connect/gateways/api-gateway/errors","filePath":"../content/docs/connect/gateways/api-gateway/errors.mdx","fullPath":"/consul/docs/connect/gateways/api-gateway/errors","id":"sidebar-nav-item-208"}],"id":"sidebar-nav-item-180"},{"title":"Mesh Gateways","routes":[{"title":"Overview","path":"connect/gateways/mesh-gateway","filePath":"../content/docs/connect/gateways/mesh-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway","id":"sidebar-nav-item-210"},{"title":"Enabling WAN Federation Control Plane Traffic","path":"connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/wan-federation-via-mesh-gateways","id":"sidebar-nav-item-211"},{"title":"Enabling Service-to-service Traffic Across WAN Federated Datacenters","path":"connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-wan-datacenters","id":"sidebar-nav-item-212"},{"title":"Enabling Service-to-service Traffic Across Admin Partitions","path":"connect/gateways/mesh-gateway/service-to-service-traffic-partitions","filePath":"../content/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/service-to-service-traffic-partitions","id":"sidebar-nav-item-213"},{"title":"Enabling Peering Control Plane Traffic","path":"connect/gateways/mesh-gateway/peering-via-mesh-gateways","filePath":"../content/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways.mdx","fullPath":"/consul/docs/connect/gateways/mesh-gateway/peering-via-mesh-gateways","id":"sidebar-nav-item-214"}],"id":"sidebar-nav-item-209"},{"title":"Ingress Gateways","routes":[{"title":"Overview","path":"connect/gateways/ingress-gateway","filePath":"../content/docs/connect/gateways/ingress-gateway/index.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway","id":"sidebar-nav-item-216"},{"title":"Implement an ingress gateway","path":"connect/gateways/ingress-gateway/usage","filePath":"../content/docs/connect/gateways/ingress-gateway/usage.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/usage","id":"sidebar-nav-item-217"},{"title":"Serve TLS certificates from an external service","path":"connect/gateways/ingress-gateway/tls-external-service","filePath":"../content/docs/connect/gateways/ingress-gateway/tls-external-service.mdx","fullPath":"/consul/docs/connect/gateways/ingress-gateway/tls-external-service","id":"sidebar-nav-item-218"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/ingress-gateway","id":"sidebar-nav-item-219","path":"/consul/docs/connect/config-entries/ingress-gateway"}],"id":"sidebar-nav-item-215"},{"title":"Terminating Gateways","path":"connect/gateways/terminating-gateway","filePath":"../content/docs/connect/gateways/terminating-gateway.mdx","fullPath":"/consul/docs/connect/gateways/terminating-gateway","id":"sidebar-nav-item-220"}],"id":"sidebar-nav-item-178"},{"title":"Cluster Peering","routes":[{"title":"Overview","path":"connect/cluster-peering","filePath":"../content/docs/connect/cluster-peering/index.mdx","fullPath":"/consul/docs/connect/cluster-peering","id":"sidebar-nav-item-222"},{"title":"Technical Specifications","path":"connect/cluster-peering/tech-specs","filePath":"../content/docs/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-223"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"connect/cluster-peering/usage/establish-cluster-peering","filePath":"../content/docs/connect/cluster-peering/usage/establish-cluster-peering.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/establish-cluster-peering","id":"sidebar-nav-item-225"},{"title":"Manage Cluster Peering Connections","path":"connect/cluster-peering/usage/manage-connections","filePath":"../content/docs/connect/cluster-peering/usage/manage-connections.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/manage-connections","id":"sidebar-nav-item-226"},{"title":"Manage L7 Traffic With Cluster Peering","path":"connect/cluster-peering/usage/peering-traffic-management","filePath":"../content/docs/connect/cluster-peering/usage/peering-traffic-management.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/peering-traffic-management","id":"sidebar-nav-item-227"},{"title":"Create Sameness Groups","path":"connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-228"}],"id":"sidebar-nav-item-224"}],"id":"sidebar-nav-item-221"},{"title":"Nomad","path":"connect/nomad","filePath":"../content/docs/connect/nomad.mdx","fullPath":"/consul/docs/connect/nomad","id":"sidebar-nav-item-229"},{"title":"Kubernetes","href":null,"fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-230","path":"/docs/k8s/connect"},{"title":"Native App Integration","routes":[{"title":"Overview","path":"connect/native","filePath":"../content/docs/connect/native/index.mdx","fullPath":"/consul/docs/connect/native","id":"sidebar-nav-item-232"},{"title":"Go Integration","path":"connect/native/go","filePath":"../content/docs/connect/native/go.mdx","fullPath":"/consul/docs/connect/native/go","id":"sidebar-nav-item-233"}],"id":"sidebar-nav-item-231"},{"title":"Certificate Management","routes":[{"title":"Overview","path":"connect/ca","filePath":"../content/docs/connect/ca/index.mdx","fullPath":"/consul/docs/connect/ca","id":"sidebar-nav-item-235"},{"title":"Built-In CA","path":"connect/ca/consul","filePath":"../content/docs/connect/ca/consul.mdx","fullPath":"/consul/docs/connect/ca/consul","id":"sidebar-nav-item-236"},{"title":"Vault","path":"connect/ca/vault","filePath":"../content/docs/connect/ca/vault.mdx","fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-237"},{"title":"ACM Private CA","path":"connect/ca/aws","filePath":"../content/docs/connect/ca/aws.mdx","fullPath":"/consul/docs/connect/ca/aws","id":"sidebar-nav-item-238"}],"id":"sidebar-nav-item-234"},{"title":"Develop and Debug","path":"connect/dev","filePath":"../content/docs/connect/dev.mdx","fullPath":"/consul/docs/connect/dev","id":"sidebar-nav-item-239"},{"title":"Consul Dataplane","routes":[{"title":"Overview","path":"connect/dataplane","filePath":"../content/docs/connect/dataplane/index.mdx","fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-241"},{"title":"CLI Reference","path":"connect/dataplane/consul-dataplane","filePath":"../content/docs/connect/dataplane/consul-dataplane.mdx","fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-242"},{"title":"Telemetry","path":"connect/dataplane/telemetry","filePath":"../content/docs/connect/dataplane/telemetry.mdx","fullPath":"/consul/docs/connect/dataplane/telemetry","id":"sidebar-nav-item-243"}],"id":"sidebar-nav-item-240"}],"id":"sidebar-nav-item-104"},{"title":"Dynamic App Configuration","routes":[{"title":"Consul KV","routes":[{"title":"Overview","path":"dynamic-app-config/kv","filePath":"../content/docs/dynamic-app-config/kv/index.mdx","fullPath":"/consul/docs/dynamic-app-config/kv","id":"sidebar-nav-item-246"},{"title":"Store keys and values","path":"dynamic-app-config/kv/store","filePath":"../content/docs/dynamic-app-config/kv/store.mdx","fullPath":"/consul/docs/dynamic-app-config/kv/store","id":"sidebar-nav-item-247"}],"id":"sidebar-nav-item-245"},{"title":"Sessions","path":"dynamic-app-config/sessions","filePath":"../content/docs/dynamic-app-config/sessions.mdx","fullPath":"/consul/docs/dynamic-app-config/sessions","id":"sidebar-nav-item-248"},{"title":"Watches","path":"dynamic-app-config/watches","filePath":"../content/docs/dynamic-app-config/watches.mdx","fullPath":"/consul/docs/dynamic-app-config/watches","id":"sidebar-nav-item-249"}],"id":"sidebar-nav-item-244"},{"title":"Security","routes":[{"title":"Overview","path":"security","filePath":"../content/docs/security/index.mdx","fullPath":"/consul/docs/security","id":"sidebar-nav-item-251"},{"title":"Access Control (ACLs)","routes":[{"title":"ACL System Overview","path":"security/acl","filePath":"../content/docs/security/acl/index.mdx","fullPath":"/consul/docs/security/acl","id":"sidebar-nav-item-253"},{"title":"Tokens","routes":[{"title":"Overview","path":"security/acl/tokens","filePath":"../content/docs/security/acl/tokens/index.mdx","fullPath":"/consul/docs/security/acl/tokens","id":"sidebar-nav-item-255"},{"title":"Create ACL Tokens","routes":[{"title":"Create a service token","path":"security/acl/tokens/create/create-a-service-token","filePath":"../content/docs/security/acl/tokens/create/create-a-service-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-service-token","id":"sidebar-nav-item-257"},{"title":"Create an agent token","path":"security/acl/tokens/create/create-an-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-an-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-agent-token","id":"sidebar-nav-item-258"},{"title":"Create a UI token","path":"security/acl/tokens/create/create-a-ui-token","filePath":"../content/docs/security/acl/tokens/create/create-a-ui-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-ui-token","id":"sidebar-nav-item-259"},{"title":"Create a mesh gateway token","path":"security/acl/tokens/create/create-a-mesh-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-mesh-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-mesh-gateway-token","id":"sidebar-nav-item-260"},{"title":"Create an ingress gateway token","path":"security/acl/tokens/create/create-an-ingress-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-an-ingress-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-an-ingress-gateway-token","id":"sidebar-nav-item-261"},{"title":"Create a terminating gateway token","path":"security/acl/tokens/create/create-a-terminating-gateway-token","filePath":"../content/docs/security/acl/tokens/create/create-a-terminating-gateway-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-terminating-gateway-token","id":"sidebar-nav-item-262"},{"title":"Create a DNS token","path":"security/acl/tokens/create/create-a-dns-token","filePath":"../content/docs/security/acl/tokens/create/create-a-dns-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-dns-token","id":"sidebar-nav-item-263"},{"title":"Create a replication token","path":"security/acl/tokens/create/create-a-replication-token","filePath":"../content/docs/security/acl/tokens/create/create-a-replication-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-replication-token","id":"sidebar-nav-item-264"},{"title":"Create a snapshot agent token","path":"security/acl/tokens/create/create-a-snapshot-agent-token","filePath":"../content/docs/security/acl/tokens/create/create-a-snapshot-agent-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-snapshot-agent-token","id":"sidebar-nav-item-265"},{"title":"Create a token for Vault's Consul storage backend","path":"security/acl/tokens/create/create-a-token-for-vault-consul-storage","filePath":"../content/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-token-for-vault-consul-storage","id":"sidebar-nav-item-266"},{"title":"Create a Consul ESM token","path":"security/acl/tokens/create/create-a-consul-esm-token","filePath":"../content/docs/security/acl/tokens/create/create-a-consul-esm-token.mdx","fullPath":"/consul/docs/security/acl/tokens/create/create-a-consul-esm-token","id":"sidebar-nav-item-267"}],"id":"sidebar-nav-item-256"}],"id":"sidebar-nav-item-254"},{"title":"Policies","path":"security/acl/acl-policies","filePath":"../content/docs/security/acl/acl-policies.mdx","fullPath":"/consul/docs/security/acl/acl-policies","id":"sidebar-nav-item-268"},{"title":"Roles","path":"security/acl/acl-roles","filePath":"../content/docs/security/acl/acl-roles.mdx","fullPath":"/consul/docs/security/acl/acl-roles","id":"sidebar-nav-item-269"},{"title":"Rules Reference","path":"security/acl/acl-rules","filePath":"../content/docs/security/acl/acl-rules.mdx","fullPath":"/consul/docs/security/acl/acl-rules","id":"sidebar-nav-item-270"},{"title":"ACLs in Federated Datacenters","path":"security/acl/acl-federated-datacenters","filePath":"../content/docs/security/acl/acl-federated-datacenters.mdx","fullPath":"/consul/docs/security/acl/acl-federated-datacenters","id":"sidebar-nav-item-271"},{"title":"Auth Methods","routes":[{"title":"Overview","path":"security/acl/auth-methods","filePath":"../content/docs/security/acl/auth-methods/index.mdx","fullPath":"/consul/docs/security/acl/auth-methods","id":"sidebar-nav-item-273"},{"title":"Kubernetes","path":"security/acl/auth-methods/kubernetes","filePath":"../content/docs/security/acl/auth-methods/kubernetes.mdx","fullPath":"/consul/docs/security/acl/auth-methods/kubernetes","id":"sidebar-nav-item-274"},{"title":"JWT","path":"security/acl/auth-methods/jwt","filePath":"../content/docs/security/acl/auth-methods/jwt.mdx","fullPath":"/consul/docs/security/acl/auth-methods/jwt","id":"sidebar-nav-item-275"},{"title":"OIDC","path":"security/acl/auth-methods/oidc","filePath":"../content/docs/security/acl/auth-methods/oidc.mdx","fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-276"},{"title":"AWS IAM","path":"security/acl/auth-methods/aws-iam","filePath":"../content/docs/security/acl/auth-methods/aws-iam.mdx","fullPath":"/consul/docs/security/acl/auth-methods/aws-iam","id":"sidebar-nav-item-277"}],"id":"sidebar-nav-item-272"}],"id":"sidebar-nav-item-252"},{"title":"Encryption","path":"security/encryption","filePath":"../content/docs/security/encryption.mdx","fullPath":"/consul/docs/security/encryption","id":"sidebar-nav-item-278"},{"title":"Security Models","routes":[{"title":"Overview","path":"security/security-models","filePath":"../content/docs/security/security-models/index.mdx","fullPath":"/consul/docs/security/security-models","id":"sidebar-nav-item-280"},{"title":"Core","path":"security/security-models/core","filePath":"../content/docs/security/security-models/core.mdx","fullPath":"/consul/docs/security/security-models/core","id":"sidebar-nav-item-281"},{"title":"Network Infrastructure Automation","path":"security/security-models/nia","filePath":"../content/docs/security/security-models/nia.mdx","fullPath":"/consul/docs/security/security-models/nia","id":"sidebar-nav-item-282"}],"id":"sidebar-nav-item-279"}],"id":"sidebar-nav-item-250"},{"title":"Agent","routes":[{"title":"Overview","path":"agent","filePath":"../content/docs/agent/index.mdx","fullPath":"/consul/docs/agent","id":"sidebar-nav-item-284"},{"title":"Configuration","routes":[{"title":"General","path":"agent/config","filePath":"../content/docs/agent/config/index.mdx","fullPath":"/consul/docs/agent/config","id":"sidebar-nav-item-286"},{"title":"CLI Reference","path":"agent/config/cli-flags","filePath":"../content/docs/agent/config/cli-flags.mdx","fullPath":"/consul/docs/agent/config/cli-flags","id":"sidebar-nav-item-287"},{"title":"Configuration Reference","path":"agent/config/config-files","filePath":"../content/docs/agent/config/config-files.mdx","fullPath":"/consul/docs/agent/config/config-files","id":"sidebar-nav-item-288"}],"id":"sidebar-nav-item-285"},{"title":"Limit traffic rates","routes":[{"title":"Overview","path":"agent/limits","filePath":"../content/docs/agent/limits/index.mdx","fullPath":"/consul/docs/agent/limits","id":"sidebar-nav-item-290"},{"title":"Usage","routes":[{"title":"Initialize rate limit settings","path":"agent/limits/usage/init-rate-limits","filePath":"../content/docs/agent/limits/usage/init-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/init-rate-limits","id":"sidebar-nav-item-292"},{"title":"Monitor traffic rate limits","path":"agent/limits/usage/monitor-rate-limits","filePath":"../content/docs/agent/limits/usage/monitor-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/monitor-rate-limits","id":"sidebar-nav-item-293"},{"title":"Set global traffic rate limits","path":"agent/limits/usage/set-global-traffic-rate-limits","filePath":"../content/docs/agent/limits/usage/set-global-traffic-rate-limits.mdx","fullPath":"/consul/docs/agent/limits/usage/set-global-traffic-rate-limits","id":"sidebar-nav-item-294"},{"title":"Limit traffic rates from source IP addresses","path":"agent/limits/usage/limit-request-rates-from-ips","filePath":"../content/docs/agent/limits/usage/limit-request-rates-from-ips.mdx","fullPath":"/consul/docs/agent/limits/usage/limit-request-rates-from-ips","id":"sidebar-nav-item-295"}],"id":"sidebar-nav-item-291"},{"title":"Configuration","href":null,"fullPath":"/consul/docs/connect/config-entries/control-plane-request-limit","id":"sidebar-nav-item-296","path":"/docs/connect/config-entries/control-plane-request-limit"}],"id":"sidebar-nav-item-289"},{"title":"Configuration Entries","path":"agent/config-entries","filePath":"../content/docs/agent/config-entries.mdx","fullPath":"/consul/docs/agent/config-entries","id":"sidebar-nav-item-297"},{"title":"Telemetry","path":"agent/telemetry","filePath":"../content/docs/agent/telemetry.mdx","fullPath":"/consul/docs/agent/telemetry","id":"sidebar-nav-item-298"},{"title":"Sentinel","path":"agent/sentinel","filePath":"../content/docs/agent/sentinel.mdx","fullPath":"/consul/docs/agent/sentinel","id":"sidebar-nav-item-299"},{"title":"Experimental WAL LogStore","routes":[{"title":"Overview","path":"agent/wal-logstore","filePath":"../content/docs/agent/wal-logstore/index.mdx","fullPath":"/consul/docs/agent/wal-logstore","id":"sidebar-nav-item-301"},{"title":"Enable WAL LogStore backend","path":"agent/wal-logstore/enable","filePath":"../content/docs/agent/wal-logstore/enable.mdx","fullPath":"/consul/docs/agent/wal-logstore/enable","id":"sidebar-nav-item-302"},{"title":"Monitor Raft metrics and logs for WAL","path":"agent/wal-logstore/monitoring","filePath":"../content/docs/agent/wal-logstore/monitoring.mdx","fullPath":"/consul/docs/agent/wal-logstore/monitoring","id":"sidebar-nav-item-303"},{"title":"Revert to BoltDB","path":"agent/wal-logstore/revert-to-boltdb","filePath":"../content/docs/agent/wal-logstore/revert-to-boltdb.mdx","fullPath":"/consul/docs/agent/wal-logstore/revert-to-boltdb","id":"sidebar-nav-item-304"}],"id":"sidebar-nav-item-300"}],"id":"sidebar-nav-item-283"},{"title":"Integrations","routes":[{"title":"Consul Integration Program","path":"integrate/partnerships","filePath":"../content/docs/integrate/partnerships.mdx","fullPath":"/consul/docs/integrate/partnerships","id":"sidebar-nav-item-306"},{"title":"NIA Integration Program","path":"integrate/nia-integration","filePath":"../content/docs/integrate/nia-integration.mdx","fullPath":"/consul/docs/integrate/nia-integration","id":"sidebar-nav-item-307"},{"title":"Vault Integration","href":null,"fullPath":"/consul/docs/connect/ca/vault","id":"sidebar-nav-item-308","path":"/docs/connect/ca/vault"},{"title":"Proxy Integration","href":null,"fullPath":"/consul/docs/connect/proxies/integrate","id":"sidebar-nav-item-309","path":"/docs/connect/proxies/integrate"},{"title":"Consul Tools","path":"integrate/download-tools","filePath":"../content/docs/integrate/download-tools.mdx","fullPath":"/consul/docs/integrate/download-tools","id":"sidebar-nav-item-310"}],"id":"sidebar-nav-item-305"},{"title":"Troubleshoot","routes":[{"title":"Service-to-Service Troubleshooting","path":"troubleshoot/troubleshoot-services","filePath":"../content/docs/troubleshoot/troubleshoot-services.mdx","fullPath":"/consul/docs/troubleshoot/troubleshoot-services","id":"sidebar-nav-item-312"},{"title":"Common Error Messages","path":"troubleshoot/common-errors","filePath":"../content/docs/troubleshoot/common-errors.mdx","fullPath":"/consul/docs/troubleshoot/common-errors","id":"sidebar-nav-item-313"},{"title":"FAQ","path":"troubleshoot/faq","filePath":"../content/docs/troubleshoot/faq.mdx","fullPath":"/consul/docs/troubleshoot/faq","id":"sidebar-nav-item-314"}],"id":"sidebar-nav-item-311"},{"divider":true,"id":"sidebar-nav-item-315"},{"title":"Kubernetes","routes":[{"title":"Overview","path":"k8s","filePath":"../content/docs/k8s/index.mdx","fullPath":"/consul/docs/k8s","id":"sidebar-nav-item-317"},{"title":"Architecture","path":"k8s/architecture","filePath":"../content/docs/k8s/architecture.mdx","fullPath":"/consul/docs/k8s/architecture","id":"sidebar-nav-item-318"},{"title":"Installation","routes":[{"title":"Install from Consul K8s CLI","path":"k8s/installation/install-cli","filePath":"../content/docs/k8s/installation/install-cli.mdx","fullPath":"/consul/docs/k8s/installation/install-cli","id":"sidebar-nav-item-320"},{"title":"Install from Helm Chart","path":"k8s/installation/install","filePath":"../content/docs/k8s/installation/install.mdx","fullPath":"/consul/docs/k8s/installation/install","id":"sidebar-nav-item-321"}],"id":"sidebar-nav-item-319"},{"title":"Deployment Configurations","routes":[{"title":"Consul Clients Outside Kubernetes","path":"k8s/deployment-configurations/clients-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/clients-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/clients-outside-kubernetes","id":"sidebar-nav-item-323"},{"title":"Consul Servers Outside Kubernetes","path":"k8s/deployment-configurations/servers-outside-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/servers-outside-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/servers-outside-kubernetes","id":"sidebar-nav-item-324"},{"title":"Single Consul Datacenter in Multiple Kubernetes Clusters","path":"k8s/deployment-configurations/single-dc-multi-k8s","filePath":"../content/docs/k8s/deployment-configurations/single-dc-multi-k8s.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/single-dc-multi-k8s","id":"sidebar-nav-item-325"},{"title":"Consul Enterprise","path":"k8s/deployment-configurations/consul-enterprise","filePath":"../content/docs/k8s/deployment-configurations/consul-enterprise.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/consul-enterprise","id":"sidebar-nav-item-326"},{"title":"Multi-Cluster Federation","routes":[{"title":"Overview","path":"k8s/deployment-configurations/multi-cluster","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster","id":"sidebar-nav-item-328"},{"title":"Federation Between Kubernetes Clusters","path":"k8s/deployment-configurations/multi-cluster/kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/kubernetes","id":"sidebar-nav-item-329"},{"title":"Federation Between VMs and Kubernetes","path":"k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","filePath":"../content/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/multi-cluster/vms-and-kubernetes","id":"sidebar-nav-item-330"}],"id":"sidebar-nav-item-327"},{"title":"Vault as Secrets Backend","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault","filePath":"../content/docs/k8s/deployment-configurations/vault/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault","id":"sidebar-nav-item-332"},{"title":"Systems Integration","path":"k8s/deployment-configurations/vault/systems-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/systems-integration.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/systems-integration","id":"sidebar-nav-item-333"},{"title":"Data Integration","routes":[{"title":"Overview","path":"k8s/deployment-configurations/vault/data-integration","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/index.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration","id":"sidebar-nav-item-335"},{"title":"Bootstrap Token","path":"k8s/deployment-configurations/vault/data-integration/bootstrap-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/bootstrap-token","id":"sidebar-nav-item-336"},{"title":"Enterprise License","path":"k8s/deployment-configurations/vault/data-integration/enterprise-license","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/enterprise-license","id":"sidebar-nav-item-337"},{"title":"Gossip Encryption Key","path":"k8s/deployment-configurations/vault/data-integration/gossip","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/gossip.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/gossip","id":"sidebar-nav-item-338"},{"title":"Partition Token","path":"k8s/deployment-configurations/vault/data-integration/partition-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/partition-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/partition-token","id":"sidebar-nav-item-339"},{"title":"Replication Token","path":"k8s/deployment-configurations/vault/data-integration/replication-token","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/replication-token.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/replication-token","id":"sidebar-nav-item-340"},{"title":"Server TLS","path":"k8s/deployment-configurations/vault/data-integration/server-tls","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/server-tls.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/server-tls","id":"sidebar-nav-item-341"},{"title":"Service Mesh Certificates","path":"k8s/deployment-configurations/vault/data-integration/connect-ca","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/connect-ca.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/connect-ca","id":"sidebar-nav-item-342"},{"title":"Snapshot Agent Config","path":"k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/snapshot-agent-config","id":"sidebar-nav-item-343"},{"title":"Webhook Certificates","path":"k8s/deployment-configurations/vault/data-integration/webhook-certs","filePath":"../content/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/data-integration/webhook-certs","id":"sidebar-nav-item-344"}],"id":"sidebar-nav-item-334"},{"title":"WAN Federation","path":"k8s/deployment-configurations/vault/wan-federation","filePath":"../content/docs/k8s/deployment-configurations/vault/wan-federation.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/vault/wan-federation","id":"sidebar-nav-item-345"}],"id":"sidebar-nav-item-331"},{"title":"Datadog metrics","path":"k8s/deployment-configurations/datadog","filePath":"../content/docs/k8s/deployment-configurations/datadog.mdx","fullPath":"/consul/docs/k8s/deployment-configurations/datadog","id":"sidebar-nav-item-346"}],"id":"sidebar-nav-item-322"},{"title":"Platform Guides","routes":[{"title":"Minikube","href":"/consul/tutorials/kubernetes/kubernetes-minikube?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=mk","id":"sidebar-nav-item-348"},{"title":"Kind","href":"/consul/tutorials/kubernetes/kubernetes-kind?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=kind","id":"sidebar-nav-item-349"},{"title":"AKS (Azure)","href":"/consul/tutorials/kubernetes/kubernetes-aks-azure?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=aks","id":"sidebar-nav-item-350"},{"title":"EKS (AWS)","href":"/consul/tutorials/kubernetes/kubernetes-eks-aws?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=eks","id":"sidebar-nav-item-351"},{"title":"GKE (Google Cloud)","href":"/consul/tutorials/kubernetes/kubernetes-gke-google?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=gke","id":"sidebar-nav-item-352"},{"title":"Red Hat OpenShift","href":"/consul/tutorials/kubernetes/kubernetes-openshift-red-hat?utm_source=consul.io&utm_medium=docs&utm_content=k8s&utm_term=openshift","id":"sidebar-nav-item-353"},{"title":"Self Hosted Kubernetes","path":"k8s/platforms/self-hosted-kubernetes","filePath":"../content/docs/k8s/platforms/self-hosted-kubernetes.mdx","fullPath":"/consul/docs/k8s/platforms/self-hosted-kubernetes","id":"sidebar-nav-item-354"}],"id":"sidebar-nav-item-347"},{"title":"Service Mesh","routes":[{"title":"Overview","path":"k8s/connect","filePath":"../content/docs/k8s/connect/index.mdx","fullPath":"/consul/docs/k8s/connect","id":"sidebar-nav-item-356"},{"title":"Admin Partitions","href":null,"fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-357","path":"/docs/enterprise/admin-partitions"},{"title":"Cluster Peering","routes":[{"title":"Technical Specifications","path":"k8s/connect/cluster-peering/tech-specs","filePath":"../content/docs/k8s/connect/cluster-peering/tech-specs.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/tech-specs","id":"sidebar-nav-item-359"},{"title":"Usage","routes":[{"title":"Establish Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/establish-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/establish-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/establish-peering","id":"sidebar-nav-item-361"},{"title":"Manage Cluster Peering Connections","path":"k8s/connect/cluster-peering/usage/manage-peering","filePath":"../content/docs/k8s/connect/cluster-peering/usage/manage-peering.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/manage-peering","id":"sidebar-nav-item-362"},{"title":"Manage L7 Traffic With Cluster Peering","path":"k8s/connect/cluster-peering/usage/l7-traffic","filePath":"../content/docs/k8s/connect/cluster-peering/usage/l7-traffic.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/l7-traffic","id":"sidebar-nav-item-363"},{"title":"Create Sameness Groups","path":"k8s/connect/cluster-peering/usage/create-sameness-groups","filePath":"../content/docs/k8s/connect/cluster-peering/usage/create-sameness-groups.mdx","fullPath":"/consul/docs/k8s/connect/cluster-peering/usage/create-sameness-groups","id":"sidebar-nav-item-364"}],"id":"sidebar-nav-item-360"}],"id":"sidebar-nav-item-358"},{"title":"Transparent Proxy","routes":[{"title":"Overview","path":"k8s/connect/transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/index.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy","id":"sidebar-nav-item-366"},{"title":"Enable transparent proxy","path":"k8s/connect/transparent-proxy/enable-transparent-proxy","filePath":"../content/docs/k8s/connect/transparent-proxy/enable-transparent-proxy.mdx","fullPath":"/consul/docs/k8s/connect/transparent-proxy/enable-transparent-proxy","id":"sidebar-nav-item-367"},{"title":"Route traffic to virtual services","href":null,"fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-368","path":"/docs/k8s/l7-traffic/route-to-virtual-services"}],"id":"sidebar-nav-item-365"},{"title":"Onboarding services in transparent proxy mode","path":"k8s/connect/onboarding-tproxy-mode","filePath":"../content/docs/k8s/connect/onboarding-tproxy-mode.mdx","fullPath":"/consul/docs/k8s/connect/onboarding-tproxy-mode","id":"sidebar-nav-item-369"},{"title":"Ingress Gateways","path":"k8s/connect/ingress-gateways","filePath":"../content/docs/k8s/connect/ingress-gateways.mdx","fullPath":"/consul/docs/k8s/connect/ingress-gateways","id":"sidebar-nav-item-370"},{"title":"Terminating Gateways","path":"k8s/connect/terminating-gateways","filePath":"../content/docs/k8s/connect/terminating-gateways.mdx","fullPath":"/consul/docs/k8s/connect/terminating-gateways","id":"sidebar-nav-item-371"},{"title":"Ingress Controllers","path":"k8s/connect/ingress-controllers","filePath":"../content/docs/k8s/connect/ingress-controllers.mdx","fullPath":"/consul/docs/k8s/connect/ingress-controllers","id":"sidebar-nav-item-372"},{"title":"Configuring a Connect CA Provider","path":"k8s/connect/connect-ca-provider","filePath":"../content/docs/k8s/connect/connect-ca-provider.mdx","fullPath":"/consul/docs/k8s/connect/connect-ca-provider","id":"sidebar-nav-item-373"},{"title":"Health Checks","path":"k8s/connect/health","filePath":"../content/docs/k8s/connect/health.mdx","fullPath":"/consul/docs/k8s/connect/health","id":"sidebar-nav-item-374"},{"title":"Observability","routes":[{"title":"Metrics","path":"k8s/connect/observability/metrics","filePath":"../content/docs/k8s/connect/observability/metrics.mdx","fullPath":"/consul/docs/k8s/connect/observability/metrics","id":"sidebar-nav-item-376"}],"id":"sidebar-nav-item-375"}],"id":"sidebar-nav-item-355"},{"title":"V2 Catalog API","routes":[{"title":"Overview","path":"k8s/multiport","filePath":"../content/docs/k8s/multiport/index.mdx","fullPath":"/consul/docs/k8s/multiport","id":"sidebar-nav-item-378"},{"title":"Configure multi-port services","path":"k8s/multiport/configure","filePath":"../content/docs/k8s/multiport/configure.mdx","fullPath":"/consul/docs/k8s/multiport/configure","id":"sidebar-nav-item-379"},{"title":"Split TCP traffic between multiple ports","path":"k8s/multiport/traffic-split","filePath":"../content/docs/k8s/multiport/traffic-split.mdx","fullPath":"/consul/docs/k8s/multiport/traffic-split","id":"sidebar-nav-item-380"},{"title":"Reference","routes":[{"title":"GRPCRoute resource","path":"k8s/multiport/reference/grpcroute","filePath":"../content/docs/k8s/multiport/reference/grpcroute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/grpcroute","id":"sidebar-nav-item-382"},{"title":"HTTPRoute resource","path":"k8s/multiport/reference/httproute","filePath":"../content/docs/k8s/multiport/reference/httproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/httproute","id":"sidebar-nav-item-383"},{"title":"ProxyConfiguration resource","path":"k8s/multiport/reference/proxyconfiguration","filePath":"../content/docs/k8s/multiport/reference/proxyconfiguration.mdx","fullPath":"/consul/docs/k8s/multiport/reference/proxyconfiguration","id":"sidebar-nav-item-384"},{"title":"TCPRoute resource","path":"k8s/multiport/reference/tcproute","filePath":"../content/docs/k8s/multiport/reference/tcproute.mdx","fullPath":"/consul/docs/k8s/multiport/reference/tcproute","id":"sidebar-nav-item-385"},{"title":"TrafficPermissions resource","path":"k8s/multiport/reference/trafficpermissions","filePath":"../content/docs/k8s/multiport/reference/trafficpermissions.mdx","fullPath":"/consul/docs/k8s/multiport/reference/trafficpermissions","id":"sidebar-nav-item-386"}],"id":"sidebar-nav-item-381"}],"id":"sidebar-nav-item-377"},{"title":"L7 traffic management","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/manage-traffic","id":"sidebar-nav-item-388","path":"/docs/connect/manage-traffic"},{"title":"Configure failover services","path":"k8s/l7-traffic/failover-tproxy","filePath":"../content/docs/k8s/l7-traffic/failover-tproxy.mdx","fullPath":"/consul/docs/k8s/l7-traffic/failover-tproxy","id":"sidebar-nav-item-389"},{"title":"Route traffic to virtual services","path":"k8s/l7-traffic/route-to-virtual-services","filePath":"../content/docs/k8s/l7-traffic/route-to-virtual-services.mdx","fullPath":"/consul/docs/k8s/l7-traffic/route-to-virtual-services","id":"sidebar-nav-item-390"}],"id":"sidebar-nav-item-387"},{"title":"Service Sync","path":"k8s/service-sync","filePath":"../content/docs/k8s/service-sync.mdx","fullPath":"/consul/docs/k8s/service-sync","id":"sidebar-nav-item-391"},{"title":"Custom Resource Definitions","routes":[{"title":"Overview","path":"k8s/crds","filePath":"../content/docs/k8s/crds/index.mdx","fullPath":"/consul/docs/k8s/crds","id":"sidebar-nav-item-393"},{"title":"Upgrade An Existing Cluster to CRDs","path":"k8s/crds/upgrade-to-crds","filePath":"../content/docs/k8s/crds/upgrade-to-crds.mdx","fullPath":"/consul/docs/k8s/crds/upgrade-to-crds","id":"sidebar-nav-item-394"}],"id":"sidebar-nav-item-392"},{"title":"Annotations and Labels","path":"k8s/annotations-and-labels","filePath":"../content/docs/k8s/annotations-and-labels.mdx","fullPath":"/consul/docs/k8s/annotations-and-labels","id":"sidebar-nav-item-395"},{"title":"Consul DNS","path":"k8s/dns","filePath":"../content/docs/k8s/dns.mdx","fullPath":"/consul/docs/k8s/dns","id":"sidebar-nav-item-396"},{"title":"Upgrade","routes":[{"title":"Upgrading Consul on Kubernetes","path":"k8s/upgrade","filePath":"../content/docs/k8s/upgrade/index.mdx","fullPath":"/consul/docs/k8s/upgrade","id":"sidebar-nav-item-398"},{"title":"Upgrading Consul K8s CLI","path":"k8s/upgrade/upgrade-cli","filePath":"../content/docs/k8s/upgrade/upgrade-cli.mdx","fullPath":"/consul/docs/k8s/upgrade/upgrade-cli","id":"sidebar-nav-item-399"}],"id":"sidebar-nav-item-397"},{"title":"Consul Dataplane","routes":[{"title":"Overview","href":null,"fullPath":"/consul/docs/connect/dataplane","id":"sidebar-nav-item-401","path":"/docs/connect/dataplane"},{"title":"CLI Reference","href":null,"fullPath":"/consul/docs/connect/dataplane/consul-dataplane","id":"sidebar-nav-item-402","path":"/docs/connect/dataplane/consul-dataplane"}],"id":"sidebar-nav-item-400"},{"title":"Operations","routes":[{"title":"Uninstall","path":"k8s/operations/uninstall","filePath":"../content/docs/k8s/operations/uninstall.mdx","fullPath":"/consul/docs/k8s/operations/uninstall","id":"sidebar-nav-item-404"},{"title":"Certificate Rotation","path":"k8s/operations/certificate-rotation","filePath":"../content/docs/k8s/operations/certificate-rotation.mdx","fullPath":"/consul/docs/k8s/operations/certificate-rotation","id":"sidebar-nav-item-405"},{"title":"Gossip Encryption Key Rotation","path":"k8s/operations/gossip-encryption-key-rotation","filePath":"../content/docs/k8s/operations/gossip-encryption-key-rotation.mdx","fullPath":"/consul/docs/k8s/operations/gossip-encryption-key-rotation","id":"sidebar-nav-item-406"},{"title":"Configure TLS on an Existing Cluster","path":"k8s/operations/tls-on-existing-cluster","filePath":"../content/docs/k8s/operations/tls-on-existing-cluster.mdx","fullPath":"/consul/docs/k8s/operations/tls-on-existing-cluster","id":"sidebar-nav-item-407"}],"id":"sidebar-nav-item-403"},{"title":"Troubleshoot","routes":[{"title":"Common Error Messages","href":null,"fullPath":"/consul/docs/troubleshoot/common-errors#common-errors-on-kubernetes","id":"sidebar-nav-item-409","path":"/docs/troubleshoot/common-errors#common-errors-on-kubernetes"},{"title":"FAQ","href":null,"fullPath":"/consul/docs/troubleshoot/faq#consul-on-kubernetes","id":"sidebar-nav-item-410","path":"/docs/troubleshoot/faq#consul-on-kubernetes"}],"id":"sidebar-nav-item-408"},{"title":"Compatibility Matrix","path":"k8s/compatibility","filePath":"../content/docs/k8s/compatibility.mdx","fullPath":"/consul/docs/k8s/compatibility","id":"sidebar-nav-item-411"},{"title":"Helm Chart Configuration","path":"k8s/helm","filePath":"../content/docs/k8s/helm.mdx","fullPath":"/consul/docs/k8s/helm","id":"sidebar-nav-item-412"},{"title":"Consul K8s CLI Reference","path":"k8s/k8s-cli","filePath":"../content/docs/k8s/k8s-cli.mdx","fullPath":"/consul/docs/k8s/k8s-cli","id":"sidebar-nav-item-413"}],"id":"sidebar-nav-item-316"},{"title":"Nomad","path":"nomad","filePath":"../content/docs/nomad/index.mdx","fullPath":"/consul/docs/nomad","id":"sidebar-nav-item-414"},{"title":"AWS ECS","routes":[{"title":"Overview","path":"ecs","filePath":"../content/docs/ecs/index.mdx","fullPath":"/consul/docs/ecs","id":"sidebar-nav-item-416"},{"title":"Architecture","path":"ecs/architecture","filePath":"../content/docs/ecs/architecture.mdx","fullPath":"/consul/docs/ecs/architecture","id":"sidebar-nav-item-417"},{"title":"Technical specifications","path":"ecs/tech-specs","filePath":"../content/docs/ecs/tech-specs.mdx","fullPath":"/consul/docs/ecs/tech-specs","id":"sidebar-nav-item-418"},{"title":"Deploy Consul to ECS","routes":[{"title":"Deploy using the Terraform module","path":"ecs/deploy/terraform","filePath":"../content/docs/ecs/deploy/terraform.mdx","fullPath":"/consul/docs/ecs/deploy/terraform","id":"sidebar-nav-item-420"},{"title":"Deploy manually","path":"ecs/deploy/manual","filePath":"../content/docs/ecs/deploy/manual.mdx","fullPath":"/consul/docs/ecs/deploy/manual","id":"sidebar-nav-item-421"},{"title":"Configure the ECS task bind address","path":"ecs/deploy/bind-addresses","filePath":"../content/docs/ecs/deploy/bind-addresses.mdx","fullPath":"/consul/docs/ecs/deploy/bind-addresses","id":"sidebar-nav-item-422"},{"title":"Configure routes between ECS tasks","path":"ecs/deploy/configure-routes","filePath":"../content/docs/ecs/deploy/configure-routes.mdx","fullPath":"/consul/docs/ecs/deploy/configure-routes","id":"sidebar-nav-item-423"},{"title":"Migrate existing tasks","path":"ecs/deploy/migrate-existing-tasks","filePath":"../content/docs/ecs/deploy/migrate-existing-tasks.mdx","fullPath":"/consul/docs/ecs/deploy/migrate-existing-tasks","id":"sidebar-nav-item-424"}],"id":"sidebar-nav-item-419"},{"title":"Upgrade to Consul dataplane architecture","path":"ecs/upgrade-to-dataplanes","filePath":"../content/docs/ecs/upgrade-to-dataplanes.mdx","fullPath":"/consul/docs/ecs/upgrade-to-dataplanes","id":"sidebar-nav-item-425"},{"title":"Consul Enterprise","path":"ecs/enterprise","filePath":"../content/docs/ecs/enterprise.mdx","fullPath":"/consul/docs/ecs/enterprise","id":"sidebar-nav-item-426"},{"title":"Reference","routes":[{"title":"ECS configuration reference","path":"ecs/reference/configuration-reference","filePath":"../content/docs/ecs/reference/configuration-reference.mdx","fullPath":"/consul/docs/ecs/reference/configuration-reference","id":"sidebar-nav-item-428"},{"title":"ECS compatibility matrix","path":"ecs/reference/compatibility","filePath":"../content/docs/ecs/reference/compatibility.mdx","fullPath":"/consul/docs/ecs/reference/compatibility","id":"sidebar-nav-item-429"},{"title":"ECS Consul server JSON schema","path":"ecs/reference/consul-server-json","filePath":"../content/docs/ecs/reference/consul-server-json.mdx","fullPath":"/consul/docs/ecs/reference/consul-server-json","id":"sidebar-nav-item-430"}],"id":"sidebar-nav-item-427"}],"id":"sidebar-nav-item-415"},{"title":"AWS Lambda","routes":[{"title":"Overview","path":"lambda","filePath":"../content/docs/lambda/index.mdx","fullPath":"/consul/docs/lambda","id":"sidebar-nav-item-432"},{"title":"Register Lambda Functions","routes":[{"title":"Requirements","path":"lambda/registration","filePath":"../content/docs/lambda/registration/index.mdx","fullPath":"/consul/docs/lambda/registration","id":"sidebar-nav-item-434"},{"title":"Automate Registration","path":"lambda/registration/automate","filePath":"../content/docs/lambda/registration/automate.mdx","fullPath":"/consul/docs/lambda/registration/automate","id":"sidebar-nav-item-435"},{"title":"Manual Registration","path":"lambda/registration/manual","filePath":"../content/docs/lambda/registration/manual.mdx","fullPath":"/consul/docs/lambda/registration/manual","id":"sidebar-nav-item-436"}],"id":"sidebar-nav-item-433"},{"title":"Invoke Lambda Functions from Services","path":"lambda/invocation","filePath":"../content/docs/lambda/invocation.mdx","fullPath":"/consul/docs/lambda/invocation","id":"sidebar-nav-item-437"},{"title":"Invoke Services from Lambda Functions","path":"lambda/invoke-from-lambda","badge":{"text":"BETA","type":"outlined","color":"neutral"},"filePath":"../content/docs/lambda/invoke-from-lambda.mdx","fullPath":"/consul/docs/lambda/invoke-from-lambda","id":"sidebar-nav-item-438"}],"id":"sidebar-nav-item-431"},{"divider":true,"id":"sidebar-nav-item-439"},{"title":"HCP Consul","href":"/hcp/docs/consul","id":"sidebar-nav-item-440"},{"title":"Consul Enterprise","routes":[{"title":"Overview","path":"enterprise","filePath":"../content/docs/enterprise/index.mdx","fullPath":"/consul/docs/enterprise","id":"sidebar-nav-item-442"},{"title":"Long Term Support (LTS)","path":"enterprise/long-term-support","filePath":"../content/docs/enterprise/long-term-support.mdx","fullPath":"/consul/docs/enterprise/long-term-support","id":"sidebar-nav-item-443"},{"title":"Admin Partitions","path":"enterprise/admin-partitions","filePath":"../content/docs/enterprise/admin-partitions.mdx","fullPath":"/consul/docs/enterprise/admin-partitions","id":"sidebar-nav-item-444"},{"title":"Audit Logging","path":"enterprise/audit-logging","filePath":"../content/docs/enterprise/audit-logging.mdx","fullPath":"/consul/docs/enterprise/audit-logging","id":"sidebar-nav-item-445"},{"title":"Automated Backups","path":"enterprise/backups","filePath":"../content/docs/enterprise/backups.mdx","fullPath":"/consul/docs/enterprise/backups","id":"sidebar-nav-item-446"},{"title":"Automated Upgrades","path":"enterprise/upgrades","filePath":"../content/docs/enterprise/upgrades.mdx","fullPath":"/consul/docs/enterprise/upgrades","id":"sidebar-nav-item-447"},{"title":"Enhanced Read Scalability","path":"enterprise/read-scale","filePath":"../content/docs/enterprise/read-scale.mdx","fullPath":"/consul/docs/enterprise/read-scale","id":"sidebar-nav-item-448"},{"title":"Fault injection","href":null,"fullPath":"/consul/docs/connect/manage-traffic/fault-injection","id":"sidebar-nav-item-449","path":"/docs/connect/manage-traffic/fault-injection"},{"title":"FIPS","path":"enterprise/fips","filePath":"../content/docs/enterprise/fips.mdx","fullPath":"/consul/docs/enterprise/fips","id":"sidebar-nav-item-450"},{"title":"Single sign-on - OIDC","href":null,"fullPath":"/consul/docs/security/acl/auth-methods/oidc","id":"sidebar-nav-item-451","path":"/docs/security/acl/auth-methods/oidc"},{"title":"Redundancy Zones","path":"enterprise/redundancy","filePath":"../content/docs/enterprise/redundancy.mdx","fullPath":"/consul/docs/enterprise/redundancy","id":"sidebar-nav-item-452"},{"title":"Advanced Federation","path":"enterprise/federation","filePath":"../content/docs/enterprise/federation.mdx","fullPath":"/consul/docs/enterprise/federation","id":"sidebar-nav-item-453"},{"title":"Network Segments","routes":[{"title":"Network Segments Overview","path":"enterprise/network-segments/network-segments-overview","filePath":"../content/docs/enterprise/network-segments/network-segments-overview.mdx","fullPath":"/consul/docs/enterprise/network-segments/network-segments-overview","id":"sidebar-nav-item-455"},{"title":"Create a Network Segment","path":"enterprise/network-segments/create-network-segment","filePath":"../content/docs/enterprise/network-segments/create-network-segment.mdx","fullPath":"/consul/docs/enterprise/network-segments/create-network-segment","id":"sidebar-nav-item-456"}],"id":"sidebar-nav-item-454"},{"title":"Namespaces","path":"enterprise/namespaces","filePath":"../content/docs/enterprise/namespaces.mdx","fullPath":"/consul/docs/enterprise/namespaces","id":"sidebar-nav-item-457"},{"title":"NIA with TFE","href":null,"fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-458","path":"/docs/nia/enterprise"},{"title":"License","routes":[{"title":"Overview","path":"enterprise/license/overview","filePath":"../content/docs/enterprise/license/overview.mdx","fullPath":"/consul/docs/enterprise/license/overview","id":"sidebar-nav-item-460"},{"title":"Automated entitlement utilization reporting","path":"enterprise/license/utilization-reporting","filePath":"../content/docs/enterprise/license/utilization-reporting.mdx","fullPath":"/consul/docs/enterprise/license/utilization-reporting","id":"sidebar-nav-item-461"},{"title":"FAQ","path":"enterprise/license/faq","filePath":"../content/docs/enterprise/license/faq.mdx","fullPath":"/consul/docs/enterprise/license/faq","id":"sidebar-nav-item-462"}],"id":"sidebar-nav-item-459"},{"title":"Enterprise to CE downgrade","path":"enterprise/ent-to-ce-downgrades","filePath":"../content/docs/enterprise/ent-to-ce-downgrades.mdx","fullPath":"/consul/docs/enterprise/ent-to-ce-downgrades","id":"sidebar-nav-item-463"}],"id":"sidebar-nav-item-441"},{"divider":true,"id":"sidebar-nav-item-464"},{"title":"Network Infrastructure Automation","routes":[{"title":"Overview","path":"nia","filePath":"../content/docs/nia/index.mdx","fullPath":"/consul/docs/nia","id":"sidebar-nav-item-466"},{"title":"Get Started","routes":[{"title":"Installation","path":"nia/installation/install","filePath":"../content/docs/nia/installation/install.mdx","fullPath":"/consul/docs/nia/installation/install","id":"sidebar-nav-item-468"},{"title":"Configuration","path":"nia/installation/configure","filePath":"../content/docs/nia/installation/configure.mdx","fullPath":"/consul/docs/nia/installation/configure","id":"sidebar-nav-item-469"}],"id":"sidebar-nav-item-467"},{"title":"Usage","routes":[{"title":"Requirements","path":"nia/usage/requirements","filePath":"../content/docs/nia/usage/requirements.mdx","fullPath":"/consul/docs/nia/usage/requirements","id":"sidebar-nav-item-471"},{"title":"Run Consul-Terraform-Sync","path":"nia/usage/run","filePath":"../content/docs/nia/usage/run.mdx","fullPath":"/consul/docs/nia/usage/run","id":"sidebar-nav-item-472"},{"title":"Run Consul-Terraform-Sync with High Availability","path":"nia/usage/run-ha","filePath":"../content/docs/nia/usage/run-ha.mdx","fullPath":"/consul/docs/nia/usage/run-ha","id":"sidebar-nav-item-473"},{"title":"Error Messages","path":"nia/usage/errors-ref","filePath":"../content/docs/nia/usage/errors-ref.mdx","fullPath":"/consul/docs/nia/usage/errors-ref","id":"sidebar-nav-item-474"}],"id":"sidebar-nav-item-470"},{"title":"Architecture","path":"nia/architecture","filePath":"../content/docs/nia/architecture.mdx","fullPath":"/consul/docs/nia/architecture","id":"sidebar-nav-item-475"},{"title":"API","routes":[{"title":"Overview","path":"nia/api","filePath":"../content/docs/nia/api/index.mdx","fullPath":"/consul/docs/nia/api","id":"sidebar-nav-item-477"},{"title":"Status","path":"nia/api/status","filePath":"../content/docs/nia/api/status.mdx","fullPath":"/consul/docs/nia/api/status","id":"sidebar-nav-item-478"},{"title":"Tasks","path":"nia/api/tasks","filePath":"../content/docs/nia/api/tasks.mdx","fullPath":"/consul/docs/nia/api/tasks","id":"sidebar-nav-item-479"},{"title":"Health","path":"nia/api/health","filePath":"../content/docs/nia/api/health.mdx","fullPath":"/consul/docs/nia/api/health","id":"sidebar-nav-item-480"}],"id":"sidebar-nav-item-476"},{"title":"CLI","routes":[{"title":"Overview","path":"nia/cli","filePath":"../content/docs/nia/cli/index.mdx","fullPath":"/consul/docs/nia/cli","id":"sidebar-nav-item-482"},{"title":"task","path":"nia/cli/task","filePath":"../content/docs/nia/cli/task.mdx","fullPath":"/consul/docs/nia/cli/task","id":"sidebar-nav-item-483"},{"title":"start","path":"nia/cli/start","filePath":"../content/docs/nia/cli/start.mdx","fullPath":"/consul/docs/nia/cli/start","id":"sidebar-nav-item-484"}],"id":"sidebar-nav-item-481"},{"title":"Configuration","path":"nia/configuration","filePath":"../content/docs/nia/configuration.mdx","fullPath":"/consul/docs/nia/configuration","id":"sidebar-nav-item-485"},{"title":"Tasks","path":"nia/tasks","filePath":"../content/docs/nia/tasks.mdx","fullPath":"/consul/docs/nia/tasks","id":"sidebar-nav-item-486"},{"title":"Terraform Modules","path":"nia/terraform-modules","filePath":"../content/docs/nia/terraform-modules.mdx","fullPath":"/consul/docs/nia/terraform-modules","id":"sidebar-nav-item-487"},{"title":"Enterprise","routes":[{"title":"Overview","path":"nia/enterprise","filePath":"../content/docs/nia/enterprise/index.mdx","fullPath":"/consul/docs/nia/enterprise","id":"sidebar-nav-item-489"},{"title":"License","path":"nia/enterprise/license","filePath":"../content/docs/nia/enterprise/license.mdx","fullPath":"/consul/docs/nia/enterprise/license","id":"sidebar-nav-item-490"},{"title":"HCP Terraform Driver","href":null,"fullPath":"/consul/docs/nia/network-drivers/terraform-cloud","id":"sidebar-nav-item-491","path":"/docs/nia/network-drivers/terraform-cloud"}],"id":"sidebar-nav-item-488"},{"title":"Network Drivers","routes":[{"title":"Overview","path":"nia/network-drivers","filePath":"../content/docs/nia/network-drivers/index.mdx","fullPath":"/consul/docs/nia/network-drivers","id":"sidebar-nav-item-493"},{"title":"Terraform","path":"nia/network-drivers/terraform","filePath":"../content/docs/nia/network-drivers/terraform.mdx","fullPath":"/consul/docs/nia/network-drivers/terraform","id":"sidebar-nav-item-494"},{"title":"HCP Terraform","path":"nia/network-drivers/hcp-terraform","filePath":"../content/docs/nia/network-drivers/hcp-terraform.mdx","fullPath":"/consul/docs/nia/network-drivers/hcp-terraform","id":"sidebar-nav-item-495"}],"id":"sidebar-nav-item-492"},{"title":"Compatibility","path":"nia/compatibility","filePath":"../content/docs/nia/compatibility.mdx","fullPath":"/consul/docs/nia/compatibility","id":"sidebar-nav-item-496"}],"id":"sidebar-nav-item-465"}],"title":"Documentation","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/consul/blob/main/website/../content/docs/upgrading/upgrade-specific.mdx"},"metadata":{"title":"Upgrading Specific Versions","description":"Specific versions of Consul may have additional information about the upgrade process beyond the standard flow.","layout":null},"outlineItems":[{"title":"Upgrading Specific Versions","url":"#upgrading-specific-versions","dataHeapTrack":"toc-list-item-index-0"},{"title":"Consul v1.19.x","url":"#consul-v1-19-x","dataHeapTrack":"toc-list-item-index-1"},{"title":"Consul 1.17.x","url":"#consul-1-17-x","dataHeapTrack":"toc-list-item-index-2"},{"title":"Consul 1.16.x","url":"#consul-1-16-x","dataHeapTrack":"toc-list-item-index-3"},{"title":"Consul 1.15.x","url":"#consul-1-15-x","dataHeapTrack":"toc-list-item-index-4"},{"title":"Consul 1.14.x","url":"#consul-1-14-x","dataHeapTrack":"toc-list-item-index-5"},{"title":"Consul 1.13.x","url":"#consul-1-13-x","dataHeapTrack":"toc-list-item-index-6"},{"title":"Consul 1.12.x","url":"#consul-1-12-x","dataHeapTrack":"toc-list-item-index-7"},{"title":"Consul 1.11.x","url":"#consul-1-11-x","dataHeapTrack":"toc-list-item-index-8"},{"title":"Consul 1.10.0","url":"#consul-1-10-0","dataHeapTrack":"toc-list-item-index-9"},{"title":"Consul 1.9.0","url":"#consul-1-9-0","dataHeapTrack":"toc-list-item-index-10"},{"title":"Consul 1.8.0","url":"#consul-1-8-0","dataHeapTrack":"toc-list-item-index-11"},{"title":"Consul 1.7.0","url":"#consul-1-7-0","dataHeapTrack":"toc-list-item-index-12"},{"title":"Consul 1.6.3","url":"#consul-1-6-3","dataHeapTrack":"toc-list-item-index-13"},{"title":"Consul 1.6.0","url":"#consul-1-6-0","dataHeapTrack":"toc-list-item-index-14"},{"title":"Consul 1.4.0","url":"#consul-1-4-0","dataHeapTrack":"toc-list-item-index-15"},{"title":"Consul 1.3.0","url":"#consul-1-3-0","dataHeapTrack":"toc-list-item-index-16"},{"title":"Consul 1.1.0","url":"#consul-1-1-0","dataHeapTrack":"toc-list-item-index-17"},{"title":"Consul 1.0.7","url":"#consul-1-0-7","dataHeapTrack":"toc-list-item-index-18"},{"title":"Consul 1.0.1","url":"#consul-1-0-1","dataHeapTrack":"toc-list-item-index-19"},{"title":"Consul 1.0","url":"#consul-1-0","dataHeapTrack":"toc-list-item-index-20"},{"title":"Consul 0.9.0","url":"#consul-0-9-0","dataHeapTrack":"toc-list-item-index-21"},{"title":"Consul 0.8.0","url":"#consul-0-8-0","dataHeapTrack":"toc-list-item-index-22"},{"title":"Consul 0.7.1","url":"#consul-0-7-1","dataHeapTrack":"toc-list-item-index-23"},{"title":"Consul 0.7","url":"#consul-0-7","dataHeapTrack":"toc-list-item-index-24"},{"title":"Consul 0.6.4","url":"#consul-0-6-4","dataHeapTrack":"toc-list-item-index-25"},{"title":"Consul 0.6","url":"#consul-0-6","dataHeapTrack":"toc-list-item-index-26"},{"title":"Consul 0.5.1","url":"#consul-0-5-1","dataHeapTrack":"toc-list-item-index-27"},{"title":"Consul 0.5","url":"#consul-0-5","dataHeapTrack":"toc-list-item-index-28"}],"pageHeading":{"id":"upgrading-specific-versions","title":"Upgrading Specific Versions"},"mdxSource":{"compiledSource":"const makeShortcode=name=>function MDXDefaultShortcode(props){console.warn(\"Component \"+name+\" was not imported, exported, or provided by MDXProvider as global scope\");return mdx(\"div\",props)};const CodeBlockConfig=makeShortcode(\"CodeBlockConfig\");const EnterpriseAlert=makeShortcode(\"EnterpriseAlert\");const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading\"},`upgrading page`),` covers the details of doing a\nstandard upgrade. However, specific versions of Consul may have more details\nprovided for their upgrades as a result of new features or changed behavior.\nThis page is used to document those details separately from the standard\nupgrade flow.`),mdx(\"h2\",{\"id\":\"consul-v1-19-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-v1-19-x\",\"aria-label\":\"consul v1 19 x permalink\"},`\\xbb`),`Consul v1.19.x`),mdx(\"h3\",{\"id\":\"metrics-removal\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#metrics-removal\",\"aria-label\":\"metrics removal permalink\"},`\\xbb`),`Metrics removal`),mdx(\"p\",null,`In previous versions, Consul emitted redundant state store usage metrics that contained two instances of `,mdx(\"inlineCode\",{parentName:\"p\"},`consul`),` in the metric name. As an example, config entry usage counts were emitted as both:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"consul-state-config_entries\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#consul-state-config_entries\",\"aria-label\":\"consul state config_entries permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul.state.config_entries`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"consul-consul-state-config_entries\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#consul-consul-state-config_entries\",\"aria-label\":\"consul consul state config_entries permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul.consul.state.config_entries`)))),mdx(\"p\",null,`As of Consul v1.19, Consul does not emit the redundant metric with the double `,mdx(\"inlineCode\",{parentName:\"p\"},`consul.consul`),` in its name. Any monitoring alerts and dashboards that you may have utilizing these metrics may require edits to update to the simplified metric name.`),mdx(\"h3\",{\"id\":\"legacy-api-gateway-removal\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#legacy-api-gateway-removal\",\"aria-label\":\"legacy api gateway removal permalink\"},`\\xbb`),`Legacy API Gateway Removal`),mdx(\"p\",null,`The Consul Kubernetes Helm chart stanza\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/v1.16.x/k8s/helm#apigateway-1\"},mdx(\"inlineCode\",{parentName:\"a\"},`.apiGateway`)),`\nis removed in Consul v1.19.0. If using that stanza, migrate to the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/k8s/helm#v-connectinject-apigateway\"},mdx(\"inlineCode\",{parentName:\"a\"},`connectInject.apiGateway`)),`\nstanza before upgrading to Consul v1.19 or later.`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`.apiGateway`),` stanza is associated with the legacy API gateway that was\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/release-notes/consul/v1_16_x#what-s-deprecated\"},`deprecated in Consul v1.16.0`),`.\nThe Kubernetes-only legacy API gateway is superseded by the modern, multi-runtime\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/api-gateway\"},`API gateway`),`.\nOn Kubernetes, the modern API gateway is associated with the `,mdx(\"inlineCode\",{parentName:\"p\"},`connectInject.apiGateway`),` stanza.`),mdx(\"h2\",{\"id\":\"consul-1-17-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-17-x\",\"aria-label\":\"consul 1 17 x permalink\"},`\\xbb`),`Consul 1.17.x`),mdx(\"h3\",{\"id\":\"known-issues\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#known-issues\",\"aria-label\":\"known issues permalink\"},`\\xbb`),`Known issues`),mdx(\"p\",null,`Consul versions 1.17.2 and 1.16.5 perform excessively strict TLS SAN verification on terminating gateways, which prevents connections outside of the mesh to upstream services. Terminating gateway users are advised to avoid deploying these Consul versions. A fix will be present in a future release of Consul 1.17.3 and 1.16.6 [`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/issues/20360\"},`GH-20360`),`].`),mdx(\"h4\",{\"id\":\"audit-log-naming-changes-enterprise\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#audit-log-naming-changes-enterprise\",\"aria-label\":\"audit log naming changes enterprise permalink\"},`\\xbb`),`Audit Log naming changes (Enterprise)`),mdx(\"p\",null,`Prior to Consul 1.17.0, audit logs contained timestamps on both the original log file names as well as rotated log file names.\nAfter Consul 1.17.0, only timestamps will be included in rotated log file names.`),mdx(\"h4\",{\"id\":\"service-defaults-upstream-config-enterprise\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#service-defaults-upstream-config-enterprise\",\"aria-label\":\"service defaults upstream config enterprise permalink\"},`\\xbb`),`Service-defaults upstream config (Enterprise)`),mdx(\"p\",null,`Prior to Consul v1.17.0, `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/k8s/annotations-and-labels#consul-hashicorp-com-connect-service-upstreams\"},`Kubernetes annotations for upstream services`),`\nthat did not explicitly specify a namespace or partition incorrectly used service-defaults configurations, such as `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#set-the-default-protocol\"},`default protocol`),`, from the default partition and namespace instead of the local partition and namespace.`),mdx(\"p\",null,`This bug is fixed starting in Consul v1.17.0. Now service-defaults configurations from the local partition and namespace are fetched when not specified in annotations.\nIf you are using non-default partitions and namespaces with Consul-k8s, we recommend explicitly defining these fields for all upstreams in addition to ensuring that accurate\nservice-defaults are configured in each partition and namespace before upgrading. Doing so ensures that no unexpected protocol changes occur during the upgrade.`),mdx(\"h4\",{\"id\":\"acl-tokens-with-templated-policies\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#acl-tokens-with-templated-policies\",\"aria-label\":\"acl tokens with templated policies permalink\"},`\\xbb`),`ACL tokens with templated policies`),mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/security/acl#templated-policies\"},`ACL templated policies`),` were added to 1.17.0 to simplify obtaining the right permissions for ACL tokens. When performing a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/upgrade-federated-environment#server-rolling-upgrade\"},`rolling upgrade`),` and a version of Consul prior to 1.17.x is presented with a token created Consul v1.17.x or newer that contains templated policies, the templated policies field is not recognized. As a result, the token might not have the expected permissions on the older version of Consul.`),mdx(\"h2\",{\"id\":\"consul-1-16-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-16-x\",\"aria-label\":\"consul 1 16 x permalink\"},`\\xbb`),`Consul 1.16.x`),mdx(\"h3\",{\"id\":\"known-issues-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#known-issues-1\",\"aria-label\":\"known issues permalink\"},`\\xbb`),`Known issues`),mdx(\"p\",null,`Consul versions 1.17.2 and 1.16.5 perform excessively strict TLS SAN verification on terminating gateways, which prevents connections outside of the mesh to upstream services. Terminating gateway users are advised to avoid deploying these Consul versions. A fix will be present in a future release of Consul 1.17.3 and 1.16.6 [`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/issues/20360\"},`GH-20360`),`].`),mdx(\"p\",null,`Service mesh in Consul versions 1.16.0 and 1.16.1 may have issues when a snapshot restore is performed and the servers are hosting xDS streams.\nWhen this bug triggers, it causes Envoy to incorrectly populate upstream endpoints. To prevent this issue, service mesh users who run agent-less workloads should upgrade Consul to v1.16.2 or later.`),mdx(\"h4\",{\"id\":\"vault-enterprise-as-ca\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#vault-enterprise-as-ca-1-16\",\"aria-label\":\"vault enterprise as ca permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h4\",\"className\":\"__target-h __compat\",\"id\":\"vault-enterprise-as-ca-1-16\",\"aria-hidden\":\"true\"}),`Vault Enterprise as CA`),mdx(\"p\",null,`Using Vault as CA with Consul version 1.16.2 will fail to initialize the CA if `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),` is set\nbut `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` or `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),`\nare empty. This is a bug which will be fixed in a future version.`),mdx(\"p\",null,`To work around this issue, users must explicitly set `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),` to the same value as `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),`.\nSet your configuration by calling `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#set-config\"},`set-config`),` then use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#get-config\"},`get-config`),` to check.`),mdx(\"h4\",{\"id\":\"api-health-endpoints-return-different-status-code\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#api-health-endpoints-return-different-status-code\",\"aria-label\":\"api health endpoints return different status code permalink\"},`\\xbb`),`API health endpoints return different status code`),mdx(\"p\",null,`Consul versions 1.16.0+ now return an error 403 \"Permission denied\" status\nwhenever the `,mdx(\"inlineCode\",{parentName:\"p\"},`/v1/health/connect/`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`/v1/health/ingress/`),` endpoints are\nqueried with insufficient ACL `,mdx(\"inlineCode\",{parentName:\"p\"},`service:read`),` privileges.`),mdx(\"p\",null,`In Consul versions older than 1.16.0, the service health API did not return an explicit error when given a token with invalid permissions. Instead, it returned an empty list with a success status code.`),mdx(\"p\",null,`Before upgrading, ensure that all of your applications can handle this new API behavior properly. An update is not required unless you have a custom application that is querying one of these API endpoints directly.`),mdx(\"h4\",{\"id\":\"remove-deprecated-service-defaults-peer-upstream-override-behavior\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#remove-deprecated-service-defaults-peer-upstream-override-behavior\",\"aria-label\":\"remove deprecated service defaults peer upstream override behavior permalink\"},`\\xbb`),`Remove deprecated service-defaults peer upstream override behavior`),mdx(\"p\",null,`When configuring a service defaults configuration entry, the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#upstreamconfig-overrides\"},mdx(\"inlineCode\",{parentName:\"a\"},`UpstreamConfig.Overrides`),` configuration`),`\ndoes not apply to peer upstreams unless the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#upstreamconfig-overrides-peer\"},mdx(\"inlineCode\",{parentName:\"a\"},`Peer`)),` field is explicitly provided.\nThis change removes the backward-compatibility behavior introduced in Consul 1.15.x. Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#service-defaults-overrides-for-upstream-peered-services\"},`upgrade instructions for 1.15.x`),` for more information.`),mdx(\"h2\",{\"id\":\"consul-1-15-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-15-x\",\"aria-label\":\"consul 1 15 x permalink\"},`\\xbb`),`Consul 1.15.x`),mdx(\"h3\",{\"id\":\"service-mesh-compatibility\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#service-mesh-compatibility-1-15\",\"aria-label\":\"service mesh compatibility permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h3\",\"className\":\"__target-h __compat\",\"id\":\"service-mesh-compatibility-1-15\",\"aria-hidden\":\"true\"}),`Service mesh compatibility`),mdx(\"p\",null,`Upgrade to `,mdx(\"strong\",{parentName:\"p\"},`Consul version 1.15.2 or later`),`.\nIf using `,mdx(\"a\",{parentName:\"p\",\"href\":\"#vault-enterprise-as-ca-1-15\"},`Vault Enterprise as CA`),`, `,mdx(\"strong\",{parentName:\"p\"},`avoid Consul version 1.15.6`),`.`),mdx(\"p\",null,`Consul versions 1.15.0 - 1.15.1 contain a race condition that can cause\nsome service instances to lose their ability to communicate in the mesh after\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/consul#leafcertttl\"},`72 hours (LeafCertTTL)`),`\ndue to a problem with leaf certificate rotation.`),mdx(\"p\",null,`This bug is fixed in Consul versions 1.15.2 and newer.`),mdx(\"h4\",{\"id\":\"vault-enterprise-as-ca-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#vault-enterprise-as-ca-1-15\",\"aria-label\":\"vault enterprise as ca permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h4\",\"className\":\"__target-h __compat\",\"id\":\"vault-enterprise-as-ca-1-15\",\"aria-hidden\":\"true\"}),`Vault Enterprise as CA`),mdx(\"p\",null,`Using Vault as CA with Consul version 1.15.6 will fail to initialize the CA if `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),` is set\nbut `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` or `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),`\nare empty. This is a bug which will be fixed in a future version.`),mdx(\"p\",null,`To work around this issue, users must explicitly set `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),` to the same value as `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),`.\nSet your configuration by calling `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#set-config\"},`set-config`),` then use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#get-config\"},`get-config`),` to check.`),mdx(\"h4\",{\"id\":\"removing-configuration-options\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#removing-configuration-options\",\"aria-label\":\"removing configuration options permalink\"},`\\xbb`),`Removing configuration options`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`connect.enable_serverless_plugin`),` configuration option was removed. Lambda integration is now enabled by default.`),mdx(\"h4\",{\"id\":\"deprecating-authentication-via-token-query-parameter\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#deprecating-authentication-via-token-query-parameter\",\"aria-label\":\"deprecating authentication via token query parameter permalink\"},`\\xbb`),`Deprecating authentication via token query parameter`),mdx(\"p\",null,`Providing a Consul ACL token in API requests using the `,mdx(\"inlineCode\",{parentName:\"p\"},`token`),` query parameter is deprecated and will be removed in a future Consul version.\nInstead, you should provide the token through the `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Token`),` header or with the Bearer scheme in the authorization header as described in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/api-structure#authentication\"},`API authentication documentation`),`.`),mdx(\"p\",null,`Check whether you are using a `,mdx(\"inlineCode\",{parentName:\"p\"},`token`),` query parameter by searching your Consul agent logs for the message:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\",\"metastring\":\"hideClipboard\",\"hideClipboard\":true},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`This request used the token query parameter `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`which`),` is deprecated and will be removed `,mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`in`),` a future Consul version`)),`\n`)),mdx(\"p\",null,`Deprecated authentication using the `,mdx(\"inlineCode\",{parentName:\"p\"},`token`),` query parameter:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`curl`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`\\\\`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`    http://127.0.0.1:8500/v1/agent/members?token`,mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`=`))),mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`<consul token>`),`\n`)),mdx(\"p\",null,`Recommended authentication method:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`curl`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`\\\\`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`    --header `,mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`\"X-Consul-Token: <consul token>\"`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`\\\\`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`    http://127.0.0.1:8500/v1/agent/members`)),`\n`)),mdx(\"h4\",{\"id\":\"lambda-configuration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#lambda-configuration\",\"aria-label\":\"lambda configuration permalink\"},`\\xbb`),`Lambda Configuration`),mdx(\"p\",null,`Instead of configuring Lambda functions in the `,mdx(\"inlineCode\",{parentName:\"p\"},`Meta`),` field of `,mdx(\"inlineCode\",{parentName:\"p\"},`service-defaults`),` configuration entries, configure them with the `,mdx(\"inlineCode\",{parentName:\"p\"},`EnvoyExtensions`),` field.`),mdx(\"p\",null,`Before Consul v1.15:`),mdx(CodeBlockConfig,{filename:\"lambda-service-defaults.hcl\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Kind`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"service-defaults\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"<SERVICE_NAME>\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Protocol`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"http\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Meta`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"serverless.consul.hashicorp.com/v1alpha1/lambda/enabled\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"true\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))),mdx(\"p\",null,`In Consul v1.15 and higher:`),mdx(CodeBlockConfig,{filename:\"lambda-service-defaults.hcl\",mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Kind`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"service-defaults\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"<SERVICE_NAME>\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Protocol`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"http\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`EnvoyExtensions`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"Name\"`),`: `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"builtin/aws/lambda\"`),`,`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"Arguments\"`),`: `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"Region\"`),`: `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-east-2\"`),`,`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"ARN\"`),`: `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"<INSERT ARN HERE>\"`),`,`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"PayloadPassthrough\"`),`: `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`))),mdx(\"h4\",{\"id\":\"service-defaults-overrides-for-upstream-peered-services\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#service-defaults-overrides-for-upstream-peered-services\",\"aria-label\":\"service defaults overrides for upstream peered services permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h4\"},`service-defaults`),` Overrides for Upstream Peered Services`),mdx(\"p\",null,`In Consul 1.14.x, `,mdx(\"inlineCode\",{parentName:\"p\"},`service-defaults`),` upstream `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#overrides\"},mdx(\"inlineCode\",{parentName:\"a\"},`overrides`)),` apply to both local and peered services as long as the `,mdx(\"inlineCode\",{parentName:\"p\"},`name`),` field matches.\nConsul 1.15.0 is backward compatible with 1.14 if the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-defaults#peer\"},mdx(\"inlineCode\",{parentName:\"a\"},`peer`)),` is not set in any override.\nWe recommend converting any upstream peer service overrides as a 1.15.x post-upgrade step.`),mdx(\"p\",null,`Before Consul v1.15:`),mdx(CodeBlockConfig,{mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Kind`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"service-defaults\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"<SERVICE_NAME>\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Protocol`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"http\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`UpstreamConfig`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Overrides`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`       `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` foo      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Applies to local \\`foo\\` and any peered service \\`foo\\``),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))),mdx(\"p\",null,`In Consul v1.15 and higher:`),mdx(CodeBlockConfig,{mdxType:\"CodeBlockConfig\"},mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Kind`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"service-defaults\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"<SERVICE_NAME>\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Protocol`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"http\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`UpstreamConfig`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Overrides`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`       `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` foo  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Applies to local service \\`foo\\``),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`,`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`       `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` foo  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`# Applies to \\`foo\\` imported from peered cluster \\`bar\\``),`\n`,`       `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`Peer`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` bar`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`))),mdx(\"h2\",{\"id\":\"consul-1-14-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-14-x\",\"aria-label\":\"consul 1 14 x permalink\"},`\\xbb`),`Consul 1.14.x`),mdx(\"h3\",{\"id\":\"service-mesh-compatibility-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#service-mesh-compatibility-1\",\"aria-label\":\"service mesh compatibility permalink\"},`\\xbb`),`Service Mesh Compatibility`),mdx(\"p\",null,`Prior to Consul 1.14, cluster peering and Consul service mesh were disabled by default.\nA breaking change was made in Consul 1.14 that:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/connect/cluster-peering\"},`Cluster Peering is enabled by default.`),`\nCluster peering and WAN federation can coexist,\nso there is no need to disable cluster peering to upgrade existing WAN federated datacenters.\nTo disable cluster peering nonetheless, set `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#peering_enabled\"},mdx(\"inlineCode\",{parentName:\"a\"},`peering.enabled`)),` to `,mdx(\"inlineCode\",{parentName:\"li\"},`false`),`.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/connect\"},`Consul service mesh is enabled by default.`),`\nTo disable, set `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#connect_enabled\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect.enabled`)),` to `,mdx(\"inlineCode\",{parentName:\"li\"},`false`),`.`)),mdx(\"p\",null,`The changes to Consul service mesh in version 1.14 are incompatible with Nomad 1.4.3 and\nearlier. If you operate Consul service mesh using Nomad 1.4.3 or earlier, do not upgrade to\nConsul 1.14 until `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/nomad/issues/15266\"},`hashicorp/nomad#15266`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/nomad/issues/15360\"},`hashicorp/nomad#15360`),` have been fixed.`),mdx(\"p\",null,`For 1.14.0, there is a known issue with `,mdx(\"inlineCode\",{parentName:\"p\"},`consul connect envoy`),`. If the command is configured\nto use TLS for contacting the HTTP API, it will also incorrectly enable TLS for gRPC.\nUsers should not upgrade to 1.14.0 if they are using plaintext gRPC connections in\nconjunction with TLS-encrypted HTTP APIs.`),mdx(\"h4\",{\"id\":\"vault-enterprise-as-ca-2\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#vault-enterprise-as-ca-1-14\",\"aria-label\":\"vault enterprise as ca permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h4\",\"className\":\"__target-h __compat\",\"id\":\"vault-enterprise-as-ca-1-14\",\"aria-hidden\":\"true\"}),`Vault Enterprise as CA`),mdx(\"p\",null,`Using Vault as CA with Consul version 1.14.10 will fail to initialize the CA if `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),` is set\nbut `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` or `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),`\nare empty. This is a bug which will be fixed in a future version.`),mdx(\"p\",null,`To work around this issue, users must explicitly set `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#intermediatepkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`intermediate_pki_namespace`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#rootpkinamespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`root_pki_namespace`)),` to the same value as `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`namespace`)),`.\nSet your configuration by calling `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#set-config\"},`set-config`),` then use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/ca#get-config\"},`get-config`),` to check.`),mdx(\"h4\",{\"id\":\"changes-to-grpc-tls-configuration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-grpc-tls-configuration\",\"aria-label\":\"changes to grpc tls configuration permalink\"},`\\xbb`),`Changes to gRPC TLS configuration`),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},`Make configuration changes`),` if using `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#grpc_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports.grpc`)),` in conjunction with any of the following settings that enables encryption:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#tls_grpc\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.grpc`))),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#tls_defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.defaults`))),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#auto_encrypt\"},mdx(\"inlineCode\",{parentName:\"a\"},`auto_encrypt`))),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#auto_config\"},mdx(\"inlineCode\",{parentName:\"a\"},`auto_config`)))),mdx(\"p\",null,`Prior to Consul 1.14, it was possible to encrypt communication between Consul and Envoy over `,mdx(\"inlineCode\",{parentName:\"p\"},`ports.grpc`),` using these settings.`),mdx(\"p\",null,`Consul 1.14 introduces `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#grpc_tls_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports.grpc_tls`)),`, a new configuration\nfor encrypting communication over gRPC. The existing `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#grpc_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports.grpc`)),` configuration `,mdx(\"strong\",{parentName:\"p\"},`no longer supports encryption`),`. As of version 1.14,\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#grpc_tls_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports.grpc_tls`)),` is the only port that serves encrypted gRPC traffic.\nThe default value for the gRPC TLS port is 8503 for Consul servers. To disable the gRPC TLS port, use value -1.`),mdx(\"p\",null,`If you already use gRPC encryption, change the following fields to ensure compatibility:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Change `,mdx(\"inlineCode\",{parentName:\"li\"},`ports.grpc`),` to `,mdx(\"inlineCode\",{parentName:\"li\"},`ports.grpc_tls`),`. Refer to the `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#grpc_tls_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`grpc_tls_port`),` documentation`),` for details.`),mdx(\"li\",{parentName:\"ul\"},`Change `,mdx(\"inlineCode\",{parentName:\"li\"},`addresses.grpc`),` to `,mdx(\"inlineCode\",{parentName:\"li\"},`addresses.grpc_tls`),`. Refer to the `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#grpc_tls\"},mdx(\"inlineCode\",{parentName:\"a\"},`grpc_tls`),` documentation`),` for details.`),mdx(\"li\",{parentName:\"ul\"},`Update `,mdx(\"inlineCode\",{parentName:\"li\"},`consul connect envoy`),` command invocations to specify gRPC CA certificates with one of the new configuration options:\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands/connect/envoy#grpc-ca-file\"},mdx(\"inlineCode\",{parentName:\"a\"},`-grpc-ca-file`)),` or\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/commands/connect/envoy#grpc-ca-path\"},mdx(\"inlineCode\",{parentName:\"a\"},`-grpc-ca-path`)),`\n(or their corresponding environment variables).`)),mdx(\"h4\",{\"id\":\"changes-to-peering\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-peering\",\"aria-label\":\"changes to peering permalink\"},`\\xbb`),`Changes to peering`),mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/cluster-peering\"},`Cluster peering`),` was released in Consul 1.13 as an experimental feature.\nIn Consul 1.14, cluster peering has been improved and is now considered stable. All experimental peering\nconnections created by 1.13 should be\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/cluster-peering/usage/manage-connections#delete-peering-connections\"},`deleted`),`\nprior to upgrading, as they will no longer be compatible with 1.14.`),mdx(\"h2\",{\"id\":\"consul-1-13-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-13-x\",\"aria-label\":\"consul 1 13 x permalink\"},`\\xbb`),`Consul 1.13.x`),mdx(\"h3\",{\"id\":\"service-mesh-compatibility-2\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#service-mesh-compatibility-2\",\"aria-label\":\"service mesh compatibility permalink\"},`\\xbb`),`Service Mesh Compatibility`),mdx(\"p\",null,`Before upgrading existing Consul deployments using service mesh to Consul 1.13.x,\nreview the following guidances relevant to your deployment:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#all-service-mesh-deployments\"},`All service mesh deployments`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#service-mesh-deployments-using-auto-encrypt-or-auto-config\"},`Service mesh deployments using auto-encrypt or auto-config`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#service-mesh-deployments-without-the-https-port-enabled-on-consul-agents\"},`Service mesh deployments without the HTTPS port enabled on Consul agents`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"#modify-vault-policy-for-vault-ca-provider\"},`All service mesh deployments using the Vault CA provider`))),mdx(\"h4\",{\"id\":\"all-service-mesh-deployments\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#all-service-mesh-deployments\",\"aria-label\":\"all service mesh deployments permalink\"},`\\xbb`),`All service mesh deployments`),mdx(\"p\",null,`Upgrade to `,mdx(\"strong\",{parentName:\"p\"},`Consul version 1.13.1 or later`),`.`),mdx(\"p\",null,`Consul 1.13.0 contains a bug that prevents Consul server agents from restoring\nsaved state on startup if the state`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},`was generated before Consul 1.13 (such as during an upgrade), and`),mdx(\"li\",{parentName:\"ol\"},`contained any service mesh proxy registrations.`)),mdx(\"p\",null,`This bug is fixed in Consul versions 1.13.1 and newer.`),mdx(\"h4\",{\"id\":\"service-mesh-deployments-using-auto-encrypt-or-auto-config\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#service-mesh-deployments-using-auto-encrypt-or-auto-config\",\"aria-label\":\"service mesh deployments using auto encrypt or auto config permalink\"},`\\xbb`),`Service mesh deployments using auto-encrypt or auto-config`),mdx(\"p\",null,`Upgrade to `,mdx(\"strong\",{parentName:\"p\"},`Consul version 1.13.2 or later`),` if using\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#auto_encrypt\"},`auto-encrypt`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#auto_config\"},`auto-config`),`.`),mdx(\"p\",null,`In Consul 1.13.0 - 1.13.1, auto-encrypt and auto-config both cause Consul\nto require TLS for gRPC communication with Envoy proxies.\nIn environments where Envoy proxies are not already configured\nto use TLS for gRPC, upgrading to Consul 1.13.0 - 1.13.1 will cause\nEnvoy proxies to disconnect from the control plane (Consul agents).`),mdx(\"p\",null,`If upgrading to version 1.13.2 or later, you must enable\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#use_auto_cert\"},`tls.grpc.use_auto_cert`),`\nif you currently rely on Consul agents presenting the auto-encrypt or\nauto-config certs as the TLS server certs on the gRPC port.\nThe new `,mdx(\"inlineCode\",{parentName:\"p\"},`use_auto_cert`),` flag enables TLS for gRPC based on the presence\nof auto-encrypt certs.`),mdx(\"h4\",{\"id\":\"service-mesh-deployments-without-the-https-port-enabled-on-consul-agents\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#grpc-tls\",\"aria-label\":\"service mesh deployments without the https port enabled on consul agents permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h4\",\"className\":\"__target-h __compat\",\"id\":\"grpc-tls\",\"aria-hidden\":\"true\"}),`Service mesh deployments without the HTTPS port enabled on Consul agents`),mdx(\"p\",null,`If the HTTPS port is not enabled\n(`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`)\non a pre-1.13 Consul agent,\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"a\",{parentName:\"strong\",\"href\":\"#modify-the-consul-agent-s-tls-configuration\"},`modify the agent's TLS configuration before upgrading`)),`\nto avoid Envoy proxies disconnecting from the control plane (Consul agents).\nEnvoy proxies include service mesh sidecars and gateways.`),mdx(\"h5\",{\"id\":\"changes-to-grpc-and-http-interface-configuration\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-grpc-and-http-interface-configuration\",\"aria-label\":\"changes to grpc and http interface configuration permalink\"},`\\xbb`),`Changes to gRPC and HTTP interface configuration`),mdx(\"p\",null,`If a Consul agent's HTTP API is exposed externally,\nenabling HTTPS (TLS encryption for HTTP) is important.`),mdx(\"p\",null,`The gRPC interface is used for xDS communication between Consul and\nEnvoy proxies when using Consul service mesh.\nA Consul agent's gRPC traffic is often loopback-only,\nwhich TLS encryption is not important for.`),mdx(\"p\",null,`Prior to Consul 1.13, if `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`\nwas configured, TLS was enabled for both HTTP `,mdx(\"em\",{parentName:\"p\"},`and`),` gRPC.\nThis was inconvenient for deployments that\nneeded TLS for HTTP, but not for gRPC.\nEnabling HTTPS also required launching Envoy proxies\nwith the necessary TLS material for xDS communication\nwith its Consul agent via TLS over gRPC.`),mdx(\"p\",null,`Consul 1.13 addresses this inconvenience by fully decoupling the TLS configuration for HTTP and gRPC interfaces.\nTLS for gRPC is no longer enabled by setting\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`.\nTLS configuration for gRPC is now determined exclusively by:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#tls_grpc\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.grpc`)),`, which overrides`),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#tls_defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.defaults`)),`, which overrides`),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#tls_deprecated_options\"},`Deprecated TLS options`),` such as\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#ca_file-4\"},mdx(\"inlineCode\",{parentName:\"a\"},`ca_file`)),`,\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#cert_file-4\"},mdx(\"inlineCode\",{parentName:\"a\"},`cert_file`)),`, and\n`,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#key_file-4\"},mdx(\"inlineCode\",{parentName:\"a\"},`key_file`)),`.`)),mdx(\"p\",null,`This decoupling has a side effect that requires a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#modify-the-consul-agent-s-tls-configuration\"},`TLS configuration change`),`\nfor pre-1.13 agents without the HTTPS port enabled.\nWithout a TLS configuration change,\nConsul 1.13 agents may now expect gRPC `,mdx(\"em\",{parentName:\"p\"},`with`),` TLS,\ncausing communication to fail with Envoy proxies\nthat continue to use gRPC `,mdx(\"em\",{parentName:\"p\"},`without`),` TLS.`),mdx(\"h5\",{\"id\":\"modify-the-consul-agent-s-tls-configuration\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#modify-the-consul-agent-s-tls-configuration\",\"aria-label\":\"modify the consul agent s tls configuration permalink\"},`\\xbb`),`Modify the Consul agent's TLS configuration`),mdx(\"p\",null,`If `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_grpc\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.grpc`)),`,\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_defaults\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.defaults`)),`,\nor the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_deprecated_options\"},`deprecated TLS options`),`\ndefine TLS material in their\n`,mdx(\"inlineCode\",{parentName:\"p\"},`ca_file`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`ca_path`),`, `,mdx(\"inlineCode\",{parentName:\"p\"},`cert_file`),`, or `,mdx(\"inlineCode\",{parentName:\"p\"},`key_file`),` fields,\nTLS for gRPC will be enabled in Consul 1.13, even if\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`\nis not set.`),mdx(\"p\",null,`This will cause Envoy proxies to disconnect from the control plane\nafter upgrading to Consul 1.13 if associated pre-1.13 Consul agents\nhave `,mdx(\"strong\",{parentName:\"p\"},`not`),` set\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`.\nTo avoid this problem, make the following agent configuration changes:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Remove TLS material from the Consul agents'\ninterface-generic TLS configuration options:\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_grpc\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.defaults`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_deprecated_options\"},`deprecated TLS options`))),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Reapply TLS material to the non-gRPC interfaces that need it with the\ninterface-specific TLS configuration stanzas\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading/upgrade-specific#tls-configuration\"},`introduced in Consul 1.12`),`:\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_https\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.https`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls_internal_rpc\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls.internal_rpc`)),`.`),mdx(\"p\",{parentName:\"li\"},`If upgrading directly from pre-1.12 Consul,\nthe above configuration change cannot be made before upgrading.\nTherefore, consider upgrading agents to Consul 1.12 before upgrading to 1.13.`))),mdx(\"p\",null,`If pre-1.13 Consul agents have set\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#https_port\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports { https = POSITIVE_INTEGER }`)),`,\nthis configuration change is not required to upgrade.\nThat setting means the pre-1.13 Consul agent requires TLS for gRPC `,mdx(\"em\",{parentName:\"p\"},`already`),`,\nand will continue to do so after upgrading to 1.13.\nIf your pre-1.13 service mesh is working, you have already\nconfigured your Envoy proxies to use TLS for gRPC when bootstrapping Envoy\nvia `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy`)),`,\nsuch as with flags or environment variables like\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy#ca-file\"},mdx(\"inlineCode\",{parentName:\"a\"},`-ca-file`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands#consul_cacert\"},mdx(\"inlineCode\",{parentName:\"a\"},`CONSUL_CACERT`)),`.`),mdx(\"h4\",{\"id\":\"modify-vault-policy-for-vault-ca-provider\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#modify-vault-policy-for-vault-ca-provider\",\"aria-label\":\"modify vault policy for vault ca provider permalink\"},`\\xbb`),`Modify Vault policy for Vault CA provider`),mdx(\"p\",null,`If using the Vault CA provider,\nmodify the Vault policy used by Consul to interact with Vault\nto ensure that certificates required for service mesh operation can still be generated.\nThe policy must include the `,mdx(\"inlineCode\",{parentName:\"p\"},`update`),` capability on the intermediate PKI's tune mount configuration endpoint\nat path `,mdx(\"inlineCode\",{parentName:\"p\"},`/sys/mounts/<intermediate_pki_mount_name>/tune`),`.\nRefer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/ca/vault#vault-acl-policies\"},`Vault CA provider documentation`),`\nfor updated example Vault policies for use with Vault-managed or Consul-managed PKI paths.`),mdx(\"p\",null,`You are using the Vault CA provider if either of the following configurations exists:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`The Consul server agent configuration option `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#connect_ca_provider\"},mdx(\"inlineCode\",{parentName:\"a\"},`connect.ca_provider`)),` is set to `,mdx(\"inlineCode\",{parentName:\"li\"},`vault`),`, or`),mdx(\"li\",{parentName:\"ul\"},`The Consul on Kubernetes Helm Chart `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/k8s/helm#v-global-secretsbackend-vault-connectca\"},mdx(\"inlineCode\",{parentName:\"a\"},`global.secretsBackend.vault.connectCA`)),` value is configured.`)),mdx(\"p\",null,`Though this guidance is listed in the 1.13.x section, it applies to several release series.\nAffected Consul versions contain a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/pull/14516\"},`bugfix that allows the intermediate CA's TTL configuration to be modified`),`.\nThe bugfix requires the `,mdx(\"inlineCode\",{parentName:\"p\"},`update`),` capability to tune that configuration.\nWithout the `,mdx(\"inlineCode\",{parentName:\"p\"},`update`),` capability, the Consul versions listed in the `,mdx(\"em\",{parentName:\"p\"},`breaking change`),` column\ncannot provide services with the certificates they need to participate in the mesh.\nThe Consul versions in the `,mdx(\"em\",{parentName:\"p\"},`recommended versions`),` column restore the intermediate CA's ability\nto provide certificates even without the `,mdx(\"inlineCode\",{parentName:\"p\"},`update`),` capability on the tune configuration endpoint,\nthough the `,mdx(\"inlineCode\",{parentName:\"p\"},`update`),` capability will still be needed to modify the CA's TTL configuration.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Release Series`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Versions with breaking change`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Recommended versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`Consul 1.13.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.13.2`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.13.3 or later`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`Consul 1.12.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.12.5`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.12.6 or later`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`Consul 1.11.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.11.9 - 1.11.10`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.11.11 or later`)))),mdx(\"p\",null,`As a precaution, we recommend both modifying the Vault policy\nand upgrading to a recommended version as a double protection\nto ensure the operation of your service mesh and to enable CA TTL modification.`),mdx(\"h3\",{\"id\":\"1-9-telemetry-compatibility\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#1-9-telemetry-compatibility\",\"aria-label\":\"1 9 telemetry compatibility permalink\"},`\\xbb`),`1.9 Telemetry Compatibility`),mdx(\"h4\",{\"id\":\"removing-configuration-options-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#removing-configuration-options-1\",\"aria-label\":\"removing configuration options permalink\"},`\\xbb`),`Removing configuration options`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-disable_compat_1.9\"},mdx(\"inlineCode\",{parentName:\"a\"},`disable_compat_19`)),` telemetry configuration option is now removed.\nIn prior Consul versions (1.10.x through 1.11.x), the config defaulted to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. In 1.12.x it defaulted to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`.\nIf you were using this flag, you must remove it before upgrading.`),mdx(\"h3\",{\"id\":\"modify-vault-policy-for-vault-ca-provider-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#modify-vault-policy-for-vault-ca-provider-1\",\"aria-label\":\"modify vault policy for vault ca provider permalink\"},`\\xbb`),`Modify Vault Policy for Vault CA Provider`),mdx(\"p\",null,`Follow the same guidance as provided in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#modify-vault-policy-for-vault-ca-provider\"},`1.13 upgrade section for modifying the Vault policy if using the Vault CA provider`),`.\nA breaking change was made in Consul 1.13.2 that impacts service mesh operation\nif the Vault policy is not modified as described.\nAs a precaution, we recommend both modifying the Vault policy and upgrading\nto Consul 1.13.3 or later to avoid the breaking nature of that change.`),mdx(\"h3\",{\"id\":\"nomad-incompatibility\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#nomad-incompatibility\",\"aria-label\":\"nomad incompatibility permalink\"},`\\xbb`),`Nomad Incompatibility`),mdx(\"p\",null,`Nomad users should not upgrade to Consul v1.13.8. An API change in this Consul\nrelease prevents Nomad from correctly detecting the Consul agent version. As a\nresult, allocations are not placed in clients running v1.13.8.`),mdx(\"h2\",{\"id\":\"consul-1-12-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-12-0\",\"aria-label\":\"consul 1 12 x permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h2\",\"className\":\"__target-h __compat\",\"id\":\"consul-1-12-0\",\"aria-hidden\":\"true\"}),`Consul 1.12.x`),mdx(\"h3\",{\"id\":\"modify-vault-policy-for-vault-ca-provider-2\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#modify-vault-policy-for-vault-ca-provider-2\",\"aria-label\":\"modify vault policy for vault ca provider permalink\"},`\\xbb`),`Modify Vault Policy for Vault CA Provider`),mdx(\"p\",null,`Follow the same guidance as provided in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#modify-vault-policy-for-vault-ca-provider\"},`1.13 upgrade section for modifying the Vault policy if using the Vault CA provider`),`.\nA breaking change was made in Consul 1.12.5 that impacts service mesh operation\nif the Vault policy is not modified as described.\nAs a precaution, we recommend both modifying the Vault policy and upgrading\nto Consul 1.12.6 or later to avoid the breaking nature of that change.`),mdx(\"h3\",{\"id\":\"1-9-telemetry-compatibility-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#1-9-telemetry-compatibility-1\",\"aria-label\":\"1 9 telemetry compatibility permalink\"},`\\xbb`),`1.9 Telemetry Compatibility`),mdx(\"h4\",{\"id\":\"changing-the-default-behavior-for-option\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#changing-the-default-behavior-for-option\",\"aria-label\":\"changing the default behavior for option permalink\"},`\\xbb`),`Changing the default behavior for option`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-disable_compat_1.9\"},mdx(\"inlineCode\",{parentName:\"a\"},`disable_compat_19`)),` telemetry configuration option now defaults\nto `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`. In prior Consul versions (1.10.x through 1.11.x), the config defaulted to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. If you require 1.9 style\n`,mdx(\"inlineCode\",{parentName:\"p\"},`consul.http...`),` metrics, you may enable them by setting the flag to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`. However, be advised that these metrics, as\nwell as the flag will be removed in upcoming Consul 1.13. We recommend changing your instrumentation to use 1.10 and later\nstyle `,mdx(\"inlineCode\",{parentName:\"p\"},`consul.api.http...`),` metrics and removing the configuration flag from your setup.`),mdx(\"h3\",{\"id\":\"nomad-namespace-incompatibility\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#nomad-namespace-incompatibility\",\"aria-label\":\"nomad namespace incompatibility permalink\"},`\\xbb`),`Nomad Namespace Incompatibility`),mdx(\"p\",null,`Nomad Enterprise users should not upgrade to Consul Enterprise 1.12.0, and instead should upgrade to 1.12.1 or later.`),mdx(\"p\",null,`Consul 1.12.0 Enterprise introduced a change that prevents Nomad Enterprise from removing services from non-default Consul namespaces.`),mdx(\"p\",null,`The Consul Enterprise codebase was updated with a fix for this issue in version 1.12.1.`),mdx(\"h3\",{\"id\":\"tls-configuration\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#tls-configuration\",\"aria-label\":\"tls configuration permalink\"},`\\xbb`),`TLS Configuration`),mdx(\"p\",null,`You can now configure TLS differently for each of Consul's exposed ports. As a\nresult, the following top-level configuration fields are deprecated and should\nbe replaced with the new `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#tls-configuration-reference\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls`),` stanza`),`:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"cert_file\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#cert_file\",\"aria-label\":\"cert_file permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`cert_file`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"key_file\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#key_file\",\"aria-label\":\"key_file permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`key_file`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"ca_file\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#ca_file\",\"aria-label\":\"ca_file permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`ca_file`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"ca_path\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#ca_path\",\"aria-label\":\"ca_path permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`ca_path`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"tls_min_version\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#tls_min_version\",\"aria-label\":\"tls_min_version permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls_min_version`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"tls_cipher_suites\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#tls_cipher_suites\",\"aria-label\":\"tls_cipher_suites permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls_cipher_suites`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"verify_incoming\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#verify_incoming\",\"aria-label\":\"verify_incoming permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`verify_incoming`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"verify_incoming_rpc\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#verify_incoming_rpc\",\"aria-label\":\"verify_incoming_rpc permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`verify_incoming_rpc`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"verify_incoming_https\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#verify_incoming_https\",\"aria-label\":\"verify_incoming_https permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`verify_incoming_https`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"verify_outgoing\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#verify_outgoing\",\"aria-label\":\"verify_outgoing permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`verify_outgoing`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"verify_server_hostname\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#verify_server_hostname\",\"aria-label\":\"verify_server_hostname permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`verify_server_hostname`)))),mdx(\"h2\",{\"id\":\"consul-1-11-x\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-11-0\",\"aria-label\":\"consul 1 11 x permalink\"},`\\xbb`),mdx(\"a\",{parentName:\"h2\",\"className\":\"__target-h __compat\",\"id\":\"consul-1-11-0\",\"aria-hidden\":\"true\"}),`Consul 1.11.x`),mdx(\"h3\",{\"id\":\"1-10-compatibility\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#1-10-compatibility\",\"aria-label\":\"1 10 compatibility permalink\"},`\\xbb`),`1.10 Compatibility `,mdx(EnterpriseAlert,{inline:true,mdxType:\"EnterpriseAlert\"})),mdx(\"p\",null,`Consul Enterprise versions 1.10.0 through 1.10.4 contain a latent bug that\ncauses those client or server agents to deregister their own services or health\nchecks when some of the servers have been upgraded to 1.11 or later.\nBefore upgrading Consul Enterprise servers to 1.11 or later,\nyou should first upgrade all Consul client and server agents to 1.10.7 or higher\nto ensure forward compatibility and prevent flapping of catalog registrations.`),mdx(\"h3\",{\"id\":\"deprecated-agent-config-options\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-agent-config-options\",\"aria-label\":\"deprecated agent config options permalink\"},`\\xbb`),`Deprecated Agent Config Options`),mdx(\"p\",null,`Consul 1.11.0 is compiled with Go 1.17 and now the ordering of\n`,mdx(\"inlineCode\",{parentName:\"p\"},`tls_cipher_suites`),` will no longer be honored. Additionally\n`,mdx(\"inlineCode\",{parentName:\"p\"},`tls_prefer_server_cipher_suites`),` is now ignored.`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`master`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`agent_master`),` ACL tokens in the `,mdx(\"inlineCode\",{parentName:\"p\"},`acl.tokens`),` config block\nhave been renamed to `,mdx(\"inlineCode\",{parentName:\"p\"},`initial_management`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`agent_recovery`),` respectively.\nThe old names have been deprecated and will be removed at a future date.`),mdx(\"p\",null,`Due to this rename the following endpoint is also deprecated:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/api-docs/agent#update-acl-tokens\"},mdx(\"inlineCode\",{parentName:\"a\"},`PUT /v1/agent/token/agent_master`)))),mdx(\"h3\",{\"id\":\"deprecated-agent-config-options-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-agent-config-options-1\",\"aria-label\":\"deprecated agent config options permalink\"},`\\xbb`),`Deprecated Agent Config Options `,mdx(EnterpriseAlert,{inline:true,mdxType:\"EnterpriseAlert\"})),mdx(\"p\",null,`These config keys are now deprecated:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"audit-sink-name\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#audit-sink-name\",\"aria-label\":\"audit sink name permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`audit.sink[].name`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/agent/config/config-files#dns_prefer_namespace\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.dns_prefer_namespace`)))),mdx(\"h3\",{\"id\":\"deprecated-cli-subcommands\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-cli-subcommands\",\"aria-label\":\"deprecated cli subcommands permalink\"},`\\xbb`),`Deprecated CLI Subcommands`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`consul acl set-agent-token master`),` subcommand has been replaced with\n`,mdx(\"inlineCode\",{parentName:\"p\"},`consul acl set-agent-token recovery`),`. The old subcommand is deprecated.`),mdx(\"h3\",{\"id\":\"legacy-acl-system-removal\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#legacy-acl-system-removal\",\"aria-label\":\"legacy acl system removal permalink\"},`\\xbb`),`Legacy ACL System Removal`),mdx(\"p\",null,`The legacy ACL system that was deprecated in Consul 1.4.0 was removed in 1.11.0.\nBefore upgrading you should verify that nothing is still using the legacy ACL\nsystem. Complete the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/security-operations/access-control-token-migration\"},`Migrate Legacy ACL Tokens`),` tutorial to learn more.`),mdx(\"h3\",{\"id\":\"raft-storage-changes\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#raft-storage-changes\",\"aria-label\":\"raft storage changes permalink\"},`\\xbb`),`Raft Storage Changes`),mdx(\"p\",null,`The underlying library used for persisting the Raft log to persistent storage\nwas `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/issues/11720\"},`upgraded`),` from\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://pkg.go.dev/github.com/boltdb/bolt\"},mdx(\"inlineCode\",{parentName:\"a\"},`boltdb`)),` to\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://pkg.go.dev/go.etcd.io/bbolt\"},mdx(\"inlineCode\",{parentName:\"a\"},`bbolt`)),`.`),mdx(\"p\",null,`The newer `,mdx(\"inlineCode\",{parentName:\"p\"},`bbolt`),` library is compatible with the persisted format generated by\n`,mdx(\"inlineCode\",{parentName:\"p\"},`boltdb`),` but the reverse is not necessarily guaranteed. Like any Consul upgrade\nit is strongly recommended that you take a snapshot of your database if you\nexpect that you will need to downgrade.`),mdx(\"h3\",{\"id\":\"envoy-xds-protocol-upgrades\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#envoy-xds-protocol-upgrades\",\"aria-label\":\"envoy xds protocol upgrades permalink\"},`\\xbb`),`Envoy xDS Protocol Upgrades`),mdx(\"p\",null,`As noted in earlier upgrades, previous versions of Consul supported both v2 and v3\nvariants of the XDS Transport Protocol. In Consul 1.11, support for Envoy 1.16 is\nremoved and consequently v2 is no longer supported. What this means is that if\nyou have generated your Envoy bootstrap files using the Consul CLI that is newer\nthan 1.10, you must make sure that you upgrade Consul and Envoy per the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#stairstep-upgrade-path\"},`Stairstep Upgrade Path`),` before upgrading to Consul 1.11.\nWhen upgrading to Consul 1.10, you must ensure that the Envoy sidecars are\nrestarted and bootstrapped using a version of the Consul CLI >= 1.10. This\nensures your sidecars are supported by Consul 1.11.`),mdx(\"h3\",{\"id\":\"modify-vault-policy-for-vault-ca-provider-3\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#modify-vault-policy-for-vault-ca-provider-3\",\"aria-label\":\"modify vault policy for vault ca provider permalink\"},`\\xbb`),`Modify Vault Policy for Vault CA Provider`),mdx(\"p\",null,`Follow the same guidance as provided in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#modify-vault-policy-for-vault-ca-provider\"},`1.13 upgrade section for modifying the Vault policy if using the Vault CA provider`),`.\nA breaking change was made in Consul 1.11.9 that impacts service mesh operation\nif the Vault policy is not modified as described.\nAs a precaution, we recommend both modifying the Vault policy and upgrading\nto Consul 1.11.11 or later to avoid the breaking nature of that change.`),mdx(\"h2\",{\"id\":\"consul-1-10-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-10-0\",\"aria-label\":\"consul 1 10 0 permalink\"},`\\xbb`),`Consul 1.10.0`),mdx(\"h3\",{\"id\":\"licensing-changes\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#licensing-changes\",\"aria-label\":\"licensing changes permalink\"},`\\xbb`),`Licensing Changes `,mdx(EnterpriseAlert,{inline:true,mdxType:\"EnterpriseAlert\"})),mdx(\"p\",null,`You can only upgrade to Consul Enterprise 1.10 from the following Enterprise versions:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`1.8 release series: 1.8.13+`),mdx(\"li\",{parentName:\"ul\"},`1.9 release series: 1.9.7+`)),mdx(\"p\",null,`Other versions of Consul Enterprise are not forward compatible with v1.10 and will\ncause issues during the upgrade that could result in agents failing to start due to\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/license/faq\"},`changes in the way we manage licenses`),`.`),mdx(\"p\",null,`Consul Enterprise 1.10 has removed temporary licensing capabilities from the binaries\nfound on `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://releases.hashicorp.com.\"},`https://releases.hashicorp.com.`),` Servers will no longer load a license previously\nset through the CLI or API. Instead the license must be present in the server's configuration\nor environment prior to starting. See the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/license/overview\"},`licensing documentation`),`\nfor more information about how to configure the license. Client agents previously retrieved their\nlicense from the servers in the cluster within 30 minutes of starting and the snapshot agent\nwould similarly retrieve its license from the server or client agent it was configured to use. As\nof Consul Enterprise 1.10 both the snapshot agent and client agent have gained the ability to\nhave a license loaded from a configuration file or from their environment the same way server\nagents must have the license specified. Both agents can still perform automatic retrieval of their\nlicense but with a few extra stipulations. First, license auto-retrieval now requires that ACLs\nare on and that the client or snapshot agent is configured with a valid ACL token. Secondly, client\nagents require that either the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#start_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`start_join`)),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`retry_join`)),` configurations are set and that they resolve to server\nagents. If those stipulations are not met, attempting to start the client or snapshot agent will\nresult in it immediately shutting down.`),mdx(\"p\",null,`For the step by step upgrade procedures see the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading/instructions/upgrade-to-1-10-x\"},`Upgrading to 1.10.0`),` documentation.\nFor answers to common licensing questions please refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/enterprise/license/faq\"},`FAQ`)),mdx(\"h3\",{\"id\":\"envoy-xds-protocol-upgrades-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#envoy-xds-protocol-upgrades-1\",\"aria-label\":\"envoy xds protocol upgrades permalink\"},`\\xbb`),`Envoy xDS Protocol Upgrades`),mdx(\"p\",null,`Consul versions 1.9 and earlier exposed an xDS server for use by\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io\"},`Envoy`),` proxies using the v2 `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-docs/xds_protocol#variants-of-the-xds-transport-protocol\"},`\"State of the\nWorld\"`),`\nprotocol variant.`),mdx(\"p\",null,`Consul 1.10.0 adds support for the v3\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/api-docs/xds_protocol#incremental-xds\"},`Incremental`),`\nprotocol variant as the preferred way of conversing with Envoy. Both protocol\nvariants are supported in this Consul version to facilitate upgrading Consul\nand Envoy in a stairstep order to avoid downtime.`),mdx(\"p\",null,`In `,mdx(\"a\",{parentName:\"p\",\"href\":\"#consul-1-11-0\"},`Consul 1.11`),` the v2 State of the World protocol support will be removed.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Protocol`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Compatible Envoy Versions`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Compatible Consul Versions`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`Incremental`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`v3`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.18.x, 1.17.x, 1.16.x, 1.15.x`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.10.x`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`State of the World`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`v2`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.16.x and older`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1.10.x and older`)))),mdx(\"h4\",{\"id\":\"escape-hatches\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#escape-hatches\",\"aria-label\":\"escape hatches permalink\"},`\\xbb`),`Escape Hatches`),mdx(\"p\",null,`Any `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/envoy#advanced-configuration\"},`escape hatches`),` that\nare defined will likely need to be switched from using xDS v2 to xDS v3\nstructures. Mostly this involves migrating off of deprecated (and now removed)\nfields and switching untyped config to `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.17.2/configuration/overview/extension\"},`typed config`),`\nwith `,mdx(\"inlineCode\",{parentName:\"p\"},`@type`),` attributes set appropriately.`),mdx(\"p\",null,`xDS v3 syntax has been `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.envoyproxy.io/docs/envoy/v1.13.0/api-v3/api\"},`supported since Envoy\n1.13.0`),` so this could\nbe done on most earlier versions of Consul+Envoy in advance of the Consul\n1.10.0 upgrade.`),mdx(\"p\",null,`As an example, here's a Zipkin integration\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/blob/v1.9.5/test/integration/connect/envoy/case-zipkin/service_s2.hcl\"},`before`),`\nand `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/blob/71d45a34601423abdfc0a64d44c6a55cf88fa2fc/test/integration/connect/envoy/case-zipkin/service_s2.hcl\"},`after`)),mdx(\"h4\",{\"id\":\"stairstep-upgrade-path\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#stairstep-upgrade-path\",\"aria-label\":\"stairstep upgrade path permalink\"},`\\xbb`),`Stairstep Upgrade Path`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Upgrade Envoy sidecars to the latest version of Envoy that is\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/envoy#supported-versions\"},`supported`),` by the currently\nrunning version of Consul as well as Consul 1.10.0.`)),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Determine if you are using the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/envoy#advanced-configuration\"},`escape hatch`),`\nfeature. If so, rewrite the escape hatch to use the xDS v3 syntax and update\nthe service registration to reflect the updated escape hatch configuration\nby re-registering. This should purge v2 elements from any configs.`)),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Perform a normal upgrade of both Consul servers and clients to 1.10.0. At\nthis point the existing Envoy instances will continue to speak the v2 State\nof the World protocol to the new Consul instances without issue.`)),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`Once a Consul client is upgraded, use an updated CLI binary to re-bootstrap\nand restart Envoy using `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/connect/envoy\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul connect envoy`)),`.\nThis will ensure it switches over to the v3 Incremental xDS protocol.`),mdx(\"p\",{parentName:\"li\"},`Depending upon how you have chosen to run Envoy this is either one step\n(`,mdx(\"inlineCode\",{parentName:\"p\"},`consul connect envoy`),`) or two steps (`,mdx(\"inlineCode\",{parentName:\"p\"},`consul connect envoy -bootstrap`),`\nfollowed by running Envoy directly).`)),mdx(\"li\",{parentName:\"ol\"},mdx(\"p\",{parentName:\"li\"},`(Optionally) upgrade Envoy to the latest version supported in Consul 1.10.0.`))),mdx(\"h3\",{\"id\":\"transparent-proxy-on-kubernetes\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#transparent-proxy-on-kubernetes\",\"aria-label\":\"transparent proxy on kubernetes permalink\"},`\\xbb`),`Transparent Proxy on Kubernetes`),mdx(\"p\",null,`When upgrading to Consul >= 1.10.0, Consul-helm >= 0.32.0, and Consul-k8s >= 0.26.0, a Kubernetes Service must be added for every service registered to Consul. This Service should be added before\nperforming the upgrade. This will allow services to be managed by a central component, called `,mdx(\"inlineCode\",{parentName:\"p\"},`endpoints-controller`),`, which will enable features like\ntransparent proxy.`),mdx(\"p\",null,`After the upgrade is performed, all Pods of a service will need to be restarted. The service will be up and health\nchecks will continue to work without restarting the service, but a restart is required so the Pods can be re-injected with the latest\ncontainer configuration.`),mdx(\"h2\",{\"id\":\"consul-1-9-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-9-0\",\"aria-label\":\"consul 1 9 0 permalink\"},`\\xbb`),`Consul 1.9.0`),mdx(\"h3\",{\"id\":\"changes-to-raft-protocol-support\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-raft-protocol-support\",\"aria-label\":\"changes to raft protocol support permalink\"},`\\xbb`),`Changes to Raft Protocol Support`),mdx(\"p\",null,`Consul 1.8 supported Raft protocols 2 and 3. Consul 1.9.0 now only supports\nRaft protocol 3. Consul has defaulted to using Raft protocol 3 since version 1.0.0,\nso this should only impact users who have been using Consul prior to 1.0.0 and\nmay have the `,mdx(\"inlineCode\",{parentName:\"p\"},`raft_protocol`),` config setting set to 2. Users in that position\nshould upgrade to a previous release supporting both protocol versions and\nupdate their configuration to use Raft protocol 3 before continuing their upgrade\nto Consul 1.9.0.`),mdx(\"h3\",{\"id\":\"changes-to-configuration-defaults\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-configuration-defaults\",\"aria-label\":\"changes to configuration defaults permalink\"},`\\xbb`),`Changes to Configuration Defaults`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#enable_central_service_config\"},mdx(\"inlineCode\",{parentName:\"a\"},`enable_central_service_config`)),`\nconfiguration now defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`.`),mdx(\"h3\",{\"id\":\"changes-to-intentions\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#changes-to-intentions\",\"aria-label\":\"changes to intentions permalink\"},`\\xbb`),`Changes to Intentions`),mdx(\"h4\",{\"id\":\"namespaced-intentions\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#namespaced-intentions\",\"aria-label\":\"namespaced intentions permalink\"},`\\xbb`),`Namespaced Intentions `,mdx(EnterpriseAlert,{inline:true,mdxType:\"EnterpriseAlert\"})),mdx(\"p\",null,`The API endpoint to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/connect/intentions#list-intentions\"},`list\nintentions`),` now accepts the same\n`,mdx(\"inlineCode\",{parentName:\"p\"},`ns`),` query parameter (or `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Namespace`),` header) used on other API\nendpoints. By default this will now only list the intentions in a specific\nnamespace, rather than listing all intentions across all namespaces. To achieve\nthe same results as Consul versions prior to 1.9.0 request the wildcard\nnamespace with a query parameter of `,mdx(\"inlineCode\",{parentName:\"p\"},`?ns=*`),`.`),mdx(\"h4\",{\"id\":\"migration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#migration\",\"aria-label\":\"migration permalink\"},`\\xbb`),`Migration`),mdx(\"p\",null,`Upgrading to Consul 1.9.0 will trigger a one-time background migration of\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/intentions\"},`intentions`),` into an equivalent set of\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions\"},mdx(\"inlineCode\",{parentName:\"a\"},`service-intentions`)),` config\nentries. This process will wait until all of the Consul servers in the primary\ndatacenter are running Consul 1.9.0+.`),mdx(\"p\",null,`All write requests via either the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/connect/intentions\"},`Intentions\nAPI`),` endpoints or `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/config\"},`Config Entry\nAPI`),` endpoints for a `,mdx(\"inlineCode\",{parentName:\"p\"},`service-intentions`),` kind will be\nblocked until the migration process is complete after the upgrade. Reads will\nfunction normally throughout the migration, so authorization enforcement will\nbe unaffected.`),mdx(\"p\",null,`Secondary datacenters will perform their own one-time migration operations\nafter the primary datacenter completes its migration and all of the Consul\nservers in the secondary datacenter are running Consul 1.9.0+. It is safe to\nupgrade the datacenters in any order.`),mdx(\"h4\",{\"id\":\"deprecated-fields\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-fields\",\"aria-label\":\"deprecated fields permalink\"},`\\xbb`),`Deprecated Fields`),mdx(\"p\",null,`All old ID-based `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/connect/intentions\"},`Intentions API`),` CRUD endpoints\nwill retain all of their prior fields `,mdx(\"em\",{parentName:\"p\"},`as long as those endpoints are\nexclusively used to edit intentions`),`. Once the underlying config entry\nrepresentation is edited it will transition the intention into the newer format\nwhere some fields are no longer present. Once this transition occurs those\nintentions can no longer be used with the ID-based endpoints unless they are\nre-created via the old endpoints. Fields that are being removed or changing\nbehavior:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"intention-id\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#intention-id\",\"aria-label\":\"intention id permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`Intention.ID`)),` after migration is stored in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions#legacyid\"},mdx(\"inlineCode\",{parentName:\"a\"},`LegacyID`)),` field.\nAfter transitioning this field is cleared.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"intention-createdat\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#intention-createdat\",\"aria-label\":\"intention createdat permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`Intention.CreatedAt`)),` after migration is stored in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions#legacycreatetime\"},mdx(\"inlineCode\",{parentName:\"a\"},`LegacyCreateTime`)),`\nfield. After transitioning this field is cleared.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"intention-updatedat\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#intention-updatedat\",\"aria-label\":\"intention updatedat permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`Intention.UpdatedAt`)),` after migration is stored in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions#legacyupdatetime\"},mdx(\"inlineCode\",{parentName:\"a\"},`LegacyUpdateTime`)),`\nfield. After transitioning this field is cleared.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"intention-meta\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#intention-meta\",\"aria-label\":\"intention meta permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`Intention.Meta`)),` after migration is stored in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions#legacymeta\"},mdx(\"inlineCode\",{parentName:\"a\"},`LegacyMeta`)),`\nfield. To complete the transition, this field `,mdx(\"strong\",{parentName:\"p\"},`must be cleared manually`),`\nand the metadata moved up to the enclosing config entry's\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/config-entries/service-intentions#meta\"},mdx(\"inlineCode\",{parentName:\"a\"},`Meta`)),` field. This is\nnot done automatically since it is potentially a lossy operation.`))),mdx(\"h2\",{\"id\":\"consul-1-8-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-8-0\",\"aria-label\":\"consul 1 8 0 permalink\"},`\\xbb`),`Consul 1.8.0`),mdx(\"h4\",{\"id\":\"removal-of-deprecated-features\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#removal-of-deprecated-features\",\"aria-label\":\"removal of deprecated features permalink\"},`\\xbb`),`Removal of Deprecated Features`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#acl_enforce_version_8\"},mdx(\"inlineCode\",{parentName:\"a\"},`acl_enforce_version_8`)),`\nconfiguration has been removed (with version 8 ACL support by being on by\ndefault).`),mdx(\"h2\",{\"id\":\"consul-1-7-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-7-0\",\"aria-label\":\"consul 1 7 0 permalink\"},`\\xbb`),`Consul 1.7.0`),mdx(\"p\",null,`Consul 1.7.0 contains three major changes that impact upgrades:\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#stricter-json-decoding\"},`stricter JSON decoding`),`, `,mdx(\"a\",{parentName:\"p\",\"href\":\"#dns-ptr-record-output\"},`modified DNS outputs`),`,\nand `,mdx(\"a\",{parentName:\"p\",\"href\":\"#session-api\"},`backward-incompatible Session API changes`),`.`),mdx(\"h3\",{\"id\":\"session-api\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#session-api\",\"aria-label\":\"session api permalink\"},`\\xbb`),`Session API`),mdx(\"p\",null,`Consul 1.7.0 introduced a backwards incompatible change to the Session API.\nQueries to view or renew sessions from agents on earlier versions will be rejected.\nThis impacts features and products including: Vault, the Enterprise snapshot agent, and locks.`),mdx(\"p\",null,`The issue occurs when clients are still running 1.6.4 or earlier but servers have been upgraded to 1.7.0 or 1.7.1.\nFor this reason, we recommend you upgrade directly to 1.7.2 when it is available as it will include a fix for this issue.`),mdx(\"h3\",{\"id\":\"stricter-json-decoding\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#stricter-json-decoding\",\"aria-label\":\"stricter json decoding permalink\"},`\\xbb`),`Stricter JSON Decoding`),mdx(\"p\",null,`The HTTP API will now return 400 status codes with a textual error when unknown fields\nare present in the payload of a request. Previously, Consul would simply ignore the\nunknown fields. You will need to ensure that your API usage only uses supported\nfields which are those documented in the example payloads in the API documentation.`),mdx(\"h3\",{\"id\":\"dns-ptr-record-output\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#dns-ptr-record-output\",\"aria-label\":\"dns ptr record output permalink\"},`\\xbb`),`DNS PTR Record Output`),mdx(\"p\",null,`Consul will now return the canonical service name in response to PTR queries. For CE users, the\nchange is that the datacenter will be present where it was not before. For Consul Enterprise\nusers, both the datacenter and the services namespace will be present. For example, where a\nPTR record would previously have contained `,mdx(\"inlineCode\",{parentName:\"p\"},`web.service.consul`),`, it will now be `,mdx(\"inlineCode\",{parentName:\"p\"},`web.service.dc1.consul`),`\nin CE, or `,mdx(\"inlineCode\",{parentName:\"p\"},`web.service.ns1.dc1.consul`),` for Enterprise.`),mdx(\"h3\",{\"id\":\"telemetry-semantics-of-consul-rpc-query-changed-see-consul-rpc-queries_blocking\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#telemetry-semantics-of-consul-rpc-query-changed-see-consul-rpc-queries_blocking\",\"aria-label\":\"telemetry semantics of consul rpc query changed see consul rpc queries_blocking permalink\"},`\\xbb`),`Telemetry: semantics of `,mdx(\"inlineCode\",{parentName:\"h3\"},`consul.rpc.query`),` changed, see `,mdx(\"inlineCode\",{parentName:\"h3\"},`consul.rpc.queries_blocking`)),mdx(\"p\",null,`Consul has changed the semantics of query counts in its `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/telemetry#metrics-reference\"},`telemetry`),`.\n`,mdx(\"inlineCode\",{parentName:\"p\"},`consul.rpc.query`),` now only increments on the `,mdx(\"em\",{parentName:\"p\"},`start`),` of a query (blocking or non-blocking), whereas before it would\nmeasure when blocking queries polled for more data. The `,mdx(\"inlineCode\",{parentName:\"p\"},`consul.rpc.queries_blocking`),` gauge has been added\nto more precisely capture the view of `,mdx(\"em\",{parentName:\"p\"},`active`),` blocking queries.`),mdx(\"h3\",{\"id\":\"vault-default-http_max_conns_per_client-too-low-to-run-vault-properly\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#vault-default-http_max_conns_per_client-too-low-to-run-vault-properly\",\"aria-label\":\"vault default http_max_conns_per_client too low to run vault properly permalink\"},`\\xbb`),`Vault: default `,mdx(\"inlineCode\",{parentName:\"h3\"},`http_max_conns_per_client`),` too low to run Vault properly`),mdx(\"p\",null,`Consul 1.7.0 introduced `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#http_max_conns_per_client\"},`limiting of connections per client`),`. The default value\nwas 100, but Vault could use up to 128, which caused problems. If you want to use Vault with Consul 1.7.0, you should change the value to 200.\nStarting with Consul 1.7.1 this is the new default.`),mdx(\"h2\",{\"id\":\"consul-1-6-3\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-6-3\",\"aria-label\":\"consul 1 6 3 permalink\"},`\\xbb`),`Consul 1.6.3`),mdx(\"h3\",{\"id\":\"vault-default-http_max_conns_per_client-too-low-to-run-vault-properly-1\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#vault-default-http_max_conns_per_client-too-low-to-run-vault-properly-1\",\"aria-label\":\"vault default http_max_conns_per_client too low to run vault properly permalink\"},`\\xbb`),`Vault: default `,mdx(\"inlineCode\",{parentName:\"h3\"},`http_max_conns_per_client`),` too low to run Vault properly`),mdx(\"p\",null,`Consul 1.6.3 introduced `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#http_max_conns_per_client\"},`limiting of connections per client`),`. The default value\nwas 100, but Vault could use up to 128, which caused problems. If you want to use Vault with Consul 1.6.3 through 1.7.0, you should change the value to 200.\nStarting with Consul 1.7.1 this is the new default.`),mdx(\"h2\",{\"id\":\"consul-1-6-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-6-0\",\"aria-label\":\"consul 1 6 0 permalink\"},`\\xbb`),`Consul 1.6.0`),mdx(\"h4\",{\"id\":\"removal-of-deprecated-features-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#removal-of-deprecated-features-1\",\"aria-label\":\"removal of deprecated features permalink\"},`\\xbb`),`Removal of Deprecated Features`),mdx(\"p\",null,`Managed proxies, which are deprecated since Consul v1.3.0, have now been\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies\"},`removed`),`. Before upgrading, you must\nmigrate any managed proxy usage to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/proxies/deploy-sidecar-services\"},`sidecar service\nregistrations`),`.`),mdx(\"h2\",{\"id\":\"consul-1-4-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-4-0\",\"aria-label\":\"consul 1 4 0 permalink\"},`\\xbb`),`Consul 1.4.0`),mdx(\"p\",null,`There are two major features in Consul 1.4.0 that may impact upgrades: a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#acl-upgrade\"},`new\nACL system`),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"#multi-datacenter-service-mesh\"},`multi-datacenter support for\nservice mesh`),` in the Enterprise version.`),mdx(\"h3\",{\"id\":\"acl-upgrade\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#acl-upgrade\",\"aria-label\":\"acl upgrade permalink\"},`\\xbb`),`ACL Upgrade`),mdx(\"p\",null,`Consul 1.4.0 includes a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/security/access-control-setup-production\"},`new ACL\nsystem`),`\nthat is designed to have a smooth upgrade path but requires care to upgrade\ncomponents in the right order.`),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},`Note:`),` As with most major version upgrades, you cannot downgrade once the\nupgrade to 1.4.0 is complete as it adds new state to the raft store. As always\nit is `,mdx(\"em\",{parentName:\"p\"},`strongly`),` recommended that you test the upgrade first outside of\nproduction and ensure you take backup snapshots of all datacenters before\nupgrading.`),mdx(\"h4\",{\"id\":\"primary-datacenter\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#primary-datacenter\",\"aria-label\":\"primary datacenter permalink\"},`\\xbb`),`Primary Datacenter`),mdx(\"p\",null,`The \"ACL datacenter\" in 1.3.x and earlier is now referred to as the \"Primary\ndatacenter\". All configuration is backwards compatible and shouldn't need to\nchange prior to upgrade although it's strongly recommended to migrate ACL\nconfiguration to the new syntax soon after upgrade. This includes moving to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`primary_datacenter`),` rather than `,mdx(\"inlineCode\",{parentName:\"p\"},`acl_datacenter`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`acl_*`),` to the new `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#acl\"},`ACL\nblock`),`.`),mdx(\"p\",null,`Datacenters can be upgraded in any order although secondaries will remain in\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#legacy-acl-mode\"},`Legacy ACL mode`),` until the primary datacenter is fully\nupgraded.`),mdx(\"p\",null,`Each datacenter should follow the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading#standard-upgrades\"},`standard rolling upgrade\nprocedure`),`.`),mdx(\"h4\",{\"id\":\"legacy-acl-mode\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#legacy-acl-mode\",\"aria-label\":\"legacy acl mode permalink\"},`\\xbb`),`Legacy ACL Mode`),mdx(\"p\",null,`When a 1.4.0 server first starts, it runs in \"Legacy ACL mode\". In this mode,\nbootstrap requests and new ACL APIs will not be functional yet and will return\nan error. The server advertises its ability to support 1.4.0 ACLs via gossip\nand waits.`),mdx(\"p\",null,`In the primary datacenter, the servers all wait in legacy ACL mode until they\nsee every server in the primary datacenter advertise 1.4.0 ACL support. Once\nthis happens, the leader will complete the transition out of \"legacy ACL mode\"\nand write this into the state so future restarts don't need to go through the\nsame transition.`),mdx(\"p\",null,`In a secondary datacenter, the same process happens except that servers\n`,mdx(\"em\",{parentName:\"p\"},`additionally`),` wait for all servers in the primary datacenter making it safe to\nupgrade datacenters in any order.`),mdx(\"p\",null,`It should be noted that even if you are not upgrading, starting a brand new\n1.4.0 cluster will transition through legacy ACL mode so you may be unable to\nbootstrap ACLs until all the expected servers are up and healthy.`),mdx(\"h4\",{\"id\":\"legacy-token-accessor-migration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#legacy-token-accessor-migration\",\"aria-label\":\"legacy token accessor migration permalink\"},`\\xbb`),`Legacy Token Accessor Migration`),mdx(\"p\",null,`As soon as all servers in the primary datacenter have been upgraded to 1.4.0,\nthe leader will begin the process of creating new accessor IDs for all existing\nACL tokens.`),mdx(\"p\",null,`This process completes in the background and is rate limited to ensure it\ndoesn't overload the leader. It completes upgrades in batches of 128 tokens and\nwill not upgrade more than one batch per second so on a cluster with 10,000\ntokens, this may take several minutes.`),mdx(\"p\",null,`While this is happening both old and new ACLs will work correctly with the\ncaveat that new ACL `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/acl/tokens\"},`Token APIs`),` may not return an\naccessor ID for legacy tokens that are not yet migrated.`),mdx(\"h4\",{\"id\":\"migrating-existing-acls\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#migrating-existing-acls\",\"aria-label\":\"migrating existing acls permalink\"},`\\xbb`),`Migrating Existing ACLs`),mdx(\"p\",null,`New ACL policies have slightly different syntax designed to fix some\nshortcomings in old ACL syntax. During and after the upgrade process, any old\nACL tokens will continue to work and grant exactly the same level of access.`),mdx(\"p\",null,`After upgrade, it is still possible to create \"legacy\" tokens using the existing\nAPI so existing integrations that create tokens (e.g. Vault) will continue to\nwork. The \"legacy\" tokens generated though will not be able to take advantage of\nnew policy features. It's recommended that you complete migration of all tokens\nas soon as possible after upgrade, as well as updating any integrations to work\nwith the new ACL `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/acl/tokens\"},`Token`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/acl/policies\"},`Policy`),` APIs.`),mdx(\"h3\",{\"id\":\"multi-datacenter-service-mesh\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#multi-datacenter-service-mesh\",\"aria-label\":\"multi datacenter service mesh permalink\"},`\\xbb`),`Multi-datacenter service mesh`),mdx(\"p\",null,`This only applies to users upgrading from an older version of Consul Enterprise to Consul Enterprise 1.4.0 (all license types).`),mdx(\"p\",null,`In addition, this upgrade will only affect clusters where `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/connect/configuration\"},`service mesh is enabled`),` on your servers before the migration.`),mdx(\"p\",null,`Multi-datacenter service mesh uses the same primary/secondary approach as ACLs and\nwill use the same `,mdx(\"a\",{parentName:\"p\",\"href\":\"#primary-datacenter\"},`primary_datacenter`),`. When a secondary\ndatacenter server restarts with 1.4.0 it will detect it is not the primary and\nbegin an automatic bootstrap of multi-datacenter CA federation.`),mdx(\"p\",null,`Datacenters can be upgraded in either order; secondary datacenters will not\nswitch into multi-datacenter mode until all servers in both the secondary and\nprimary datacenter are detected to be running at least Consul 1.4.0. Secondary\ndatacenters monitor this periodically (every few minutes) and will\nautomatically upgrade service mesh to use a federated Certificate Authority when\nthey do.`),mdx(\"p\",null,`In general, migrating a Consul cluster from CE to Enterprise will update the\nCA to be federated automatically and without impact on service mesh traffic. When\nupgrading Consul Enterprise 1.3.x to Consul Enterprise 1.4.0 upgrades the CA\nupgrade is seamless, however depending on the size of the cluster, `,mdx(\"em\",{parentName:\"p\"},`new`),`\nconnection attempts in the secondary datacenter might fail for a short window\n(typically seconds) while the update is propagated due to the 1.3.x Beta\nauthorization endpoint validating originating cluster in a way that was not\nfully forwards compatible with migrating between cluster trust domains. That\nissue is fixed in 1.4.0 as part of General Availability.`),mdx(\"p\",null,`Once migrated (typically a few seconds). The service mesh will use the primary\ndatacenter's Certificate Authority as the root of trust for all other\ndatacenters. CA migration or root key changes in the primary will now rotate\nautomatically and without loss of connectivity throughout all datacenters and\nworkloads.`),mdx(\"h2\",{\"id\":\"consul-1-3-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-3-0\",\"aria-label\":\"consul 1 3 0 permalink\"},`\\xbb`),`Consul 1.3.0`),mdx(\"p\",null,`This version added support for multiple tag filters in service discovery\nqueries, however it introduced a subtle bug where API calls to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`/catalog/service/:name?tag=<tag>`),` would ignore the tag filter `,mdx(\"em\",{parentName:\"p\"},`only during the\nupgrade`),`. It only occurs when clients are still running 1.2.3 or earlier but\nservers have been upgraded. The `,mdx(\"inlineCode\",{parentName:\"p\"},`/health/service/:name?tag=<tag>`),` endpoint and\nDNS interface were `,mdx(\"em\",{parentName:\"p\"},`not`),` affected.`),mdx(\"p\",null,`For this reason, we recommend you upgrade directly to 1.3.1 which includes only\na fix for this issue.`),mdx(\"h2\",{\"id\":\"consul-1-1-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-1-0\",\"aria-label\":\"consul 1 1 0 permalink\"},`\\xbb`),`Consul 1.1.0`),mdx(\"h4\",{\"id\":\"removal-of-deprecated-features-2\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#removal-of-deprecated-features-2\",\"aria-label\":\"removal of deprecated features permalink\"},`\\xbb`),`Removal of Deprecated Features`),mdx(\"p\",null,`The following previously deprecated fields and config options have been removed:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"checkid\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#checkid\",\"aria-label\":\"checkid permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`CheckID`)),` has been removed from config file check definitions (use `,mdx(\"inlineCode\",{parentName:\"li\"},`id`),` instead).`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"script\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#script\",\"aria-label\":\"script permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`script`)),` has been removed from config file check definitions (use `,mdx(\"inlineCode\",{parentName:\"li\"},`args`),` instead).`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"enabletagoverride\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#enabletagoverride\",\"aria-label\":\"enabletagoverride permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`enableTagOverride`)),` is no longer valid in service definitions (use `,mdx(\"inlineCode\",{parentName:\"li\"},`enable_tag_override`),` instead).`),mdx(\"li\",{parentName:\"ul\"},`The `,mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/docs/upgrading/upgrade-specific#metric-names-updated\"},`deprecated set of metric names`),` (beginning with `,mdx(\"inlineCode\",{parentName:\"li\"},`consul.consul.`),`) has been removed\nalong with the `,mdx(\"inlineCode\",{parentName:\"li\"},`enable_deprecated_names`),` option from the metrics configuration.`)),mdx(\"h4\",{\"id\":\"new-defaults-for-raft-snapshot-creation\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#new-defaults-for-raft-snapshot-creation\",\"aria-label\":\"new defaults for raft snapshot creation permalink\"},`\\xbb`),`New defaults for Raft Snapshot Creation`),mdx(\"p\",null,`Consul 1.0.1 (and earlier versions of Consul) checked for raft snapshots every\n5 seconds, and created new snapshots for every 8192 writes. These defaults cause\nconstant disk IO in large busy clusters. Consul 1.1.0 increases these to larger values,\nand makes them tunable via the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#_raft_snapshot_interval\"},`raft_snapshot_interval`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#_raft_snapshot_threshold\"},`raft_snapshot_threshold`),` parameters. We recommend\nkeeping the new defaults. However, operators can go back to the old defaults by changing their\nconfig if they prefer more frequent snapshots. See the documentation for `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#_raft_snapshot_interval\"},`raft_snapshot_interval`),`\nand `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#_raft_snapshot_threshold\"},`raft_snapshot_threshold`),` to understand the trade-offs\nwhen tuning these.`),mdx(\"h2\",{\"id\":\"consul-1-0-7\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-0-7\",\"aria-label\":\"consul 1 0 7 permalink\"},`\\xbb`),`Consul 1.0.7`),mdx(\"p\",null,`When requesting a specific service (`,mdx(\"inlineCode\",{parentName:\"p\"},`/v1/health/:service`),` or\n`,mdx(\"inlineCode\",{parentName:\"p\"},`/v1/catalog/:service`),` endpoints), the `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Index`),` returned is now the\nindex at which that `,mdx(\"em\",{parentName:\"p\"},`specific service`),` was last modified. In version 1.0.6 and\nearlier the `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Index`),` returned was the index at which `,mdx(\"em\",{parentName:\"p\"},`any`),` service was\nlast modified. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/issues/3890\"},`GH-3890`),`\nfor more details.`),mdx(\"p\",null,`During upgrades from 1.0.6 or lower to 1.0.7 or higher, watchers are likely to\nsee `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Index`),` for these endpoints decrease between blocking calls.`),mdx(\"p\",null,`Consul's watch feature and `,mdx(\"inlineCode\",{parentName:\"p\"},`consul-template`),` should gracefully handle this case.\nOther tools relying on blocking service or health queries are also likely to\nwork; some may require a restart. It is possible external tools could break and\neither stop working or continually re-request data without blocking if they\nhave assumed indexes can never decrease or be reset and/or persist index\nvalues. Please test any blocking query integrations in a controlled environment\nbefore proceeding.`),mdx(\"h2\",{\"id\":\"consul-1-0-1\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-0-1\",\"aria-label\":\"consul 1 0 1 permalink\"},`\\xbb`),`Consul 1.0.1`),mdx(\"h4\",{\"id\":\"carefully-check-and-remove-stale-servers-during-rolling-upgrades\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#carefully-check-and-remove-stale-servers-during-rolling-upgrades\",\"aria-label\":\"carefully check and remove stale servers during rolling upgrades permalink\"},`\\xbb`),`Carefully Check and Remove Stale Servers During Rolling Upgrades`),mdx(\"p\",null,`Consul 1.0 (and earlier versions of Consul when running with `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#_raft_protocol\"},`Raft protocol\n3`),` had an issue where performing\nrolling updates of Consul servers could result in an outage from old servers\nremaining in the cluster.\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/autopilot-datacenter-operations\"},`Autopilot`),`\nwould normally remove old servers when new ones come online, but it was also\nwaiting to promote servers to voters in pairs to maintain an odd quorum size.\nThe pairwise promotion feature was removed so that servers become voters as\nsoon as they are stable, allowing Autopilot to remove old servers in a safer\nway.`),mdx(\"p\",null,`When upgrading from Consul 1.0, you may need to manually\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/force-leave\"},`force-leave`),` old servers as part of a rolling\nupdate to Consul 1.0.1.`),mdx(\"h2\",{\"id\":\"consul-1-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-1-0\",\"aria-label\":\"consul 1 0 permalink\"},`\\xbb`),`Consul 1.0`),mdx(\"p\",null,`Consul 1.0 has several important breaking changes that are documented here.\nPlease be sure to read over all the details here before upgrading.`),mdx(\"h4\",{\"id\":\"raft-protocol-now-defaults-to-3\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#raft-protocol-now-defaults-to-3\",\"aria-label\":\"raft protocol now defaults to 3 permalink\"},`\\xbb`),`Raft Protocol Now Defaults to 3`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_raft_protocol\"},mdx(\"inlineCode\",{parentName:\"a\"},`-raft-protocol`)),` default has\nbeen changed from 2 to 3, enabling all\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/autopilot-datacenter-operations\"},`Autopilot`),`\nfeatures by default.`),mdx(\"p\",null,`Raft protocol version 3 requires Consul running 0.8.0 or newer on all servers\nin order to work, so if you are upgrading with older servers in a cluster then\nyou will need to set this back to 2 in order to upgrade. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading/upgrade-specific#raft-protocol-version-compatibility\"},`Raft Protocol\nVersion\nCompatibility`),`\nfor more details. Also the format of `,mdx(\"inlineCode\",{parentName:\"p\"},`peers.json`),` used for outage recovery is\ndifferent when running with the latest Raft protocol. Review `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/recovery-outage#manual-recovery-using-peers-json\"},`Manual Recovery\nUsing\npeers.json`),`\nfor a description of the required format.`),mdx(\"p\",null,`Please note that the Raft protocol is different from Consul's internal protocol\nas described on the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/upgrading/compatibility\"},`Protocol Compatibility Promise`),`\npage, and as is shown in commands like `,mdx(\"inlineCode\",{parentName:\"p\"},`consul members`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`consul version`),`.\nTo see the version of the Raft protocol in use on each server, use the `,mdx(\"inlineCode\",{parentName:\"p\"},`consul operator raft list-peers`),` command.`),mdx(\"p\",null,`The easiest way to upgrade servers is to have each server leave the cluster,\nupgrade its Consul version, and then add it back. Make sure the new server\njoins successfully and that the cluster is stable before rolling the upgrade\nforward to the next server. It's also possible to stand up a new set of\nservers, and then slowly stand down each of the older servers in a similar\nfashion.`),mdx(\"p\",null,`When using Raft protocol version 3, servers are identified by their\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_node_id\"},mdx(\"inlineCode\",{parentName:\"a\"},`-node-id`)),` instead of their IP address\nwhen Consul makes changes to its internal Raft quorum configuration. This means\nthat once a cluster has been upgraded with servers all running Raft protocol\nversion 3, it will no longer allow servers running any older Raft protocol\nversions to be added. If running a single Consul server, restarting it in-place\nwill result in that server not being able to elect itself as a leader. To avoid\nthis, either set the Raft protocol back to 2, or use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/recovery-outage#manual-recovery-using-peers-json\"},`Manual Recovery Using\npeers.json`),`\nto map the server to its node ID in the Raft quorum configuration.`),mdx(\"h4\",{\"id\":\"config-files-require-an-extension\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#config-files-require-an-extension\",\"aria-label\":\"config files require an extension permalink\"},`\\xbb`),`Config Files Require an Extension`),mdx(\"p\",null,`As part of supporting the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/hcl#syntax\"},`HCL`),` format\nfor Consul's config files, an `,mdx(\"inlineCode\",{parentName:\"p\"},`.hcl`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`.json`),` extension is required for all\nconfig files loaded by Consul, even when using the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_config_file\"},mdx(\"inlineCode\",{parentName:\"a\"},`-config-file`)),` argument to specify a\nfile directly.`),mdx(\"h4\",{\"id\":\"use-snake-case-for-service-definition-parameters\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#use-snake-case-for-service-definition-parameters\",\"aria-label\":\"use snake case for service definition parameters permalink\"},`\\xbb`),`Use Snake Case for Service Definition Parameters`),mdx(\"p\",null,`Snake case, which is a convention that uses underscores between words in a configuration key, is required for all configuration file formats. Change any camel cased parameter to snake case equivalents before upgrading.`),mdx(\"h4\",{\"id\":\"deprecated-options-have-been-removed\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-options-have-been-removed\",\"aria-label\":\"deprecated options have been removed permalink\"},`\\xbb`),`Deprecated Options Have Been Removed`),mdx(\"p\",null,`All of Consul's previously deprecated command line flags and config options\nhave been removed, so these will need to be mapped to their equivalents before\nupgrading. Here's the complete list of removed options and their equivalents:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Removed Option`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Equivalent`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-dc`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_datacenter\"},mdx(\"inlineCode\",{parentName:\"a\"},`-datacenter`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-azure-tag-name`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-azure-tag-value`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-ec2-region`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-ec2-tag-key`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-ec2-tag-value`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-gce-credentials-file`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-gce-project-name`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-gce-tag-name`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`-retry-join-gce-zone-pattern`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/cli-flags#_retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`addresses.rpc`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},`None, the RPC server for CLI commands is no longer supported.`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`advertise_addrs`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#ports\"},mdx(\"inlineCode\",{parentName:\"a\"},`ports`)),` with `,mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#advertise_addr\"},mdx(\"inlineCode\",{parentName:\"a\"},`advertise_addr`)),` and/or `,mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#advertise_addr_wan\"},mdx(\"inlineCode\",{parentName:\"a\"},`advertise_addr_wan`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`dogstatsd_addr`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-dogstatsd_addr\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.dogstatsd_addr`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`dogstatsd_tags`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-dogstatsd_tags\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.dogstatsd_tags`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`http_api_response_headers`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"a\",{parentName:\"td\",\"href\":\"/consul/docs/agent/config/config-files#response_headers\"},mdx(\"inlineCode\",{parentName:\"a\"},`http_config.response_headers`)))),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},mdx(\"inlineCode\",{parentName:\"td\"},`ports.rpc`)),mdx(\"td\",{parentName:\"tr\",\"align\":null},`None, the RPC server for CLI commands is no longer supported.`)))),mdx(\"p\",null,`| `,mdx(\"inlineCode\",{parentName:\"p\"},`recursor`),`                                             | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#recursors\"},mdx(\"inlineCode\",{parentName:\"a\"},`recursors`)),`                                                          |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`retry_join_azure`),`                                     | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`retry-join`)),`                                                                                                                       |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`retry_join_ec2`),`                                       | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`retry-join`)),`                                                                                                                       |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`retry_join_gce`),`                                       | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#retry_join\"},mdx(\"inlineCode\",{parentName:\"a\"},`retry-join`)),`                                                                                                                       |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`statsd_addr`),`                                          | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-statsd_address\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.statsd_address`)),`                            |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`statsite_addr`),`                                        | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-statsite_address\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.statsite_address`)),`                        |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`statsite_prefix`),`                                      | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-metrics_prefix\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.metrics_prefix`)),`                                                                                             |\n| `,mdx(\"inlineCode\",{parentName:\"p\"},`telemetry.statsite_prefix`),`                            | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-metrics_prefix\"},mdx(\"inlineCode\",{parentName:\"a\"},`telemetry.metrics_prefix`)),`                                                                                             |\n| (service definitions) `,mdx(\"inlineCode\",{parentName:\"p\"},`serviceid`),`                      | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/agent/service#id\"},mdx(\"inlineCode\",{parentName:\"a\"},`id`)),`                                                                                                                                   |\n| (service definitions) `,mdx(\"inlineCode\",{parentName:\"p\"},`dockercontainerid`),`              | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/agent/check#dockercontainerid\"},mdx(\"inlineCode\",{parentName:\"a\"},`docker_container_id`)),`                                                                                                                          |\n| (service definitions) `,mdx(\"inlineCode\",{parentName:\"p\"},`tlsskipverify`),`                  | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/agent/check#tlsskipverify\"},mdx(\"inlineCode\",{parentName:\"a\"},`tls_skip_verify`)),`                                                                                                                              |\n| (service definitions) `,mdx(\"inlineCode\",{parentName:\"p\"},`deregistercriticalserviceafter`),` | `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/agent/check#deregistercriticalserviceafter\"},mdx(\"inlineCode\",{parentName:\"a\"},`deregister_critical_service_after`)),`                                                                                                            |`),mdx(\"h4\",{\"id\":\"statsite_prefix-renamed-to-metrics_prefix\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#statsite_prefix-renamed-to-metrics_prefix\",\"aria-label\":\"statsite_prefix renamed to metrics_prefix permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h4\"},`statsite_prefix`),` Renamed to `,mdx(\"inlineCode\",{parentName:\"h4\"},`metrics_prefix`)),mdx(\"p\",null,`Since the `,mdx(\"inlineCode\",{parentName:\"p\"},`statsite_prefix`),` configuration option applied to all telemetry\nproviders, `,mdx(\"inlineCode\",{parentName:\"p\"},`statsite_prefix`),` was renamed to\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#telemetry-metrics_prefix\"},mdx(\"inlineCode\",{parentName:\"a\"},`metrics_prefix`)),`.\nConfiguration files will need to be updated when upgrading to this version of\nConsul.`),mdx(\"h4\",{\"id\":\"advertise_addrs-removed\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#advertise_addrs-removed\",\"aria-label\":\"advertise_addrs removed permalink\"},`\\xbb`),mdx(\"inlineCode\",{parentName:\"h4\"},`advertise_addrs`),` Removed`),mdx(\"p\",null,`This configuration option was removed since it was redundant with\n`,mdx(\"inlineCode\",{parentName:\"p\"},`advertise_addr`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`advertise_addr_wan`),` in combination with `,mdx(\"inlineCode\",{parentName:\"p\"},`ports`),` and also\nwrongly stated that you could configure both host and port.`),mdx(\"h4\",{\"id\":\"escaping-behavior-changed-for-go-discover-configs\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#escaping-behavior-changed-for-go-discover-configs\",\"aria-label\":\"escaping behavior changed for go discover configs permalink\"},`\\xbb`),`Escaping Behavior Changed for go-discover Configs`),mdx(\"p\",null,`The format for `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#retry-join\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join`)),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#retry-join-wan\"},mdx(\"inlineCode\",{parentName:\"a\"},`-retry-join-wan`)),` values that use\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/go-discover\"},`go-discover`),` cloud auto joining has\nchanged. Values in `,mdx(\"inlineCode\",{parentName:\"p\"},`key=val`),` sequences must no longer be URL encoded and can be\nprovided as literals as long as they do not contain spaces, backslashes `,mdx(\"inlineCode\",{parentName:\"p\"},`\\\\`),` or\ndouble quotes `,mdx(\"inlineCode\",{parentName:\"p\"},`\"`),`. If values contain these characters then use double quotes as\nin `,mdx(\"inlineCode\",{parentName:\"p\"},`\"some key\"=\"some value\"`),`. Special characters within a double quoted string\ncan be escaped with a backslash `,mdx(\"inlineCode\",{parentName:\"p\"},`\\\\`),`.`),mdx(\"h4\",{\"id\":\"http-verbs-are-enforced-in-many-http-apis\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#http-verbs-are-enforced-in-many-http-apis\",\"aria-label\":\"http verbs are enforced in many http apis permalink\"},`\\xbb`),`HTTP Verbs are Enforced in Many HTTP APIs`),mdx(\"p\",null,`Many endpoints in the HTTP API that previously took any HTTP verb now check for\nspecific HTTP verbs and enforce them. This may break clients relying on the old\nbehavior. Here's the complete list of updated endpoints and required HTTP\nverbs:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Endpoint`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Required HTTP Verb`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/acl/info`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/acl/list`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/acl/replication`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/check/deregister`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/check/fail`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/check/pass`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/check/register`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/check/warn`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/checks`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/force-leave`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/join`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/members`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/metrics`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/self`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/service/register`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/service/deregister`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/agent/services`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/datacenters`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/deregister`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/node`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/nodes`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/register`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/service`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/catalog/services`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/coordinate/datacenters`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/coordinate/nodes`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/health/checks`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/health/node`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/health/service`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/health/state`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/internal/ui/node`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/internal/ui/nodes`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/internal/ui/services`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/session/info`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/session/list`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/session/node`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/status/leader`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/status/peers`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/operator/area/:uuid/members`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`GET`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`/v1/operator/area/:uuid/join`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`PUT`)))),mdx(\"h4\",{\"id\":\"unauthorized-kv-requests-return-403\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#unauthorized-kv-requests-return-403\",\"aria-label\":\"unauthorized kv requests return 403 permalink\"},`\\xbb`),`Unauthorized KV Requests Return 403`),mdx(\"p\",null,`When ACLs are enabled, reading a key with an unauthorized token returns a 403.\nThis previously returned a 404 response.`),mdx(\"h4\",{\"id\":\"config-section-of-agent-self-endpoint-has-changed\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#config-section-of-agent-self-endpoint-has-changed\",\"aria-label\":\"config section of agent self endpoint has changed permalink\"},`\\xbb`),`Config Section of Agent Self Endpoint has Changed`),mdx(\"p\",null,`The /v1/agent/self endpoint's `,mdx(\"inlineCode\",{parentName:\"p\"},`Config`),` section has often been in flux as it was\ndirectly returning one of Consul's internal data structures. This configuration\nstructure has been moved under `,mdx(\"inlineCode\",{parentName:\"p\"},`DebugConfig`),`, and is documents as for debugging\nuse and subject to change, and a small set of elements of `,mdx(\"inlineCode\",{parentName:\"p\"},`Config`),` have been\nmaintained and documented. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/agent#read-configuration\"},`Read\nConfiguration`),` endpoint documentation for\ndetails.`),mdx(\"h4\",{\"id\":\"deprecated-configtest-command-removed\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#deprecated-configtest-command-removed\",\"aria-label\":\"deprecated configtest command removed permalink\"},`\\xbb`),`Deprecated `,mdx(\"inlineCode\",{parentName:\"h4\"},`configtest`),` Command Removed`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`configtest`),` command was deprecated and has been superseded by the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`validate`),` command.`),mdx(\"h4\",{\"id\":\"undocumented-flags-in-validate-command-removed\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#undocumented-flags-in-validate-command-removed\",\"aria-label\":\"undocumented flags in validate command removed permalink\"},`\\xbb`),`Undocumented Flags in `,mdx(\"inlineCode\",{parentName:\"h4\"},`validate`),` Command Removed`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`validate`),` command supported the `,mdx(\"inlineCode\",{parentName:\"p\"},`-config-file`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`-config-dir`),` command\nline flags but did not document them. This support has been removed since the\nflags are not required.`),mdx(\"h4\",{\"id\":\"metric-names-updated\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#metric-names-updated\",\"aria-label\":\"metric names updated permalink\"},`\\xbb`),`Metric Names Updated`),mdx(\"p\",null,`Metric names no longer start with `,mdx(\"inlineCode\",{parentName:\"p\"},`consul.consul`),`. To help with transitioning\ndashboards and other metric consumers, the field `,mdx(\"inlineCode\",{parentName:\"p\"},`enable_deprecated_names`),` has\nbeen added to the telemetry section of the config, which will enable metrics\nwith the old naming scheme to be sent alongside the new ones. The following\nprefixes were affected:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Prefix`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.acl`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.autopilot`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.catalog`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.fsm`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.health`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.http`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.kvs`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.leader`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.prepared-query`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.rpc`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.session`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.session_ttl`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`consul.consul.txn`)))),mdx(\"h4\",{\"id\":\"checks-validated-on-agent-startup\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#checks-validated-on-agent-startup\",\"aria-label\":\"checks validated on agent startup permalink\"},`\\xbb`),`Checks Validated On Agent Startup`),mdx(\"p\",null,`Consul agents now validate health check definitions in their configuration and\nwill fail at startup if any checks are invalid. In previous versions of Consul,\ninvalid health checks would get skipped.`),mdx(\"h2\",{\"id\":\"consul-0-9-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-9-0\",\"aria-label\":\"consul 0 9 0 permalink\"},`\\xbb`),`Consul 0.9.0`),mdx(\"h4\",{\"id\":\"script-checks-are-now-opt-in\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#script-checks-are-now-opt-in\",\"aria-label\":\"script checks are now opt in permalink\"},`\\xbb`),`Script Checks Are Now Opt-In`),mdx(\"p\",null,`A new `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_enable_script_checks\"},mdx(\"inlineCode\",{parentName:\"a\"},`enable_script_checks`)),`\nconfiguration option was added, and defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`, meaning that in order\nto allow an agent to run health checks that execute scripts, this will need to\nbe configured and set to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`. This provides a safer out-of-the-box\nconfiguration for Consul where operators must opt-in to allow script-based\nhealth checks.`),mdx(\"p\",null,`If your cluster uses script health checks please be sure to set this to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`\nas part of upgrading agents. If this is set to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`, you should also enable\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/security/access-control-setup-production\"},`ACLs`),`\nto provide control over which users are allowed to register health checks that\ncould potentially execute scripts on the agent machines.`),mdx(\"div\",{\"className\":\"alert alert-danger g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Security Warning:`),` Using `,mdx(\"inlineCode\",{parentName:\"p\"},`enable_script_checks`),` without ACLs and without\n`,mdx(\"inlineCode\",{parentName:\"p\"},`allow_write_http_from`),` is `,mdx(\"em\",{parentName:\"p\"},`DANGEROUS`),`. Use the `,mdx(\"inlineCode\",{parentName:\"p\"},`enable_local_script_checks`),` setting\nintroduced in v0.9.4 instead. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://www.hashicorp.com/blog/protecting-consul-from-rce-risk-in-specific-configurations/\"},`this article`),`\nfor more information.`)),mdx(\"h4\",{\"id\":\"web-ui-is-no-longer-released-separately\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#web-ui-is-no-longer-released-separately\",\"aria-label\":\"web ui is no longer released separately permalink\"},`\\xbb`),`Web UI Is No Longer Released Separately`),mdx(\"p\",null,`Consul releases will no longer include a `,mdx(\"inlineCode\",{parentName:\"p\"},`web_ui.zip`),` file with the compiled\nweb assets. These have been built in to the Consul binary since the 0.7.x\nseries and can be enabled with the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_ui\"},mdx(\"inlineCode\",{parentName:\"a\"},`-ui`)),`\nconfiguration option. These built-in web assets have always been identical to\nthe contents of the `,mdx(\"inlineCode\",{parentName:\"p\"},`web_ui.zip`),` file for each release. The\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_ui_dir\"},mdx(\"inlineCode\",{parentName:\"a\"},`-ui-dir`)),` option is still available for\nhosting customized versions of the web assets, but the vast majority of Consul\nusers can just use the built in web assets.`),mdx(\"h2\",{\"id\":\"consul-0-8-0\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-8-0\",\"aria-label\":\"consul 0 8 0 permalink\"},`\\xbb`),`Consul 0.8.0`),mdx(\"h4\",{\"id\":\"upgrade-current-cluster-leader-last\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#upgrade-current-cluster-leader-last\",\"aria-label\":\"upgrade current cluster leader last permalink\"},`\\xbb`),`Upgrade Current Cluster Leader Last`),mdx(\"p\",null,`We identified a potential issue with Consul 0.8 that requires the current\ncluster leader to be upgraded last when updating multiple servers. Please see\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul/issues/2889\"},`this issue`),` for more details.`),mdx(\"h4\",{\"id\":\"command-line-interface-rpc-deprecation\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#command-line-interface-rpc-deprecation\",\"aria-label\":\"command line interface rpc deprecation permalink\"},`\\xbb`),`Command-Line Interface RPC Deprecation`),mdx(\"p\",null,`The RPC client interface has been removed. All CLI commands that used RPC and\nthe `,mdx(\"inlineCode\",{parentName:\"p\"},`-rpc-addr`),` flag to communicate with Consul have been converted to use the\nHTTP API and the appropriate flags for it, and the `,mdx(\"inlineCode\",{parentName:\"p\"},`rpc`),` field has been removed\nfrom the port and address binding configs. You will need to remove these fields\nfrom your config files and update any scripts that passed a custom `,mdx(\"inlineCode\",{parentName:\"p\"},`-rpc-addr`),`\nto the following commands:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"force-leave\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#force-leave\",\"aria-label\":\"force leave permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`force-leave`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"info\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#info\",\"aria-label\":\"info permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`info`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"join\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#join\",\"aria-label\":\"join permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`join`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"keyring\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#keyring\",\"aria-label\":\"keyring permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`keyring`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"leave\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#leave\",\"aria-label\":\"leave permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`leave`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"members\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#members\",\"aria-label\":\"members permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`members`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"monitor\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#monitor\",\"aria-label\":\"monitor permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`monitor`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"reload\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#reload\",\"aria-label\":\"reload permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`reload`)))),mdx(\"h4\",{\"id\":\"version-8-acls-are-now-opt-out\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#version-8-acls-are-now-opt-out\",\"aria-label\":\"version 8 acls are now opt out permalink\"},`\\xbb`),`Version 8 ACLs Are Now Opt-Out`),mdx(\"p\",null,`The `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#acl_enforce_version_8\"},mdx(\"inlineCode\",{parentName:\"a\"},`acl_enforce_version_8`)),`\nconfiguration now defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` to enable full version 8 ACL support by\ndefault. If you are upgrading an existing cluster with ACLs enabled, you will\nneed to set this to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` during the upgrade on `,mdx(\"strong\",{parentName:\"p\"},`both Consul agents and\nConsul servers`),`. Version 8 ACLs were also changed so that\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#acl_datacenter\"},mdx(\"inlineCode\",{parentName:\"a\"},`acl_datacenter`)),` must be set on\nagents in order to enable the agent-side enforcement of ACLs. This makes for a\nsmoother experience in clusters where ACLs aren't enabled at all, but where the\nagents would have to wait to contact a Consul server before learning that.`),mdx(\"h4\",{\"id\":\"remote-exec-is-now-opt-in\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#remote-exec-is-now-opt-in\",\"aria-label\":\"remote exec is now opt in permalink\"},`\\xbb`),`Remote Exec Is Now Opt-In`),mdx(\"p\",null,`The default for\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#disable_remote_exec\"},mdx(\"inlineCode\",{parentName:\"a\"},`disable_remote_exec`)),` was\nchanged to \"true\", so now operators need to opt-in to having agents support\nrunning commands remotely via `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/commands/exec\"},mdx(\"inlineCode\",{parentName:\"a\"},`consul exec`)),`.`),mdx(\"h4\",{\"id\":\"raft-protocol-version-compatibility\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#raft-protocol-version-compatibility\",\"aria-label\":\"raft protocol version compatibility permalink\"},`\\xbb`),`Raft Protocol Version Compatibility`),mdx(\"p\",null,`When upgrading to Consul 0.8.0 from a version lower than 0.7.0, users will need\nto set the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/cli-flags#_raft_protocol\"},mdx(\"inlineCode\",{parentName:\"a\"},`-raft-protocol`)),` option\nto 1 in order to maintain backwards compatibility with the old servers during\nthe upgrade. After the servers have been migrated to version 0.8.0,\n`,mdx(\"inlineCode\",{parentName:\"p\"},`-raft-protocol`),` can be moved up to 2 and the servers restarted to match the\ndefault.`),mdx(\"p\",null,`The Raft protocol must be stepped up in this way; only adjacent version numbers\nare compatible (for example, version 1 cannot talk to version 3). Here is a\ntable of the Raft Protocol versions supported by each Consul version:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",{parentName:\"tr\",\"align\":null},`Version`),mdx(\"th\",{parentName:\"tr\",\"align\":null},`Supported Raft Protocols`))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`0.6 and earlier`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`0`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`0.7`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1`)),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",{parentName:\"tr\",\"align\":null},`0.8`),mdx(\"td\",{parentName:\"tr\",\"align\":null},`1, 2, 3`)))),mdx(\"p\",null,`In order to enable all\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/autopilot-datacenter-operations\"},`Autopilot`),`\nfeatures, all servers in a Consul datacenter must be running with Raft protocol\nversion 3 or later.`),mdx(\"h2\",{\"id\":\"consul-0-7-1\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-7-1\",\"aria-label\":\"consul 0 7 1 permalink\"},`\\xbb`),`Consul 0.7.1`),mdx(\"h4\",{\"id\":\"child-process-reaping\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#child-process-reaping\",\"aria-label\":\"child process reaping permalink\"},`\\xbb`),`Child Process Reaping`),mdx(\"p\",null,`Child process reaping support has been removed, along with the `,mdx(\"inlineCode\",{parentName:\"p\"},`reap`),`\nconfiguration option. Reaping is also done via\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/Yelp/dumb-init\"},`dumb-init`),` in the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/docker-consul\"},`Consul Docker\nimage`),`, so removing it from Consul\nitself simplifies the code and eases future maintenance for Consul. If you are\nrunning Consul as PID 1 in a container you will need to arrange for a wrapper\nprocess to reap child processes.`),mdx(\"h4\",{\"id\":\"dns-resiliency-defaults\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#dns-resiliency-defaults\",\"aria-label\":\"dns resiliency defaults permalink\"},`\\xbb`),`DNS Resiliency Defaults`),mdx(\"p\",null,`The default for `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`max_stale`)),` has been\nincreased from 5 seconds to a near-indefinite threshold (10 years) to allow DNS\nqueries to continue to be served in the event of a long outage with no leader.\nA new telemetry counter was added at `,mdx(\"inlineCode\",{parentName:\"p\"},`consul.dns.stale_queries`),` to track when\nagents serve DNS queries that are stale by more than 5 seconds.`),mdx(\"h2\",{\"id\":\"consul-0-7\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-7\",\"aria-label\":\"consul 0 7 permalink\"},`\\xbb`),`Consul 0.7`),mdx(\"p\",null,`Consul version 0.7 is a very large release with many important changes. Changes\nto be aware of during an upgrade are categorized below.`),mdx(\"h4\",{\"id\":\"performance-timing-defaults-and-tuning\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#performance-timing-defaults-and-tuning\",\"aria-label\":\"performance timing defaults and tuning permalink\"},`\\xbb`),`Performance Timing Defaults and Tuning`),mdx(\"p\",null,`Consul 0.7 now defaults the DNS configuration to allow for stale queries by\ndefaulting `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#allow_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`allow_stale`)),` to true for\nbetter utilization of available servers. If you want to retain the previous\nbehavior, set the following configuration:`),mdx(\"pre\",{\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"dns_config\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"allow_stale\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`false`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`Consul also 0.7 introduced support for tuning Raft performance using a new\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#performance\"},`performance configuration block`),`. Also,\nthe default Raft timing is set to a lower-performance mode suitable for\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/install/performance#minimum\"},`minimal Consul servers`),`.`),mdx(\"p\",null,`To continue to use the high-performance settings that were the default prior to\nConsul 0.7 (recommended for production servers), add the following\nconfiguration to all Consul servers when upgrading:`),mdx(\"pre\",{\"className\":\"language-json\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-json\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"performance\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`\"raft_multiplier\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`1`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`See the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/install/performance\"},`Server Performance`),` guide for more details.`),mdx(\"h4\",{\"id\":\"leave-related-configuration-defaults\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#leave-related-configuration-defaults\",\"aria-label\":\"leave related configuration defaults permalink\"},`\\xbb`),`Leave-Related Configuration Defaults`),mdx(\"p\",null,`The default behavior of `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#leave_on_terminate\"},mdx(\"inlineCode\",{parentName:\"a\"},`leave_on_terminate`)),`\nand `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#skip_leave_on_interrupt\"},mdx(\"inlineCode\",{parentName:\"a\"},`skip_leave_on_interrupt`)),`\nare now dependent on whether or not the agent is acting as a server or client:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`For servers, `,mdx(\"inlineCode\",{parentName:\"p\"},`leave_on_terminate`),` defaults to \"false\" and `,mdx(\"inlineCode\",{parentName:\"p\"},`skip_leave_on_interrupt`),`\ndefaults to \"true\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`For clients, `,mdx(\"inlineCode\",{parentName:\"p\"},`leave_on_terminate`),` defaults to \"true\" and `,mdx(\"inlineCode\",{parentName:\"p\"},`skip_leave_on_interrupt`),`\ndefaults to \"false\".`))),mdx(\"p\",null,`These defaults are designed to be safer for servers so that you must explicitly\nconfigure them to leave the cluster. This also results in a better experience for\nclients, especially in cloud environments where they may be created and destroyed\noften and users prefer not to wait for the 72 hour reap time for cleanup.`),mdx(\"h4\",{\"id\":\"dropped-support-for-protocol-version-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#dropped-support-for-protocol-version-1\",\"aria-label\":\"dropped support for protocol version 1 permalink\"},`\\xbb`),`Dropped Support for Protocol Version 1`),mdx(\"p\",null,`Consul version 0.7 dropped support for protocol version 1, which means it\nis no longer compatible with versions of Consul prior to 0.3. You will need\nto upgrade all agents to a newer version of Consul before upgrading to Consul\n0.7.`),mdx(\"h4\",{\"id\":\"prepared-query-changes\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#prepared-query-changes\",\"aria-label\":\"prepared query changes permalink\"},`\\xbb`),`Prepared Query Changes`),mdx(\"p\",null,`Consul version 0.7 adds a feature which allows prepared queries to store a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/query#near\"},mdx(\"inlineCode\",{parentName:\"a\"},`Near`),` parameter`),` in the query definition\nitself. This feature enables using the distance sorting features of prepared\nqueries without explicitly providing the node to sort near in requests, but\nrequires the agent servicing a request to send additional information about\nitself to the Consul servers when executing the prepared query. Agents prior\nto 0.7 do not send this information, which means they are unable to properly\nexecute prepared queries configured with a `,mdx(\"inlineCode\",{parentName:\"p\"},`Near`),` parameter. Similarly, any\nserver nodes prior to version 0.7 are unable to store the `,mdx(\"inlineCode\",{parentName:\"p\"},`Near`),` parameter,\nmaking them unable to properly serve requests for prepared queries using the\nfeature. It is recommended that all agents be running version 0.7 prior to\nusing this feature.`),mdx(\"h4\",{\"id\":\"wan-address-translation-in-http-endpoints\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#wan-address-translation-in-http-endpoints\",\"aria-label\":\"wan address translation in http endpoints permalink\"},`\\xbb`),`WAN Address Translation in HTTP Endpoints`),mdx(\"p\",null,`Consul version 0.7 added support for translating WAN addresses in certain\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#translate_wan_addrs\"},`HTTP endpoints`),`. The servers\nand the agents need to be running version 0.7 or later in order to use this\nfeature.`),mdx(\"p\",null,`These translated addresses could break HTTP endpoint consumers that are\nexpecting local addresses, so a new `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/api-structure#translated-addresses\"},mdx(\"inlineCode\",{parentName:\"a\"},`X-Consul-Translate-Addresses`)),`\nheader was added to allow clients to detect if translation is enabled for HTTP\nresponses. A \"lan\" tag was added to `,mdx(\"inlineCode\",{parentName:\"p\"},`TaggedAddresses`),` for clients that need\nthe local address regardless of translation.`),mdx(\"h4\",{\"id\":\"outage-recovery-and-peers-json-changes\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#outage-recovery-and-peers-json-changes\",\"aria-label\":\"outage recovery and peers json changes permalink\"},`\\xbb`),`Outage Recovery and `,mdx(\"inlineCode\",{parentName:\"h4\"},`peers.json`),` Changes`),mdx(\"p\",null,`The `,mdx(\"inlineCode\",{parentName:\"p\"},`peers.json`),` file is no longer present by default and is only used when\nperforming recovery. This file will be deleted after Consul starts and ingests\nthe file. Consul 0.7 also uses a new, automatically-created raft/peers.info file\nto avoid ingesting the `,mdx(\"inlineCode\",{parentName:\"p\"},`peers.json`),` file on the first start after upgrading (the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`peers.json`),` file is simply deleted on the first start after upgrading).`),mdx(\"p\",null,`Please be sure to review the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/tutorials/datacenter-operations/recovery-outage\"},`Disaster recovery for Consul clusters tutorial`),`\nbefore upgrading for more details.`),mdx(\"h2\",{\"id\":\"consul-0-6-4\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-6-4\",\"aria-label\":\"consul 0 6 4 permalink\"},`\\xbb`),`Consul 0.6.4`),mdx(\"p\",null,`Consul 0.6.4 made some substantial changes to how ACLs work with prepared\nqueries. Existing queries will execute with no changes, but there are important\ndifferences to understand about how prepared queries are managed before you\nupgrade. In particular, prepared queries with no `,mdx(\"inlineCode\",{parentName:\"p\"},`Name`),` defined will no longer\nrequire any ACL to manage them, and prepared queries with a `,mdx(\"inlineCode\",{parentName:\"p\"},`Name`),` defined are\nnow governed by a new `,mdx(\"inlineCode\",{parentName:\"p\"},`query`),` ACL policy that will need to be configured\nafter the upgrade.`),mdx(\"p\",null,`See the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/security/acl/acl-rules#prepared-query-rules\"},`ACL rules documentation`),` for more details\nabout the new behavior and how it compares to previous versions of Consul.`),mdx(\"h2\",{\"id\":\"consul-0-6\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-6\",\"aria-label\":\"consul 0 6 permalink\"},`\\xbb`),`Consul 0.6`),mdx(\"p\",null,`Consul version 0.6 is a very large release with many enhancements and\noptimizations. Changes to be aware of during an upgrade are categorized below.`),mdx(\"h4\",{\"id\":\"data-store-changes\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#data-store-changes\",\"aria-label\":\"data store changes permalink\"},`\\xbb`),`Data Store Changes`),mdx(\"p\",null,`Consul changed the format used to store data on the server nodes in version 0.5\n(see 0.5.1 notes below for details). Previously, Consul would automatically\ndetect data directories using the old LMDB format, and convert them to the newer\nBoltDB format. This automatic upgrade has been removed for Consul 0.6, and\ninstead a safeguard has been put in place which will prevent Consul from booting\nif the old directory format is detected.`),mdx(\"p\",null,`It is still possible to migrate from a 0.5.x version of Consul to 0.6+ using the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul-migrate\"},`consul-migrate`),` CLI utility. This\nis the same tool that was previously embedded into Consul. See the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/hashicorp/consul-migrate/releases\"},`releases`),` page for\ndownloadable versions of the tool.`),mdx(\"p\",null,`Also, in this release Consul switched from LMDB to a fully in-memory database for\nthe state store. Because LMDB is a disk-based backing store, it was able to store\nmore data than could fit in RAM in some cases (though this is not a recommended\nconfiguration for Consul). If you have an extremely large data set that won't fit\ninto RAM, you may encounter issues upgrading to Consul 0.6.0 and later. Consul\nshould be provisioned with physical memory approximately 2X the data set size to\nallow for bursty allocations and subsequent garbage collection.`),mdx(\"h4\",{\"id\":\"acl-enhancements\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#acl-enhancements\",\"aria-label\":\"acl enhancements permalink\"},`\\xbb`),`ACL Enhancements`),mdx(\"p\",null,`Consul 0.6 introduces enhancements to the ACL system which may require special\nhandling:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Service ACLs are enforced during service discovery (REST + DNS)`)),mdx(\"p\",null,`Previously, service discovery was wide open, and any client could query\ninformation about any service without providing a token. Consul now requires\nread-level access at a minimum when ACLs are enabled to return service\ninformation over the REST or DNS interfaces. If clients depend on an open\nservice discovery system, then the following should be added to all ACL tokens\nwhich require it:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`# Enable discovery of all services`,`\n`,`service \"\" {`,`\n`,`    policy = \"read\"`,`\n`,`}`,`\n`)),mdx(\"p\",null,`When the DNS interface is queried, the agent's\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/agent/config/config-files#acl_token\"},mdx(\"inlineCode\",{parentName:\"a\"},`acl_token`)),` is used, so be sure\nthat token has sufficient privileges to return the DNS records you\nexpect to retrieve from it.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Event and keyring ACLs`)),mdx(\"p\",null,`Similar to service discovery, the new event and keyring ACLs will block access\nto these operations if the `,mdx(\"inlineCode\",{parentName:\"p\"},`acl_default_policy`),` is set to `,mdx(\"inlineCode\",{parentName:\"p\"},`deny`),`. If clients depend\non open access to these, then the following should be added to all ACL tokens which\nrequire them:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`event \"\" {`,`\n`,`  policy = \"write\"`,`\n`,`}`,`\n`,`\n`,`keyring = \"write\"`,`\n`)),mdx(\"p\",null,`Unfortunately, these are new ACLs for Consul 0.6, so they must be added after the\nupgrade is complete.`),mdx(\"h4\",{\"id\":\"prepared-queries\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#prepared-queries\",\"aria-label\":\"prepared queries permalink\"},`\\xbb`),`Prepared Queries`),mdx(\"p\",null,`Prepared queries introduce a new Raft log entry type that isn't supported on older\nversions of Consul. It's important to not use the prepared query features of Consul\nuntil all servers in a cluster have been upgraded to version 0.6.0.`),mdx(\"h4\",{\"id\":\"single-private-ip-enforcement\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#single-private-ip-enforcement\",\"aria-label\":\"single private ip enforcement permalink\"},`\\xbb`),`Single Private IP Enforcement`),mdx(\"p\",null,`Consul will refuse to start if there are multiple private IPs available, so\nif this is the case you will need to configure Consul's advertise or bind addresses\nbefore upgrading.`),mdx(\"h4\",{\"id\":\"new-web-ui-file-layout\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#new-web-ui-file-layout\",\"aria-label\":\"new web ui file layout permalink\"},`\\xbb`),`New Web UI File Layout`),mdx(\"p\",null,`The release .zip file for Consul's web UI no longer contains a `,mdx(\"inlineCode\",{parentName:\"p\"},`dist`),` sub-folder;\neverything has been moved up one level. If you have any automated scripts that\nexpect the old layout you may need to update them.`),mdx(\"h2\",{\"id\":\"consul-0-5-1\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-5-1\",\"aria-label\":\"consul 0 5 1 permalink\"},`\\xbb`),`Consul 0.5.1`),mdx(\"p\",null,`Consul version 0.5.1 uses a different backend store for persisting the Raft\nlog. Because of this change, a data migration is necessary to move the log\nentries out of LMDB and into the newer backend, BoltDB.`),mdx(\"p\",null,`Consul version 0.5.1+ makes this transition seamless and easy. As a user, there\nare no special steps you need to take. When Consul starts, it checks\nfor presence of the legacy LMDB data files, and migrates them automatically\nif any are found. You will see a log emitted when Raft data is migrated, like\nthis:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`==> Successfully migrated raft data in 5.839642ms`,`\n`)),mdx(\"p\",null,`This automatic upgrade will only exist in Consul 0.5.1+ and it will\nbe removed starting with Consul 0.6.0+. It will still be possible to upgrade directly\nfrom pre-0.5.1 versions by using the consul-migrate utility, which is available on the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/integrate/download-tools\"},`Consul Tools page`),`.`),mdx(\"h2\",{\"id\":\"consul-0-5\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#consul-0-5\",\"aria-label\":\"consul 0 5 permalink\"},`\\xbb`),`Consul 0.5`),mdx(\"p\",null,`Consul version 0.5 adds two features that complicate the upgrade process:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`ACL system includes service discovery and registration`),mdx(\"li\",{parentName:\"ul\"},`Internal use of tombstones to fix behavior of blocking queries\nin certain edge cases.`)),mdx(\"p\",null,`Users of the ACL system need to be aware that deploying Consul 0.5 will\ncause service registration to be enforced. This means if an agent\nattempts to register a service without proper privileges it will be denied.\nIf the `,mdx(\"inlineCode\",{parentName:\"p\"},`acl_default_policy`),` is \"allow\" then clients will continue to\nwork without an updated policy. If the policy is \"deny\", then all clients\nwill begin to have their registration rejected causing issues.`),mdx(\"p\",null,`To avoid this situation, all the ACL policies should be updated to\nadd something like this:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`# Enable all services to be registered`,`\n`,`service \"\" {`,`\n`,`    policy = \"write\"`,`\n`,`}`,`\n`)),mdx(\"p\",null,`This will set the service policy to `,mdx(\"inlineCode\",{parentName:\"p\"},`write`),` level for all services.\nThe blank service name is the catch-all value. A more specific service\ncan also be specified:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`# Enable only the API service to be registered`,`\n`,`service \"api\" {`,`\n`,`    policy = \"write\"`,`\n`,`}`,`\n`)),mdx(\"p\",null,`The ACL policy can be updated while running 0.4, and enforcement will\nbeing with the upgrade to 0.5. The policy updates will ensure the\navailability of the cluster.`),mdx(\"p\",null,`The second major change is the new internal command used for tombstones.\nThe details of the change are not important, however to function the leader\nnode will replicate a new command to its followers. Consul is designed\ndefensively, and when a command that is not recognized is received, the\nserver will panic. This is a purposeful design decision to avoid the possibility\nof data loss, inconsistencies, or security issues caused by future incompatibility.`),mdx(\"p\",null,`In practice, this means if a Consul 0.5 node is the leader, all of its\nfollowers must also be running 0.5. There are a number of ways to do this\nto ensure cluster availability:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`Add new 0.5 nodes, then remove the old servers. This will add the new\nnodes as followers, and once the old servers are removed, one of the\n0.5 nodes will become leader.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`Upgrade the followers first, then the leader last. Using `,mdx(\"inlineCode\",{parentName:\"p\"},`consul info`),`,\nyou can determine which nodes are followers. Do an in-place upgrade\non them first, and finally upgrade the leader last.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`Upgrade them in any order, but ensure all are done within 15 minutes.\nEven if the leader is upgraded to 0.5 first, as long as all of the followers\nare running 0.5 within 15 minutes there will be no issues.`))),mdx(\"p\",null,`Finally, even if any of the methods above are not possible or the process\nfails for some reason, it is not fatal. The older version of the server\nwill simply panic and stop. At that point, you can upgrade to the new version\nand restart the agent. There will be no data loss and the cluster will\nresume operations.`))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"name":"Consul","slug":"consul","algoliaConfig":{"indexName":"product_CONSUL","searchOnlyApiKey":"fbd5dc1f0078d41509fcc560386fd534"},"analyticsConfig":{"includedDomains":"consul.io www.consul.io","segmentWriteKey":"IyzLrqXkox5KJ8XL4fo8vTYNGfiKlTCm"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Consul by HashiCorp","description":"Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.","image":"https://www.consulproject.io/consul-public/img/og-image.png","icon":[{"href":"/consul-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.11.3","subnavItems":[],"basePaths":["docs","api-docs","commands","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"currentRootDocsPath":{"iconName":"docs","name":"Documentation","path":"docs"}},"projectName":null,"versions":null},"__N_SSG":true}