<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Consistency Modes | Consul | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Every Consul HTTP API read request uses one of several &quot;consistency modes&quot; that offer different levels of response consistency and performance. By default, Consul uses a consistency mode that is suitable for most use cases. Users can override consistency modes to fine-tune these trade-offs for their own use case."/><meta name="twitter:description" content="Every Consul HTTP API read request uses one of several &quot;consistency modes&quot; that offer different levels of response consistency and performance. By default, Consul uses a consistency mode that is suitable for most use cases. Users can override consistency modes to fine-tune these trade-offs for their own use case."/><meta property="og:site_name" content="Consistency Modes | Consul | HashiCorp Developer"/><meta property="og:title" content="Consistency Modes | Consul | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/consul.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/consul/api-docs/features/consistency"/><link rel="icon" href="/favicon.ico" sizes="48x48"/><link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="ahrefs-site-verification" content="9d739b21c466a84dae91df1c79396081a9072152e64f765c9390fed6f249fb84"/><meta name="zd-site-verification" content="xnvnvv1i0wl4tf0pzaymb" data-product="hcp"/><meta name="zd-site-verification" content="36fp2i1pj67d8cjtzf4fi9" data-product="terraform"/><meta name="zd-site-verification" content="nbe87kfyp1sck7b13vj1i" data-product="packer"/><meta name="zd-site-verification" content="wvsmmqa1cfb9am9zlwfj" data-product="consul"/><meta name="zd-site-verification" content="cw22oopfwr68ujj0n5pn9i" data-product="boundary"/><meta name="zd-site-verification" content="lkslvganwfgfqfwpdeicgh" data-product="vault"/><meta name="zd-site-verification" content="jl2wp2hoej9rz6c8rmqdns" data-product="nomad"/><meta name="zd-site-verification" content="2eb0cu6xceo73t0038m0tb" data-product="waypoint"/><meta name="zd-site-verification" content="n52xisxdf3higs2q9kuogd" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/consul.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Consul","item":"https://developer.hashicorp.com/consul"},{"@type":"ListItem","position":3,"name":"API","item":"https://developer.hashicorp.com/consul/api-docs"},{"@type":"ListItem","position":4,"name":"Consistency Modes","item":"https://developer.hashicorp.com/consul/api-docs/features/consistency"}]}]</script><meta name="next-head-count" content="32"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f49486d3b4c819d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f49486d3b4c819d0.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a3fdbf75d77eb323.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a3fdbf75d77eb323.css" data-n-p=""/><link rel="preload" href="/_next/static/css/a23a4d5b8f64c49d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a23a4d5b8f64c49d.css" data-n-p=""/><link rel="preload" href="/_next/static/css/686380cdcb9bba8b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/686380cdcb9bba8b.css" data-n-p=""/><link rel="preload" href="/_next/static/css/0d0717cf606673e4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0d0717cf606673e4.css" data-n-p=""/><link rel="preload" href="/_next/static/css/7e4ee183b358eb93.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7e4ee183b358eb93.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4951ac4c4a1cb7a7.js" defer=""></script><script src="/_next/static/chunks/framework-7063787c3be570d0.js" defer=""></script><script src="/_next/static/chunks/main-7bf85f85b965ad61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-520f30dd2ad43ba8.js" defer=""></script><script src="/_next/static/chunks/8037-40e405fadd2f5f0d.js" defer=""></script><script src="/_next/static/chunks/1395-1eb65df04043100c.js" defer=""></script><script src="/_next/static/chunks/5800-0a549d9df584a94b.js" defer=""></script><script src="/_next/static/chunks/5675-7108b5e9113ea2a3.js" defer=""></script><script src="/_next/static/chunks/8604-305dcb3c7664513e.js" defer=""></script><script src="/_next/static/chunks/4491-c0264dec552d98bf.js" defer=""></script><script src="/_next/static/chunks/9554-d740b5e666a16cc0.js" defer=""></script><script src="/_next/static/chunks/7427-cf9fe22bc82b07a3.js" defer=""></script><script src="/_next/static/chunks/5261-c0c32f534b764eb3.js" defer=""></script><script src="/_next/static/chunks/6787-8d532ae3ad0e4d9b.js" defer=""></script><script src="/_next/static/chunks/6129-ab52b31a3f096d00.js" defer=""></script><script src="/_next/static/chunks/8018-5acf9cc98d6409e7.js" defer=""></script><script src="/_next/static/chunks/8577-dd2d6969869fec83.js" defer=""></script><script src="/_next/static/chunks/pages/consul/api-docs/%5B%5B...page%5D%5D-597387fd859db9b4.js" defer=""></script><script src="/_next/static/BMMSdGfVTdXRvKLaeanSf/_buildManifest.js" defer=""></script><script src="/_next/static/BMMSdGfVTdXRvKLaeanSf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="style_root__dZhZu style_isShown__D4mb6"><a href="https://www.hashicorp.com/en/conferences/hashiconf/register" class="style_linkElem__hCESK"><span class="style_textContainer__6CuI7 g-grid-container"><span class="style_tag__jbHGz g-type-body-small-x-strong">HashiConf<!-- --> </span><span class="style_text__rwS0u g-type-body-small">The full conference agenda&#x27;s now LIVE. Buy your pass and plan your schedule.<span class="style_linkText__E8GJf g-type-body-small-x-strong"> <!-- -->Register</span></span></span></a><button class="style_closeButton__57J9w"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_the-full-conference-agenda's-now-live.-buy-your-pass-and-plan-your-schedule.=1')) {
      const element = document.querySelector('.style_root__dZhZu')
      element.classList.remove('style_isShown__D4mb6')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__MT1PZ"><div class="base-layout_root___qiZs" data-layout="base-new"><div class="base-layout_header__XhkxS"><header class="navigation-header_root__oE_HT"><div class="navigation-header_leftSide__V0xlc"><div class="product-page-content_productsDropdown__haUyw"><nav aria-label="Main" data-orientation="horizontal" dir="ltr"><div class="dropdown-menu_root__Hwy5S"><div class="dropdown-menu_activatorWrapper__LxPRt"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__xXb00 g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__bnKKs"><span class="dropdown-menu_activatorLeadingIcon__YQQlH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__gXtly"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__r_cCd"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__AZWxN" id="navigation-header-menu-react-aria-1" style="display:none"><div class="style_root__z3EwE style_productPanel__Z4UFi style_hasSide__15FV8 style_topPromo__SGVhk style_hasSide__ecwjD"><div class="style_mainPanel__MpQn1"><div class="style_promo__e6yXp style_hasSide__635Xt style_topPromo__vRc5s"><div class="style_icon__rYEcI"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":R2mld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-hashicorp-16"></use></svg></div><div class="style_rightContent__zvciM"><div><div class="style_title__eEtAF">HashiCorp Cloud Platform</div><div class="style_description__ATQzz">Get started in minutes with our cloud products</div></div><a class="style_link__U4Sfy" data-radix-collection-item="" href="/hcp">All HCP Products<svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":R2kmld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-external-link-16"></use></svg></a></div></div><div class="style_column__9is2G style_hasSide__A3F31"><ul class="style_productCategories__j1h4T"><li class="style_productCategory__9UHKG"><span class="mds-typography-body-300 style_eyebrow__OCUlS">Infrastructure Lifecycle Management</span><ul class="style_productList__uPlTj"><li><a aria-label="Terraform - Manage infrastructure as code" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/terraform"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8 style_terraform__nU44i" aria-hidden="true" fill="currentColor" id=":R9j6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-terraform-fill-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Terraform</span><span class="style_productDesc__bi44f">Manage infrastructure as code</span></div></div></a></li><li><a aria-label="Packer - Build machine images" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/packer"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Raj6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-packer-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Packer</span><span class="style_productDesc__bi44f">Build machine images</span></div></div></a></li><li><a aria-label="Nomad - Orchestrate workloads" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/nomad"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Rbj6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-nomad-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Nomad</span><span class="style_productDesc__bi44f">Orchestrate workloads</span></div></div></a></li><li><a aria-label="Waypoint - Standardize application patterns" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/waypoint"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Rcj6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-waypoint-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Waypoint</span><span class="style_productDesc__bi44f">Standardize application patterns</span></div></div></a></li><li><a aria-label="Vagrant - Build developer environments" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/vagrant"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Rdj6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vagrant-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Vagrant</span><span class="style_productDesc__bi44f">Build developer environments</span></div></div></a></li></ul></li><li class="style_productCategory__9UHKG"><span class="mds-typography-body-300 style_eyebrow__OCUlS">Security Lifecycle Management</span><ul class="style_productList__uPlTj"><li><a aria-label="Vault - Centrally manage secrets" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/vault"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":R9l6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vault-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Vault</span><span class="style_productDesc__bi44f">Centrally manage secrets</span></div></div></a></li><li><a aria-label="Boundary - Secure remote access" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/boundary"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Ral6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-boundary-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Boundary</span><span class="style_productDesc__bi44f">Secure remote access</span></div></div></a></li><li><a aria-label="HCP Vault Radar - Scan for embedded secrets" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/hcp/docs/vault-radar"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8 style_hcpVaultRadar__nukMV" aria-hidden="true" fill="currentColor" id=":Rbl6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-vault-radar-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>HCP Vault Radar</span><span class="style_productDesc__bi44f">Scan for embedded secrets</span></div></div></a></li><li><a aria-label="Consul - Secure network services" class="style_focusIndicator__uTVwt" data-radix-collection-item="" href="/consul"><div class="style_productWrapper__ACHaw"><div class="style_productLogo__cTxLO"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="currentColor" id=":Rcl6ld6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-consul-fill-color-16"></use></svg></div><div class="style_productTextContent__o8DJ6"><span>Consul</span><span class="style_productDesc__bi44f">Secure network services</span></div></div></a></li></ul></li></ul></div></div><div class="style_column__9is2G style_sidePanel__qxYNB"><span class="mds-typography-body-200 mds-typography-font-weight-semibold style_sidePanelText__APb7X">Learn</span><ul class="style_sidePanelItems__i8_HV"><li><a aria-label="Certifications - Get HashiCorp certified" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/certifications"><div class="style_iconBackground__fn5_s"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rjald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-award-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="mds-typography-body-200 mds-typography-font-weight-semibold style_sidePanelText__APb7X">Certifications</span><span class="style_sidePanelItemDesc__UrOLh">Get HashiCorp certified</span></div></a></li><li><a aria-label="Tutorials - Learn HashiCorp products" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/tutorials"><div class="style_iconBackground__fn5_s"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rlald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-learn-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="mds-typography-body-200 mds-typography-font-weight-semibold style_sidePanelText__APb7X">Tutorials</span><span class="style_sidePanelItemDesc__UrOLh">Learn HashiCorp products</span></div></a></li><li><a aria-label="Validated Patterns - Field-tested patterns for using HashiCorp products" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/validated-patterns"><div class="style_iconBackground__fn5_s"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rnald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-check-circle-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="mds-typography-body-200 mds-typography-font-weight-semibold style_sidePanelText__APb7X">Validated Patterns</span><span class="style_sidePanelItemDesc__UrOLh">Field-tested patterns for using HashiCorp products</span></div></a></li><li><a aria-label="Well-Architected Framework - Adopt HashiCorp best practices" class="style_sidePanelItem__j0j0G style_focusIndicator__uTVwt" href="/well-architected-framework"><div class="style_iconBackground__fn5_s"><svg class="style_flight-icon__rrFs8" aria-hidden="true" fill="var(--token-color-foreground-faint)" id=":Rpald6j6:" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-layers-16"></use></svg></div><div class="style_sidePanelItemContent__xFcSA"><span class="mds-typography-body-200 mds-typography-font-weight-semibold style_sidePanelText__APb7X">Well-Architected Framework</span><span class="style_sidePanelItemDesc__UrOLh">Adopt HashiCorp best practices</span></div></a></li></ul></div></div></div></div></nav></div><div class="product-page-content_productLinkAndNav__YTzcr"><a aria-label="Consul home" class="product-icon-text-link_root__bNTSz g-focus-ring-from-box-shadow-dark" href="/consul"><div class="product-icon-text-lockup_root__358wV"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__Zp_5o"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg><span class="product-icon-text-lockup_text__nHTL7 hds-typography-body-200">Consul</span></div></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="nav-bar-list-container_nav__C_i0_"><div style="position:relative"><ul data-orientation="horizontal" class="nav-bar-list-container_ul___04HI" dir="ltr"><li><a aria-label="Consul Install" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/consul/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Install</span></a></li><li><a aria-label="Consul Tutorials" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/consul/tutorials"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Tutorials</span></a></li><li><a aria-label="Consul Documentation" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/consul/docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Documentation</span></a></li><li><a aria-label="Consul API" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/consul/api-docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">API</span></a></li><li><a aria-label="Consul CLI" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/consul/commands"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">CLI</span></a></li><li><a aria-label="Consul Try Cloud" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" aria-describedby="opens-in-new-tab-label-react-aria-8" target="_blank" href="https://portal.cloud.hashicorp.com/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-8">(opens in new tab)</span></li></ul></div></nav></div></div><div class="navigation-header_rightSide___Vvh_"><button aria-label="Search" class="command-bar-activator_root__qgVMy g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__ATQTg"><span class="command-bar-activator_leadingIcon__jECP5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M6.344.969a5.375 5.375 0 103.233 9.669l4.174 4.174a.75.75 0 001.06-1.061l-4.173-4.174A5.375 5.375 0 006.344.97zM2.469 6.344a3.875 3.875 0 117.75 0 3.875 3.875 0 01-7.75 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__pTZN_">Search</span></span><span class="command-bar-activator_right__XejfJ"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="cmd-ctrl-icon_root___TToz"><svg xmlns="http://www.w3.org/2000/svg" width="41" height="11" fill="none" viewBox="0 0 41 11"><path fill="#fff" fill-rule="evenodd" d="M4.125 2.063V3h2.25v-.937a2.062 2.062 0 1 1 2.063 2.062H7.5v2.25h.938a2.062 2.062 0 1 1-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 1 1-2.062-2.063H3v-2.25h-.937a2.062 2.062 0 1 1 2.062-2.062m-2.062-.938a.937.937 0 1 0 0 1.875H3v-.937a.937.937 0 0 0-.937-.938M7.5 7.5v.938a.937.937 0 1 0 .938-.938zM6.375 6.375v-2.25h-2.25v2.25zM2.063 7.5H3v.938a.937.937 0 1 1-.937-.938M7.5 3h.938a.937.937 0 1 0-.938-.937z" clip-rule="evenodd"/><path fill="#fff" d="M15.09 10.5 18.085 0h-1.097L14 10.5zM26.387 5.308c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041zM33.207 10.356h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 0 0-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354zM38.638 10.356h1.407V0h-1.407z"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="k-icon_root__a_5pR"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 8 10"><path fill="#fff" d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9z"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__EP1LY"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj"><button aria-controls="disclosure-react-aria-9-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo navigation-header_userDropdownDisclosureActivator__RayIV g-focus-ring-from-box-shadow-dark activator_hasIcon__5HO6W g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__kaK0w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__4_AVG"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-9-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><button class="list-item_button__nXy5K g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__ZdUej"><hr class="list-item_separator__cBVLs"/></li><li class="list-item_root__ZdUej user-dropdown-switcher_listItem__Q_GIj hds-font-weight-medium"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-11">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__74S4w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-layout_contentArea__BMvQn"><div class="sidebar-sidecar-layout_root__h5rD8 sidebar-sidecar-layout_mainWidth-narrow__FhCbs"><div class="mobile-menu-container_root__fPUFu sidebar-sidecar-layout_sidebarContainer__4fcF8"><div class="sidebar-sidecar-layout_sidebarContentWrapper__ftn5q"><div class="sidebar-sidecar-layout_sidePadding__iwNw_"><div class="sidebar_sidebar___fTlC"><div class="sidebar_backToLinkWrapper__F6iLs"><div class="sidebar-back-to-link_root__z_Hj1"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_primary__ESNCA" href="/consul"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">Consul Home</span></div></a></div></div><div class="sidebar_filterInputWrapper__0_l_Y"><div class="filter-input_filterInputContainer__thZt3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="filter-input_filterIcon__UET0p filter-input_sharedIconColorAndPositioning__hXPit"><g fill="currentColor"><path d="M1 3.75A.75.75 0 011.75 3h12.5a.75.75 0 010 1.5H1.75A.75.75 0 011 3.75zM3.5 7.75A.75.75 0 014.25 7h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM6.75 11a.75.75 0 000 1.5h2.5a.75.75 0 000-1.5h-2.5z"></path></g></svg><input class="filter-input_filterInput__hga4N g-focus-ring-from-box-shadow" placeholder="Filter sidebar" autoComplete="off" autoCorrect="off" autoCapitalize="none" spellcheck="false" value=""/></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__IworY" id="sidebar-nav"><div class="g-screen-reader-only"><h2 class="sidebar-headings_root__tGfxC" id="sidebar-label">API</h2></div><ul class="sidebar_navList__4Rg4g"><li><a class="sidebar-nav-highlight-item_root___pPhp g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-consul__NA90N" href="/consul/api-docs"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="sidebar-nav-highlight-item_icon__G8JxG"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg><span class="sidebar-nav-highlight-item_text__VORFJ hds-typography-body-200">API</span></a></li><li id="sidebar-nav-item-0"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/api-structure"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">API Structure</span></a></li><li id="sidebar-nav-item-1"><button aria-controls="sidebar-nav-item-1-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-1-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">API Features</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="sidebar-nav-item-1-list"><li id="sidebar-nav-item-2"><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/consistency"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Consistency Modes</span></a></li><li id="sidebar-nav-item-3"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/blocking"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Blocking Queries</span></a></li><li id="sidebar-nav-item-4"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/filtering"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Filtering</span></a></li><li id="sidebar-nav-item-5"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/caching"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Agent Caching</span></a></li></ul></li><li id="sidebar-nav-item-6"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-7"><button class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-7-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">ACLs</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-15"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/admin-partitions"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Admin Partitions</span></a></li><li id="sidebar-nav-item-16"><button class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-16-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Agent</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-21"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/catalog"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Catalog</span></a></li><li id="sidebar-nav-item-22"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/peering"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Cluster Peering</span></a></li><li id="sidebar-nav-item-23"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/config"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Config</span></a></li><li id="sidebar-nav-item-24"><button class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-24-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Connect</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-28"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/coordinate"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Coordinates</span></a></li><li id="sidebar-nav-item-29"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/discovery-chain"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Discovery Chain</span></a></li><li id="sidebar-nav-item-30"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/event"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Events</span></a></li><li id="sidebar-nav-item-31"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/exported-services"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Exported Services</span></a></li><li id="sidebar-nav-item-32"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/health"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Health</span></a></li><li id="sidebar-nav-item-33"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/kv"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">KV Store</span></a></li><li id="sidebar-nav-item-34"><button class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-34-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Operator</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-43"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/namespaces"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Namespaces</span></a></li><li id="sidebar-nav-item-44"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/query"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Prepared Queries</span></a></li><li id="sidebar-nav-item-45"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/session"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Sessions</span></a></li><li id="sidebar-nav-item-46"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/snapshot"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Snapshots</span></a></li><li id="sidebar-nav-item-47"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/status"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Status</span></a></li><li id="sidebar-nav-item-48"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/txn"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Transactions</span></a></li><li id="sidebar-nav-item-49"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-50"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/consul/api-docs/libraries-and-sdks"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Libraries &amp; SDKs</span></a></li></ul><hr class="sidebar-horizontal-rule_root__UY7oh"/><ul class="sidebar_navList__4Rg4g"><li><h3 class="sidebar-headings_root__tGfxC">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/tutorials/library?product=consul"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Tutorial Library</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/certifications/security-automation"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Certifications</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-38" target="_blank" href="https://discuss.hashicorp.com/c/consul/29"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-38">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-39" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-39">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-40" target="_blank" href="https://github.com/hashicorp/consul"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-40">(opens in new tab)</span></li></ul></nav></div></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__Z5BK4"><div class="sidebar-sidecar-layout_paddedAreaWrapper___S_Ff"><div class="sidebar-sidecar-layout_breadcrumbContainer__3uz7P"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__coOcu"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__wd_C5"><ol class="breadcrumb-bar_listRoot__8eupO"><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/">Developer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/consul">Consul</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/consul/api-docs">API</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><span class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" aria-current="page">Consistency Modes</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__UDm3Z"><main id="main" class="sidebar-sidecar-layout_main__0SN51"><div class="docs-page-heading_root__QuBg_ docs-view_docsPageHeading___xkrK"><div class="docs-page-heading_pageHeadingWrapper__LEMQ7"><h1 class="hds-typography-display-600 hds-font-weight-bold docs-plain-page-heading_root__HzRuX g-offset-scroll-margin-top" id="consistency-modes">Consistency Modes</h1></div></div><div class="dev-dot-content_root__UJDct hds-typography-body-300"><div class="docs-view_mdxContent___uMnx"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Every Consul HTTP API read request uses one of several <em>consistency modes</em> that offer
different levels of response consistency and performance. By default, Consul uses a
consistency mode that is suitable for most use cases. Users can override consistency modes
to fine-tune these trade-offs for their own use case at two levels:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">Per interface (HTTP API, DNS)</li><li class="mdx-lists_listItem__nkqhg">Per request (HTTP API requests only)</li></ul><h2 id="what-is-consistency" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="what is consistency permalink" href="/consul/api-docs/features/consistency#what-is-consistency"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>What is Consistency?</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Consul servers are responsible for maintaining state information like the registration and
health status of services and nodes. To protect this state against the potential failure of
Consul servers, this state is replicated across three or more Consul servers in production using a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/concept/consensus">consensus protocol</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">One Consul server is elected leader and acts as the ultimate authority on Consul&#x27;s state.
If a majority of Consul servers agree to a state change, the leader is responsible for recording
the change and then distributing it to the non-leader Consul serversknown as followers.
Because it takes time for a state change on the leader to propagate to the followers,
followers may have a slightly outdated, or &quot;stale&quot;, view of Consul&#x27;s state.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If a read request is handled by the current leader, the response is guaranteed to be
fully <em>consistent</em> (as up-to-date as possible).
If the same request were handled by a follower, the response may be less consistent:
based on a <em>stale</em> (outdated) copy of the leader&#x27;s state.
Consistency is highest if the response comes from the leader.
But ensuring only the leader can respond to the request prevents spreading
read request load across all Consul servers.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The consistency mode controls which Consul servers can respond to read requests,
enabling control over this inherent trade-off between consistency and performance.</p><h2 id="available-consistency-modes" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="available consistency modes permalink" href="/consul/api-docs/features/consistency#available-consistency-modes"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Available Consistency Modes</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Each HTTP API endpoint documents its support for the three read consistency modes:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="stale" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="stale permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code></a> -
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#consul-dns-queries">Consul DNS queries use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> mode by default</a>.
This mode allows any server to handle the read regardless of whether it is the leader.
The trade-off is very fast and scalable reads with a higher likelihood of stale values.
Results are generally consistent to within 50 milliseconds of the leader,
though there is no upper limit on this staleness.
Since this mode allows reads without a leader,
a cluster that is unavailable (no quorum) can still respond to queries.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="default" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="default permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#default"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code></a> -
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#consul-http-api-queries">Consul HTTP API queries use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> mode by default</a>.
It is strongly consistent in almost all cases.
However, there is a small window in which a new leader may be elected
during which the old leader may respond with stale values.
The trade-off is fast reads but potentially stale values.
The condition resulting in stale reads is hard to trigger,
and most clients should not need to worry about this case.
Also, note that this race condition only applies to reads, not writes.</p></li><li class="mdx-lists_listItem__nkqhg"><a id="consistent" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a aria-label="consistent permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#consistent"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code></a> -
This mode is strongly consistent without caveats.
It requires that a leader verify with a quorum of peers that it is still leader.
This introduces an additional round-trip to all server nodes.
The trade-off is increased latency due to an extra round trip.
Most clients should not use this unless they cannot tolerate a stale read.</p></li></ul><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Scaling read requests</strong>: The most effective way to increase read scalability
is to convert non-<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads. If most requests are already
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads and additional load reduction is desired, use Consul Enterprise
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/manage/scale/redundancy-zone">redundancy zones</a> or
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/manage/scale/read-replica">read replicas</a>
to spread <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads across additional, <em>non-voting</em> Consul servers.
Non-voting servers enhance read scalability without increasing the number
of voting servers; adding more then 5 voting servers is not recommended because
it decreases Consul&#x27;s performance.</p></div><h3 id="intra-datacenter-request-behavior" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="intra datacenter request behavior permalink" href="/consul/api-docs/features/consistency#intra-datacenter-request-behavior"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Intra-Datacenter Request Behavior</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following diagrams show how the intra-datacenter request path varies
per consistency mode and the relative trade-offs between level of consistency and performance.</p><div class="mdx-tabs_tabsWrapper__eBd6p"><div><div class="tabs_tabControls__T_UOv tabs_isCheckingOverflow__HYdy4 tabs_showAnchorLine__oSYFX tabs_allowNestedStyles__gpKFS"><div class="tab-button-controls_tabList__ueYEe" role="tablist"><button class="tab-button-controls_tabButton__l1jN9 g-focus-ring-from-box-shadow" aria-controls="panel-0-react-aria-55" aria-selected="true" id="tab-0-react-aria-55" role="tab" tabindex="0" type="button"><span class="tab-button-controls_label__GDzfu hds-typography-body-200">Stale reads</span></button><button class="tab-button-controls_tabButton__l1jN9 g-focus-ring-from-box-shadow" aria-controls="panel-1-react-aria-55" aria-selected="false" id="tab-1-react-aria-55" role="tab" tabindex="-1" type="button"><span class="tab-button-controls_label__GDzfu hds-typography-body-200">Default reads</span></button><button class="tab-button-controls_tabButton__l1jN9 g-focus-ring-from-box-shadow" aria-controls="panel-2-react-aria-55" aria-selected="false" id="tab-2-react-aria-55" role="tab" tabindex="-1" type="button"><span class="tab-button-controls_label__GDzfu hds-typography-body-200">Consistent reads, all writes</span></button></div></div><div aria-hidden="false" aria-labelledby="tab-0-react-aria-55" class="tabs_tabPanel__lKCo_ tabs_allowNestedStyles__gpKFS" id="panel-0-react-aria-55" role="tabpanel"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/img/consistency-modes/consistency-mode-stale.png"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="/img/consistency-modes/consistency-mode-stale.png" alt="stale consistency mode read request path"/></span></a></p></div><div aria-hidden="true" aria-labelledby="tab-1-react-aria-55" class="tabs_tabPanel__lKCo_ tabs_allowNestedStyles__gpKFS" id="panel-1-react-aria-55" role="tabpanel"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/img/consistency-modes/consistency-mode-default.png"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="/img/consistency-modes/consistency-mode-default.png" alt="default consistency mode read request path"/></span></a></p></div><div aria-hidden="true" aria-labelledby="tab-2-react-aria-55" class="tabs_tabPanel__lKCo_ tabs_allowNestedStyles__gpKFS" id="panel-2-react-aria-55" role="tabpanel"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/img/consistency-modes/consistency-mode-consistent.png"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="/img/consistency-modes/consistency-mode-consistent.png" alt="consistent consistency mode read, any write request path"/></span></a></p></div></div></div><h3 id="cross-datacenter-request-behavior" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="cross datacenter request behavior permalink" href="/consul/api-docs/features/consistency#cross-datacenter-request-behavior"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Cross-Datacenter Request Behavior</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When making a request across federated Consul datacenters, requests are forwarded from
a local server to any remote server. Once in the remote datacenter, the request path
is the same as a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#intra-datacenter-request-behavior">local request with the same consistency mode</a>.
The following diagrams show the cross-datacenter request paths when Consul servers in datacenters are
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/east-west/mesh-gateway/enable">federated either directly or via mesh gateways</a>.</p><div class="mdx-tabs_tabsWrapper__eBd6p"><div><div class="tabs_tabControls__T_UOv tabs_isCheckingOverflow__HYdy4 tabs_showAnchorLine__oSYFX tabs_allowNestedStyles__gpKFS"><div class="tab-button-controls_tabList__ueYEe" role="tablist"><button class="tab-button-controls_tabButton__l1jN9 g-focus-ring-from-box-shadow" aria-controls="panel-0-react-aria-61" aria-selected="true" id="tab-0-react-aria-61" role="tab" tabindex="0" type="button"><span class="tab-button-controls_label__GDzfu hds-typography-body-200">Traditional WAN federation</span></button><button class="tab-button-controls_tabButton__l1jN9 g-focus-ring-from-box-shadow" aria-controls="panel-1-react-aria-61" aria-selected="false" id="tab-1-react-aria-61" role="tab" tabindex="-1" type="button"><span class="tab-button-controls_label__GDzfu hds-typography-body-200">WAN federation via mesh gateways</span></button></div></div><div aria-hidden="false" aria-labelledby="tab-0-react-aria-61" class="tabs_tabPanel__lKCo_ tabs_allowNestedStyles__gpKFS" id="panel-0-react-aria-61" role="tabpanel"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/img/consistency-modes/consistency-mode-cross-datacenter-federation-traditional.png"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="/img/consistency-modes/consistency-mode-cross-datacenter-federation-traditional.png" alt="consistency mode behavior across Consul datacenters with traditional WAN federation"/></span></a></p></div><div aria-hidden="true" aria-labelledby="tab-1-react-aria-61" class="tabs_tabPanel__lKCo_ tabs_allowNestedStyles__gpKFS" id="panel-1-react-aria-61" role="tabpanel"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/img/consistency-modes/consistency-mode-cross-datacenter-federation-mesh-gateways.png"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="/img/consistency-modes/consistency-mode-cross-datacenter-federation-mesh-gateways.png" alt="consistency mode behavior across Consul datacenters with WAN federation via mesh gateways"/></span></a></p></div></div></div><h2 id="usage" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="usage permalink" href="/consul/api-docs/features/consistency#usage"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Usage</h2><h3 id="consul-dns-queries" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="consul dns queries permalink" href="/consul/api-docs/features/consistency#consul-dns-queries"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Consul DNS Queries</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When DNS queries are issued to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/discover/dns">Consul&#x27;s DNS interface</a>,
Consul uses the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> consistency mode by default when interfacing with its
underlying Consul service discovery HTTP APIs
(<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/catalog">Catalog</a>, <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/health">Health</a>, and <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/query">Prepared Query</a>).</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The consistency mode underlying Consul DNS queries cannot be overridden on a
per-request basis.</p><h4 id="changing-the-default-consistency-mode" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="changing the default consistency mode permalink" href="/consul/api-docs/features/consistency#changing-the-default-consistency-mode"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Changing the Default Consistency Mode</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If stronger consistency is required at the expense of increased latency,
set <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#allow_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.allow_stale</code></a> to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code> to make Consul use the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> consistency mode instead of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code>
when interfacing with the underlying Consul service discovery HTTP APIs.</p><h4 id="limiting-staleness-advanced-usage" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="limiting staleness advanced usage permalink" href="/consul/api-docs/features/consistency#limiting-staleness-advanced-usage"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Limiting Staleness (Advanced Usage)</h4><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Caution</strong>:
Configuring <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a> may result in a prolonged outage
if your Consul servers become overloaded.
We do not recommend using this setting to limit staleness
unless it would be preferable for your services to be unavailable
than to receive results that are too stale.
If bounded result consistency is required by a service, consider
modifying the service to use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code> service discovery HTTP API queries
instead of DNS lookups.</p></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If Consul is configured to respond to DNS queries in <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> consistency mode
(<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#allow_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.allow_stale</code></a> is <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code>),
you can set an upper limit on how stale a response is allowed to be by
configuring <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a>.
When the Consul agent handling the response is behind the leader by more than <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a> time,
the request will be forwarded to the leader for handling as in <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> consistency mode.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">A common cause for response staleness exceeding <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a> is that
Consul servers are overloaded by requests. Under these circumstances, <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a>
will make the overloading worse by converting cheap <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads to more expensive <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> reads.</p><h3 id="consul-http-api-queries" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="consul http api queries permalink" href="/consul/api-docs/features/consistency#consul-http-api-queries"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Consul HTTP API Queries</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">All HTTP API read requests use the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> consistency mode by default
unless <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#overriding-a-request-s-consistency-mode">overridden on a per-request basis</a>.
We do <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#changing-the-default-consistency-mode-advanced-usage">not recommend changing the consistency mode used by default</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Write requests do not support defining a consistency mode.
All writes follow the behavior of the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code> consistency mode.</p><h4 id="overriding-a-request-s-consistency-mode" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="overriding a request s consistency mode permalink" href="/consul/api-docs/features/consistency#overriding-a-request-s-consistency-mode"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Overriding a Request&#x27;s Consistency Mode</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The HTTP API documentation for each endpoint lists which consistency modes can be used
to override the default on a per-request basis. To use a supported consistency mode
other than the default, include the desired consistency mode as a URL query parameter
when calling the endpoint:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a id="stale-1" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><a aria-label="stale permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#stale-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code></a>: Use the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> query parameter</li><li class="mdx-lists_listItem__nkqhg"><a id="consistent-1" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><a aria-label="consistent permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#consistent-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code></a>: Use the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code> query parameter</li><li class="mdx-lists_listItem__nkqhg"><a id="default-1" aria-hidden="true" tabindex="-1" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __target-lic" href="/consul/api-docs/features/consistency#"></a><a aria-label="default permalink" class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ __permalink-lic" href="/consul/api-docs/features/consistency#default-1"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code></a>: Use the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">leader</code> query parameter;
only relevant <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#changing-the-default-consistency-mode-advanced-usage">if the default consistency mode is changed to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code></a></li></ul><h4 id="changing-the-default-consistency-mode-advanced-usage" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="changing the default consistency mode advanced usage permalink" href="/consul/api-docs/features/consistency#changing-the-default-consistency-mode-advanced-usage"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Changing the Default Consistency Mode (Advanced Usage)</h4><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Caution</strong>:
Configuring <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a> may result in a prolonged outage
if your Consul servers become overloaded.
We do not recommend using this setting to limit staleness
unless it would be preferable for your services to be unavailable
than to receive results that are too stale.
If bounded result consistency is required by a service, consider
modifying the service to use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">consistent</code> mode
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#overriding-a-request-s-consistency-mode">on a per-request basis</a>.</p></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The default consistency mode can be changed to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> for service discovery HTTP API endpoints,
including:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/catalog">Catalog API</a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/health">Health API</a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/query">Prepared Query API</a></li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This allows Consul operators to spread service discovery read load across Consul servers
with a centralized configuration change, avoiding the need to modify every service to
explicitly set <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> consistency mode in their requests.
Services can still override this default on a per-request basis by
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#overriding-a-request-s-consistency-mode">specifying a supported consistency mode as a query parameter in the request</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To configure Consul servers that receive service discovery requests to use <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code>
consistency mode unless overridden,
set <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a> to a value greater than zero in their agent configuration.
The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> consistency mode will be used by default unless the data is sufficiently stale:
its Raft log&#x27;s index is more than <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a> indices behind the leader&#x27;s.
Setting a positive value for <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a>
is analogous to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#limiting-staleness-advanced-usage">limiting the staleness of Consul DNS queries</a>
by setting <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/dns#max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dns_config.max_stale</code></a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">A common cause for response staleness exceeding <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a> is that
Consul servers are overloaded by requests. Under these circumstances, <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/docs/reference/agent/configuration-file/general#discovery_max_stale"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">discovery_max_stale</code></a>
will make the overloading worse by converting cheap <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> reads to more expensive <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> reads.</p><h3 id="visibility-into-response-staleness" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="visibility into response staleness permalink" href="/consul/api-docs/features/consistency#visibility-into-response-staleness"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Visibility into Response Staleness</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To support bounding the acceptable staleness of data, responses provide the
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">X-Consul-LastContact</code> header containing the time in milliseconds that a server
was last contacted by the leader node. The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">X-Consul-KnownLeader</code> header also
indicates if there is a known leader. These can be used by clients to gauge the
staleness of a result and take appropriate action.</p><h3 id="visibility-into-consistency-mode-used" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="visibility into consistency mode used permalink" href="/consul/api-docs/features/consistency#visibility-into-consistency-mode-used"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Visibility into Consistency Mode Used</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The Consul DNS and HTTP API interfaces allow setting the consistency mode
at different levels (interface and per-request).
Advanced settings for the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#limiting-staleness-advanced-usage">DNS</a> and
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#changing-the-default-consistency-mode-advanced-usage">HTTP API</a> interfaces can even
cause the consistency mode to change from <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> if results are sufficiently stale.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To understand the consistency mode used for a particular HTTP API request,
check the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">X-Consul-Effective-Consistency</code> response header.
The value of the header matches the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/consistency#overriding-a-request-s-consistency-mode">name of the query parameter associated with the consistency mode</a>.
In the following example, the header shows that the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">default</code> consistency mode was used.</p><div class="hds-code-block hds-code-block--theme-dark language-shellsession hds-code-block--is-standalone language-shellsession mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":Rnddal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> curl --include $CONSUL_HTTP_ADDR/v1/catalog/services</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">HTTP/1.1 200 OK</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">Content-Type: application/json</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">...</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">X-Consul-Effective-Consistency: leader</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">X-Consul-KnownLeader: true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">X-Consul-LastContact: 0</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">  &quot;redis&quot;: [],</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">  &quot;postgresql&quot;: [&quot;primary&quot;, &quot;secondary&quot;]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span class="line"><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary-white hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":Rnddal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":Rtnddal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.8ce6dd4a.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The DNS interface does not support viewing the consistency mode used for a particular query.</p><h3 id="relationship-to-request-caching" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="relationship to request caching permalink" href="/consul/api-docs/features/consistency#relationship-to-request-caching"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Relationship to Request Caching</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note that some HTTP API endpoints support a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">cached</code> parameter which has some of the same
semantics as <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">stale</code> consistency mode but different trade offs. This behavior is described in
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/consul/api-docs/features/caching">agent caching feature documentation</a></p></div></div><a href="https://github.com/hashicorp/consul/blob/main/website/../content/api-docs/features/consistency.mdx" target="_blank" class="edit-on-github-link_editLink__AsG8Z sidebar-sidecar-layout_editOnGithubLink__SDraB" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="edit-on-github-link_editLinkIcon__wMtY9"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg>Edit this page on GitHub</a></main><div class="sidebar-sidecar-layout_sidecarPosition__WtTq0"><div class="sidebar-sidecar-layout_sidecarTopSlot__qRAEI"></div><div class="sidecar-scroll-container_root__a8nIj"><div class="sidecar-scroll-container_scrollContainer__Dw9id"><div><nav aria-labelledby="react-aria-101"><p id="react-aria-101" class="outline-nav_navLabel__HrjQb hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__Sm1fr"><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/consistency#consistency-modes">Consistency Modes</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/consistency#what-is-consistency">What is Consistency?</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/consistency#available-consistency-modes">Available Consistency Modes</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/consul/api-docs/features/consistency#usage">Usage</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-layout_footer__HGqK8 base-layout_showFooterTopBorder__4_CwH"><footer class="footer_root__qJO_k"><span class="footer_logoAndSwitcher__CJkN3"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__pe9i3 g-focus-ring-from-box-shadow"><div><svg xmlns="http://www.w3.org/2000/svg" width="266" height="65" fill="none" viewBox="0 0 266 65"><path fill="#000" d="M71.823 62.023c-.817 0-1.171-.519-1.253-1.174h-.081c-.3.874-1.09 1.365-2.097 1.365-1.524 0-2.423-.846-2.423-2.185 0-1.338.98-2.13 3.077-2.13h1.443v-.71c0-1.038-.572-1.584-1.716-1.584-1.143 0-1.443.41-1.851 1.093l-.68-.629c.38-.764 1.252-1.42 2.559-1.42 1.306 0 2.777.929 2.777 2.458v3.987h.816v.984h-.626zm-1.307-2.103v-1.202h-1.498c-1.28 0-1.85.383-1.85 1.093v.3c0 .71.57 1.12 1.442 1.12.871 0 1.906-.573 1.906-1.31M74.137 62.023v-7.265h1.116v1.175h.055c.354-.82.98-1.366 2.042-1.366 1.062 0 2.423 1.01 2.423 2.786v4.67h-1.117v-4.452c0-1.283-.571-1.966-1.633-1.966s-1.77.464-1.77 1.393v5.052h-1.116zM84.646 62.023v-.983h1.389v-7.866h-1.389v-.983h3.92v.983h-1.388v7.866h1.389v.983zM90.8 52.191h4.029c1.606 0 2.614 1.01 2.614 2.54s-.953 1.994-1.58 2.076v.082c.708.054 1.934.655 1.934 2.294 0 1.638-1.09 2.84-2.532 2.84h-4.466zm1.17 4.26h2.723c.925 0 1.497-.49 1.497-1.365v-.492c0-.873-.572-1.365-1.497-1.365H91.97zm0 4.534h2.913c1.008 0 1.634-.546 1.634-1.53v-.49c0-.984-.626-1.53-1.634-1.53H91.97v3.523zM100.056 52.191h1.579l2.805 5.298h.081l2.832-5.298h1.525v9.832h-1.144v-8.275h-.082l-.816 1.639-2.342 4.287-2.341-4.287-.817-1.64h-.082v8.276h-1.143v-9.832zM113.86 57.162c0-3.278 1.47-5.135 3.948-5.135 2.477 0 2.75.792 3.376 2.158l-.953.573c-.381-1.01-1.198-1.666-2.423-1.666s-2.696 1.339-2.696 3.36v1.474c0 2.021 1.008 3.25 2.696 3.25 1.688 0 2.096-.71 2.505-1.775l.953.601c-.627 1.393-1.825 2.24-3.431 2.24-2.478 0-3.948-1.748-3.948-5.026zM122.491 58.39c0-2.32 1.334-3.796 3.267-3.796 1.933 0 3.267 1.503 3.267 3.797 0 2.294-1.334 3.796-3.267 3.796-1.933 0-3.267-1.502-3.267-3.796m5.336.52v-1.038c0-1.53-.844-2.294-2.069-2.294s-2.069.737-2.069 2.294v1.038c0 1.53.844 2.294 2.069 2.294s2.069-.738 2.069-2.294M130.958 62.023v-7.265h1.116v1.175h.055c.327-.738.817-1.366 1.96-1.366 1.144 0 1.824.437 2.205 1.475h.028c.272-.792.98-1.475 2.205-1.475s2.369 1.01 2.369 2.786v4.67h-1.117v-4.452c0-1.283-.49-1.966-1.579-1.966s-1.688.464-1.688 1.393v5.052h-1.116V57.6c0-1.284-.49-1.967-1.552-1.967s-1.715.465-1.715 1.393v5.053h-1.116zM143.292 54.758h1.116v1.175h.054c.381-.929 1.117-1.366 2.124-1.366 1.824 0 2.94 1.475 2.94 3.796 0 2.322-1.143 3.797-2.94 3.797s-1.688-.465-2.124-1.366h-.054v3.987h-1.116V54.704zm5.036 4.26V57.79c0-1.284-.789-2.158-2.042-2.158-1.252 0-1.878.601-1.878 1.393v2.704c0 .956.844 1.475 1.878 1.475 1.035 0 2.042-.874 2.042-2.158zM156.768 62.023c-.816 0-1.17-.519-1.252-1.174h-.082c-.299.874-1.089 1.365-2.096 1.365-1.525 0-2.423-.846-2.423-2.185 0-1.338.98-2.13 3.076-2.13h1.443v-.71c0-1.038-.571-1.584-1.715-1.584-1.143 0-1.443.41-1.851 1.093l-.681-.629c.381-.764 1.253-1.42 2.559-1.42 1.307 0 2.777.929 2.777 2.458v3.987h.817v.984h-.626zm-1.334-2.103v-1.202h-1.497c-1.28 0-1.851.383-1.851 1.093v.3c0 .71.571 1.12 1.443 1.12.871 0 1.905-.573 1.905-1.31M159.056 62.023v-7.265h1.116v1.175h.054c.354-.82.98-1.366 2.042-1.366 1.062 0 2.423 1.01 2.423 2.786v4.67h-1.116v-4.452c0-1.283-.572-1.966-1.633-1.966-1.062 0-1.77.464-1.77 1.393v5.052h-1.116zM171.471 54.758h1.116l-3.24 8.958c-.327.874-.626 1.12-1.688 1.12h-.572v-.983h1.144l.544-1.557-2.722-7.538h1.116l1.742 4.944.327 1.174h.082l.381-1.174 1.742-4.944zM66.132 12.863h5.582v12.045H84.51V12.863h5.636V42.36H84.51V29.96H71.714v12.4h-5.582zM93.74 36.651c0-4.424 3.104-5.899 6.888-6.8l6.398-1.475v-.519c0-2.157-1.388-3.496-3.621-3.496-2.232 0-3.54 1.23-3.948 3.25l-4.791-.546c.707-4.042 4.11-6.664 8.957-6.664 4.846 0 8.821 3.387 8.821 8.303v8.63c0 .546.164.71.545.71h1.17v4.288h-3.267c-2.069 0-2.995-.683-2.995-2.349 0-1.666.082-1.092.3-1.857l-.463-.164c-1.525 3.277-3.73 4.725-6.888 4.725s-7.106-2.403-7.106-6.063zm8.549 2.103c2.777 0 4.737-2.02 4.737-5.216v-1.693l-4.574 1.092c-2.314.546-3.267 1.338-3.267 3.113 0 1.776 1.225 2.704 3.104 2.704M116.147 36.542l5.119-1.01c.544 2.266 2.341 3.413 4.737 3.413s3.73-.983 3.73-2.621c0-1.64-1.606-1.994-4.629-2.54-3.811-.601-8.766-1.311-8.766-6.61 0-5.298 3.403-6.8 8.957-6.8s8.74 2.076 9.611 6.227l-5.173.847c-.463-2.104-2.178-3.196-4.465-3.196s-3.649 1.065-3.649 2.485 1.634 1.994 4.656 2.54c3.785.601 8.74 1.311 8.74 6.61 0 5.298-3.376 6.964-9.039 6.964s-8.958-2.103-9.883-6.336zM143.836 42.387h-5.472V12.044h5.472v9.45c0 1.092-.218 2.157-.517 3.714l.517.164c1.307-3.114 3.267-4.943 6.943-4.943 3.675 0 7.133 2.95 7.133 7.974v13.984h-5.473v-13.82c0-2.458-1.225-3.796-3.648-3.796s-4.955 2.103-4.955 5.817zM169.129 36.924c0 .847.3 1.093.926 1.093h2.396v4.342h-4.955c-2.478 0-3.812-1.393-3.812-3.96V25.263h-3.022V20.92h8.494v16.004zm-6.207-21.74c0-1.856 1.524-3.386 3.321-3.386 1.797 0 3.322 1.53 3.322 3.387a3.305 3.305 0 0 1-3.322 3.332 3.305 3.305 0 0 1-3.321-3.332M174.248 27.639c0-8.85 5.799-15.24 14.185-15.24 8.385 0 11.897 4.097 13.177 9.64l-5.554 1.34c-1.062-3.879-3.621-6.064-7.651-6.064-4.029 0-8.358 4.26-8.358 10.324 0 6.063 3.376 10.323 8.576 10.323 5.2 0 6.643-2.24 7.705-6.363l5.255.6c-1.253 6.61-6.126 10.707-13.014 10.707-6.889 0-14.321-6.419-14.321-15.24zM203.87 31.626c0-6.527 4.574-11.197 10.918-11.197 6.343 0 10.917 4.67 10.917 11.197 0 6.527-4.574 11.252-10.917 11.252-6.344 0-10.918-4.725-10.918-11.252m16.39 0c0-4.042-2.151-6.746-5.472-6.746-3.322 0-5.473 2.704-5.473 6.746s2.178 6.8 5.473 6.8c3.294 0 5.472-2.703 5.472-6.8M229.163 20.92h5.037v.847c0 1.147-.055 2.075-.381 3.796l.517.137c.79-2.813 2.26-4.752 5.717-4.752h1.552v5.325h-2.232c-3.077 0-4.738 1.857-4.738 5.271v10.87h-5.472v-21.44zM244.165 20.92h5.39v.983c0 .984-.081 1.72-.381 3.469l.517.136c1.307-3.413 3.73-5.052 6.889-5.052 5.2 0 9.338 4.288 9.338 11.197 0 6.91-4.111 11.253-9.338 11.253-5.228 0-5.473-1.64-6.807-5.108l-.463.164c.245 1.694.327 2.485.327 3.414v9.64h-5.472zm16.308 10.706c0-4.178-2.26-6.746-5.472-6.746-3.213 0-5.473 2.568-5.473 6.746 0 4.179 2.26 6.8 5.473 6.8 3.212 0 5.472-2.567 5.472-6.8M21.781 0 0 12.618v30.26l8.168 4.725v-30.26L21.78 9.476z"/><path fill="#000" d="M30.466 0v24.116h-8.685v-9.013l-8.195 4.752v30.889l8.195 4.724V31.435h8.685v8.958l8.195-4.752V4.752z"/><path fill="#000" d="m30.466 55.496 21.781-12.618v-30.26l-8.195-4.725v30.26L30.466 46.02z"/></svg></div></a><span class="footer_themeSwitcher__CPJxw hds-font-weight-regular"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-106">Theme</label></span></span><ul class="footer_links__t81SU"><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="/certifications"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://status.hashicorp.com"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/security"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/privacy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trade-controls"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/accessibility"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Accessibility</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="opens-in-new-tab-label-react-aria-115" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-115">(opens in new tab)</span></li></ul></footer></div></div></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Consul","url":"/consul"},{"title":"API","url":"/consul/api-docs","isCurrentPage":false},{"title":"API Features"},{"title":"Consistency Modes","url":"/consul/api-docs/features/consistency","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Consul Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Consul","fullPath":"/consul","theme":"consul"},{"title":"Install","fullPath":"/consul/install"},{"title":"Tutorials","fullPath":"/consul/tutorials"},{"title":"Documentation","fullPath":"/consul/docs"},{"title":"API","fullPath":"/consul/api-docs"},{"title":"CLI","fullPath":"/consul/commands"}],"showFilterInput":false,"title":"Consul","visuallyHideTitle":true},{"backToLinkProps":{"text":"Consul Home","href":"/consul"},"levelButtonProps":{"levelUpButtonText":"Consul Home"},"menuItems":[{"title":"API","fullPath":"/consul/api-docs","theme":"consul"},{"title":"API Structure","path":"api-structure","filePath":"../content/api-docs/api-structure.mdx","fullPath":"/consul/api-docs/api-structure","id":"sidebar-nav-item-0"},{"title":"API Features","routes":[{"title":"Consistency Modes","path":"features/consistency","filePath":"../content/api-docs/features/consistency.mdx","fullPath":"/consul/api-docs/features/consistency","id":"sidebar-nav-item-2"},{"title":"Blocking Queries","path":"features/blocking","filePath":"../content/api-docs/features/blocking.mdx","fullPath":"/consul/api-docs/features/blocking","id":"sidebar-nav-item-3"},{"title":"Filtering","path":"features/filtering","filePath":"../content/api-docs/features/filtering.mdx","fullPath":"/consul/api-docs/features/filtering","id":"sidebar-nav-item-4"},{"title":"Agent Caching","path":"features/caching","filePath":"../content/api-docs/features/caching.mdx","fullPath":"/consul/api-docs/features/caching","id":"sidebar-nav-item-5"}],"id":"sidebar-nav-item-1"},{"divider":true,"id":"sidebar-nav-item-6"},{"title":"ACLs","routes":[{"title":"Overview","path":"acl","filePath":"../content/api-docs/acl/index.mdx","fullPath":"/consul/api-docs/acl","id":"sidebar-nav-item-8"},{"title":"Tokens","path":"acl/tokens","filePath":"../content/api-docs/acl/tokens.mdx","fullPath":"/consul/api-docs/acl/tokens","id":"sidebar-nav-item-9"},{"title":"Policies","path":"acl/policies","filePath":"../content/api-docs/acl/policies.mdx","fullPath":"/consul/api-docs/acl/policies","id":"sidebar-nav-item-10"},{"title":"Templated Policies","path":"acl/templated-policies","filePath":"../content/api-docs/acl/templated-policies.mdx","fullPath":"/consul/api-docs/acl/templated-policies","id":"sidebar-nav-item-11"},{"title":"Roles","path":"acl/roles","filePath":"../content/api-docs/acl/roles.mdx","fullPath":"/consul/api-docs/acl/roles","id":"sidebar-nav-item-12"},{"title":"Auth Methods","path":"acl/auth-methods","filePath":"../content/api-docs/acl/auth-methods.mdx","fullPath":"/consul/api-docs/acl/auth-methods","id":"sidebar-nav-item-13"},{"title":"Binding Rules","path":"acl/binding-rules","filePath":"../content/api-docs/acl/binding-rules.mdx","fullPath":"/consul/api-docs/acl/binding-rules","id":"sidebar-nav-item-14"}],"id":"sidebar-nav-item-7"},{"title":"Admin Partitions","path":"admin-partitions","filePath":"../content/api-docs/admin-partitions.mdx","fullPath":"/consul/api-docs/admin-partitions","id":"sidebar-nav-item-15"},{"title":"Agent","routes":[{"title":"Overview","path":"agent","filePath":"../content/api-docs/agent/index.mdx","fullPath":"/consul/api-docs/agent","id":"sidebar-nav-item-17"},{"title":"Checks","path":"agent/check","filePath":"../content/api-docs/agent/check.mdx","fullPath":"/consul/api-docs/agent/check","id":"sidebar-nav-item-18"},{"title":"Services","path":"agent/service","filePath":"../content/api-docs/agent/service.mdx","fullPath":"/consul/api-docs/agent/service","id":"sidebar-nav-item-19"},{"title":"Connect","path":"agent/connect","filePath":"../content/api-docs/agent/connect.mdx","fullPath":"/consul/api-docs/agent/connect","id":"sidebar-nav-item-20"}],"id":"sidebar-nav-item-16"},{"title":"Catalog","path":"catalog","filePath":"../content/api-docs/catalog.mdx","fullPath":"/consul/api-docs/catalog","id":"sidebar-nav-item-21"},{"title":"Cluster Peering","path":"peering","filePath":"../content/api-docs/peering.mdx","fullPath":"/consul/api-docs/peering","id":"sidebar-nav-item-22"},{"title":"Config","path":"config","filePath":"../content/api-docs/config.mdx","fullPath":"/consul/api-docs/config","id":"sidebar-nav-item-23"},{"title":"Connect","routes":[{"title":"Overview","path":"connect","filePath":"../content/api-docs/connect/index.mdx","fullPath":"/consul/api-docs/connect","id":"sidebar-nav-item-25"},{"title":"Certificate Authority (CA)","path":"connect/ca","filePath":"../content/api-docs/connect/ca.mdx","fullPath":"/consul/api-docs/connect/ca","id":"sidebar-nav-item-26"},{"title":"Intentions","path":"connect/intentions","filePath":"../content/api-docs/connect/intentions.mdx","fullPath":"/consul/api-docs/connect/intentions","id":"sidebar-nav-item-27"}],"id":"sidebar-nav-item-24"},{"title":"Coordinates","path":"coordinate","filePath":"../content/api-docs/coordinate.mdx","fullPath":"/consul/api-docs/coordinate","id":"sidebar-nav-item-28"},{"title":"Discovery Chain","path":"discovery-chain","filePath":"../content/api-docs/discovery-chain.mdx","fullPath":"/consul/api-docs/discovery-chain","id":"sidebar-nav-item-29"},{"title":"Events","path":"event","filePath":"../content/api-docs/event.mdx","fullPath":"/consul/api-docs/event","id":"sidebar-nav-item-30"},{"title":"Exported Services","path":"exported-services","filePath":"../content/api-docs/exported-services.mdx","fullPath":"/consul/api-docs/exported-services","id":"sidebar-nav-item-31"},{"title":"Health","path":"health","filePath":"../content/api-docs/health.mdx","fullPath":"/consul/api-docs/health","id":"sidebar-nav-item-32"},{"title":"KV Store","path":"kv","filePath":"../content/api-docs/kv.mdx","fullPath":"/consul/api-docs/kv","id":"sidebar-nav-item-33"},{"title":"Operator","routes":[{"title":"Overview","path":"operator","filePath":"../content/api-docs/operator/index.mdx","fullPath":"/consul/api-docs/operator","id":"sidebar-nav-item-35"},{"title":"Area","path":"operator/area","filePath":"../content/api-docs/operator/area.mdx","fullPath":"/consul/api-docs/operator/area","id":"sidebar-nav-item-36"},{"title":"Autopilot","path":"operator/autopilot","filePath":"../content/api-docs/operator/autopilot.mdx","fullPath":"/consul/api-docs/operator/autopilot","id":"sidebar-nav-item-37"},{"title":"Keyring","path":"operator/keyring","filePath":"../content/api-docs/operator/keyring.mdx","fullPath":"/consul/api-docs/operator/keyring","id":"sidebar-nav-item-38"},{"title":"License","path":"operator/license","filePath":"../content/api-docs/operator/license.mdx","fullPath":"/consul/api-docs/operator/license","id":"sidebar-nav-item-39"},{"title":"Raft","path":"operator/raft","filePath":"../content/api-docs/operator/raft.mdx","fullPath":"/consul/api-docs/operator/raft","id":"sidebar-nav-item-40"},{"title":"Segment","path":"operator/segment","filePath":"../content/api-docs/operator/segment.mdx","fullPath":"/consul/api-docs/operator/segment","id":"sidebar-nav-item-41"},{"title":"Usage","path":"operator/usage","filePath":"../content/api-docs/operator/usage.mdx","fullPath":"/consul/api-docs/operator/usage","id":"sidebar-nav-item-42"}],"id":"sidebar-nav-item-34"},{"title":"Namespaces","path":"namespaces","filePath":"../content/api-docs/namespaces.mdx","fullPath":"/consul/api-docs/namespaces","id":"sidebar-nav-item-43"},{"title":"Prepared Queries","path":"query","filePath":"../content/api-docs/query.mdx","fullPath":"/consul/api-docs/query","id":"sidebar-nav-item-44"},{"title":"Sessions","path":"session","filePath":"../content/api-docs/session.mdx","fullPath":"/consul/api-docs/session","id":"sidebar-nav-item-45"},{"title":"Snapshots","path":"snapshot","filePath":"../content/api-docs/snapshot.mdx","fullPath":"/consul/api-docs/snapshot","id":"sidebar-nav-item-46"},{"title":"Status","path":"status","filePath":"../content/api-docs/status.mdx","fullPath":"/consul/api-docs/status","id":"sidebar-nav-item-47"},{"title":"Transactions","path":"txn","filePath":"../content/api-docs/txn.mdx","fullPath":"/consul/api-docs/txn","id":"sidebar-nav-item-48"},{"divider":true,"id":"sidebar-nav-item-49"},{"title":"Libraries \u0026amp; SDKs","path":"libraries-and-sdks","filePath":"../content/api-docs/libraries-and-sdks.mdx","fullPath":"/consul/api-docs/libraries-and-sdks","id":"sidebar-nav-item-50"}],"title":"API","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/consul/blob/main/website/../content/api-docs/features/consistency.mdx"},"metadata":{"title":"Consistency Modes","description":"Every Consul HTTP API read request uses one of several \"consistency modes\" that offer different levels of response consistency and performance. By default, Consul uses a consistency mode that is suitable for most use cases. Users can override consistency modes to fine-tune these trade-offs for their own use case.","layout":null},"outlineItems":[{"title":"Consistency Modes","url":"#consistency-modes"},{"title":"What is Consistency?","url":"#what-is-consistency"},{"title":"Available Consistency Modes","url":"#available-consistency-modes"},{"title":"Usage","url":"#usage"}],"pageHeading":{"id":"consistency-modes","title":"Consistency Modes"},"mdxSource":{"compiledSource":"const makeShortcode=name=\u003efunction MDXDefaultShortcode(props){console.warn(\"Component \"+name+\" was not imported, exported, or provided by MDXProvider as global scope\");return mdx(\"div\",props)};const Tabs=makeShortcode(\"Tabs\");const Tab=makeShortcode(\"Tab\");const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`Every Consul HTTP API read request uses one of several `,mdx(\"em\",{parentName:\"p\"},`consistency modes`),` that offer\ndifferent levels of response consistency and performance. By default, Consul uses a\nconsistency mode that is suitable for most use cases. Users can override consistency modes\nto fine-tune these trade-offs for their own use case at two levels:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`Per interface (HTTP API, DNS)`),mdx(\"li\",{parentName:\"ul\"},`Per request (HTTP API requests only)`)),mdx(\"h2\",{\"id\":\"what-is-consistency\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#what-is-consistency\",\"aria-label\":\"what is consistency permalink\"},`\\xbb`),`What is Consistency?`),mdx(\"p\",null,`Consul servers are responsible for maintaining state information like the registration and\nhealth status of services and nodes. To protect this state against the potential failure of\nConsul servers, this state is replicated across three or more Consul servers in production using a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/concept/consensus\"},`consensus protocol`),`.`),mdx(\"p\",null,`One Consul server is elected leader and acts as the ultimate authority on Consul's state.\nIf a majority of Consul servers agree to a state change, the leader is responsible for recording\nthe change and then distributing it to the non-leader Consul serversknown as followers.\nBecause it takes time for a state change on the leader to propagate to the followers,\nfollowers may have a slightly outdated, or \"stale\", view of Consul's state.`),mdx(\"p\",null,`If a read request is handled by the current leader, the response is guaranteed to be\nfully `,mdx(\"em\",{parentName:\"p\"},`consistent`),` (as up-to-date as possible).\nIf the same request were handled by a follower, the response may be less consistent:\nbased on a `,mdx(\"em\",{parentName:\"p\"},`stale`),` (outdated) copy of the leader's state.\nConsistency is highest if the response comes from the leader.\nBut ensuring only the leader can respond to the request prevents spreading\nread request load across all Consul servers.`),mdx(\"p\",null,`The consistency mode controls which Consul servers can respond to read requests,\nenabling control over this inherent trade-off between consistency and performance.`),mdx(\"h2\",{\"id\":\"available-consistency-modes\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#available-consistency-modes\",\"aria-label\":\"available consistency modes permalink\"},`\\xbb`),`Available Consistency Modes`),mdx(\"p\",null,`Each HTTP API endpoint documents its support for the three read consistency modes:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"stale\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#stale\",\"aria-label\":\"stale permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`stale`)),` -\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#consul-dns-queries\"},`Consul DNS queries use `,mdx(\"inlineCode\",{parentName:\"a\"},`stale`),` mode by default`),`.\nThis mode allows any server to handle the read regardless of whether it is the leader.\nThe trade-off is very fast and scalable reads with a higher likelihood of stale values.\nResults are generally consistent to within 50 milliseconds of the leader,\nthough there is no upper limit on this staleness.\nSince this mode allows reads without a leader,\na cluster that is unavailable (no quorum) can still respond to queries.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"default\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#default\",\"aria-label\":\"default permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`default`)),` -\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#consul-http-api-queries\"},`Consul HTTP API queries use `,mdx(\"inlineCode\",{parentName:\"a\"},`default`),` mode by default`),`.\nIt is strongly consistent in almost all cases.\nHowever, there is a small window in which a new leader may be elected\nduring which the old leader may respond with stale values.\nThe trade-off is fast reads but potentially stale values.\nThe condition resulting in stale reads is hard to trigger,\nand most clients should not need to worry about this case.\nAlso, note that this race condition only applies to reads, not writes.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"consistent\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",{parentName:\"p\",\"href\":\"#consistent\",\"aria-label\":\"consistent permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`consistent`)),` -\nThis mode is strongly consistent without caveats.\nIt requires that a leader verify with a quorum of peers that it is still leader.\nThis introduces an additional round-trip to all server nodes.\nThe trade-off is increased latency due to an extra round trip.\nMost clients should not use this unless they cannot tolerate a stale read.`))),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Scaling read requests`),`: The most effective way to increase read scalability\nis to convert non-`,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads to `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads. If most requests are already\n`,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads and additional load reduction is desired, use Consul Enterprise\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/manage/scale/redundancy-zone\"},`redundancy zones`),` or\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/manage/scale/read-replica\"},`read replicas`),`\nto spread `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads across additional, `,mdx(\"em\",{parentName:\"p\"},`non-voting`),` Consul servers.\nNon-voting servers enhance read scalability without increasing the number\nof voting servers; adding more then 5 voting servers is not recommended because\nit decreases Consul's performance.`)),mdx(\"h3\",{\"id\":\"intra-datacenter-request-behavior\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#intra-datacenter-request-behavior\",\"aria-label\":\"intra datacenter request behavior permalink\"},`\\xbb`),`Intra-Datacenter Request Behavior`),mdx(\"p\",null,`The following diagrams show how the intra-datacenter request path varies\nper consistency mode and the relative trade-offs between level of consistency and performance.`),mdx(Tabs,{mdxType:\"Tabs\"},mdx(Tab,{heading:\"Stale reads\",mdxType:\"Tab\"},mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/img/consistency-modes/consistency-mode-stale.png\"},mdx(\"img\",{parentName:\"a\",\"src\":\"/img/consistency-modes/consistency-mode-stale.png\",\"alt\":\"stale consistency mode read request path\"})))),mdx(Tab,{heading:\"Default reads\",mdxType:\"Tab\"},mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/img/consistency-modes/consistency-mode-default.png\"},mdx(\"img\",{parentName:\"a\",\"src\":\"/img/consistency-modes/consistency-mode-default.png\",\"alt\":\"default consistency mode read request path\"})))),mdx(Tab,{heading:\"Consistent reads, all writes\",mdxType:\"Tab\"},mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/img/consistency-modes/consistency-mode-consistent.png\"},mdx(\"img\",{parentName:\"a\",\"src\":\"/img/consistency-modes/consistency-mode-consistent.png\",\"alt\":\"consistent consistency mode read, any write request path\"}))))),mdx(\"h3\",{\"id\":\"cross-datacenter-request-behavior\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#cross-datacenter-request-behavior\",\"aria-label\":\"cross datacenter request behavior permalink\"},`\\xbb`),`Cross-Datacenter Request Behavior`),mdx(\"p\",null,`When making a request across federated Consul datacenters, requests are forwarded from\na local server to any remote server. Once in the remote datacenter, the request path\nis the same as a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#intra-datacenter-request-behavior\"},`local request with the same consistency mode`),`.\nThe following diagrams show the cross-datacenter request paths when Consul servers in datacenters are\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/east-west/mesh-gateway/enable\"},`federated either directly or via mesh gateways`),`.`),mdx(Tabs,{mdxType:\"Tabs\"},mdx(Tab,{heading:\"Traditional WAN federation\",mdxType:\"Tab\"},mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/img/consistency-modes/consistency-mode-cross-datacenter-federation-traditional.png\"},mdx(\"img\",{parentName:\"a\",\"src\":\"/img/consistency-modes/consistency-mode-cross-datacenter-federation-traditional.png\",\"alt\":\"consistency mode behavior across Consul datacenters with traditional WAN federation\"})))),mdx(Tab,{heading:\"WAN federation via mesh gateways\",mdxType:\"Tab\"},mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"/img/consistency-modes/consistency-mode-cross-datacenter-federation-mesh-gateways.png\"},mdx(\"img\",{parentName:\"a\",\"src\":\"/img/consistency-modes/consistency-mode-cross-datacenter-federation-mesh-gateways.png\",\"alt\":\"consistency mode behavior across Consul datacenters with WAN federation via mesh gateways\"}))))),mdx(\"h2\",{\"id\":\"usage\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#usage\",\"aria-label\":\"usage permalink\"},`\\xbb`),`Usage`),mdx(\"h3\",{\"id\":\"consul-dns-queries\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#consul-dns-queries\",\"aria-label\":\"consul dns queries permalink\"},`\\xbb`),`Consul DNS Queries`),mdx(\"p\",null,`When DNS queries are issued to `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/discover/dns\"},`Consul's DNS interface`),`,\nConsul uses the `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` consistency mode by default when interfacing with its\nunderlying Consul service discovery HTTP APIs\n(`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/catalog\"},`Catalog`),`, `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/health\"},`Health`),`, and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/query\"},`Prepared Query`),`).`),mdx(\"p\",null,`The consistency mode underlying Consul DNS queries cannot be overridden on a\nper-request basis.`),mdx(\"h4\",{\"id\":\"changing-the-default-consistency-mode\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#changing-the-default-consistency-mode\",\"aria-label\":\"changing the default consistency mode permalink\"},`\\xbb`),`Changing the Default Consistency Mode`),mdx(\"p\",null,`If stronger consistency is required at the expense of increased latency,\nset `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#allow_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.allow_stale`)),` to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),` to make Consul use the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` consistency mode instead of `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),`\nwhen interfacing with the underlying Consul service discovery HTTP APIs.`),mdx(\"h4\",{\"id\":\"limiting-staleness-advanced-usage\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#limiting-staleness-advanced-usage\",\"aria-label\":\"limiting staleness advanced usage permalink\"},`\\xbb`),`Limiting Staleness (Advanced Usage)`),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Caution`),`:\nConfiguring `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),` may result in a prolonged outage\nif your Consul servers become overloaded.\nWe do not recommend using this setting to limit staleness\nunless it would be preferable for your services to be unavailable\nthan to receive results that are too stale.\nIf bounded result consistency is required by a service, consider\nmodifying the service to use `,mdx(\"inlineCode\",{parentName:\"p\"},`consistent`),` service discovery HTTP API queries\ninstead of DNS lookups.`)),mdx(\"p\",null,`If Consul is configured to respond to DNS queries in `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` consistency mode\n(`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#allow_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.allow_stale`)),` is `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`),\nyou can set an upper limit on how stale a response is allowed to be by\nconfiguring `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),`.\nWhen the Consul agent handling the response is behind the leader by more than `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),` time,\nthe request will be forwarded to the leader for handling as in `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` consistency mode.`),mdx(\"p\",null,`A common cause for response staleness exceeding `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),` is that\nConsul servers are overloaded by requests. Under these circumstances, `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),`\nwill make the overloading worse by converting cheap `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads to more expensive `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` reads.`),mdx(\"h3\",{\"id\":\"consul-http-api-queries\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#consul-http-api-queries\",\"aria-label\":\"consul http api queries permalink\"},`\\xbb`),`Consul HTTP API Queries`),mdx(\"p\",null,`All HTTP API read requests use the `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` consistency mode by default\nunless `,mdx(\"a\",{parentName:\"p\",\"href\":\"#overriding-a-request-s-consistency-mode\"},`overridden on a per-request basis`),`.\nWe do `,mdx(\"a\",{parentName:\"p\",\"href\":\"#changing-the-default-consistency-mode-advanced-usage\"},`not recommend changing the consistency mode used by default`),`.`),mdx(\"p\",null,`Write requests do not support defining a consistency mode.\nAll writes follow the behavior of the `,mdx(\"inlineCode\",{parentName:\"p\"},`consistent`),` consistency mode.`),mdx(\"h4\",{\"id\":\"overriding-a-request-s-consistency-mode\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#overriding-a-request-s-consistency-mode\",\"aria-label\":\"overriding a request s consistency mode permalink\"},`\\xbb`),`Overriding a Request's Consistency Mode`),mdx(\"p\",null,`The HTTP API documentation for each endpoint lists which consistency modes can be used\nto override the default on a per-request basis. To use a supported consistency mode\nother than the default, include the desired consistency mode as a URL query parameter\nwhen calling the endpoint:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"stale-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#stale-1\",\"aria-label\":\"stale permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`stale`)),`: Use the `,mdx(\"inlineCode\",{parentName:\"li\"},`stale`),` query parameter`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"consistent-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#consistent-1\",\"aria-label\":\"consistent permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`consistent`)),`: Use the `,mdx(\"inlineCode\",{parentName:\"li\"},`consistent`),` query parameter`),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"id\":\"default-1\",\"className\":\"__target-lic\",\"aria-hidden\":\"true\"}),mdx(\"a\",{parentName:\"li\",\"href\":\"#default-1\",\"aria-label\":\"default permalink\",\"className\":\"__permalink-lic\"},mdx(\"inlineCode\",{parentName:\"a\"},`default`)),`: Use the `,mdx(\"inlineCode\",{parentName:\"li\"},`leader`),` query parameter;\nonly relevant `,mdx(\"a\",{parentName:\"li\",\"href\":\"#changing-the-default-consistency-mode-advanced-usage\"},`if the default consistency mode is changed to `,mdx(\"inlineCode\",{parentName:\"a\"},`stale`)))),mdx(\"h4\",{\"id\":\"changing-the-default-consistency-mode-advanced-usage\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#changing-the-default-consistency-mode-advanced-usage\",\"aria-label\":\"changing the default consistency mode advanced usage permalink\"},`\\xbb`),`Changing the Default Consistency Mode (Advanced Usage)`),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Caution`),`:\nConfiguring `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),` may result in a prolonged outage\nif your Consul servers become overloaded.\nWe do not recommend using this setting to limit staleness\nunless it would be preferable for your services to be unavailable\nthan to receive results that are too stale.\nIf bounded result consistency is required by a service, consider\nmodifying the service to use `,mdx(\"inlineCode\",{parentName:\"p\"},`consistent`),` mode\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#overriding-a-request-s-consistency-mode\"},`on a per-request basis`),`.`)),mdx(\"p\",null,`The default consistency mode can be changed to `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` for service discovery HTTP API endpoints,\nincluding:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/api-docs/catalog\"},`Catalog API`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/api-docs/health\"},`Health API`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/consul/api-docs/query\"},`Prepared Query API`))),mdx(\"p\",null,`This allows Consul operators to spread service discovery read load across Consul servers\nwith a centralized configuration change, avoiding the need to modify every service to\nexplicitly set `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` consistency mode in their requests.\nServices can still override this default on a per-request basis by\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#overriding-a-request-s-consistency-mode\"},`specifying a supported consistency mode as a query parameter in the request`),`.`),mdx(\"p\",null,`To configure Consul servers that receive service discovery requests to use `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),`\nconsistency mode unless overridden,\nset `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),` to a value greater than zero in their agent configuration.\nThe `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` consistency mode will be used by default unless the data is sufficiently stale:\nits Raft log's index is more than `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),` indices behind the leader's.\nSetting a positive value for `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),`\nis analogous to `,mdx(\"a\",{parentName:\"p\",\"href\":\"#limiting-staleness-advanced-usage\"},`limiting the staleness of Consul DNS queries`),`\nby setting `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/dns#max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`dns_config.max_stale`)),`.`),mdx(\"p\",null,`A common cause for response staleness exceeding `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),` is that\nConsul servers are overloaded by requests. Under these circumstances, `,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/docs/reference/agent/configuration-file/general#discovery_max_stale\"},mdx(\"inlineCode\",{parentName:\"a\"},`discovery_max_stale`)),`\nwill make the overloading worse by converting cheap `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` reads to more expensive `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` reads.`),mdx(\"h3\",{\"id\":\"visibility-into-response-staleness\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#visibility-into-response-staleness\",\"aria-label\":\"visibility into response staleness permalink\"},`\\xbb`),`Visibility into Response Staleness`),mdx(\"p\",null,`To support bounding the acceptable staleness of data, responses provide the\n`,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-LastContact`),` header containing the time in milliseconds that a server\nwas last contacted by the leader node. The `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-KnownLeader`),` header also\nindicates if there is a known leader. These can be used by clients to gauge the\nstaleness of a result and take appropriate action.`),mdx(\"h3\",{\"id\":\"visibility-into-consistency-mode-used\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#visibility-into-consistency-mode-used\",\"aria-label\":\"visibility into consistency mode used permalink\"},`\\xbb`),`Visibility into Consistency Mode Used`),mdx(\"p\",null,`The Consul DNS and HTTP API interfaces allow setting the consistency mode\nat different levels (interface and per-request).\nAdvanced settings for the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#limiting-staleness-advanced-usage\"},`DNS`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#changing-the-default-consistency-mode-advanced-usage\"},`HTTP API`),` interfaces can even\ncause the consistency mode to change from `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` to `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` if results are sufficiently stale.`),mdx(\"p\",null,`To understand the consistency mode used for a particular HTTP API request,\ncheck the `,mdx(\"inlineCode\",{parentName:\"p\"},`X-Consul-Effective-Consistency`),` response header.\nThe value of the header matches the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"#overriding-a-request-s-consistency-mode\"},`name of the query parameter associated with the consistency mode`),`.\nIn the following example, the header shows that the `,mdx(\"inlineCode\",{parentName:\"p\"},`default`),` consistency mode was used.`),mdx(\"pre\",{\"style\":{\"backgroundColor\":\"var(--hds-code-block-color-surface-primary)\",\"color\":\"var(--hds-code-block-color-token)\"},\"tabindex\":\"0\",\"language\":\"shellsession\",\"className\":\"language-shellsession\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shellsession\"},mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` curl --include $CONSUL_HTTP_ADDR/v1/catalog/services`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`HTTP/1.1 200 OK`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`Content-Type: application/json`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`...`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`X-Consul-Effective-Consistency: leader`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`X-Consul-KnownLeader: true`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`X-Consul-LastContact: 0`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  \"redis\": [],`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  \"postgresql\": [\"primary\", \"secondary\"]`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"line\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",null,`The DNS interface does not support viewing the consistency mode used for a particular query.`),mdx(\"h3\",{\"id\":\"relationship-to-request-caching\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#relationship-to-request-caching\",\"aria-label\":\"relationship to request caching permalink\"},`\\xbb`),`Relationship to Request Caching`),mdx(\"p\",null,`Note that some HTTP API endpoints support a `,mdx(\"inlineCode\",{parentName:\"p\"},`cached`),` parameter which has some of the same\nsemantics as `,mdx(\"inlineCode\",{parentName:\"p\"},`stale`),` consistency mode but different trade offs. This behavior is described in\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/consul/api-docs/features/caching\"},`agent caching feature documentation`)))};MDXContent.isMDXComponent=true;","scope":{"product":"consul","version":"latest"}},"product":{"name":"Consul","slug":"consul","algoliaConfig":{"indexName":"product_CONSUL","searchOnlyApiKey":"fbd5dc1f0078d41509fcc560386fd534"},"analyticsConfig":{"includedDomains":"consul.io www.consul.io","segmentWriteKey":"IyzLrqXkox5KJ8XL4fo8vTYNGfiKlTCm"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Consul by HashiCorp","description":"Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.","image":"https://www.consulproject.io/consul-public/img/og-image.png","icon":[{"href":"/consul-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.11.3","subnavItems":[],"basePaths":["docs","api-docs","commands","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"currentRootDocsPath":{"iconName":"api","name":"API","path":"api-docs"}},"projectName":null,"versions":null},"__N_SSG":true},"page":"/consul/api-docs/[[...page]]","query":{"page":["features","consistency"]},"buildId":"BMMSdGfVTdXRvKLaeanSf","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>