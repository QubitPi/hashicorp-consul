{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Consul","url":"/consul"},{"title":"API","url":"/consul/api-docs","isCurrentPage":false},{"title":"Agent","url":"/consul/api-docs/agent"},{"title":"Connect","url":"/consul/api-docs/agent/connect","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Consul Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Consul","fullPath":"/consul","theme":"consul"},{"title":"Install","fullPath":"/consul/install"},{"title":"Tutorials","fullPath":"/consul/tutorials"},{"title":"Documentation","fullPath":"/consul/docs"},{"title":"API","fullPath":"/consul/api-docs"},{"title":"CLI","fullPath":"/consul/commands"}],"showFilterInput":false,"title":"Consul","visuallyHideTitle":true},{"backToLinkProps":{"text":"Consul Home","href":"/consul"},"levelButtonProps":{"levelUpButtonText":"Consul Home"},"menuItems":[{"title":"API","fullPath":"/consul/api-docs","theme":"consul"},{"title":"API Structure","path":"api-structure","filePath":"../content/api-docs/api-structure.mdx","fullPath":"/consul/api-docs/api-structure","id":"sidebar-nav-item-0"},{"title":"API Features","routes":[{"title":"Consistency Modes","path":"features/consistency","filePath":"../content/api-docs/features/consistency.mdx","fullPath":"/consul/api-docs/features/consistency","id":"sidebar-nav-item-2"},{"title":"Blocking Queries","path":"features/blocking","filePath":"../content/api-docs/features/blocking.mdx","fullPath":"/consul/api-docs/features/blocking","id":"sidebar-nav-item-3"},{"title":"Filtering","path":"features/filtering","filePath":"../content/api-docs/features/filtering.mdx","fullPath":"/consul/api-docs/features/filtering","id":"sidebar-nav-item-4"},{"title":"Agent Caching","path":"features/caching","filePath":"../content/api-docs/features/caching.mdx","fullPath":"/consul/api-docs/features/caching","id":"sidebar-nav-item-5"}],"id":"sidebar-nav-item-1"},{"divider":true,"id":"sidebar-nav-item-6"},{"title":"ACLs","routes":[{"title":"Overview","path":"acl","filePath":"../content/api-docs/acl/index.mdx","fullPath":"/consul/api-docs/acl","id":"sidebar-nav-item-8"},{"title":"Tokens","path":"acl/tokens","filePath":"../content/api-docs/acl/tokens.mdx","fullPath":"/consul/api-docs/acl/tokens","id":"sidebar-nav-item-9"},{"title":"Policies","path":"acl/policies","filePath":"../content/api-docs/acl/policies.mdx","fullPath":"/consul/api-docs/acl/policies","id":"sidebar-nav-item-10"},{"title":"Templated Policies","path":"acl/templated-policies","filePath":"../content/api-docs/acl/templated-policies.mdx","fullPath":"/consul/api-docs/acl/templated-policies","id":"sidebar-nav-item-11"},{"title":"Roles","path":"acl/roles","filePath":"../content/api-docs/acl/roles.mdx","fullPath":"/consul/api-docs/acl/roles","id":"sidebar-nav-item-12"},{"title":"Auth Methods","path":"acl/auth-methods","filePath":"../content/api-docs/acl/auth-methods.mdx","fullPath":"/consul/api-docs/acl/auth-methods","id":"sidebar-nav-item-13"},{"title":"Binding Rules","path":"acl/binding-rules","filePath":"../content/api-docs/acl/binding-rules.mdx","fullPath":"/consul/api-docs/acl/binding-rules","id":"sidebar-nav-item-14"}],"id":"sidebar-nav-item-7"},{"title":"Admin Partitions","path":"admin-partitions","filePath":"../content/api-docs/admin-partitions.mdx","fullPath":"/consul/api-docs/admin-partitions","id":"sidebar-nav-item-15"},{"title":"Agent","routes":[{"title":"Overview","path":"agent","filePath":"../content/api-docs/agent/index.mdx","fullPath":"/consul/api-docs/agent","id":"sidebar-nav-item-17"},{"title":"Checks","path":"agent/check","filePath":"../content/api-docs/agent/check.mdx","fullPath":"/consul/api-docs/agent/check","id":"sidebar-nav-item-18"},{"title":"Services","path":"agent/service","filePath":"../content/api-docs/agent/service.mdx","fullPath":"/consul/api-docs/agent/service","id":"sidebar-nav-item-19"},{"title":"Connect","path":"agent/connect","filePath":"../content/api-docs/agent/connect.mdx","fullPath":"/consul/api-docs/agent/connect","id":"sidebar-nav-item-20"}],"id":"sidebar-nav-item-16"},{"title":"Catalog","path":"catalog","filePath":"../content/api-docs/catalog.mdx","fullPath":"/consul/api-docs/catalog","id":"sidebar-nav-item-21"},{"title":"Cluster Peering","path":"peering","filePath":"../content/api-docs/peering.mdx","fullPath":"/consul/api-docs/peering","id":"sidebar-nav-item-22"},{"title":"Config","path":"config","filePath":"../content/api-docs/config.mdx","fullPath":"/consul/api-docs/config","id":"sidebar-nav-item-23"},{"title":"Connect","routes":[{"title":"Overview","path":"connect","filePath":"../content/api-docs/connect/index.mdx","fullPath":"/consul/api-docs/connect","id":"sidebar-nav-item-25"},{"title":"Certificate Authority (CA)","path":"connect/ca","filePath":"../content/api-docs/connect/ca.mdx","fullPath":"/consul/api-docs/connect/ca","id":"sidebar-nav-item-26"},{"title":"Intentions","path":"connect/intentions","filePath":"../content/api-docs/connect/intentions.mdx","fullPath":"/consul/api-docs/connect/intentions","id":"sidebar-nav-item-27"}],"id":"sidebar-nav-item-24"},{"title":"Coordinates","path":"coordinate","filePath":"../content/api-docs/coordinate.mdx","fullPath":"/consul/api-docs/coordinate","id":"sidebar-nav-item-28"},{"title":"Discovery Chain","path":"discovery-chain","filePath":"../content/api-docs/discovery-chain.mdx","fullPath":"/consul/api-docs/discovery-chain","id":"sidebar-nav-item-29"},{"title":"Events","path":"event","filePath":"../content/api-docs/event.mdx","fullPath":"/consul/api-docs/event","id":"sidebar-nav-item-30"},{"title":"Exported Services","path":"exported-services","filePath":"../content/api-docs/exported-services.mdx","fullPath":"/consul/api-docs/exported-services","id":"sidebar-nav-item-31"},{"title":"HCP Consul Central Link","path":"hcp-link","filePath":"../content/api-docs/hcp-link.mdx","fullPath":"/consul/api-docs/hcp-link","id":"sidebar-nav-item-32"},{"title":"Health","path":"health","filePath":"../content/api-docs/health.mdx","fullPath":"/consul/api-docs/health","id":"sidebar-nav-item-33"},{"title":"KV Store","path":"kv","filePath":"../content/api-docs/kv.mdx","fullPath":"/consul/api-docs/kv","id":"sidebar-nav-item-34"},{"title":"Operator","routes":[{"title":"Overview","path":"operator","filePath":"../content/api-docs/operator/index.mdx","fullPath":"/consul/api-docs/operator","id":"sidebar-nav-item-36"},{"title":"Area","path":"operator/area","filePath":"../content/api-docs/operator/area.mdx","fullPath":"/consul/api-docs/operator/area","id":"sidebar-nav-item-37"},{"title":"Autopilot","path":"operator/autopilot","filePath":"../content/api-docs/operator/autopilot.mdx","fullPath":"/consul/api-docs/operator/autopilot","id":"sidebar-nav-item-38"},{"title":"Keyring","path":"operator/keyring","filePath":"../content/api-docs/operator/keyring.mdx","fullPath":"/consul/api-docs/operator/keyring","id":"sidebar-nav-item-39"},{"title":"License","path":"operator/license","filePath":"../content/api-docs/operator/license.mdx","fullPath":"/consul/api-docs/operator/license","id":"sidebar-nav-item-40"},{"title":"Raft","path":"operator/raft","filePath":"../content/api-docs/operator/raft.mdx","fullPath":"/consul/api-docs/operator/raft","id":"sidebar-nav-item-41"},{"title":"Segment","path":"operator/segment","filePath":"../content/api-docs/operator/segment.mdx","fullPath":"/consul/api-docs/operator/segment","id":"sidebar-nav-item-42"},{"title":"Usage","path":"operator/usage","filePath":"../content/api-docs/operator/usage.mdx","fullPath":"/consul/api-docs/operator/usage","id":"sidebar-nav-item-43"}],"id":"sidebar-nav-item-35"},{"title":"Namespaces","path":"namespaces","filePath":"../content/api-docs/namespaces.mdx","fullPath":"/consul/api-docs/namespaces","id":"sidebar-nav-item-44"},{"title":"Prepared Queries","path":"query","filePath":"../content/api-docs/query.mdx","fullPath":"/consul/api-docs/query","id":"sidebar-nav-item-45"},{"title":"Sessions","path":"session","filePath":"../content/api-docs/session.mdx","fullPath":"/consul/api-docs/session","id":"sidebar-nav-item-46"},{"title":"Snapshots","path":"snapshot","filePath":"../content/api-docs/snapshot.mdx","fullPath":"/consul/api-docs/snapshot","id":"sidebar-nav-item-47"},{"title":"Status","path":"status","filePath":"../content/api-docs/status.mdx","fullPath":"/consul/api-docs/status","id":"sidebar-nav-item-48"},{"title":"Transactions","path":"txn","filePath":"../content/api-docs/txn.mdx","fullPath":"/consul/api-docs/txn","id":"sidebar-nav-item-49"},{"divider":true,"id":"sidebar-nav-item-50"},{"title":"Libraries &amp; SDKs","path":"libraries-and-sdks","filePath":"../content/api-docs/libraries-and-sdks.mdx","fullPath":"/consul/api-docs/libraries-and-sdks","id":"sidebar-nav-item-51"}],"title":"API","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/consul/blob/main/website/../content/api-docs/agent/connect.mdx"},"metadata":{"title":"Connect - Agent - HTTP API","description":"The /agent/connect endpoints interact with agent-local service mesh operations.","layout":null},"outlineItems":[{"title":"Connect - Agent HTTP API","url":"#connect-agent-http-api","dataHeapTrack":"toc-list-item-index-0"},{"title":"Authorize","url":"#authorize","dataHeapTrack":"toc-list-item-index-1"},{"title":"Certificate Authority (CA) Roots","url":"#certificate-authority-ca-roots","dataHeapTrack":"toc-list-item-index-2"},{"title":"Service Leaf Certificate","url":"#service-leaf-certificate","dataHeapTrack":"toc-list-item-index-3"},{"title":"Methods to specify namespace","url":"#methods-to-specify-namespace","dataHeapTrack":"toc-list-item-index-4"}],"pageHeading":{"id":"connect-agent-http-api","title":"Connect - Agent HTTP API"},"mdxSource":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var o=(a,n,t)=>n in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=>{for(var t in n||(n={}))p.call(n,t)&&o(a,t,n[t]);if(r)for(var t of r(n))i.call(n,t)&&o(a,t,n[t]);return a},l=(a,n)=>d(a,N(n));var m=(a,n)=>{var t={};for(var s in a)p.call(a,s)&&n.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&r)for(var s of r(a))n.indexOf(s)<0&&i.call(a,s)&&(t[s]=a[s]);return t};const makeShortcode=a=>function(t){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},t))},EnterpriseAlert=makeShortcode(\"EnterpriseAlert\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:a}=s,n=m(s,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"/agent/connect\"),` endpoints interact with\nwith agent-local `,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect\"}),\"service mesh\"),\" operations.\"),mdx(\"p\",null,\"These endpoints may mirror the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/connect\"}),\"non-agent service mesh endpoints\"),`\nin some cases. Almost all agent-local service mesh endpoints perform local caching\nto optimize performance of the mesh without having to make requests to the server.`),mdx(\"h2\",e({},{id:\"authorize\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#authorize\",\"aria-label\":\"authorize permalink\"}),\"\\xBB\"),\"Authorize\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Note:\"),\" This endpoint will always treat intentions with \",mdx(\"inlineCode\",{parentName:\"p\"},\"Permissions\"),`\ndefined as `,mdx(\"em\",{parentName:\"p\"},\"deny\"),` intentions during evaluation, as this endpoint is only suited\nfor networking layer 4 (e.g. TCP) integration.\nFor performance and reliability reasons it is desirable to implement intention\nenforcement by listing `,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/connect/intentions#list-matching-intentions\"}),`intentions that match the\ndestination`),` and representing\nthem in the native configuration of the proxy itself (such as RBAC for Envoy).`)),mdx(\"p\",null,`This endpoint tests whether a connection attempt is authorized between\ntwo services. This is the primary API that must be implemented by\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect/proxies\"}),\"proxies\"),` or\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect/native\"}),\"native integrations\"),`\nthat wish to integrate with the service mesh. Prior to calling this API, it is expected\nthat the client TLS certificate has been properly verified against the\ncurrent CA roots.`),mdx(\"p\",null,`The implementation of this API uses locally cached data\nand doesn't require any request forwarding to a server. Therefore, the\nresponse typically occurs in microseconds to impose minimal overhead on the\nconnection attempt.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Method\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Path\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Produces\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"POST\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"/agent/connect/authorize\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"application/json\"))))),mdx(\"p\",null,`The table below shows this endpoint's support for\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/blocking\"}),\"blocking queries\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency\"}),\"consistency modes\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/caching\"}),\"agent caching\"),`, and\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/api-structure#authentication\"}),\"required ACLs\"),\".\"),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Blocking Queries\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Consistency Modes\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Agent Caching\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"ACL Required\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"NO\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"none\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"background refresh\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"service:write\"))))),mdx(\"h3\",e({},{id:\"query-parameters\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#query-parameters\",\"aria-label\":\"query parameters permalink\"}),\"\\xBB\"),\"Query Parameters\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"ns\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#ns\",\"aria-label\":\"ns permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ns\")),\" \",mdx(\"inlineCode\",{parentName:\"li\"},'(string: \"\")'),\" \",mdx(EnterpriseAlert,{inline:!0,mdxType:\"EnterpriseAlert\"}),` - Specifies the namespace of the target service.\nYou can also `,mdx(\"a\",e({parentName:\"li\"},{href:\"#methods-to-specify-namespace\"}),\"specify the namespace through other methods\"),\".\")),mdx(\"h3\",e({},{id:\"json-request-body-schema\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#json-request-body-schema\",\"aria-label\":\"json request body schema permalink\"}),\"\\xBB\"),\"JSON Request Body Schema\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"target\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#target\",\"aria-label\":\"target permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Target\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string: <required>)\"),` - The name of the service that is being\nrequested.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"clientcerturi\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#clientcerturi\",\"aria-label\":\"clientcerturi permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ClientCertURI\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string: <required>)\"),` - The unique identifier for the\nrequesting client. This is currently the URI SAN from the TLS client\ncertificate.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"clientcertserial\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#clientcertserial\",\"aria-label\":\"clientcertserial permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ClientCertSerial\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string: <required>)\"),` - The colon-hex-encoded serial\nnumber for the requesting client cert.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"namespace\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#namespace\",\"aria-label\":\"namespace permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Namespace\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},'(string: \"\")'),\" \",mdx(EnterpriseAlert,{inline:!0,mdxType:\"EnterpriseAlert\"}),` - Specifies the namespace of\nthe target service. This field takes precedence over the `,mdx(\"inlineCode\",{parentName:\"p\"},\"ns\"),` query parameter,\none of several `,mdx(\"a\",e({parentName:\"p\"},{href:\"#methods-to-specify-namespace\"}),\"other methods to specify the namespace\"),\".\"))),mdx(\"h3\",e({},{id:\"sample-payload\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-payload\",\"aria-label\":\"sample payload permalink\"}),\"\\xBB\"),\"Sample Payload\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Target\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"db\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ClientCertURI\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"spiffe://dc1-7e567ac2-551d-463f-8497-f78972856fc1.consul/ns/default/dc/dc1/svc/web\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ClientCertSerial\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"04:00:00:00:00:01:15:4b:5a:c3:94\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h3\",e({},{id:\"sample-request\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-request\",\"aria-label\":\"sample request permalink\"}),\"\\xBB\"),\"Sample Request\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"   --request POST \",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"   --data @payload.json \",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"    http://127.0.0.1:8500/v1/agent/connect/authorize\")),`\n`)),mdx(\"h3\",e({},{id:\"sample-response\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-response\",\"aria-label\":\"sample response permalink\"}),\"\\xBB\"),\"Sample Response\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Authorized\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Reason\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Matched intention: web => db (allow)\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"certificate-authority-ca-roots\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#certificate-authority-ca-roots\",\"aria-label\":\"certificate authority ca roots permalink\"}),\"\\xBB\"),\"Certificate Authority (CA) Roots\"),mdx(\"p\",null,`This endpoint returns the trusted certificate authority (CA) root certificates.\nThis is used by `,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect/proxies\"}),\"proxies\"),` or\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/docs/connect/native\"}),\"native integrations\"),` to verify served client\nor server certificates are valid.`),mdx(\"p\",null,\"This is equivalent to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/connect\"}),\"non-Agent service mesh endpoint\"),`,\nbut the response of this request is cached locally at the agent. This allows\nfor very fast response times and for fail open behavior if the server is\nunavailable. This endpoint should be used by proxies and native integrations.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Method\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Path\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Produces\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"GET\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"/agent/connect/ca/roots\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"application/json\"))))),mdx(\"p\",null,`The table below shows this endpoint's support for\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/blocking\"}),\"blocking queries\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency\"}),\"consistency modes\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/caching\"}),\"agent caching\"),`, and\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/api-structure#authentication\"}),\"required ACLs\"),\".\"),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Blocking Queries\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Consistency Modes\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Agent Caching\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"ACL Required\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"YES\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"all\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"background refresh\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"none\"))))),mdx(\"h3\",e({},{id:\"sample-request-1\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-request-1\",\"aria-label\":\"sample request permalink\"}),\"\\xBB\"),\"Sample Request\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"   http://127.0.0.1:8500/v1/agent/connect/ca/roots\")),`\n`)),mdx(\"h3\",e({},{id:\"sample-response-1\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-response-1\",\"aria-label\":\"sample response permalink\"}),\"\\xBB\"),\"Sample Response\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ActiveRootID\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"15:bf:3a:7d:ff:ea:c1:8c:46:67:6c:db:b8:81:18:36:ad:e5:d0:c7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Roots\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ID\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"15:bf:3a:7d:ff:ea:c1:8c:46:67:6c:db:b8:81:18:36:ad:e5:d0:c7\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Name\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Consul CA Root Cert\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"SerialNumber\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"7\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"SigningKeyID\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"1f:91:ca:41:8f:ac:67:bf:59:c2:fa:4e:75:5c:d8:f0:55:de:be:75:b8:33:31:d5:24:b0:04:b3:e8:97:5b:7e\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ExternalTrustDomain\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"a1499528-fbf6-df7b-05e5-ae81e1873fc4\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"NotBefore\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2018-05-21T16:33:28Z\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"NotAfter\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2028-05-18T16:33:28Z\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"RootCert\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"-----BEGIN CERTIFICATE-----\\\\nMIICmDCCAj6gAwIBAgIBBzAKBggqhkjOPQQDAjAWMRQwEgYDVQQDEwtDb25zdWwg\\\\nQ0EgNzAeFw0xODA1MjExNjMzMjhaFw0yODA1MTgxNjMzMjhaMBYxFDASBgNVBAMT\\\\nC0NvbnN1bCBDQSA3MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAER0qlxjnRcMEr\\\\niSGlH7G7dYU7lzBEmLUSMZkyBbClmyV8+e8WANemjn+PLnCr40If9cmpr7RnC9Qk\\\\nGTaLnLiF16OCAXswggF3MA4GA1UdDwEB/wQEAwIBhjAPBgNVHRMBAf8EBTADAQH/\\\\nMGgGA1UdDgRhBF8xZjo5MTpjYTo0MTo4ZjphYzo2NzpiZjo1OTpjMjpmYTo0ZTo3\\\\nNTo1YzpkODpmMDo1NTpkZTpiZTo3NTpiODozMzozMTpkNToyNDpiMDowNDpiMzpl\\\\nODo5Nzo1Yjo3ZTBqBgNVHSMEYzBhgF8xZjo5MTpjYTo0MTo4ZjphYzo2NzpiZjo1\\\\nOTpjMjpmYTo0ZTo3NTo1YzpkODpmMDo1NTpkZTpiZTo3NTpiODozMzozMTpkNToy\\\\nNDpiMDowNDpiMzplODo5Nzo1Yjo3ZTA/BgNVHREEODA2hjRzcGlmZmU6Ly8xMjRk\\\\nZjVhMC05ODIwLTc2YzMtOWFhOS02ZjYyMTY0YmExYzIuY29uc3VsMD0GA1UdHgEB\\\\n/wQzMDGgLzAtgisxMjRkZjVhMC05ODIwLTc2YzMtOWFhOS02ZjYyMTY0YmExYzIu\\\\nY29uc3VsMAoGCCqGSM49BAMCA0gAMEUCIQDzkkI7R+0U12a+zq2EQhP/n2mHmta+\\\\nfs2hBxWIELGwTAIgLdO7RRw+z9nnxCIA6kNl//mIQb+PGItespiHZKAz74Q=\\\\n-----END CERTIFICATE-----\\\\n\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"IntermediateCerts\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token null keyword\"}),\"null\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Active\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"PrivateKeyType\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ec\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"PrivateKeyBits\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"256\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"CreateIndex\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"8\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ModifyIndex\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"8\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",e({},{id:\"service-leaf-certificate\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#service-leaf-certificate\",\"aria-label\":\"service leaf certificate permalink\"}),\"\\xBB\"),\"Service Leaf Certificate\"),mdx(\"p\",null,`This endpoint returns the leaf certificate representing a single service.\nThis certificate is used as a server certificate for accepting inbound\nconnections and is also used as the client certificate for establishing\noutbound connections to other services.`),mdx(\"p\",null,`The agent generates a CSR locally and calls the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/connect/ca\"}),\"CA sign API\"),` to sign it. The resulting certificate\nis cached and returned by this API until it is near expiry or the root\ncertificates change.`),mdx(\"p\",null,`Non blocking queries to this endpoint will always check that the leaf certificate is not expired\nand that the root certificates have not changed. Otherwise, a new leaf certificate is generated.`),mdx(\"p\",null,`This API supports blocking queries. The blocking query will block until\na new certificate is necessary (because the existing certificate will expire, is expired,\nor the root certificate is being rotated), or until the query timeout is reached. The current\nquery timeout is set to 10 minutes. This blocking behavior allows clients to\nwait for certificate rotations.`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Method\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Path\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Produces\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"GET\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"/agent/connect/ca/leaf/:service\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"application/json\"))))),mdx(\"p\",null,`The table below shows this endpoint's support for\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/blocking\"}),\"blocking queries\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/consistency\"}),\"consistency modes\"),`,\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/features/caching\"}),\"agent caching\"),`, and\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/consul/api-docs/api-structure#authentication\"}),\"required ACLs\"),\".\"),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Blocking Queries\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Consistency Modes\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Agent Caching\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"ACL Required\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"YES\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"all\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"background refresh\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"service:write\"))))),mdx(\"h3\",e({},{id:\"path-parameters\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#path-parameters\",\"aria-label\":\"path parameters permalink\"}),\"\\xBB\"),\"Path Parameters\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"service\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#service\",\"aria-label\":\"service permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"service\")),\" \",mdx(\"inlineCode\",{parentName:\"li\"},\"(string: <required>)\"),` - The name of the service for the leaf certificate.\nThe service does not need to exist in the catalog, but the proper ACL permissions must be available.`)),mdx(\"h3\",e({},{id:\"query-parameters-1\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#query-parameters-1\",\"aria-label\":\"query parameters permalink\"}),\"\\xBB\"),\"Query Parameters\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"ns-1\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#ns-1\",\"aria-label\":\"ns permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ns\")),\" \",mdx(\"inlineCode\",{parentName:\"li\"},'(string: \"\")'),\" \",mdx(EnterpriseAlert,{inline:!0,mdxType:\"EnterpriseAlert\"}),` - Specifies the namespace of the leaf certificate you request.\nYou can also `,mdx(\"a\",e({parentName:\"li\"},{href:\"#methods-to-specify-namespace\"}),\"specify the namespace through other methods\"),\".\")),mdx(\"h3\",e({},{id:\"sample-request-2\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-request-2\",\"aria-label\":\"sample request permalink\"}),\"\\xBB\"),\"Sample Request\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"   http://127.0.0.1:8500/v1/agent/connect/ca/leaf/web\")),`\n`)),mdx(\"h3\",e({},{id:\"sample-response-2\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#sample-response-2\",\"aria-label\":\"sample response permalink\"}),\"\\xBB\"),\"Sample Response\"),mdx(\"pre\",e({},{className:\"language-json\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"SerialNumber\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"08\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"CertPEM\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"-----BEGIN CERTIFICATE-----\\\\nMIIChjCCAi2gAwIBAgIBCDAKBggqhkjOPQQDAjAWMRQwEgYDVQQDEwtDb25zdWwg\\\\nQ0EgNzAeFw0xODA1MjExNjMzMjhaFw0xODA1MjQxNjMzMjhaMA4xDDAKBgNVBAMT\\\\nA3dlYjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJdLqRKd1SRycFOFceMHOBZK\\\\nQW8HHO8jZ5C8dRswD+IwTd/otJPiaPrVzGOAi4MsaEUgDMemvN1jiywHt3II08mj\\\\nggFyMIIBbjAOBgNVHQ8BAf8EBAMCA7gwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsG\\\\nAQUFBwMBMAwGA1UdEwEB/wQCMAAwaAYDVR0OBGEEXzFmOjkxOmNhOjQxOjhmOmFj\\\\nOjY3OmJmOjU5OmMyOmZhOjRlOjc1OjVjOmQ4OmYwOjU1OmRlOmJlOjc1OmI4OjMz\\\\nOjMxOmQ1OjI0OmIwOjA0OmIzOmU4Ojk3OjViOjdlMGoGA1UdIwRjMGGAXzFmOjkx\\\\nOmNhOjQxOjhmOmFjOjY3OmJmOjU5OmMyOmZhOjRlOjc1OjVjOmQ4OmYwOjU1OmRl\\\\nOmJlOjc1OmI4OjMzOjMxOmQ1OjI0OmIwOjA0OmIzOmU4Ojk3OjViOjdlMFkGA1Ud\\\\nEQRSMFCGTnNwaWZmZTovLzExMTExMTExLTIyMjItMzMzMy00NDQ0LTU1NTU1NTU1\\\\nNTU1NS5jb25zdWwvbnMvZGVmYXVsdC9kYy9kYzEvc3ZjL3dlYjAKBggqhkjOPQQD\\\\nAgNHADBEAiBS8kH3UERhBPHM/CQV/jXKLr0kReLqCdq1jZxc8Aq7hQIgFIus/ZX0\\\\nOM/X3Yc1xb/qJiiEVzXcaz3oVFULOzrNAwk=\\\\n-----END CERTIFICATE-----\\\\n\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"PrivateKeyPEM\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"-----BEGIN EC PRIVATE KEY-----\\\\nMHcCAQEEIAOGglbwY8HdD3LFX6Bc94co2pzeFTto8ebWoML5E+QfoAoGCCqGSM49\\\\nAwEHoUQDQgAEl0upEp3VJHJwU4Vx4wc4FkpBbwcc7yNnkLx1GzAP4jBN3+i0k+Jo\\\\n+tXMY4CLgyxoRSAMx6a83WOLLAe3cgjTyQ==\\\\n-----END EC PRIVATE KEY-----\\\\n\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Service\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"web\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ServiceURI\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"spiffe://11111111-2222-3333-4444-555555555555.consul/ns/default/dc/dc1/svc/web\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ValidAfter\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2018-05-21T16:33:28Z\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ValidBefore\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"2018-05-24T16:33:28Z\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"Namespace\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"default\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"CreateIndex\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"5\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),'\"ModifyIndex\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"5\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"serialnumber\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#serialnumber\",\"aria-label\":\"serialnumber permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"SerialNumber\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"string\"),` - Monotonically increasing 64-bit serial number\nrepresenting all certificates issued by this Consul cluster.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"certpem\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#certpem\",\"aria-label\":\"certpem permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"CertPEM\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),\" - The PEM-encoded certificate.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"privatekeypem\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#privatekeypem\",\"aria-label\":\"privatekeypem permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"PrivateKeyPEM\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),\" - The PEM-encoded private key for this certificate.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"service-1\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#service-1\",\"aria-label\":\"service permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Service\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),\" - The name of the service that this certificate identifies.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"serviceuri\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#serviceuri\",\"aria-label\":\"serviceuri permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ServiceURI\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),\" - The URI SAN for this service.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"validafter\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#validafter\",\"aria-label\":\"validafter permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ValidAfter\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),` - The time after which the certificate is valid.\nUsed with `,mdx(\"inlineCode\",{parentName:\"p\"},\"ValidBefore\"),\" this can determine the validity period of the certificate.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{id:\"validbefore\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#validbefore\",\"aria-label\":\"validbefore permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ValidBefore\")),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"(string)\"),` - The time before which the certificate is valid.\nUsed with `,mdx(\"inlineCode\",{parentName:\"p\"},\"ValidAfter\"),\" this can determine the validity period of the certificate.\"))),mdx(\"h2\",e({},{id:\"methods-to-specify-namespace\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#methods-to-specify-namespace\",\"aria-label\":\"methods to specify namespace permalink\"}),\"\\xBB\"),\"Methods to specify namespace \",mdx(EnterpriseAlert,{inline:!0,mdxType:\"EnterpriseAlert\"})),mdx(\"p\",null,`Local agent service mesh endpoints\nsupport several methods for specifying the namespace of resources\nwith the following order of precedence:`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",e({parentName:\"li\"},{id:\"namespace-1\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#namespace-1\",\"aria-label\":\"namespace permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"Namespace\")),` field of the JSON request body -\nonly applies to the `,mdx(\"a\",e({parentName:\"li\"},{href:\"#register-check\"}),\"register\"),\" endpoint\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",e({parentName:\"li\"},{id:\"ns-2\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#ns-2\",\"aria-label\":\"ns permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ns\")),\" query parameter\"),mdx(\"li\",{parentName:\"ol\"},mdx(\"a\",e({parentName:\"li\"},{id:\"x-consul-namespace\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",e({parentName:\"li\"},{href:\"#x-consul-namespace\",\"aria-label\":\"x consul namespace permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"X-Consul-Namespace\")),\" request header\"),mdx(\"li\",{parentName:\"ol\"},\"Namespace is inherited from the namespace of the request's ACL token (if any)\"),mdx(\"li\",{parentName:\"ol\"},\"The \",mdx(\"inlineCode\",{parentName:\"li\"},\"default\"),\" namespace\")))}MDXContent.isMDXComponent=!0;\n","scope":{"version":"latest"}},"product":{"name":"Consul","slug":"consul","algoliaConfig":{"indexName":"product_CONSUL","searchOnlyApiKey":"fbd5dc1f0078d41509fcc560386fd534"},"analyticsConfig":{"includedDomains":"consul.io www.consul.io","segmentWriteKey":"IyzLrqXkox5KJ8XL4fo8vTYNGfiKlTCm"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Consul by HashiCorp","description":"Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.","image":"https://www.consulproject.io/consul-public/img/og-image.png","icon":[{"href":"/consul-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.11.3","subnavItems":[],"basePaths":["docs","api-docs","commands","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"api","name":"API","path":"api-docs"},{"iconName":"terminal-screen","name":"CLI","path":"commands"}],"currentRootDocsPath":{"iconName":"api","name":"API","path":"api-docs"}},"projectName":null,"versions":null},"__N_SSG":true}